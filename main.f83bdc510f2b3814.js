"use strict";var QR=Object.defineProperty,XR=Object.defineProperties,JR=Object.getOwnPropertyDescriptors,jS=Object.getOwnPropertySymbols,eM=Object.prototype.hasOwnProperty,tM=Object.prototype.propertyIsEnumerable,$S=(et,Ee,L)=>Ee in et?QR(et,Ee,{enumerable:!0,configurable:!0,writable:!0,value:L}):et[Ee]=L,HS=(et,Ee)=>{for(var L in Ee||(Ee={}))eM.call(Ee,L)&&$S(et,L,Ee[L]);if(jS)for(var L of jS(Ee))tM.call(Ee,L)&&$S(et,L,Ee[L]);return et},GS=(et,Ee)=>XR(et,JR(Ee));(self.webpackChunktest_packages=self.webpackChunktest_packages||[]).push([[179],{2011:(et,Ee,L)=>{L.d(Ee,{Dh:()=>ie,GT:()=>ce,cc:()=>be,hO:()=>je,on:()=>H,pX:()=>re,xv:()=>fe});var _=L(5e3),B=L(9260),N=L(2122);et=L.hmd(et);const ne=["ngOnDestroy"],re=(ye,Ge,ze,Ce={})=>new Proxy(ye,{get:(Te,ve)=>ze.runOutsideAngular(()=>{var $e;if(ye[ve])return(null===($e=null==Ce?void 0:Ce.spy)||void 0===$e?void 0:$e.get)&&Ce.spy.get(ve,ye[ve]),ye[ve];if(ne.indexOf(ve)>-1)return()=>{};const X=Ge.toPromise().then(ae=>{const ge=ae&&ae[ve];return"function"==typeof ge?ge.bind(ae):ge&&ge.then?ge.then(qe=>ze.run(()=>qe)):ze.run(()=>ge)});return new Proxy(()=>{},{get:(ae,ge)=>X[ge],apply:(ae,ge,qe)=>X.then(it=>{var st;const Pt=it&&it(...qe);return(null===(st=null==Ce?void 0:Ce.spy)||void 0===st?void 0:st.apply)&&Ce.spy.apply(ve,qe,Pt),Pt})})})}),ce=(ye,Ge)=>{Ge.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(Ce=>{Object.defineProperty(ye.prototype,Ce,Object.getOwnPropertyDescriptor(ze.prototype||ze,Ce))})})};class ue{constructor(Ge){return Ge}}const ie=new _.OlP("angularfire2.app.options"),fe=new _.OlP("angularfire2.app.name");function H(ye,Ge,ze){const Te="object"==typeof ze&&ze||{};Te.name=Te.name||"string"==typeof ze&&ze||"[DEFAULT]";const $e=B.Z.apps.filter(X=>X&&X.name===Te.name)[0]||Ge.runOutsideAngular(()=>B.Z.initializeApp(ye,Te));try{JSON.stringify(ye)!==JSON.stringify($e.options)&&G("error",`${$e.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(X){}return new ue($e)}const G=(ye,...Ge)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ye](...Ge)},ee={provide:ue,useFactory:H,deps:[ie,_.R0b,[new _.FiY,fe]]};let je=(()=>{class ye{constructor(ze){B.Z.registerVersion("angularfire",N.q4.full,"core"),B.Z.registerVersion("angularfire",N.q4.full,"app-compat"),B.Z.registerVersion("angular",_.q4F.full,ze.toString())}static initializeApp(ze,Ce){return{ngModule:ye,providers:[{provide:ie,useValue:ze},{provide:fe,useValue:Ce}]}}}return ye.\u0275fac=function(ze){return new(ze||ye)(_.LFG(_.Lbi))},ye.\u0275mod=_.oAB({type:ye}),ye.\u0275inj=_.cJS({providers:[ee]}),ye})();function be(ye,Ge,ze,Ce,Te){const[,ve,$e]=globalThis.\u0275AngularfireInstanceCache.find(X=>X[0]===ye)||[];if(ve)return function Fe(ye,Ge){try{return ye.toString()===Ge.toString()}catch(ze){return ye===Ge}}(Te,$e)||(pe("error",`${Ge} was already initialized on the ${ze} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Te,was:$e})),ve;{const X=Ce();return globalThis.\u0275AngularfireInstanceCache.push([ye,X,Te]),X}}const Ue=!!et.hot,pe=(ye,...Ge)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ye](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(et,Ee,L)=>{L.d(Ee,{q4:()=>ah,iC:()=>su,HU:()=>wl,vb:()=>nu,JM:()=>tu});var _=L(5e3),B=L(259),N=L(5861),ne=L(9681),re=L(2090),ce=L(4859),ue=L(1877),ie=L(8766);const fe="@firebase/installations",H="0.6.4",ee=`w:${H}`,je="FIS_v2",Ge=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Ce({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Te(D){return{token:D.token,requestStatus:2,expiresIn:it(D.expiresIn),creationTime:Date.now()}}function ve(D,T){return $e.apply(this,arguments)}function $e(){return($e=(0,N.Z)(function*(D,T){const V=(yield T.json()).error;return Ge.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function X({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ae(D,{refreshToken:T}){const x=X(D);return x.append("Authorization",function st(D){return`${je} ${D}`}(T)),x}function ge(D){return qe.apply(this,arguments)}function qe(){return(qe=(0,N.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function it(D){return Number(D.replace("s","000"))}function Pt(D,T){return W.apply(this,arguments)}function W(){return(W=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:x}){const V=Ce(D),K=X(D),te=T.getImmediate({optional:!0});if(te){const dt=yield te.getHeartbeatsHeader();dt&&K.append("x-firebase-client",dt)}const tt={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:je,appId:D.appId,sdkVersion:ee})},lt=yield ge(()=>fetch(V,tt));if(lt.ok){const dt=yield lt.json();return{fid:dt.fid||x,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Te(dt.authToken)}}throw yield ve("Create Installation",lt)})).apply(this,arguments)}function le(D){return new Promise(T=>{setTimeout(T,D)})}const Me=/^[cdef][\w-]{21}$/;function we(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function at(D){return function _e(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Me.test(x)?x:""}catch(D){return""}}function Mt(D){return`${D.appName}!${D.appId}`}const mn=new Map;function Xe(D,T){const x=Mt(D);Rt(x,T),function Ln(D,T){const x=function on(){return!En&&"BroadcastChannel"in self&&(En=new BroadcastChannel("[Firebase] FID Change"),En.onmessage=D=>{Rt(D.data.key,D.data.fid)}),En}();x&&x.postMessage({key:D,fid:T}),function dr(){0===mn.size&&En&&(En.close(),En=null)}()}(x,T)}function Rt(D,T){const x=mn.get(D);if(x)for(const V of x)V(T)}let En=null;const Un="firebase-installations-store";let Qi=null;function yt(){return Qi||(Qi=(0,ie.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Un)}})),Qi}function jr(D,T){return wn.apply(this,arguments)}function wn(){return(wn=(0,N.Z)(function*(D,T){const x=Mt(D),K=(yield yt()).transaction(Un,"readwrite"),te=K.objectStore(Un),xe=yield te.get(x);return yield te.put(T,x),yield K.done,(!xe||xe.fid!==T.fid)&&Xe(D,T.fid),T})).apply(this,arguments)}function an(D){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,N.Z)(function*(D){const T=Mt(D),V=(yield yt()).transaction(Un,"readwrite");yield V.objectStore(Un).delete(T),yield V.done})).apply(this,arguments)}function Mr(D,T){return Or.apply(this,arguments)}function Or(){return(Or=(0,N.Z)(function*(D,T){const x=Mt(D),K=(yield yt()).transaction(Un,"readwrite"),te=K.objectStore(Un),xe=yield te.get(x),tt=T(xe);return void 0===tt?yield te.delete(x):yield te.put(tt,x),yield K.done,tt&&(!xe||xe.fid!==tt.fid)&&Xe(D,tt.fid),tt})).apply(this,arguments)}function bn(D){return fr.apply(this,arguments)}function fr(){return(fr=(0,N.Z)(function*(D){let T;const x=yield Mr(D.appConfig,V=>{const K=Xi(V),te=Zt(D,K);return T=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function Xi(D){return Pi(D||{fid:we(),registrationStatus:0})}function Zt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ge.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function ft(D,T){return nt.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:$r(D)}:{installationEntry:T}}function nt(){return(nt=(0,N.Z)(function*(D,T){try{const x=yield Pt(D,T);return jr(D.appConfig,x)}catch(x){throw ze(x)&&409===x.customData.serverCode?yield an(D.appConfig):yield jr(D.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function $r(D){return Di.apply(this,arguments)}function Di(){return(Di=(0,N.Z)(function*(D){let T=yield Gt(D.appConfig);for(;1===T.registrationStatus;)yield le(100),T=yield Gt(D.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield bn(D);return V||x}return T})).apply(this,arguments)}function Gt(D){return Mr(D,T=>{if(!T)throw Ge.create("installation-not-found");return Pi(T)})}function Pi(D){return function Hn(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function yn(D,T){return pt.apply(this,arguments)}function pt(){return(pt=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:T},x){const V=Qr(D,x),K=ae(D,x),te=T.getImmediate({optional:!0});if(te){const dt=yield te.getHeartbeatsHeader();dt&&K.append("x-firebase-client",dt)}const tt={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:ee,appId:D.appId}})},lt=yield ge(()=>fetch(V,tt));if(lt.ok)return Te(yield lt.json());throw yield ve("Generate Auth Token",lt)})).apply(this,arguments)}function Qr(D,{fid:T}){return`${Ce(D)}/${T}/authTokens:generate`}function Jt(D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,N.Z)(function*(D,T=!1){let x;const V=yield Mr(D.appConfig,te=>{if(!un(te))throw Ge.create("not-registered");const xe=te.authToken;if(!T&&kn(xe))return te;if(1===xe.requestStatus)return x=Ze(D,T),te;{if(!navigator.onLine)throw Ge.create("app-offline");const tt=j(te);return x=Dt(D,tt),tt}});return x?yield x:V.authToken})).apply(this,arguments)}function Ze(D,T){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,N.Z)(function*(D,T){let x=yield We(D.appConfig);for(;1===x.authToken.requestStatus;)yield le(100),x=yield We(D.appConfig);const V=x.authToken;return 0===V.requestStatus?Jt(D,T):V})).apply(this,arguments)}function We(D){return Mr(D,T=>{if(!un(T))throw Ge.create("not-registered");return function P(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Dt(D,T){return At.apply(this,arguments)}function At(){return(At=(0,N.Z)(function*(D,T){try{const x=yield yn(D,T),V=Object.assign(Object.assign({},T),{authToken:x});return yield jr(D.appConfig,V),x}catch(x){if(!ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield jr(D.appConfig,V)}else yield an(D.appConfig);throw x}})).apply(this,arguments)}function un(D){return void 0!==D&&2===D.registrationStatus}function kn(D){return 2===D.requestStatus&&!function $(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function j(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function M(){return(M=(0,N.Z)(function*(D){const T=D,{installationEntry:x,registrationPromise:V}=yield bn(T);return V?V.catch(console.error):Jt(T).catch(console.error),x.fid})).apply(this,arguments)}function De(){return(De=(0,N.Z)(function*(D,T=!1){const x=D;return yield He(x),(yield Jt(x,T)).token})).apply(this,arguments)}function He(D){return vt.apply(this,arguments)}function vt(){return(vt=(0,N.Z)(function*(D){const{registrationPromise:T}=yield bn(D);T&&(yield T)})).apply(this,arguments)}function ea(D){return Ge.create("missing-app-config-values",{valueName:D})}const Xr="installations",zt=D=>{const T=D.getProvider("app").getImmediate(),x=function gr(D){if(!D||!D.options)throw ea("App Configuration");if(!D.name)throw ea("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!D.options[x])throw ea(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ne._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},vn=D=>{const T=D.getProvider("app").getImmediate(),x=(0,ne._getProvider)(T,Xr).getImmediate();return{getId:()=>function F(D){return M.apply(this,arguments)}(x),getToken:K=>function Q(D){return De.apply(this,arguments)}(x,K)}};(function Hr(){(0,ne._registerComponent)(new ce.wA(Xr,zt,"PUBLIC")),(0,ne._registerComponent)(new ce.wA("installations-internal",vn,"PRIVATE"))})(),(0,ne.registerVersion)(fe,H),(0,ne.registerVersion)(fe,H,"esm2017");const Ji="@firebase/remote-config",Vn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wc{constructor(T,x,V,K){this.client=T,this.storage=x,this.storageCache=V,this.logger=K}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,K=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${K}.`),K}fetch(T){var x=this;return(0,N.Z)(function*(){const[V,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(T.cacheMaxAgeMillis,V))return K;T.eTag=K&&K.eTag;const te=yield x.client.fetch(T),xe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&xe.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(xe),te})()}}function Ua(D=navigator){return D.languages&&D.languages[0]||D.language}class Yn{constructor(T,x,V,K,te,xe){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=V,this.projectId=K,this.apiKey=te,this.appId=xe}fetch(T){var x=this;return(0,N.Z)(function*(){const[V,K]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},lt={sdk_version:x.sdkVersion,app_instance_id:V,app_instance_id_token:K,app_id:x.appId,language_code:Ua()},dt={method:"POST",headers:tt,body:JSON.stringify(lt)},Ut=fetch(xe,dt),Et=new Promise((Tr,xi)=>{T.signal.addEventListener(()=>{const Dl=new Error("The operation was aborted.");Dl.name="AbortError",xi(Dl)})});let Lr;try{yield Promise.race([Ut,Et]),Lr=yield Ut}catch(Tr){let xi="fetch-client-network";throw"AbortError"===(null==Tr?void 0:Tr.name)&&(xi="fetch-timeout"),Vn.create(xi,{originalErrorMessage:null==Tr?void 0:Tr.message})}let Mn=Lr.status;const _a=Lr.headers.get("ETag")||void 0;let Lo,gi;if(200===Lr.status){let Tr;try{Tr=yield Lr.json()}catch(xi){throw Vn.create("fetch-client-parse",{originalErrorMessage:null==xi?void 0:xi.message})}Lo=Tr.entries,gi=Tr.state}if("INSTANCE_STATE_UNSPECIFIED"===gi?Mn=500:"NO_CHANGE"===gi?Mn=304:("NO_TEMPLATE"===gi||"EMPTY_CONFIG"===gi)&&(Lo={}),304!==Mn&&200!==Mn)throw Vn.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:_a,config:Lo}})()}}class ts{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,N.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:V}){var K=this;return(0,N.Z)(function*(){yield function Kc(D,T){return new Promise((x,V)=>{const K=Math.max(T-Date.now(),0),te=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(te),V(Vn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const te=yield K.client.fetch(T);return yield K.storage.deleteThrottleMetadata(),te}catch(te){if(!function Gf(D){if(!(D instanceof re.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(te))throw te;const xe={throttleEndTimeMillis:Date.now()+(0,re.$s)(V),backoffCount:V+1};return yield K.storage.setThrottleMetadata(xe),K.attemptFetch(T,xe)}})()}}class qf{constructor(T,x,V,K,te){this.app=T,this._client=x,this._storageCache=V,this._storage=K,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ta(D,T){const x=D.target.error||void 0;return Vn.create(T,{originalErrorMessage:x&&(null==x?void 0:x.message)})}const wo="app_namespace_store";class Qc{constructor(T,x,V,K=function Kf(){return new Promise((D,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=V=>{T(ta(V,"storage-open"))},x.onsuccess=V=>{D(V.target.result)},x.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(wo,{keyPath:"compositeKey"})}}catch(x){T(Vn.create("storage-open",{originalErrorMessage:null==x?void 0:x.message}))}})}()){this.appId=T,this.appName=x,this.namespace=V,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,N.Z)(function*(){const V=yield x.openDbPromise;return new Promise((K,te)=>{const tt=V.transaction([wo],"readonly").objectStore(wo),lt=x.createCompositeKey(T);try{const dt=tt.get(lt);dt.onerror=Ut=>{te(ta(Ut,"storage-get"))},dt.onsuccess=Ut=>{const Et=Ut.target.result;K(Et?Et.value:void 0)}}catch(dt){te(Vn.create("storage-get",{originalErrorMessage:null==dt?void 0:dt.message}))}})})()}set(T,x){var V=this;return(0,N.Z)(function*(){const K=yield V.openDbPromise;return new Promise((te,xe)=>{const lt=K.transaction([wo],"readwrite").objectStore(wo),dt=V.createCompositeKey(T);try{const Ut=lt.put({compositeKey:dt,value:x});Ut.onerror=Et=>{xe(ta(Et,"storage-set"))},Ut.onsuccess=()=>{te()}}catch(Ut){xe(Vn.create("storage-set",{originalErrorMessage:null==Ut?void 0:Ut.message}))}})})()}delete(T){var x=this;return(0,N.Z)(function*(){const V=yield x.openDbPromise;return new Promise((K,te)=>{const tt=V.transaction([wo],"readwrite").objectStore(wo),lt=x.createCompositeKey(T);try{const dt=tt.delete(lt);dt.onerror=Ut=>{te(ta(Ut,"storage-delete"))},dt.onsuccess=()=>{K()}}catch(dt){te(Vn.create("storage-delete",{originalErrorMessage:null==dt?void 0:dt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Io{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const x=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),K=T.storage.getActiveConfig(),te=yield x;te&&(T.lastFetchStatus=te);const xe=yield V;xe&&(T.lastSuccessfulFetchTimestampMillis=xe);const tt=yield K;tt&&(T.activeConfig=tt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Am(){return na.apply(this,arguments)}function na(){return(na=(0,N.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Zf(){(0,ne._registerComponent)(new ce.wA("remote-config",function D(T,{instanceIdentifier:x}){const V=T.getProvider("app").getImmediate(),K=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vn.create("registration-window");if(!(0,re.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:te,apiKey:xe,appId:tt}=V.options;if(!te)throw Vn.create("registration-project-id");if(!xe)throw Vn.create("registration-api-key");if(!tt)throw Vn.create("registration-app-id");const lt=new Qc(tt,V.name,x=x||"firebase"),dt=new Io(lt),Ut=new ue.Yd(Ji);Ut.logLevel=ue.in.ERROR;const Et=new Yn(K,ne.SDK_VERSION,x,te,xe,tt),Lr=new ts(Et,lt),Mn=new Wc(Lr,lt,dt,Ut),_a=new qf(V,Mn,dt,lt,Ut);return function pn(D){const T=(0,re.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(_a),_a},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Ji,"0.4.4"),(0,ne.registerVersion)(Ji,"0.4.4","esm2017")}();const bs="/firebase-messaging-sw.js",di="/firebase-cloud-messaging-push-scope",Do="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ia="google.c.a.c_id",Kd="google.c.a.c_l",Yf="google.c.a.ts",Ts="google.c.a.e";var rs=(()=>{return(D=rs||(rs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",rs;var D})();function Ti(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jc(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),K=new Uint8Array(V.length);for(let te=0;te<V.length;++te)K[te]=V.charCodeAt(te);return K}const Nr="fcm_token_details_db",el="fcm_token_object_Store";function tl(D){return Va.apply(this,arguments)}function Va(){return Va=(0,N.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Nr))return null;let T=null;return(yield(0,ie.X3)(Nr,5,{upgrade:(V=(0,N.Z)(function*(K,te,xe,tt){var lt;if(te<2||!K.objectStoreNames.contains(el))return;const dt=tt.objectStore(el),Ut=yield dt.index("fcmSenderId").get(D);if(yield dt.clear(),Ut)if(2===te){const Et=Ut;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;T={token:Et.fcmToken,createTime:null!==(lt=Et.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Ti(Et.vapidKey)}}}else if(3===te){const Et=Ut;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ti(Et.auth),p256dh:Ti(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ti(Et.vapidKey)}}}else if(4===te){const Et=Ut;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ti(Et.auth),p256dh:Ti(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ti(Et.vapidKey)}}}}),function(te,xe,tt,lt){return V.apply(this,arguments)})})).close(),yield(0,ie.Lj)(Nr),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),Ba(T)?T:null;var V}),Va.apply(this,arguments)}function Ba(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const is="firebase-messaging-store";let Pu=null;function In(){return Pu||(Pu=(0,ie.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(is)}})),Pu}function sa(D){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,N.Z)(function*(D){const T=nr(D),V=yield(yield In()).transaction(is).objectStore(is).get(T);if(V)return V;{const K=yield tl(D.appConfig.senderId);if(K)return yield gn(D,K),K}})).apply(this,arguments)}function gn(D,T){return $a.apply(this,arguments)}function $a(){return($a=(0,N.Z)(function*(D,T){const x=nr(D),K=(yield In()).transaction(is,"readwrite");return yield K.objectStore(is).put(T,x),yield K.done,T})).apply(this,arguments)}function oa(D){return zs.apply(this,arguments)}function zs(){return(zs=(0,N.Z)(function*(D){const T=nr(D),V=(yield In()).transaction(is,"readwrite");yield V.objectStore(is).delete(T),yield V.done})).apply(this,arguments)}function nr({appConfig:D}){return D.appId}const Bn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ss(D,T){return mr.apply(this,arguments)}function mr(){return(mr=(0,N.Z)(function*(D,T){const x=yield As(D),V=qs(T),K={method:"POST",headers:x,body:JSON.stringify(V)};let te;try{te=yield(yield fetch(Ss(D.appConfig),K)).json()}catch(xe){throw Bn.create("token-subscribe-failed",{errorInfo:null==xe?void 0:xe.toString()})}if(te.error)throw Bn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw Bn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function bo(D,T){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,N.Z)(function*(D,T){const x=yield As(D),V=qs(T.subscriptionOptions),K={method:"PATCH",headers:x,body:JSON.stringify(V)};let te;try{te=yield(yield fetch(`${Ss(D.appConfig)}/${T.token}`,K)).json()}catch(xe){throw Bn.create("token-update-failed",{errorInfo:null==xe?void 0:xe.toString()})}if(te.error)throw Bn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw Bn.create("token-update-no-token");return te.token})).apply(this,arguments)}function ku(D,T){return ei.apply(this,arguments)}function ei(){return(ei=(0,N.Z)(function*(D,T){const V={method:"DELETE",headers:yield As(D)};try{const te=yield(yield fetch(`${Ss(D.appConfig)}/${T}`,V)).json();if(te.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(K){throw Bn.create("token-unsubscribe-failed",{errorInfo:null==K?void 0:K.toString()})}})).apply(this,arguments)}function Ss({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function As(D){return wt.apply(this,arguments)}function wt(){return(wt=(0,N.Z)(function*({appConfig:D,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function qs({p256dh:D,auth:T,endpoint:x,vapidKey:V}){const K={web:{endpoint:x,auth:T,p256dh:D}};return V!==Do&&(K.web.applicationPubKey=V),K}const Ga=6048e5;function nl(D){return aa.apply(this,arguments)}function aa(){return(aa=(0,N.Z)(function*(D){const T=yield Fu(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Ti(T.getKey("auth")),p256dh:Ti(T.getKey("p256dh"))},V=yield sa(D.firebaseDependencies);if(V){if(il(V.subscriptionOptions,x))return Date.now()>=V.createTime+Ga?Zd(D,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield ku(D.firebaseDependencies,V.token)}catch(K){console.warn(K)}return Ae(D.firebaseDependencies,x)}return Ae(D.firebaseDependencies,x)})).apply(this,arguments)}function rl(D){return To.apply(this,arguments)}function To(){return(To=(0,N.Z)(function*(D){const T=yield sa(D.firebaseDependencies);T&&(yield ku(D.firebaseDependencies,T.token),yield oa(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Zd(D,T){return xs.apply(this,arguments)}function xs(){return(xs=(0,N.Z)(function*(D,T){try{const x=yield bo(D.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield gn(D.firebaseDependencies,V),x}catch(x){throw yield rl(D),x}})).apply(this,arguments)}function Ae(D,T){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,N.Z)(function*(D,T){const V={token:yield ss(D,T),createTime:Date.now(),subscriptionOptions:T};return yield gn(D,V),V.token})).apply(this,arguments)}function Fu(D,T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,N.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jc(T)})})).apply(this,arguments)}function il(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function os(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Li(D,T){if(!T.notification)return;D.notification={};const x=T.notification.title;x&&(D.notification.title=x);const V=T.notification.body;V&&(D.notification.body=V);const K=T.notification.image;K&&(D.notification.image=K);const te=T.notification.icon;te&&(D.notification.icon=te)}(T,D),function Lu(D,T){!T.data||(D.data=T.data)}(T,D),function ua(D,T){var x,V,K,te,xe;if(!T.fcmOptions&&!(null===(x=T.notification)||void 0===x?void 0:x.click_action))return;D.fcmOptions={};const tt=null!==(K=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==K?K:null===(te=T.notification)||void 0===te?void 0:te.click_action;tt&&(D.fcmOptions.link=tt);const lt=null===(xe=T.fcmOptions)||void 0===xe?void 0:xe.analytics_label;lt&&(D.fcmOptions.analyticsLabel=lt)}(T,D),T}function Yd(D){return"object"==typeof D&&!!D&&ia in D}function sl(D,T){const x=[];for(let V=0;V<D.length;V++)x.push(D.charAt(V)),V<T.length&&x.push(T.charAt(V));return x.join("")}function Ws(D){return Bn.create("missing-app-config-values",{valueName:D})}sl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yr{constructor(T,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function ol(D){if(!D||!D.options)throw Ws("App Configuration Object");if(!D.name)throw Ws("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const V of T)if(!x[V])throw Ws(V);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:K,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ui(D){return Co.apply(this,arguments)}function Co(){return(Co=(0,N.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(bs,{scope:di}),D.swRegistration.update().catch(()=>{})}catch(T){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:null==T?void 0:T.message})}})).apply(this,arguments)}function So(D,T){return ti.apply(this,arguments)}function ti(){return(ti=(0,N.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield Ui(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Qd(D,T){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,N.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Do)})).apply(this,arguments)}function ca(){return(ca=(0,N.Z)(function*(D,T){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield Qd(D,null==T?void 0:T.vapidKey),yield So(D,null==T?void 0:T.serviceWorkerRegistration),nl(D)})).apply(this,arguments)}function Uu(D,T,x){return xo.apply(this,arguments)}function xo(){return(xo=(0,N.Z)(function*(D,T,x){const V=ul(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[ia],message_name:x[Kd],message_time:x[Yf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ul(D){switch(D){case rs.NOTIFICATION_CLICKED:return"notification_open";case rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vu(){return(Vu=(0,N.Z)(function*(D,T){const x=T.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===rs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(os(x)):D.onMessageHandler.next(os(x)));const V=x.data;Yd(V)&&"1"===V[Ts]&&(yield Uu(D,x.messageType,V))})).apply(this,arguments)}const la="@firebase/messaging",Ks=D=>{const T=new yr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function cl(D,T){return Vu.apply(this,arguments)}(T,x)),T},ll=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:V=>function al(D,T){return ca.apply(this,arguments)}(T,V)}};function za(){return ni.apply(this,arguments)}function ni(){return(ni=(0,N.Z)(function*(){try{yield(0,re.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xd(){(0,ne._registerComponent)(new ce.wA("messaging",Ks,"PUBLIC")),(0,ne._registerComponent)(new ce.wA("messaging-internal",ll,"PRIVATE")),(0,ne.registerVersion)(la,"0.12.4"),(0,ne.registerVersion)(la,"0.12.4","esm2017")}();const dl="analytics",Qf="firebase_id",ha="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fa="https://www.googletagmanager.com/gtag/js",rr=new ue.Yd("@firebase/analytics");function fl(D){return Promise.all(D.map(T=>T.catch(x=>x)))}function Xf(D,T){const x=document.createElement("script");x.src=`${fa}?l=${D}&id=${T}`,x.async=!0,document.head.appendChild(x)}function Ro(D,T,x,V,K,te){return pl.apply(this,arguments)}function pl(){return(pl=(0,N.Z)(function*(D,T,x,V,K,te){const xe=V[K];try{if(xe)yield T[xe];else{const lt=(yield fl(x)).find(dt=>dt.measurementId===K);lt&&(yield T[lt.appId])}}catch(tt){rr.error(tt)}D("config",K,te)})).apply(this,arguments)}function ju(D,T,x,V,K){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,N.Z)(function*(D,T,x,V,K){try{let te=[];if(K&&K.send_to){let xe=K.send_to;Array.isArray(xe)||(xe=[xe]);const tt=yield fl(x);for(const lt of xe){const dt=tt.find(Et=>Et.measurementId===lt),Ut=dt&&T[dt.appId];if(!Ut){te=[];break}te.push(Ut)}}0===te.length&&(te=Object.values(T)),yield Promise.all(te),D("event",V,K||{})}catch(te){rr.error(te)}})).apply(this,arguments)}function Ci(D){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(fa)&&x.src.includes(D))return x;return null}const vr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),pa=new class Si{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function cs(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function qa(D){return qt.apply(this,arguments)}function qt(){return(qt=(0,N.Z)(function*(D){var T;const{appId:x,apiKey:V}=D,K={method:"GET",headers:cs(V)},te=ha.replace("{app-id}",x),xe=yield fetch(te,K);if(200!==xe.status&&304!==xe.status){let tt="";try{const lt=yield xe.json();(null===(T=lt.error)||void 0===T?void 0:T.message)&&(tt=lt.error.message)}catch(lt){}throw vr.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:tt})}return xe.json()})).apply(this,arguments)}function Gr(D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,N.Z)(function*(D,T=pa,x){const{appId:V,apiKey:K,measurementId:te}=D.options;if(!V)throw vr.create("no-app-id");if(!K){if(te)return{measurementId:te,appId:V};throw vr.create("no-api-key")}const xe=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new Wa;return setTimeout((0,N.Z)(function*(){tt.abort()}),void 0!==x?x:6e4),jt({appId:V,apiKey:K,measurementId:te},xe,tt,T)})).apply(this,arguments)}function jt(D,T,x){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:x},V,K=pa){var te;const{appId:xe,measurementId:tt}=D;try{yield th(V,T)}catch(lt){if(tt)return rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${null==lt?void 0:lt.message}]`),{appId:xe,measurementId:tt};throw lt}try{const lt=yield qa(D);return K.deleteThrottleMetadata(xe),lt}catch(lt){const dt=lt;if(!gl(dt)){if(K.deleteThrottleMetadata(xe),tt)return rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${null==dt?void 0:dt.message}]`),{appId:xe,measurementId:tt};throw lt}const Ut=503===Number(null===(te=null==dt?void 0:dt.customData)||void 0===te?void 0:te.httpStatus)?(0,re.$s)(x,K.intervalMillis,30):(0,re.$s)(x,K.intervalMillis),Et={throttleEndTimeMillis:Date.now()+Ut,backoffCount:x+1};return K.setThrottleMetadata(xe,Et),rr.debug(`Calling attemptFetch again in ${Ut} millis`),jt(D,Et,V,K)}})).apply(this,arguments)}function th(D,T){return new Promise((x,V)=>{const K=Math.max(T-Date.now(),0),te=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(te),V(vr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function gl(D){if(!(D instanceof re.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Wa{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Hu,Mo;function ir(){return(ir=(0,N.Z)(function*(D,T,x,V,K){if(K&&K.global)D("event",x,V);else{const te=yield T;D("event",x,Object.assign(Object.assign({},V),{send_to:te}))}})).apply(this,arguments)}function Ka(D){Mo=D}function Qn(D){Hu=D}function Za(){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,N.Z)(function*(){if(!(0,re.hl)())return rr.warn(vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return rr.warn(vr.create("indexeddb-unavailable",{errorInfo:null==D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Gu(){return(Gu=(0,N.Z)(function*(D,T,x,V,K,te,xe){var tt;const lt=Gr(D);lt.then(Mn=>{x[Mn.measurementId]=Mn.appId,D.options.measurementId&&Mn.measurementId!==D.options.measurementId&&rr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>rr.error(Mn)),T.push(lt);const dt=Za().then(Mn=>{if(Mn)return V.getId()}),[Ut,Et]=yield Promise.all([lt,dt]);Ci(te)||Xf(te,Ut.measurementId),Mo&&(K("consent","default",Mo),Ka(void 0)),K("js",new Date);const Lr=null!==(tt=null==xe?void 0:xe.config)&&void 0!==tt?tt:{};return Lr.origin="firebase",Lr.update=!0,null!=Et&&(Lr[Qf]=Et),K("config",Ut.measurementId,Lr),Hu&&(K("set",Hu),Qn(void 0)),Ut.measurementId})).apply(this,arguments)}class yl{constructor(T){this.app=T}_delete(){return delete sr[this.app.options.appId],Promise.resolve()}}let sr={},rh=[];const Ya={};let Oo,br,Xs="dataLayer",zu=!1;function sh(D,T,x){!function ma(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((V,K)=>`(${K+1}) ${V}`).join(" "),x=vr.create("invalid-analytics-context",{errorInfo:T});rr.warn(x.message)}}();const V=D.options.appId;if(!V)throw vr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw vr.create("no-api-key");rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=sr[V])throw vr.create("already-exists",{id:V});if(!zu){!function us(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(Xs);const{wrappedGtag:te,gtagCore:xe}=function Jf(D,T,x,V,K){let te=function(...xe){window[V].push(arguments)};return window[K]&&"function"==typeof window[K]&&(te=window[K]),window[K]=function $u(D,T,x,V){function te(){return(te=(0,N.Z)(function*(xe,tt,lt){try{"event"===xe?yield ju(D,T,x,tt,lt):"config"===xe?yield Ro(D,T,x,V,tt,lt):"consent"===xe?D("consent","update",lt):D("set",tt)}catch(dt){rr.error(dt)}})).apply(this,arguments)}return function K(xe,tt,lt){return te.apply(this,arguments)}}(te,D,T,x),{gtagCore:te,wrappedGtag:window[K]}}(sr,rh,Ya,Xs,"gtag");br=te,Oo=xe,zu=!0}return sr[V]=function nh(D,T,x,V,K,te,xe){return Gu.apply(this,arguments)}(D,rh,Ya,T,Oo,Xs,x),new yl(D)}function me(){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,N.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}const Fn="@firebase/analytics";!function ds(){(0,ne._registerComponent)(new ce.wA(dl,(T,{options:x})=>sh(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ne._registerComponent)(new ce.wA("analytics-internal",function D(T){try{const x=T.getProvider(dl).getImmediate();return{logEvent:(V,K,te)=>function eo(D,T,x,V){D=(0,re.m9)(D),function Qs(D,T,x,V,K){return ir.apply(this,arguments)}(br,sr[D.app.options.appId],T,x,V).catch(K=>rr.error(K))}(x,V,K,te)}}catch(x){throw vr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ne.registerVersion)(Fn,"0.9.4"),(0,ne.registerVersion)(Fn,"0.9.4","esm2017")}();var tp=L(4408),Fr=L(7565);const _l=new class ii extends Fr.v{}(class qu extends tp.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,x,V):(T.flush(this),0)}});var va=L(4986),Ps=L(8505),_r=L(9468),Qa=L(5363);const ah=new _.GfV("7.5.0"),Xa="__angularfire_symbol__analyticsIsSupportedValue",hs="__angularfire_symbol__analyticsIsSupported",or="__angularfire_symbol__remoteConfigIsSupportedValue",no="__angularfire_symbol__remoteConfigIsSupported",ks="__angularfire_symbol__messagingIsSupportedValue",Ja="__angularfire_symbol__messagingIsSupported";function tu(D,T,x){if(T){if(1===T.length)return T[0];const te=T.filter(xe=>xe.app===x);if(1===te.length)return te[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[hs]||(globalThis[hs]=me().then(D=>globalThis[Xa]=D).catch(()=>globalThis[Xa]=!1)),globalThis[Ja]||(globalThis[Ja]=za().then(D=>globalThis[ks]=D).catch(()=>globalThis[ks]=!1)),globalThis[no]||(globalThis[no]=Am().then(D=>globalThis[or]=D).catch(()=>globalThis[or]=!1));const nu=(D,T)=>{const x=T?[T]:(0,B.C6)(),V=[];return x.forEach(K=>{K.container.getProvider(D).instances.forEach(xe=>{V.includes(xe)||V.push(xe)})}),V};function fi(){}class ru{constructor(T,x=_l){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,V){const K=this.zone;return this.delegate.schedule(function(xe){K.runGuarded(()=>{T.apply(this,[xe])})},x,V)}}class iu{constructor(T){this.zone=T,this.task=null}call(T,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fi,{},fi,fi)),x.pipe((0,Ps.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wl=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ru(Zone.current)),this.insideAngular=x.run(()=>new ru(Zone.current,va.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(_.LFG(_.R0b))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function si(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function su(D){return si(),function Fo(D){return function(x){return(x=x.lift(new iu(D.ngZone))).pipe((0,_r.R)(D.outsideAngular),(0,Qa.Q)(D.insideAngular))}}(si())(D)}},5114:(et,Ee,L)=>{L.d(Ee,{$:()=>Ss,A:()=>G,B:()=>be,G:()=>vn,H:()=>dn,J:()=>ts,L:()=>kn,M:()=>na,N:()=>ra,P:()=>va,Q:()=>ia,R:()=>oh,T:()=>Kd,U:()=>Do,V:()=>rs,W:()=>Ti,X:()=>tl,Y:()=>Ha,Z:()=>ss,_:()=>bo,a:()=>Tt,a0:()=>nl,a1:()=>rl,a2:()=>Zd,a3:()=>Ae,a4:()=>Fu,a5:()=>il,a6:()=>Li,a7:()=>Lu,a8:()=>Yd,a9:()=>sl,aA:()=>$,aB:()=>lt,aC:()=>Il,aD:()=>pi,aE:()=>Ve,aI:()=>cs,aL:()=>Ts,aa:()=>Ui,ab:()=>So,ac:()=>Qd,af:()=>Uu,ag:()=>ul,ah:()=>cl,ak:()=>is,al:()=>Bu,an:()=>fa,ao:()=>pl,ap:()=>ge,aq:()=>xt,ar:()=>He,as:()=>ze,at:()=>Tl,au:()=>Tr,av:()=>Ct,aw:()=>Ce,ax:()=>X,ay:()=>Mn,az:()=>it,b:()=>vr,c:()=>ks,d:()=>np,e:()=>eu,f:()=>Fo,g:()=>V,h:()=>D,i:()=>Ai,j:()=>xe,k:()=>hp,l:()=>to,m:()=>ph,o:()=>ie,r:()=>tp,s:()=>kr,u:()=>_l});var _=L(5861),B=L(2090),N=L(9681),ne=L(1877),re=L(655),ce=L(4859);const ie={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const be=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ye=new ne.Yd("@firebase/auth");function Ge(y,...f){ye.logLevel<=ne.in.ERROR&&ye.error(`Auth (${N.SDK_VERSION}): ${y}`,...f)}function ze(y,...f){throw $e(y,...f)}function Ce(y,...f){return $e(y,...f)}function Te(y,f,g){const w=Object.assign(Object.assign({},Fe()),{[f]:g});return new B.LL("auth","Firebase",w).create(f,{appName:y.name})}function ve(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&ze(y,"argument-error"),Te(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return Ue.create(y,...f)}function X(y,f,...g){if(!y)throw $e(f,...g)}function ae(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ge(f),new Error(f)}function ge(y,f){y||ae(f)}const qe=new Map;function it(y){ge(y instanceof Function,"Expected a class definition");let f=qe.get(y);return f?(ge(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,qe.set(y,f),f)}function W(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function le(){return"http:"===_e()||"https:"===_e()}function _e(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class we{constructor(f,g){this.shortDelay=f,this.longDelay=g,ge(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Me(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(le()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function at(y,f){ge(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Mt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xe=new we(3e4,6e4);function ht(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function St(y,f,g,w){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,_.Z)(function*(y,f,g,w,A={}){return Ln(y,A,(0,_.Z)(function*(){let k={},J={};w&&("GET"===f?J=w:k={body:JSON.stringify(w)});const Re=(0,B.xO)(Object.assign({key:y.config.apiKey},J)).slice(1),Je=yield y._getAdditionalHeaders();return Je["Content-Type"]="application/json",y.languageCode&&(Je["X-Firebase-Locale"]=y.languageCode),Mt.fetch()(hr(y,y.config.apiHost,g,Re),Object.assign({method:f,headers:Je,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Ln(y,f,g){return En.apply(this,arguments)}function En(){return(En=(0,_.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},mn),f);try{const A=new Ii(y),k=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const J=yield k.json();if("needConfirmation"in J)throw Un(y,"account-exists-with-different-credential",J);if(k.ok&&!("errorMessage"in J))return J;{const Re=k.ok?J.errorMessage:J.error.message,[Je,gt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw Un(y,"credential-already-in-use",J);if("EMAIL_EXISTS"===Je)throw Un(y,"email-already-in-use",J);if("USER_DISABLED"===Je)throw Un(y,"user-disabled",J);const $t=w[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(gt)throw Te(y,$t,gt);ze(y,$t)}}catch(A){if(A instanceof B.ZR)throw A;ze(y,"internal-error",{message:String(A)})}})).apply(this,arguments)}function on(y,f,g,w){return dr.apply(this,arguments)}function dr(){return(dr=(0,_.Z)(function*(y,f,g,w,A={}){const k=yield St(y,f,g,w,A);return"mfaPendingCredential"in k&&ze(y,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function hr(y,f,g,w){const A=`${f}${g}?${w}`;return y.config.emulator?at(y.config,A):`${y.config.apiScheme}://${A}`}class Ii{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Ce(this.auth,"network-request-failed")),Xe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=Ce(y,f,w);return A.customData._tokenResponse=g,A}function yt(){return(yt=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function jr(y,f){return wn.apply(this,arguments)}function wn(){return(wn=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function an(y,f){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Mr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function fr(){return(fr=(0,_.Z)(function*(y,f=!1){const g=(0,B.m9)(y),w=yield g.getIdToken(f),A=Zt(w);X(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,J=null==k?void 0:k.sign_in_provider;return{claims:A,token:w,authTime:Mr(Xi(A.auth_time)),issuedAtTime:Mr(Xi(A.iat)),expirationTime:Mr(Xi(A.exp)),signInProvider:J||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function Xi(y){return 1e3*Number(y)}function Zt(y){const[f,g,w]=y.split(".");if(void 0===f||void 0===g||void 0===w)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,B.tV)(g);return A?JSON.parse(A):(Ge("Failed to decode base64 JWT payload"),null)}catch(A){return Ge("Caught error parsing JWT payload as JSON",null==A?void 0:A.toString()),null}}function nt(y,f){return $r.apply(this,arguments)}function $r(){return($r=(0,_.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof B.ZR&&Di(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Di({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Gt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,_.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===(null==g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class Pi{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mr(this.lastLoginAt),this.creationTime=Mr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hn(y){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),A=yield nt(y,an(g,{idToken:w}));X(null==A?void 0:A.users.length,g,"internal-error");const k=A.users[0];y._notifyReloadListener(k);const J=(null===(f=k.providerUserInfo)||void 0===f?void 0:f.length)?Kn(k.providerUserInfo):[],Re=Jt(y.providerData,J),$t=!!y.isAnonymous&&!(y.email&&k.passwordHash||(null==Re?void 0:Re.length)),Sn={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Re,metadata:new Pi(k.createdAt,k.lastLoginAt),isAnonymous:$t};Object.assign(y,Sn)})).apply(this,arguments)}function Qr(){return(Qr=(0,_.Z)(function*(y){const f=(0,B.m9)(y);yield Hn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Jt(y,f){return[...y.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function Kn(y){return y.map(f=>{var{providerId:g}=f,w=(0,re._T)(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Ie(){return(Ie=(0,_.Z)(function*(y,f){const g=yield Ln(y,{},(0,_.Z)(function*(){const w=(0,B.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:k}=y.config,J=hr(y,A,"/v1/token",`key=${k}`),Re=yield y._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(J,{method:"POST",headers:Re,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class We{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){X(f.idToken,"internal-error"),X(void 0!==f.idToken,"internal-error"),X(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function ft(y){const f=Zt(y);return X(f,"internal-error"),X(void 0!==f.exp,"internal-error"),X(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,_.Z)(function*(){return X(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,_.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:J}=yield function Ze(y,f){return Ie.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(A,k,Number(J))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:A,expirationTime:k}=g,J=new We;return w&&(X("string"==typeof w,"internal-error",{appName:f}),J.refreshToken=w),A&&(X("string"==typeof A,"internal-error",{appName:f}),J.accessToken=A),k&&(X("number"==typeof k,"internal-error",{appName:f}),J.expirationTime=k),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new We,this.toJSON())}_performRefresh(){return ae("not implemented")}}function Dt(y,f){X("string"==typeof y||void 0===y,"internal-error",{appName:f})}class At{constructor(f){var{uid:g,auth:w,stsTokenManager:A}=f,k=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Pi(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,_.Z)(function*(){const w=yield nt(g,g.stsTokenManager.getToken(g.auth,f));return X(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function bn(y){return fr.apply(this,arguments)}(this,f)}reload(){return function pt(y){return Qr.apply(this,arguments)}(this)}_assign(f){this!==f&&(X(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const g=new At(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(f){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,_.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield Hn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,_.Z)(function*(){const g=yield f.getIdToken();return yield nt(f,function Qi(y,f){return yt.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,A,k,J,Re,Je,gt,$t;const Sn=null!==(w=g.displayName)&&void 0!==w?w:void 0,ji=null!==(A=g.email)&&void 0!==A?A:void 0,$i=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,cu=null!==(J=g.photoURL)&&void 0!==J?J:void 0,Sl=null!==(Re=g.tenantId)&&void 0!==Re?Re:void 0,lu=null!==(Je=g._redirectEventId)&&void 0!==Je?Je:void 0,Ku=null!==(gt=g.createdAt)&&void 0!==gt?gt:void 0,yh=null!==($t=g.lastLoginAt)&&void 0!==$t?$t:void 0,{uid:Ri,emailVerified:vh,isAnonymous:_h,providerData:vp,stsTokenManager:Zu}=g;X(Ri&&Zu,f,"internal-error");const Vm=We.fromJSON(this.name,Zu);X("string"==typeof Ri,f,"internal-error"),Dt(Sn,f.name),Dt(ji,f.name),X("boolean"==typeof vh,f,"internal-error"),X("boolean"==typeof _h,f,"internal-error"),Dt($i,f.name),Dt(cu,f.name),Dt(Sl,f.name),Dt(lu,f.name),Dt(Ku,f.name),Dt(yh,f.name);const Hi=new At({uid:Ri,auth:f,email:ji,emailVerified:vh,displayName:Sn,isAnonymous:_h,photoURL:cu,phoneNumber:$i,tenantId:Sl,stsTokenManager:Vm,createdAt:Ku,lastLoginAt:yh});return vp&&Array.isArray(vp)&&(Hi.providerData=vp.map(ut=>Object.assign({},ut))),lu&&(Hi._redirectEventId=lu),Hi}static _fromIdTokenResponse(f,g,w=!1){return(0,_.Z)(function*(){const A=new We;A.updateFromServerResponse(g);const k=new At({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield Hn(k),k})()}}const kn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,_.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,_.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,_.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function $(y,f,g){return`firebase:${y}:${f}:${g}`}class j{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:A,name:k}=this.auth;this.fullUserKey=$(this.userKey,A.apiKey,k),this.fullPersistenceKey=$("persistence",A.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?At._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,_.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,_.Z)(function*(){if(!g.length)return new j(it(kn),f,w);const A=(yield Promise.all(g.map(function(){var gt=(0,_.Z)(function*($t){if(yield $t._isAvailable())return $t});return function($t){return gt.apply(this,arguments)}}()))).filter(gt=>gt);let k=A[0]||it(kn);const J=$(w,f.config.apiKey,f.name);let Re=null;for(const gt of g)try{const $t=yield gt._get(J);if($t){const Sn=At._fromJSON(f,$t);gt!==k&&(Re=Sn),k=gt;break}}catch($t){}const Je=A.filter(gt=>gt._shouldAllowMigration);return k._shouldAllowMigration&&Je.length?(k=Je[0],Re&&(yield k._set(J,Re.toJSON())),yield Promise.all(g.map(function(){var gt=(0,_.Z)(function*($t){if($t!==k)try{yield $t._remove(J)}catch(Sn){}});return function($t){return gt.apply(this,arguments)}}())),new j(k,f,w)):new j(k,f,w)})()}}function P(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(De(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(F(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(vt(f))return"Blackberry";if(bt(f))return"Webos";if(M(f))return"Safari";if((f.includes("chrome/")||Q(f))&&!f.includes("edge/"))return"Chrome";if(He(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function F(y=(0,B.z$)()){return/firefox\//i.test(y)}function M(y=(0,B.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Q(y=(0,B.z$)()){return/crios\//i.test(y)}function De(y=(0,B.z$)()){return/iemobile/i.test(y)}function He(y=(0,B.z$)()){return/android/i.test(y)}function vt(y=(0,B.z$)()){return/blackberry/i.test(y)}function bt(y=(0,B.z$)()){return/webos/i.test(y)}function xt(y=(0,B.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ct(y=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}function pr(y=(0,B.z$)()){return xt(y)||He(y)||bt(y)||vt(y)||/windows phone/i.test(y)||De(y)}function gr(y,f=[]){let g;switch(y){case"Browser":g=P((0,B.z$)());break;case"Worker":g=`${P((0,B.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${N.SDK_VERSION}/${w}`}class ea{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const w=k=>new Promise((J,Re)=>{try{J(f(k))}catch(Je){Re(Je)}});w.onAbort=g,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,_.Z)(function*(){if(g.auth.currentUser===f)return;const w=[];try{for(const A of g.queue)yield A(f),A.onAbort&&w.push(A.onAbort)}catch(A){w.reverse();for(const k of w)try{k()}catch(J){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null==A?void 0:A.message})}})()}}class Xr{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zt(this),this.idTokenSubscription=new zt(this),this.beforeStateQueue=new ea(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=it(g)),this._initializationPromise=this.queue((0,_.Z)(function*(){var A,k;if(!w._deleted&&(w.persistenceManager=yield j.create(w,f),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(J){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,_.Z)(function*(){var w;const A=yield g.assertedPersistence.getCurrentUser();let k=A,J=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Re=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Je=null==k?void 0:k._redirectEventId,gt=yield g.tryRedirectSignIn(f);(!Re||Re===Je)&&(null==gt?void 0:gt.user)&&(k=gt.user,J=!0)}if(!k)return g.directlySetCurrentUser(null);if(!k._redirectEventId){if(J)try{yield g.beforeStateQueue.runMiddleware(k)}catch(Re){k=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Re))}return k?g.reloadAndSetCurrentUserOrClear(k):g.directlySetCurrentUser(null)}return X(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===k._redirectEventId?g.directlySetCurrentUser(k):g.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(f){var g=this;return(0,_.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,_.Z)(function*(){try{yield Hn(f)}catch(w){if("auth/network-request-failed"!==(null==w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ne(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,_.Z)(function*(){const w=f?(0,B.m9)(f):null;return w&&X(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f,g=!1){var w=this;return(0,_.Z)(function*(){if(!w._deleted)return f&&X(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,_.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,_.Z)(function*(){yield g.assertedPersistence.setPersistence(it(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new B.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,_.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,_.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&it(f)||g._popupRedirectResolver;X(w,g,"argument-error"),g.redirectPersistenceManager=yield j.create(g,[it(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,_.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,_.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,_.Z)(function*(){if(f===g.currentUser)return g.queue((0,_.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,A){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g),J=this._isInitialized?Promise.resolve():this._initializationPromise;return X(J,this,"internal-error"),J.then(()=>k(this.currentUser)),"function"==typeof g?f.addObserver(g,w,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,_.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=gr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Ve(y){return(0,B.m9)(y)}class zt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,B.ne)(g=>this.observer=g)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vn(y,f,g){const w=Ve(y);X(w._canInitEmulator,w,"emulator-config-failed"),X(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),k=Hr(f),{host:J,port:Re}=function Ji(y){const f=Hr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const k=A[1];return{host:k,port:Gn(w.substr(k.length+1))}}{const[k,J]=w.split(":");return{host:k,port:Gn(J)}}}(f);w.config.emulator={url:`${k}//${J}${null===Re?"":`:${Re}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:J,port:Re,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function es(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}function Hr(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Gn(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class dn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ae("not implemented")}_getIdTokenResponse(f){return ae("not implemented")}_linkToIdToken(f,g){return ae("not implemented")}_getReauthenticationResolver(f){return ae("not implemented")}}function $s(y,f){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:resetPassword",ht(y,f))})).apply(this,arguments)}function Lt(y,f){return yo.apply(this,arguments)}function yo(){return(yo=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function vo(y,f){return _o.apply(this,arguments)}function _o(){return(_o=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:update",ht(y,f))})).apply(this,arguments)}function Zn(){return(Zn=(0,_.Z)(function*(y,f){return on(y,"POST","/v1/accounts:signInWithPassword",ht(y,f))})).apply(this,arguments)}function Is(y,f){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:sendOobCode",ht(y,f))})).apply(this,arguments)}function Jr(y,f){return pn.apply(this,arguments)}function pn(){return(pn=(0,_.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function zc(y,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,_.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function bi(y,f){return ci.apply(this,arguments)}function ci(){return(ci=(0,_.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function qc(y,f){return La.apply(this,arguments)}function La(){return(La=(0,_.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function li(){return(li=(0,_.Z)(function*(y,f){return on(y,"POST","/v1/accounts:signInWithEmailLink",ht(y,f))})).apply(this,arguments)}function Wc(){return(Wc=(0,_.Z)(function*(y,f){return on(y,"POST","/v1/accounts:signInWithEmailLink",ht(y,f))})).apply(this,arguments)}class Ua extends dn{constructor(f,g,w,A=null){super("password",w),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new Ua(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new Ua(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,_.Z)(function*(){switch(g.signInMethod){case"password":return function Eo(y,f){return Zn.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ds(y,f){return li.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:ze(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,_.Z)(function*(){switch(w.signInMethod){case"password":return Lt(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function qd(y,f){return Wc.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:ze(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Yn(y,f){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,_.Z)(function*(y,f){return on(y,"POST","/v1/accounts:signInWithIdp",ht(y,f))})).apply(this,arguments)}class ts extends dn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ts(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):ze("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=g,k=(0,re._T)(g,["providerId","signInMethod"]);if(!w||!A)return null;const J=new ts(w,A);return J.idToken=k.idToken||void 0,J.accessToken=k.accessToken||void 0,J.secret=k.secret,J.nonce=k.nonce,J.pendingToken=k.pendingToken||null,J}_getIdTokenResponse(f){return Yn(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Yn(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Yn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,B.xO)(g)}return f}}function zf(y,f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:sendVerificationCode",ht(y,f))})).apply(this,arguments)}function ta(){return(ta=(0,_.Z)(function*(y,f){return on(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,f))})).apply(this,arguments)}function Yc(){return(Yc=(0,_.Z)(function*(y,f){const g=yield on(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,f));if(g.temporaryProof)throw Un(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Wf={USER_NOT_FOUND:"user-not-found"};function Qc(){return(Qc=(0,_.Z)(function*(y,f){return on(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Wf)})).apply(this,arguments)}class Io extends dn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Io({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Io({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function qf(y,f){return ta.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function wo(y,f){return Yc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Kf(y,f){return Qc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:k}=f;return w||g||A||k?new Io({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:k}):null}}class ns{constructor(f){var g,w,A,k,J,Re;const Je=(0,B.zd)((0,B.pd)(f)),gt=null!==(g=Je.apiKey)&&void 0!==g?g:null,$t=null!==(w=Je.oobCode)&&void 0!==w?w:null,Sn=function Zf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Je.mode)&&void 0!==A?A:null);X(gt&&$t&&Sn,"argument-error"),this.apiKey=gt,this.operation=Sn,this.code=$t,this.continueUrl=null!==(k=Je.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(J=Je.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(Re=Je.tenantId)&&void 0!==Re?Re:null}static parseLink(f){const g=function Wd(y){const f=(0,B.zd)((0,B.pd)(y)).link,g=f?(0,B.zd)((0,B.pd)(f)).deep_link_id:null,w=(0,B.zd)((0,B.pd)(y)).deep_link_id;return(w?(0,B.zd)((0,B.pd)(w)).link:null)||w||g||f||y}(f);try{return new ns(g)}catch(w){return null}}}let na=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return Ua._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=ns.parseLink(w);return X(A,"argument-error"),Ua._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class bs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class di extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Do extends di{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return X("providerId"in g&&"signInMethod"in g,"argument-error"),ts._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return X(f.idToken||f.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Do.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Do.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:k,nonce:J,providerId:Re}=f;if(!w&&!A&&!g&&!k||!Re)return null;try{return new Do(Re)._credential({idToken:g,accessToken:w,nonce:J,pendingToken:k})}catch(Je){return null}}}let ra=(()=>{class y extends di{constructor(){super("facebook.com")}static credential(g){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ia=(()=>{class y extends di{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return y.credential(w,A)}catch(k){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Kd=(()=>{class y extends di{constructor(){super("github.com")}static credential(g){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ts extends dn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Yn(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Yn(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Yn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:k}=g;return w&&A&&k&&w===A?new Ts(w,k):null}static _create(f,g){return new Ts(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class rs extends bs{constructor(f){X(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return rs.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return rs.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Ts.fromJSON(f);return X(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Ts._create(w,g)}catch(A){return null}}}let Ti=(()=>{class y extends di{constructor(){super("twitter.com")}static credential(g,w){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return y.credential(w,A)}catch(k){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Jc(y,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,_.Z)(function*(y,f){return on(y,"POST","/v1/accounts:signUp",ht(y,f))})).apply(this,arguments)}class Pr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,A=!1){return(0,_.Z)(function*(){const k=yield At._fromIdTokenResponse(f,w,A),J=el(w);return new Pr({user:k,providerId:J,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=el(w);return new Pr({user:f,providerId:A,_tokenResponse:w,operationType:g})})()}}function el(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function tl(y){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.Z)(function*(y){var f;const g=Ve(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Pr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Jc(g,{returnSecureToken:!0}),A=yield Pr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ba extends B.ZR{constructor(f,g,w,A){var k;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Ba.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,A){return new Ba(f,g,w,A)}}function ja(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Ba._fromErrorAndOperation(y,k,f,w):k})}function Nu(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function is(y,f){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,_.Z)(function*(y,f){const g=(0,B.m9)(y);yield Cs(!0,g,f);const{providerUserInfo:w}=yield jr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=Nu(w||[]);return g.providerData=g.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function In(y,f){return sa.apply(this,arguments)}function sa(){return(sa=(0,_.Z)(function*(y,f,g=!1){const w=yield nt(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return Pr._forOperation(y,"link",w)})).apply(this,arguments)}function Cs(y,f,g){return gn.apply(this,arguments)}function gn(){return(gn=(0,_.Z)(function*(y,f,g){yield Hn(f);const A=!1===y?"provider-already-linked":"no-such-provider";X(Nu(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function $a(y,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,_.Z)(function*(y,f,g=!1){const{auth:w}=y,A="reauthenticate";try{const k=yield nt(y,ja(w,A,f,y),g);X(k.idToken,w,"internal-error");const J=Zt(k.idToken);X(J,w,"internal-error");const{sub:Re}=J;return X(y.uid===Re,w,"user-mismatch"),Pr._forOperation(y,A,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&ze(w,"user-mismatch"),k}})).apply(this,arguments)}function zs(y,f){return nr.apply(this,arguments)}function nr(){return(nr=(0,_.Z)(function*(y,f,g=!1){const w="signIn",A=yield ja(y,w,f),k=yield Pr._fromIdTokenResponse(y,w,A);return g||(yield y._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Ha(y,f){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,_.Z)(function*(y,f){return zs(Ve(y),f)})).apply(this,arguments)}function ss(y,f){return mr.apply(this,arguments)}function mr(){return(mr=(0,_.Z)(function*(y,f){const g=(0,B.m9)(y);return yield Cs(!1,g,f.providerId),In(g,f)})).apply(this,arguments)}function bo(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,_.Z)(function*(y,f){return $a((0,B.m9)(y),f)})).apply(this,arguments)}function ku(y,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,_.Z)(function*(y,f){return on(y,"POST","/v1/accounts:signInWithCustomToken",ht(y,f))})).apply(this,arguments)}function Ss(y,f){return As.apply(this,arguments)}function As(){return(As=(0,_.Z)(function*(y,f){const g=Ve(y),w=yield ku(g,{token:f,returnSecureToken:!0}),A=yield Pr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class wt{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?qs._fromServerResponse(f,g):ze(f,"internal-error")}}class qs extends wt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new qs(g)}}function Ga(y,f,g){var w;X((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),X(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(X(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(X(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function nl(y,f,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&Ga(w,A,g),yield zc(w,A)})).apply(this,arguments)}function rl(y,f,g){return To.apply(this,arguments)}function To(){return(To=(0,_.Z)(function*(y,f,g){yield $s((0,B.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Zd(y,f){return xs.apply(this,arguments)}function xs(){return(xs=(0,_.Z)(function*(y,f){yield vo((0,B.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ae(y,f){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,_.Z)(function*(y,f){const g=(0,B.m9)(y),w=yield $s(g,{oobCode:f}),A=w.requestType;switch(X(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(w.mfaInfo,g,"internal-error");default:X(w.email,g,"internal-error")}let k=null;return w.mfaInfo&&(k=wt._fromServerResponse(Ve(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function Fu(y,f){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,_.Z)(function*(y,f){const{data:g}=yield Ae((0,B.m9)(y),f);return g.email})).apply(this,arguments)}function il(y,f,g){return os.apply(this,arguments)}function os(){return(os=(0,_.Z)(function*(y,f,g){const w=Ve(y),A=yield Jc(w,{returnSecureToken:!0,email:f,password:g}),k=yield Pr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(k.user),k})).apply(this,arguments)}function Li(y,f,g){return Ha((0,B.m9)(y),na.credential(f,g))}function Lu(y,f,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};X(g.handleCodeInApp,w,"argument-error"),g&&Ga(w,A,g),yield bi(w,A)})).apply(this,arguments)}function Yd(y,f){const g=ns.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}function sl(y,f,g){return ol.apply(this,arguments)}function ol(){return(ol=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y),A=na.credentialWithLink(f,g||W());return X(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ha(w,A)})).apply(this,arguments)}function Ws(y,f){return yr.apply(this,arguments)}function yr(){return(yr=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:createAuthUri",ht(y,f))})).apply(this,arguments)}function Ui(y,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,_.Z)(function*(y,f){const w={identifier:f,continueUri:le()?W():"http://localhost"},{signinMethods:A}=yield Ws((0,B.m9)(y),w);return A||[]})).apply(this,arguments)}function So(y,f){return ti.apply(this,arguments)}function ti(){return(ti=(0,_.Z)(function*(y,f){const g=(0,B.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ga(g.auth,A,f);const{email:k}=yield Jr(g.auth,A);k!==y.email&&(yield y.reload())})).apply(this,arguments)}function Qd(y,f,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ga(w.auth,k,g);const{email:J}=yield qc(w.auth,k);J!==y.email&&(yield y.reload())})).apply(this,arguments)}function al(y,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,_.Z)(function*(y,f){return St(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Uu(y,f){return xo.apply(this,arguments)}function xo(){return(xo=(0,_.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,B.m9)(y),k={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},J=yield nt(w,al(w.auth,k));w.displayName=J.displayName||null,w.photoURL=J.photoUrl||null;const Re=w.providerData.find(({providerId:Je})=>"password"===Je);Re&&(Re.displayName=w.displayName,Re.photoURL=w.photoURL),yield w._updateTokensIfNecessary(J)})).apply(this,arguments)}function ul(y,f){return Vu((0,B.m9)(y),f,null)}function cl(y,f){return Vu((0,B.m9)(y),null,f)}function Vu(y,f,g){return la.apply(this,arguments)}function la(){return(la=(0,_.Z)(function*(y,f,g){const{auth:w}=y,k={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(k.email=f),g&&(k.password=g);const J=yield nt(y,Lt(w,k));yield y._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Ks{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class ll extends Ks{constructor(f,g,w,A){super(f,g,w),this.username=A}}class Xd extends Ks{constructor(f,g){super(f,"facebook.com",g)}}class za extends ll{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class ni extends Ks{constructor(f,g){super(f,"google.com",g)}}class Jd extends ll{constructor(f,g,w){super(f,"twitter.com",g,w)}}function Bu(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function da(y){var f,g;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},k=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const J=null===(g=null===(f=Zt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(J)return new Ks(k,"anonymous"!==J&&"custom"!==J?J:null)}if(!w)return null;switch(w){case"facebook.com":return new Xd(k,A);case"github.com":return new za(k,A);case"google.com":return new ni(k,A);case"twitter.com":return new Jd(k,A,y.screenName||null);case"custom":case"anonymous":return new Ks(k,null);default:return new Ks(k,w,A)}}(g)}class as{constructor(f,g,w){this.type=f,this.credential=g,this.auth=w}static _fromIdtoken(f,g){return new as("enroll",f,g)}static _fromMfaPendingCredential(f){return new as("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return as._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return as._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ha{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=Ve(f),A=g.customData._serverResponse,k=(A.mfaInfo||[]).map(Re=>wt._fromServerResponse(w,Re));X(A.mfaPendingCredential,w,"internal-error");const J=as._fromMfaPendingCredential(A.mfaPendingCredential);return new ha(J,k,function(){var Re=(0,_.Z)(function*(Je){const gt=yield Je._process(w,J);delete A.mfaInfo,delete A.mfaPendingCredential;const $t=Object.assign(Object.assign({},A),{idToken:gt.idToken,refreshToken:gt.refreshToken});switch(g.operationType){case"signIn":const Sn=yield Pr._fromIdTokenResponse(w,g.operationType,$t);return yield w._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return X(g.user,w,"internal-error"),Pr._forOperation(g.user,g.operationType,$t);default:ze(w,"internal-error")}});return function(Je){return Re.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,_.Z)(function*(){return g.signInResolver(f)})()}}function fa(y,f){var g;const w=(0,B.m9)(y),A=f;return X(f.customData.operationType,w,"argument-error"),X(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),ha._fromError(w,A)}function rr(y,f){return St(y,"POST","/v2/accounts/mfaEnrollment:start",ht(y,f))}class us{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>wt._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new us(f)}getSession(){var f=this;return(0,_.Z)(function*(){return as._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var w=this;return(0,_.Z)(function*(){const A=f,k=yield w.getSession(),J=yield nt(w.user,A._process(w.user.auth,k,g));return yield w.user._updateTokensIfNecessary(J),w.user.reload()})()}unenroll(f){var g=this;return(0,_.Z)(function*(){const w="string"==typeof f?f:f.uid,A=yield g.user.getIdToken();try{const k=yield nt(g.user,function Xf(y,f){return St(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ht(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:J})=>J!==w),yield g.user._updateTokensIfNecessary(k),yield g.user.reload()}catch(k){throw k}})()}}const Ro=new WeakMap;function pl(y){const f=(0,B.m9)(y);return Ro.has(f)||Ro.set(f,us._fromUser(f)),Ro.get(f)}const ju="__sak";class Zs{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ju,"1"),this.storage.removeItem(ju),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const vr=(()=>{class y extends Zs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $u(){const y=(0,B.z$)();return M(y)||xt(y)}()&&function ki(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=pr(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),k=this.localCache[w];A!==k&&g(w,k,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((Re,Je,gt)=>{this.notifyListeners(Re,gt)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(A);if(g.newValue!==Re)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const k=()=>{const Re=this.storage.getItem(A);!w&&this.localCache[A]===Re||this.notifyListeners(A,Re)},J=this.storage.getItem(A);!function kt(){return(0,B.w1)()&&10===document.documentMode}()||J===g.newValue||g.newValue===g.oldValue?k():setTimeout(k,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const k of Array.from(A))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,k=this;return(0,_.Z)(function*(){yield A().call(k,g,w),k.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,_.Z)(function*(){const k=yield w().call(A,g);return A.localCache[g]=JSON.stringify(k),k})()}_remove(g){var w=()=>super._remove,A=this;return(0,_.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),Tt=(()=>{class y extends Zs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let pa=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(k=>k.isListeningto(g));if(w)return w;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,_.Z)(function*(){const A=g,{eventId:k,eventType:J,data:Re}=A.data,Je=w.handlersMap[J];if(!(null==Je?void 0:Je.size))return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:J});const gt=Array.from(Je).map(function(){var Sn=(0,_.Z)(function*(ji){return ji(A.origin,Re)});return function(ji){return Sn.apply(this,arguments)}}()),$t=yield function Si(y){return Promise.all(y.map(function(){var f=(0,_.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(gt);A.ports[0].postMessage({status:"done",eventId:k,eventType:J,response:$t})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function cs(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class qa{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var A=this;return(0,_.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let J,Re;return new Promise((Je,gt)=>{const $t=cs("",20);k.port1.start();const Sn=setTimeout(()=>{gt(new Error("unsupported_event"))},w);Re={messageChannel:k,onMessage(ji){const $i=ji;if($i.data.eventId===$t)switch($i.data.status){case"ack":clearTimeout(Sn),J=setTimeout(()=>{gt(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),Je($i.data.response);break;default:clearTimeout(Sn),clearTimeout(J),gt(new Error("invalid_response"))}}},A.handlers.add(Re),k.port1.addEventListener("message",Re.onMessage),A.target.postMessage({eventType:f,eventId:$t,data:g},[k.port2])}).finally(()=>{Re&&A.removeMessageHandler(Re)})})()}}function qt(){return window}function Cn(){return void 0!==qt().WorkerGlobalScope&&"function"==typeof qt().importScripts}function Ms(){return(Ms=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Wa="firebaseLocalStorageDb",Qs="firebaseLocalStorage",ir="fbase_key";class ri{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function hi(y,f){return y.transaction([Qs],f?"readwrite":"readonly").objectStore(Qs)}function ls(){const y=indexedDB.open(Wa,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Qs,{keyPath:ir})}catch(A){g(A)}}),y.addEventListener("success",(0,_.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Qs)?f(w):(w.close(),yield function ga(){const y=indexedDB.deleteDatabase(Wa);return new ri(y).toPromise()}(),f(yield ls()))}))})}function ml(y,f,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,_.Z)(function*(y,f,g){const w=hi(y,!0).put({[ir]:f,value:g});return new ri(w).toPromise()})).apply(this,arguments)}function Bi(){return(Bi=(0,_.Z)(function*(y,f){const g=hi(y,!1).get(f),w=yield new ri(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Mo(y,f){const g=hi(y,!0).delete(f);return new ri(g).toPromise()}const Ai=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,_.Z)(function*(){return g.db||(g.db=yield ls()),g.db})()}_withRetries(g){var w=this;return(0,_.Z)(function*(){let A=0;for(;;)try{const k=yield w._openDb();return yield g(k)}catch(k){if(A++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,_.Z)(function*(){return Cn()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,_.Z)(function*(){g.receiver=pa._getInstance(function gl(){return Cn()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,_.Z)(function*(A,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(A,k){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,_.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,_.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function jt(){return Ms.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new qa(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);!k||(null===(w=k[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=k[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,_.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function th(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ls();return yield ml(g,ju,"1"),yield Mo(g,ju),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,_.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,_.Z)(function*(){return A._withPendingWrite((0,_.Z)(function*(){return yield A._withRetries(k=>ml(k,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,_.Z)(function*(){const A=yield w._withRetries(k=>function Os(y,f){return Bi.apply(this,arguments)}(k,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,_.Z)(function*(){return w._withPendingWrite((0,_.Z)(function*(){return yield w._withRetries(A=>Mo(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,_.Z)(function*(){const w=yield g._withRetries(J=>{const Re=hi(J,!1).getAll();return new ri(Re).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:J,value:Re}of w)k.add(J),JSON.stringify(g.localCache[J])!==JSON.stringify(Re)&&(g.notifyListeners(J,Re),A.push(J));for(const J of Object.keys(g.localCache))g.localCache[J]&&!k.has(J)&&(g.notifyListeners(J,null),A.push(J));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const k of Array.from(A))k(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function nh(y,f){return St(y,"POST","/v2/accounts/mfaSignIn:start",ht(y,f))}function sr(){return(sr=(0,_.Z)(function*(y){return(yield St(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ya(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=A=>{const k=Ce("internal-error");k.customData=A,g(k)},w.type="text/javascript",w.charset="UTF-8",function rh(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function Xs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const br=1e12;class zu{constructor(f){this.auth=f,this.counter=br,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new ih(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||br;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||br))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,_.Z)(function*(){var w;return null===(w=g._widgets.get(f||br))||void 0===w||w.execute(),""})()}}class ih{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;X(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ma(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const sh=Xs("rcb"),Rm=new we(3e4,6e4);class me{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=qt().grecaptcha)||void 0===f?void 0:f.render)}load(f,g=""){return X(function Ns(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(qt().grecaptcha):new Promise((w,A)=>{const k=qt().setTimeout(()=>{A(Ce(f,"network-request-failed"))},Rm.get());qt()[sh]=()=>{qt().clearTimeout(k),delete qt()[sh];const Re=qt().grecaptcha;if(!Re)return void A(Ce(f,"internal-error"));const Je=Re.render;Re.render=(gt,$t)=>{const Sn=Je(gt,$t);return this.counter++,Sn},this.hostLanguage=g,w(Re)},Ya(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:sh,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),A(Ce(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!!(null===(g=qt().grecaptcha)||void 0===g?void 0:g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vl{load(f){return(0,_.Z)(function*(){return new zu(f)})()}clearedOneInstance(){}}const cn="recaptcha",No={theme:"light",type:"image"};class oh{constructor(f,g=Object.assign({},No),w){this.parameters=g,this.type=cn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ve(w),this.isInvisible="invisible"===this.parameters.size,X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;X(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vl:new me,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(k=>{const J=Re=>{!Re||(f.tokenChangeListeners.delete(J),k(Re))};f.tokenChangeListeners.add(J),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=qt()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){X(le()&&!Cn(),f.auth,"internal-error"),yield function ep(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function yl(y){return sr.apply(this,arguments)}(f.auth);X(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class eo{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Io._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function kr(y,f,g){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,_.Z)(function*(y,f,g){const w=Ve(y),A=yield Fr(w,f,(0,B.m9)(g));return new eo(A,k=>Ha(w,k))})).apply(this,arguments)}function to(y,f,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y);yield Cs(!1,w,"phone");const A=yield Fr(w.auth,f,(0,B.m9)(g));return new eo(A,k=>ss(w,k))})).apply(this,arguments)}function tp(y,f,g){return qu.apply(this,arguments)}function qu(){return(qu=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y),A=yield Fr(w.auth,f,(0,B.m9)(g));return new eo(A,k=>bo(w,k))})).apply(this,arguments)}function Fr(y,f,g){return ii.apply(this,arguments)}function ii(){return(ii=(0,_.Z)(function*(y,f,g){var w;const A=yield g.verify();try{let k;if(X("string"==typeof A,y,"argument-error"),X(g.type===cn,y,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const J=k.session;if("phoneNumber"in k)return X("enroll"===J.type,y,"internal-error"),(yield rr(y,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{X("signin"===J.type,y,"internal-error");const Re=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return X(Re,y,"missing-multi-factor-info"),(yield nh(y,{mfaPendingCredential:J.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield zf(y,{phoneNumber:k.phoneNumber,recaptchaToken:A});return J}}finally{g._reset()}})).apply(this,arguments)}function _l(y,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,_.Z)(function*(y,f){yield In((0,B.m9)(y),f)})).apply(this,arguments)}let va=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Ve(g)}verifyPhoneNumber(g,w){return Fr(this.auth,g,(0,B.m9)(w))}static credential(g,w){return Io._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?Io._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ps(y,f){return f?it(f):(X(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class _r extends dn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Yn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Yn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Yn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Qa(y){return zs(y.auth,new _r(y),y.bypassAuthState)}function ah(y){const{auth:f,user:g}=y;return X(g,f,"internal-error"),$a(g,new _r(y),y.bypassAuthState)}function Xa(y){return hs.apply(this,arguments)}function hs(){return(hs=(0,_.Z)(function*(y){const{auth:f,user:g}=y;return X(g,f,"internal-error"),In(g,new _r(y),y.bypassAuthState)})).apply(this,arguments)}class or{constructor(f,g,w,A,k=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,_.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,_.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:k,tenantId:J,error:Re,type:Je}=f;if(Re)return void g.reject(Re);const gt={auth:g.auth,requestUri:w,sessionId:A,tenantId:J||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Je)(gt))}catch($t){g.reject($t)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Qa;case"linkViaPopup":case"linkViaRedirect":return Xa;case"reauthViaPopup":case"reauthViaRedirect":return ah;default:ze(this.auth,"internal-error")}}resolve(f){ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const no=new we(2e3,1e4);function ks(y,f,g){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,_.Z)(function*(y,f,g){const w=Ve(y);ve(y,f,bs);const A=Ps(w,g);return new tu(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function eu(y,f,g){return El.apply(this,arguments)}function El(){return(El=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y);ve(w.auth,f,bs);const A=Ps(w.auth,g);return new tu(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function np(y,f,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y);ve(w.auth,f,bs);const A=Ps(w.auth,g);return new tu(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let tu=(()=>{class y extends or{constructor(g,w,A,k,J){super(g,w,k,J),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,_.Z)(function*(){const w=yield g.execute();return X(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,_.Z)(function*(){ge(1===g.filter.length,"Popup operations only handle one event");const w=cs();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Ce(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,no.get())};g()}}return y.currentPopupAction=null,y})();const fi=new Map;class ru extends or{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,_.Z)(function*(){let w=fi.get(g.auth._key());if(!w){try{const k=(yield function iu(y,f){return wl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(k)}catch(A){w=()=>Promise.reject(A)}fi.set(g.auth._key(),w)}return g.bypassAuthState||fi.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function wl(){return(wl=(0,_.Z)(function*(y,f){const g=su(f),w=Wu(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function si(y,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,_.Z)(function*(y,f){return Wu(y)._set(su(f),"true")})).apply(this,arguments)}function pi(){fi.clear()}function Il(y,f){fi.set(y._key(),f)}function Wu(y){return it(y._redirectPersistence)}function su(y){return $("pendingRedirect",y.config.apiKey,y.name)}function Fo(y,f,g){return function uh(y,f,g){return Fs.apply(this,arguments)}(y,f,g)}function Fs(){return(Fs=(0,_.Z)(function*(y,f,g){const w=Ve(y);ve(y,f,bs),yield w._initializationPromise;const A=Ps(w,g);return yield si(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function D(y,f,g){return function T(y,f,g){return x.apply(this,arguments)}(y,f,g)}function x(){return(x=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y);ve(w.auth,f,bs),yield w.auth._initializationPromise;const A=Ps(w.auth,g);yield si(A,w.auth);const k=yield Ut(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function V(y,f,g){return function K(y,f,g){return te.apply(this,arguments)}(y,f,g)}function te(){return(te=(0,_.Z)(function*(y,f,g){const w=(0,B.m9)(y);ve(w.auth,f,bs),yield w.auth._initializationPromise;const A=Ps(w.auth,g);yield Cs(!1,w,f.providerId),yield si(A,w.auth);const k=yield Ut(w);return A._openRedirect(w.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function xe(y,f){return tt.apply(this,arguments)}function tt(){return(tt=(0,_.Z)(function*(y,f){return yield Ve(y)._initializationPromise,lt(y,f,!1)})).apply(this,arguments)}function lt(y,f){return dt.apply(this,arguments)}function dt(){return(dt=(0,_.Z)(function*(y,f,g=!1){const w=Ve(y),A=Ps(w,f),J=yield new ru(w,A,g).execute();return J&&!g&&(delete J.user._redirectEventId,yield w._persistUserIfCurrent(J.user),yield w._setRedirectUser(null,f)),J})).apply(this,arguments)}function Ut(y){return Et.apply(this,arguments)}function Et(){return(Et=(0,_.Z)(function*(y){const f=cs(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Mn{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function gi(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lo(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!Lo(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Ce(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_a(f))}saveEventToCache(f){this.cachedEventUids.add(_a(f)),this.lastProcessedEventTime=Date.now()}}function _a(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Lo({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Tr(y){return xi.apply(this,arguments)}function xi(){return(xi=(0,_.Z)(function*(y,f={}){return St(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Dl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mm=/^https?/;function Ea(){return(Ea=(0,_.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Tr(y);for(const g of f)try{if(Om(g))return}catch(w){}ze(y,"unauthorized-domain")})).apply(this,arguments)}function Om(y){const f=W(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const J=new URL(y);return""===J.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&J.hostname===w}if(!Mm.test(g))return!1;if(Dl.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const W_=new we(3e4,6e4);function ch(){const y=qt().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let au=null;function rp(y){return au=au||function Nm(y){return new Promise((f,g)=>{var w,A,k;function J(){ch(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ch(),g(Ce(y,"network-request-failed"))},timeout:W_.get()})}if(null===(A=null===(w=qt().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(k=qt().gapi)||void 0===k?void 0:k.load)){const Re=Xs("iframefcb");return qt()[Re]=()=>{gapi.load?J():g(Ce(y,"network-request-failed"))},Ya(`https://apis.google.com/js/api.js?onload=${Re}`).catch(Je=>g(Je))}J()}}).catch(f=>{throw au=null,f})}(y),au}const ip=new we(5e3,15e3),K_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ls=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sp(y){const f=y.config;X(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?at(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:N.SDK_VERSION},A=Ls.get(y.config.apiHost);A&&(w.eid=A);const k=y._getFrameworks();return k.length&&(w.fw=k.join(",")),`${g}?${(0,B.xO)(w).slice(1)}`}function bl(){return bl=(0,_.Z)(function*(y){const f=yield rp(y),g=qt().gapi;return X(g,y,"internal-error"),f.open({where:document.body,url:sp(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K_,dontclear:!0},w=>new Promise(function(){var A=(0,_.Z)(function*(k,J){yield w.restyle({setHideOnLeave:!1});const Re=Ce(y,"network-request-failed"),Je=qt().setTimeout(()=>{J(Re)},ip.get());function gt(){qt().clearTimeout(Je),k(w)}w.ping(gt).then(gt,()=>{J(Re)})});return function(k,J){return A.apply(this,arguments)}}()))}),bl.apply(this,arguments)}const dh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qr{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Tl(y,f,g,w,A,k){X(y.config.authDomain,y,"auth-domain-config-required"),X(y.config.apiKey,y,"invalid-api-key");const J={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:N.SDK_VERSION,eventId:A};if(f instanceof bs){f.setDefaultLanguage(y.languageCode),J.providerId=f.providerId||"",(0,B.xb)(f.getCustomParameters())||(J.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Je,gt]of Object.entries(k||{}))J[Je]=gt}if(f instanceof di){const Je=f.getScopes().filter(gt=>""!==gt);Je.length>0&&(J.scopes=Je.join(","))}y.tenantId&&(J.tid=y.tenantId);const Re=J;for(const Je of Object.keys(Re))void 0===Re[Je]&&delete Re[Je];return`${function dp({config:y}){return y.emulator?at(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,B.xO)(Re).slice(1)}`}const uu="webStorageSupport",hp=class hh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tt,this._completeRedirectFn=lt,this._overrideRedirectResult=Il}_openPopup(f,g,w,A){var k=this;return(0,_.Z)(function*(){var J;ge(null===(J=k.eventManagers[f._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const Re=Tl(f,g,w,W(),A);return function wa(y,f,g,w=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),J=Math.max((window.screen.availWidth-w)/2,0).toString();let Re="";const Je=Object.assign(Object.assign({},dh),{width:w.toString(),height:A.toString(),top:k,left:J}),gt=(0,B.z$)().toLowerCase();g&&(Re=Q(gt)?"_blank":g),F(gt)&&(f=f||"http://localhost",Je.scrollbars="yes");const $t=Object.entries(Je).reduce((ji,[$i,cu])=>`${ji}${$i}=${cu},`,"");if(function xn(y=(0,B.z$)()){var f;return xt(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(gt)&&"_self"!==Re)return function cp(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",Re),new qr(null);const Sn=window.open(f||"",Re,$t);X(Sn,y,"popup-blocked");try{Sn.focus()}catch(ji){}return new qr(Sn)}(f,Re,cs())})()}_openRedirect(f,g,w,A){var k=this;return(0,_.Z)(function*(){return yield k._originValidation(f),function Gr(y){qt().location.href=y}(Tl(f,g,w,W(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:k}=this.eventManagers[g];return A?Promise.resolve(A):(ge(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,_.Z)(function*(){const w=yield function op(y){return bl.apply(this,arguments)}(f),A=new Mn(f);return w.register("authEvent",k=>(X(null==k?void 0:k.authEvent,f,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(uu,{type:uu},A=>{var k;const J=null===(k=null==A?void 0:A[0])||void 0===k?void 0:k[uu];void 0!==J&&g(!!J),ze(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ou(y){return Ea.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return pr()||M()||xt()}};class fp extends class fh{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return ae("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new fp(f)}_finalizeEnroll(f,g,w){return function fl(y,f){return St(y,"POST","/v2/accounts/mfaEnrollment:finalize",ht(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Gu(y,f){return St(y,"POST","/v2/accounts/mfaSignIn:finalize",ht(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ph=(()=>{class y{constructor(){}static assertion(g){return fp._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var gh="@firebase/auth";class gp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,_.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{f((null==w?void 0:w.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,B.Pz)("authIdTokenMaxAge"),function Lm(y){(0,N._registerComponent)(new ce.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:k,authDomain:J}=w.options;return((Re,Je)=>{X(k&&!k.includes(":"),"invalid-api-key",{appName:Re.name}),X(!(null==J?void 0:J.includes(":")),"argument-error",{appName:Re.name});const gt={apiKey:k,authDomain:J,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gr(y)},$t=new Xr(Re,Je,gt);return function Pt(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(it);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}($t,g),$t})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ce.wA("auth-internal",f=>{const g=Ve(f.getProvider("auth").getImmediate());return new gp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(gh,"0.21.5",function Cl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,N.registerVersion)(gh,"0.21.5","esm2017")}("Browser")},2090:(et,Ee,L)=>{L.d(Ee,{$s:()=>Dt,BH:()=>ve,G6:()=>Me,L:()=>fe,LL:()=>Xe,Pz:()=>Te,Sg:()=>$e,UG:()=>ge,US:()=>ce,ZB:()=>ee,ZR:()=>mn,aH:()=>Ce,b$:()=>st,eu:()=>we,hl:()=>Ne,jU:()=>qe,m9:()=>kn,ne:()=>Xi,pd:()=>bn,r3:()=>Un,ru:()=>it,tV:()=>H,uI:()=>ae,vZ:()=>wn,w1:()=>W,xO:()=>Mr,xb:()=>yt,z$:()=>X,zI:()=>at,zd:()=>Or});const ne=function($){const j=[];let P=0;for(let F=0;F<$.length;F++){let M=$.charCodeAt(F);M<128?j[P++]=M:M<2048?(j[P++]=M>>6|192,j[P++]=63&M|128):55296==(64512&M)&&F+1<$.length&&56320==(64512&$.charCodeAt(F+1))?(M=65536+((1023&M)<<10)+(1023&$.charCodeAt(++F)),j[P++]=M>>18|240,j[P++]=M>>12&63|128,j[P++]=M>>6&63|128,j[P++]=63&M|128):(j[P++]=M>>12|224,j[P++]=M>>6&63|128,j[P++]=63&M|128)}return j},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let M=0;M<$.length;M+=3){const Q=$[M],De=M+1<$.length,He=De?$[M+1]:0,vt=M+2<$.length,bt=vt?$[M+2]:0;let xn=(15&He)<<2|bt>>6,kt=63&bt;vt||(kt=64,De||(xn=64)),F.push(P[Q>>2],P[(3&Q)<<4|He>>4],P[xn],P[kt])}return F.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(ne($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let P=0,F=0;for(;P<$.length;){const M=$[P++];if(M<128)j[F++]=String.fromCharCode(M);else if(M>191&&M<224){const Q=$[P++];j[F++]=String.fromCharCode((31&M)<<6|63&Q)}else if(M>239&&M<365){const vt=((7&M)<<18|(63&$[P++])<<12|(63&$[P++])<<6|63&$[P++])-65536;j[F++]=String.fromCharCode(55296+(vt>>10)),j[F++]=String.fromCharCode(56320+(1023&vt))}else{const Q=$[P++],De=$[P++];j[F++]=String.fromCharCode((15&M)<<12|(63&Q)<<6|63&De)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const P=j?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let M=0;M<$.length;){const Q=P[$.charAt(M++)],He=M<$.length?P[$.charAt(M)]:0;++M;const bt=M<$.length?P[$.charAt(M)]:64;++M;const Ct=M<$.length?P[$.charAt(M)]:64;if(++M,null==Q||null==He||null==bt||null==Ct)throw new ue;F.push(Q<<2|He>>4),64!==bt&&(F.push(He<<4&240|bt>>2),64!==Ct&&F.push(bt<<6&192|Ct))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function($){return function($){const j=ne($);return ce.encodeByteArray(j,!0)}($).replace(/\./g,"")},H=function($){try{return ce.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function ee($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const P in j)!j.hasOwnProperty(P)||!je(P)||($[P]=ee($[P],j[P]));return $}function je($){return"__proto__"!==$}const ye=()=>{try{return function be(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if("undefined"==typeof document)return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(P){return}const j=$&&H($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Ce=()=>{var $;return null===($=ye())||void 0===$?void 0:$.config},Te=$=>{var j;return null===(j=ye())||void 0===j?void 0:j[`_${$}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,P)=>{this.resolve=j,this.reject=P})}wrapCallback(j){return(P,F)=>{P?this.reject(P):this.resolve(F),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(P):j(P,F))}}}function $e($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=j||"demo-project",M=$.iat||0,Q=$.sub||$.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:M,exp:M+3600,auth_time:M,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},$);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(De)),""].join(".")}function X(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ae(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(X())}function ge(){var $;const j=null===($=ye())||void 0===$?void 0:$.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(P){return!1}}function qe(){return"object"==typeof self&&self.self===self}function it(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function W(){const $=X();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Me(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ne(){try{return"object"==typeof indexedDB}catch($){return!1}}function we(){return new Promise(($,j)=>{try{let P=!0;const F="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(F);M.onsuccess=()=>{M.result.close(),P||self.indexedDB.deleteDatabase(F),$(!0)},M.onupgradeneeded=()=>{P=!1},M.onerror=()=>{var Q;j((null===(Q=M.error)||void 0===Q?void 0:Q.message)||"")}}catch(P){j(P)}})}function at(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class mn extends Error{constructor(j,P,F){super(P),this.code=j,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe.prototype.create)}}class Xe{constructor(j,P,F){this.service=j,this.serviceName=P,this.errors=F}create(j,...P){const F=P[0]||{},M=`${this.service}/${j}`,Q=this.errors[j],De=Q?function ht($,j){return $.replace(St,(P,F)=>{const M=j[F];return null!=M?String(M):`<${F}?>`})}(Q,F):"Error";return new mn(M,`${this.serviceName}: ${De} (${M}).`,F)}}const St=/\{\$([^}]+)}/g;function Un($,j){return Object.prototype.hasOwnProperty.call($,j)}function yt($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function wn($,j){if($===j)return!0;const P=Object.keys($),F=Object.keys(j);for(const M of P){if(!F.includes(M))return!1;const Q=$[M],De=j[M];if(an(Q)&&an(De)){if(!wn(Q,De))return!1}else if(Q!==De)return!1}for(const M of F)if(!P.includes(M))return!1;return!0}function an($){return null!==$&&"object"==typeof $}function Mr($){const j=[];for(const[P,F]of Object.entries($))Array.isArray(F)?F.forEach(M=>{j.push(encodeURIComponent(P)+"="+encodeURIComponent(M))}):j.push(encodeURIComponent(P)+"="+encodeURIComponent(F));return j.length?"&"+j.join("&"):""}function Or($){const j={};return $.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[M,Q]=F.split("=");j[decodeURIComponent(M)]=decodeURIComponent(Q)}}),j}function bn($){const j=$.indexOf("?");if(!j)return"";const P=$.indexOf("#",j);return $.substring(j,P>0?P:void 0)}function Xi($,j){const P=new Zt($,j);return P.subscribe.bind(P)}class Zt{constructor(j,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{j(this)}).catch(F=>{this.error(F)})}next(j){this.forEachObserver(P=>{P.next(j)})}error(j){this.forEachObserver(P=>{P.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,P,F){let M;if(void 0===j&&void 0===P&&void 0===F)throw new Error("Missing Observer.");M=function nt($,j){if("object"!=typeof $||null===$)return!1;for(const P of j)if(P in $&&"function"==typeof $[P])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:P,complete:F},void 0===M.next&&(M.next=$r),void 0===M.error&&(M.error=$r),void 0===M.complete&&(M.complete=$r);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch(De){}}),this.observers.push(M),Q}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,j)}sendOne(j,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{P(this.observers[j])}catch(F){"undefined"!=typeof console&&console.error&&console.error(F)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $r(){}function Dt($,j=1e3,P=2){const F=j*Math.pow(P,$),M=Math.round(.5*F*(Math.random()-.5)*2);return Math.min(144e5,F+M)}function kn($){return $&&$._delegate?$._delegate:$}},4629:(et,Ee,L)=>{var _=L(5e3);let B=null;function N(){return B}const ue=new _.OlP("DocumentToken");let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function fe(){return(0,_.LFG)(G)}()},providedIn:"platform"}),n})();const H=new _.OlP("Location Initialized");let G=(()=>{class n extends ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ee()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ee()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function je(){return new G((0,_.LFG)(ue))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ye(n){const e=(0,_.LFG)(ue).location;return new ze((0,_.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new _.OlP("appBaseHref");let ze=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Ue(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Ue(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie),_.LFG(Ge,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Ue(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Ue(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie),_.LFG(Ge,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(t,r){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(X(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function $e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,X(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=be,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(_.LFG(pe),_.LFG(ie))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ve(){return new Te((0,_.LFG)(pe),(0,_.LFG)(ie))}()},providedIn:"root"}),n})();function X(n){return n.replace(/\/index.html$/,"")}let Ts=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function Pr(n){return"server"===n}let Ba=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new ja((0,_.LFG)(ue),window)}),n})();class ja{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function is(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Nu(this.window.history)||Nu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Nu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Cs extends class sa extends class ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){B||(B=n)}(new Cs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $a(){return gn=gn||document.querySelector("base"),gn?gn.getAttribute("href"):null}();return null==t?null:function zs(n){oa=oa||document.createElement("a"),oa.setAttribute("href",n);const e=oa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){gn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function yo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let oa,gn=null;const nr=new _.OlP("TRANSITION_ID"),Bn=[{provide:_.ip1,useFactory:function Ha(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[nr,ue,_.zs3],multi:!0}];class ss{static init(){(0,_.VLi)(new ss)}addToWindow(e){_.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const o=_.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const p=function(v){d=d||v,u--,0==u&&r(d)};o.forEach(function(v){v.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let mr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const bo=new _.OlP("EventManagerPlugins");let Fi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(bo),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class ku{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ss=(()=>{class n extends ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(As),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(As))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function As(n){N().remove(n)}const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qs=/%COMP%/g;function xs(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?xs(n,o,t):(o=o.replace(qs,n),t.push(o))}return t}function Ae(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Fu=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Tn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Li(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case _.ifc.ShadowDom:return new Lu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=xs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Fi),_.LFG(Ss),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Tn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=wt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=wt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,o&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ae(r)):this.eventManager.addEventListener(e,t,Ae(r))}}class Li extends Tn{constructor(e,t,r,o){super(e),this.component=r;const u=xs(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function To(n){return"_ngcontent-%COMP%".replace(qs,n)}(o+"-"+r.id),this.hostAttr=function Zd(n){return"_nghost-%COMP%".replace(qs,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Lu extends Tn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=xs(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const p=document.createElement("style");p.textContent=u[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ua=(()=>{class n extends ku{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Yd=["alt","control","meta","shift"],ol={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ws={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ui=(()=>{class n extends ku{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Yd.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),d+=v+".")}),d+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=o,p.fullKey=d,p}static getEventFullKey(t){let r="",o=function Co(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ws.hasOwnProperty(e)&&(e=Ws[e]))}return ol[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Yd.forEach(u=>{u!=o&&yr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const al=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function So(){Cs.makeCurrent(),ss.init()},multi:!0},{provide:ue,useFactory:function Qd(){return(0,_.RDi)(document),document},deps:[]}]),ca=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function ti(){return new _.qLn},deps:[]},{provide:bo,useClass:ua,multi:!0,deps:[ue,_.R0b,_.Lbi]},{provide:bo,useClass:Ui,multi:!0,deps:[ue]},{provide:Fu,useClass:Fu,deps:[Fi,Ss,_.AFp]},{provide:_.FYo,useExisting:Fu},{provide:ei,useExisting:Ss},{provide:Ss,useClass:Ss,deps:[ue]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Fi,useClass:Fi,deps:[bo,_.R0b]},{provide:class In{},useClass:mr,deps:[]}];let Uu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:nr,useExisting:_.AFp},Bn]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:ca,imports:[Ts,_.hGG]}),n})();"undefined"!=typeof window&&window;var Ci=L(2011),Ys=L(7579),vr=L(7669),Rn=L(8996);function Tt(...n){const e=(0,vr.yG)(n);return(0,Rn.D)(n,e)}var Si=L(8306),pa=L(6451),cs=L(5363),qa=L(8421),qt=L(4482),Gr=L(5403);function Cn(n,e){return(0,qt.e)((t,r)=>{let o=null,u=0,d=!1;const p=()=>d&&!o&&r.complete();t.subscribe((0,Gr.x)(r,v=>{null==o||o.unsubscribe();let b=0;const S=u++;(0,qa.Xf)(n(v,S)).subscribe(o=(0,Gr.x)(r,O=>r.next(e?e(v,O,S,b++):O),()=>{o=null,p()}))},()=>{d=!0,p()}))})}var jt=L(4004),Ms=L(6063);class th extends Ys.x{constructor(e=1/0,t=1/0,r=Ms.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let p=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)p=v;p&&r.splice(0,p+1)}}}var gl=L(3099);function Wa(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,gl.B)({connector:()=>new th(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Qs=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ir(n,e){return(0,qt.e)((t,r)=>{let o=0;t.subscribe((0,Gr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var ri=L(515);function hi(n){return n<=0?()=>ri.E:(0,qt.e)((e,t)=>{let r=0;e.subscribe((0,Gr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function ga(n){return(0,qt.e)((e,t)=>{let r=!1;e.subscribe((0,Gr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ls(n=ml){return(0,qt.e)((e,t)=>{let r=!1;e.subscribe((0,Gr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ml(){return new Qs}var Vi=L(4671);function Os(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ir((o,u)=>n(o,u,r)):Vi.y,hi(1),t?ga(e):ls(()=>new Qs))}var Bi=L(576);function Mo(n,e){return(0,Bi.m)(e)?Cn(()=>n,e):Cn(()=>n)}var Ka=L(9468),Qn=L(2122);L(259);var me=L(5861),Ns=L(9681),vl=L(4859),cn=L(2090),No=L(1877);const oh=new Map,ep={activated:!1,tokenObservers:[]},eo={initialized:!1,enabled:!1};function kr(n){return oh.get(n)||Object.assign({},ep)}function to(){return eo}class ya{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new cn.BH,yield function va(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new cn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _r=new cn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ah(n){if(!kr(n).activated)throw _r.create("use-before-activation",{appName:n.name})}function or(n,e){return no.apply(this,arguments)}function no(){return(no=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const O=yield o.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,p;try{d=yield fetch(n,u)}catch(O){throw _r.create("fetch-network-error",{originalErrorMessage:null==O?void 0:O.message})}if(200!==d.status)throw _r.create("fetch-status-error",{httpStatus:d.status});try{p=yield d.json()}catch(O){throw _r.create("fetch-parse-error",{originalErrorMessage:null==O?void 0:O.message})}const v=p.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw _r.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(v[1]),S=Date.now();return{token:p.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}})).apply(this,arguments)}function eu(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Po="firebase-app-check-store";let nu=null;function fi(){return nu||(nu=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(_r.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Po,{keyPath:"compositeKey"})}}catch(t){e(_r.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),nu)}function pi(){return(pi=(0,me.Z)(function*(n,e){const r=(yield fi()).transaction(Po,"readwrite"),u=r.objectStore(Po).put({compositeKey:n,value:e});return new Promise((d,p)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var b;p(_r.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Fo=new No.Yd("@firebase/app-check");function D(n,e){return(0,cn.hl)()?function iu(n,e){return function ko(n,e){return pi.apply(this,arguments)}(function su(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fo.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function V(){return to().enabled}function K(){return te.apply(this,arguments)}function te(){return(te=(0,me.Z)(function*(){const n=to();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const tt={error:"UNKNOWN_ERROR"};function lt(n){return cn.US.encodeString(JSON.stringify(n),!1)}function dt(n){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,me.Z)(function*(n,e=!1){const t=n.app;ah(t);const r=kr(t);let u,o=r.token;if(o&&!gi(o)&&(r.token=void 0,o=void 0),!o){const v=yield r.cachedTokenPromise;v&&(gi(v)?o=v:yield D(t,void 0))}if(!e&&o&&gi(o))return{token:o.token};let p,d=!1;if(V()){r.exchangeTokenPromise||(r.exchangeTokenPromise=or(eu(t,yield K()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const v=yield r.exchangeTokenPromise;return yield D(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield kr(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Fo.warn(v.message):Fo.error(v),u=v}return o?u?p=gi(o)?{token:o.token,internalError:u}:Tr(u):(p={token:o.token},r.token=o,yield D(t,o)):p=Tr(u),d&&Lo(t,p),p})).apply(this,arguments)}function Lr(n,e){const t=kr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Mn(n){const{app:e}=n,t=kr(e);let r=t.tokenRefresher;r||(r=function _a(n){const{app:e}=n;return new ya((0,me.Z)(function*(){let r;if(r=kr(e).token?yield dt(n,!0):yield dt(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Lo(n,e){const t=kr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function gi(n){return n.expireTimeMillis-Date.now()>0}function Tr(n){return{token:lt(tt),error:n}}class xi{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=kr(this.app);for(const t of e)Lr(this.app,t.next);return Promise.resolve()}}const lp="app-check-internal";!function Tl(){(0,Ns._registerComponent)(new vl.wA("app-check",n=>function Dl(n,e){return new xi(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lp).initialize()})),(0,Ns._registerComponent)(new vl.wA(lp,n=>function Mm(n){return{getToken:e=>dt(n,e),addTokenListener:e=>function Et(n,e,t,r){const{app:o}=n,u=kr(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&gi(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),Mn(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Mn(n))}(n,"INTERNAL",e),removeTokenListener:e=>Lr(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ns.registerVersion)("@firebase/app-check","0.6.4")}();class hh{constructor(){return(0,Qn.vb)("app-check")}}"undefined"!=typeof window&&window;var f=L(9260);const w=new _.OlP("angularfire2.auth.use-emulator"),A=new _.OlP("angularfire2.auth.settings"),k=new _.OlP("angularfire2.auth.tenant-id"),J=new _.OlP("angularfire2.auth.langugage-code"),Re=new _.OlP("angularfire2.auth.use-device-language"),Je=new _.OlP("angularfire.auth.persistence"),gt=(n,e,t,r,o,u,d,p)=>(0,Ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),d)for(const[b,S]of Object.entries(d))v.settings[b]=S;return p&&v.setPersistence(p),v},[t,r,o,u,d,p]);let $t=(()=>{class n{constructor(t,r,o,u,d,p,v,b,S,O,q,Z){const he=new Ys.x,Pe=Tt(void 0).pipe((0,cs.Q)(d.outsideAngular),Cn(()=>u.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9568)))),(0,jt.U)(()=>(0,Ci.on)(t,u,r)),(0,jt.U)(Ye=>gt(Ye,u,p,b,S,O,v,q)),Wa({bufferSize:1,refCount:!1}));if(Pr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tt(null);else{Pe.pipe(Os()).subscribe();const Xt=Pe.pipe(Cn(Kt=>Kt.getRedirectResult().then(Bt=>Bt,()=>null)),Qn.iC,Wa({bufferSize:1,refCount:!1})),sn=Pe.pipe(Cn(Kt=>new Si.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Kt.onAuthStateChanged(en=>Bt.next(en),en=>Bt.error(en),()=>Bt.complete()))})))),Vt=Pe.pipe(Cn(Kt=>new Si.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Kt.onIdTokenChanged(en=>Bt.next(en),en=>Bt.error(en),()=>Bt.complete()))}))));this.authState=Xt.pipe(Mo(sn),(0,Ka.R)(d.outsideAngular),(0,cs.Q)(d.insideAngular)),this.user=Xt.pipe(Mo(Vt),(0,Ka.R)(d.outsideAngular),(0,cs.Q)(d.insideAngular)),this.idToken=this.user.pipe(Cn(Kt=>Kt?(0,Rn.D)(Kt.getIdToken()):Tt(null))),this.idTokenResult=this.user.pipe(Cn(Kt=>Kt?(0,Rn.D)(Kt.getIdTokenResult()):Tt(null))),this.credential=(0,pa.T)(Xt,he,this.authState.pipe(ir(Kt=>!Kt))).pipe((0,jt.U)(Kt=>(null==Kt?void 0:Kt.user)?Kt:null),(0,Ka.R)(d.outsideAngular),(0,cs.Q)(d.insideAngular))}return(0,Ci.pX)(this,Pe,u,{spy:{apply:(Ye,Xt,sn)=>{(Ye.startsWith("signIn")||Ye.startsWith("createUser"))&&sn.then(Vt=>he.next(Vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Ci.Dh),_.LFG(Ci.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Qn.HU),_.LFG(w,8),_.LFG(A,8),_.LFG(k,8),_.LFG(J,8),_.LFG(Re,8),_.LFG(Je,8),_.LFG(hh,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Sn=(()=>{class n{constructor(){f.Z.registerVersion("angularfire",Qn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[$t]}),n})();var ji=L(4986),$i=L(8189);function Sl(...n){return function cu(){return(0,$i.J)(1)}()((0,Rn.D)(n,(0,vr.yG)(n)))}function lu(...n){const e=(0,vr.yG)(n);return(0,qt.e)((t,r)=>{(e?Sl(n,t,e):Sl(n,t)).subscribe(r)})}function Ku(){return(0,qt.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function yh(n,e,t,r,o){return(u,d)=>{let p=t,v=e,b=0;u.subscribe((0,Gr.x)(d,S=>{const O=b++;v=p?n(v,S,O):(p=!0,S),r&&d.next(v)},o&&(()=>{p&&d.next(v),d.complete()})))}}function Ri(n,e){return(0,qt.e)(yh(n,e,arguments.length>=2,!0))}function _h(n,e){return n===e}L(9568);var ut,Zu=L(3942),Vm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Hi={},_p=_p||{},Ft=Vm||self;function Eh(){}function Yu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function du(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var wh="closure_uid_"+(1e9*Math.random()>>>0),Bm=0;function jm(n,e,t){return n.call.apply(n.bind,arguments)}function Ih(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function mi(n,e,t){return(mi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jm:Ih).apply(null,arguments)}function Dh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function oi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[o].apply(r,d)}}function hu(){this.s=this.s,this.o=this.o}hu.prototype.s=!1,hu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Z_(n){Object.prototype.hasOwnProperty.call(n,wh)&&n[wh]||(n[wh]=++Bm)}(this)},hu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ep=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Al(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wp(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Yu(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function ar(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ar.prototype.h=function(){this.defaultPrevented=!0};var bI=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",Eh,e),Ft.removeEventListener("test",Eh,e)}catch(t){}return n}();function Ip(n){return/^[\s\xa0]*$/.test(n)}var TI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $m(n,e){return n<e?-1:n>e?1:0}function Qu(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function Us(n){return-1!=Qu().indexOf(n)}function Dp(n){return Dp[" "](n),n}Dp[" "]=Eh;var ro,n,X_=Us("Opera"),Xu=Us("Trident")||Us("MSIE"),J_=Us("Edge"),Hm=J_||Xu,e0=Us("Gecko")&&!(-1!=Qu().toLowerCase().indexOf("webkit")&&!Us("Edge"))&&!(Us("Trident")||Us("MSIE"))&&!Us("Edge"),CI=-1!=Qu().toLowerCase().indexOf("webkit")&&!Us("Edge");function t0(){var n=Ft.document;return n?n.documentMode:void 0}e:{var Ju="",Gm=(n=Qu(),e0?/rv:([^\);]+)(\)|;)/.exec(n):J_?/Edge\/([\d\.]+)/.exec(n):Xu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):CI?/WebKit\/(\S+)/.exec(n):X_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gm&&(Ju=Gm?Gm[1]:""),Xu){var n0=t0();if(null!=n0&&n0>parseFloat(Ju)){ro=String(n0);break e}}ro=Ju}var BT={};var s0=Ft.document&&Xu&&(t0()||parseInt(ro,10))||void 0;function bh(n,e){if(ar.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(e0){e:{try{Dp(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:AI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&bh.X.h.call(this)}}oi(bh,ar);var AI={2:"touch",3:"pen",4:"mouse"};bh.prototype.h=function(){bh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Th="closure_listenable_"+(1e6*Math.random()|0),xI=0;function $T(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++xI,this.ba=this.ea=!1}function bp(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function xl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function zm(n){const e={};for(const t in n)e[t]=n[t];return e}const io="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rl(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<io.length;u++)t=io[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ch(n){this.src=n,this.g={},this.h=0}function Tp(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Ep(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(bp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Cp(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Ch.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Cp(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new $T(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var o0="closure_lm_"+(1e6*Math.random()|0),a0={};function RI(n,e,t,r,o){if(r&&r.once)return Ap(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)RI(n,e[u],t,r,o);return null}return t=Ym(t),n&&n[Th]?n.N(e,t,du(r)?!!r.capture:!!r,o):Sp(n,e,t,!1,r,o)}function Sp(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=du(o)?!!o.capture:!!o,p=Km(n);if(p||(n[o0]=p=new Ch(n)),(t=p.add(e,t,r,d,u)).proxy)return t;if(r=function qm(){const e=OI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)bI||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Wm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ap(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ap(n,e[u],t,r,o);return null}return t=Ym(t),n&&n[Th]?n.O(e,t,du(r)?!!r.capture:!!r,o):Sp(n,e,t,!0,r,o)}function MI(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)MI(n,e[u],t,r,o);else r=du(r)?!!r.capture:!!r,t=Ym(t),n&&n[Th]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Cp(u=n.g[e],t,r,o))&&(bp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Km(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Cp(e,t,r,o)),(t=-1<n?e[n]:null)&&u0(t))}function u0(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Th])Tp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Wm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Km(e))?(Tp(t,n),0==t.h&&(t.src=null,e[o0]=null)):bp(n)}}}function Wm(n){return n in a0?a0[n]:a0[n]="on"+n}function OI(n,e){if(n.ba)n=!0;else{e=new bh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&u0(n),n=t.call(r,e)}return n}function Km(n){return(n=n[o0])instanceof Ch?n:null}var Zm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ym(n){return"function"==typeof n?n:(n[Zm]||(n[Zm]=function(e){return n.handleEvent(e)}),n[Zm])}function Ur(){hu.call(this),this.i=new Ch(this),this.P=this,this.I=null}function Cr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ar(e,n);else if(e instanceof ar)e.target=e.target||n;else{var o=e;Rl(e=new ar(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=xp(d,r,!0,e)&&o}if(o=xp(d=e.g=n,r,!0,e)&&o,o=xp(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=xp(d=e.g=t[u],r,!1,e)&&o}function xp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var p=d.listener,v=d.ha||d.src;d.ea&&Tp(n.i,d),o=!1!==p.call(v,r)&&o}}return o&&!r.defaultPrevented}oi(Ur,hu),Ur.prototype[Th]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){MI(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)bp(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Sh=Ft.JSON.stringify;function NI(){var n=l0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Jm,c0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new PI,n=>n.reset());class PI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qm(n){Ft.setTimeout(()=>{throw n},0)}function Xm(n,e){Jm||function kI(){var n=Ft.Promise.resolve(void 0);Jm=function(){n.then(FI)}}(),ey||(Jm(),ey=!0),l0.add(n,e)}var ey=!1,l0=new class Sr{constructor(){this.h=this.g=null}add(e,t){const r=c0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function FI(){for(var n;n=NI();){try{n.h.call(n.g)}catch(t){Qm(t)}var e=c0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ey=!1}function ty(n,e){Ur.call(this),this.h=n||1,this.g=e||Ft,this.j=mi(this.lb,this),this.l=Date.now()}function d0(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ec(n,e,t){if("function"==typeof n)t&&(n=mi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function Rp(n){n.g=ec(()=>{n.g=null,n.i&&(n.i=!1,Rp(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}oi(ty,Ur),(ut=ty.prototype).ca=!1,ut.R=null,ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Cr(this,"tick"),this.ca&&(d0(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){ty.X.M.call(this),d0(this),delete this.g};class LI extends hu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Rp(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ah(n){hu.call(this),this.h=n,this.g={}}oi(Ah,hu);var Mp=[];function h0(n,e,t,r){Array.isArray(t)||(t&&(Mp[0]=t.toString()),t=Mp);for(var o=0;o<t.length;o++){var u=RI(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function f0(n){xl(n.g,function(e,t){this.g.hasOwnProperty(t)&&u0(e)},n),n.g={}}function tc(){this.g=!0}function Ml(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function jI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Sh(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Ah.prototype.M=function(){Ah.X.M.call(this),f0(this)},Ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tc.prototype.Aa=function(){this.g=!1},tc.prototype.info=function(){};var nc={},p0=null;function Op(){return p0=p0||new Ur}function g0(n){ar.call(this,nc.Pa,n)}function xh(n){const e=Op();Cr(e,new g0(e))}function rc(n,e){ar.call(this,nc.STAT_EVENT,n),this.stat=e}function zn(n){const e=Op();Cr(e,new rc(e,n))}function $I(n,e){ar.call(this,nc.Qa,n),this.size=e}function Np(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}nc.Pa="serverreachability",oi(g0,ar),nc.STAT_EVENT="statevent",oi(rc,ar),nc.Qa="timingevent",oi($I,ar);var Rh={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},HI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Pp(){}function ny(){}Pp.prototype.h=null;var iy,Mh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function kp(){ar.call(this,"d")}function ry(){ar.call(this,"c")}function Gi(){}function Oh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ah(this),this.O=zI,this.T=new ty(n=Hm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new sy}function sy(){this.i=null,this.g="",this.h=!1}oi(kp,ar),oi(ry,ar),oi(Gi,Pp),Gi.prototype.g=function(){return new XMLHttpRequest},Gi.prototype.i=function(){return{}},iy=new Gi;var zI=45e3,oy={},Fp={};function ay(n,e,t){n.K=1,n.v=ic(so(e)),n.s=t,n.P=!0,uy(n,null)}function uy(n,e){n.F=Date.now(),Ot(n),n.A=so(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),hy(t.i,"t",r),n.C=0,t=n.l.H,n.h=new sy,n.g=dD(n.l,t?e:null,!n.s),0<n.N&&(n.L=new LI(mi(n.La,n,n.g),n.N)),h0(n.S,n.g,"readystatechange",n.ib),e=n.H?zm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),xh(),function UI(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",p=u.split("&"),v=0;v<p.length;v++){var b=p[v].split("=");if(1<b.length){var S=b[0];b=b[1];var O=S.split("_");d=2<=O.length&&"type"==O[1]?d+(S+"=")+b+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function m0(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function y0(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=qI(n,t),o==Fp){4==e&&(n.o=4,zn(14),r=!1),Ml(n.j,n.m,null,"[Incomplete Response]");break}if(o==oy){n.o=4,zn(15),Ml(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ml(n.j,n.m,o,null),fs(n,o)}m0(n)&&o!=Fp&&o!=oy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),my(e),e.K=!0,zn(11))):(Ml(n.j,n.m,t,"[Invalid Chunked Response]"),Uo(n),Ol(n))}function qI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Fp:(t=Number(e.substring(t,r)),isNaN(t)?oy:(r+=1)+t>e.length?Fp:(e=e.substr(r,t),n.C=r+t,e))}function Ot(n){n.V=Date.now()+n.O,v0(n,n.O)}function v0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Np(mi(n.gb,n),e)}function Nh(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Ol(n){0==n.l.G||n.I||M0(n.l,n)}function Uo(n){Nh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,d0(n.T),f0(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function fs(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||w0(t.h,n)))if(!n.J&&w0(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Np(mi(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;yi(t),Lh(t)}zp(t),zn(18)}if(1>=iD(t.h)&&t.ja){try{t.ja()}catch(b){}t.ja=void 0}}else Bl(t,11)}else if((n.J||t.g==n)&&yi(t),!Ip(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const S=b[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const O=b[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const q=b[5];null!=q&&"number"==typeof q&&0<q&&(t.J=r=1.5*q,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const he=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var u=r.h;u.g||-1==he.indexOf("spdy")&&-1==he.indexOf("quic")&&-1==he.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(I0(u,u.h),u.h=null))}if(r.D){const Pe=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(r.za=Pe,On(r.F,r.D,Pe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=yy(r,r.H?r.ka:null,r.V),d.J){sD(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Nh(p),Ot(p)),r.g=d}else x0(r);0<t.i.length&&Gp(t)}else"stop"!=b[0]&&"close"!=b[0]||Bl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Bl(t,7):Fh(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}xh()}catch(b){}}function Lp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Yu(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function WI(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Yu(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function _0(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Yu(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ut=Oh.prototype).setTimeout=function(n){this.O=n},ut.ib=function(n){n=n.target;const e=this.L;e&&3==ps(n)?e.l():this.La(n)},ut.La=function(n){try{if(n==this.g)e:{const S=ps(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||Hm||this.g&&(this.h.h||this.g.fa()||dc(this.g)))){this.I||4!=S||7==e||xh(),Nh(this);var t=this.g.aa();this.Y=t;t:if(m0(this)){var r=dc(this.g);n="";var o=r.length,u=4==ps(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Uo(this),Ol(this);var d="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function VI(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,v=this.g;if((p=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ip(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,zn(12),Uo(this),Ol(this);break e}Ml(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fs(this,t)}this.P?(y0(this,S,d),Hm&&this.i&&3==S&&(h0(this.S,this.T,"tick",this.hb),this.T.start())):(Ml(this.j,this.m,d,null),fs(this,d)),4==S&&Uo(this),this.i&&!this.I&&(4==S?M0(this.l,this):(this.i=!1,Ot(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,zn(12)):(this.o=0,zn(13)),Uo(this),Ol(this)}}}catch(S){}},ut.hb=function(){if(this.g){var n=ps(this.g),e=this.g.fa();this.C<e.length&&(Nh(this),y0(this,n,e),this.i&&4!=n&&Ot(this))}},ut.cancel=function(){this.I=!0,Uo(this)},ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function BI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xh(),zn(17)),Uo(this),this.o=2,Ol(this)):v0(this,this.V-n)};var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fu){this.h=void 0!==e?e:n.h,ly(this,n.j),this.s=n.s,this.g=n.g,Ph(this,n.m),this.l=n.l,e=n.i;var t=new Nl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),KI(this,t),this.o=n.o}else n&&(t=String(n).match(Vo))?(this.h=!!e,ly(this,t[1]||"",!0),this.s=sc(t[2]||""),this.g=sc(t[3]||"",!0),Ph(this,t[4]),this.l=sc(t[5]||"",!0),KI(this,t[6]||"",!0),this.o=sc(t[7]||"")):(this.h=!!e,this.i=new Nl(null,this.h))}function so(n){return new fu(n)}function ly(n,e,t){n.j=t?sc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ph(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function KI(n,e,t){e instanceof Nl?(n.i=e,function tD(n,e){e&&!n.j&&(ac(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(E0(this,r),hy(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=oc(e,XI)),n.i=new Nl(e,n.h))}function On(n,e,t){n.i.set(e,t)}function ic(n){return On(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function oc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,dy),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function dy(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(oc(e,ZI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(oc(e,ZI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(oc(t,"/"==t.charAt(0)?QI:YI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",oc(t,JI)),n.join("")};var ZI=/[#\/\?@]/g,YI=/[#\?:]/g,QI=/[#\?]/g,XI=/[#\?@]/g,JI=/#/g;function Nl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ac(n){n.g||(n.g=new Map,n.h=0,n.i&&function cy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function E0(n,e){ac(n),e=uc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function eD(n,e){return ac(n),e=uc(n,e),n.g.has(e)}function hy(n,e,t){E0(n,e),0<t.length&&(n.i=null,n.g.set(uc(n,e),Al(t)),n.h+=t.length)}function uc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nD(n){this.l=n||HT,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ga&&Ft.g.Ga()&&Ft.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=Nl.prototype).add=function(n,e){ac(this),this.i=null,n=uc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){ac(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ut.oa=function(){ac(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ut.W=function(n){ac(this);let e=[];if("string"==typeof n)eD(this,n)&&(e=e.concat(this.g.get(uc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return ac(this),this.i=null,eD(this,n=uc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var HT=10;function rD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iD(n){return n.h?1:n.g?n.g.size:0}function w0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function I0(n,e){n.g?n.g.add(e):n.h=e}function sD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function oD(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Al(n.i)}function D0(){}function GT(){this.g=new D0}function pu(n,e,t){const r=t||"";try{Lp(n,function(o,u){let d=o;du(o)&&(d=Sh(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Up(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Pl(n){this.l=n.ac||null,this.j=n.jb||!1}function kl(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Vp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nD.prototype.cancel=function(){if(this.i=oD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},D0.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},D0.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},oi(Pl,Pp),Pl.prototype.g=function(){return new kl(this.l,this.j)},Pl.prototype.i=function(n){return function(){return n}}({}),oi(kl,Ur);var Vp=0;function Bp(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function kh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vs(n)}function Vs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=kl.prototype).open=function(n,e){if(this.readyState!=Vp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Vs(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kh(this)),this.readyState=Vp},ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Ft.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bp(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kh(this):Vs(this),3==this.readyState&&Bp(this)}},ut.Va=function(n){this.g&&(this.response=this.responseText=n,kh(this))},ut.Ua=function(n){this.g&&(this.response=n,kh(this))},ut.ga=function(){this.g&&kh(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var b0=Ft.JSON.parse;function ur(n){Ur.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jp,this.K=this.L=!1}oi(ur,Ur);var jp="",aD=/^https?$/i,T0=["POST","PUT"];function C0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Fl(n),Ll(n)}function Fl(n){n.D||(n.D=!0,Cr(n,"complete"),Cr(n,"error"))}function cc(n){if(n.h&&void 0!==_p&&(!n.C[1]||4!=ps(n)||2!=n.aa()))if(n.v&&4==ps(n))ec(n.Ha,0,n);else if(Cr(n,"readystatechange"),4==ps(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(Vo)[1]||null;if(!o&&Ft.self&&Ft.self.location){var u=Ft.self.location.protocol;o=u.substr(0,u.length-1)}r=!aD.test(o?o.toLowerCase():"")}t=r}if(t)Cr(n,"complete"),Cr(n,"success");else{n.m=6;try{var d=2<ps(n)?n.g.statusText:""}catch(v){d=""}n.j=d+" ["+n.aa()+"]",Fl(n)}}finally{Ll(n)}}}function Ll(n,e){if(n.g){lc(n);const t=n.g,r=n.C[0]?Eh:null;n.g=null,n.C=null,e||Cr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function lc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function ps(n){return n.g?n.g.readyState:0}function dc(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function S0(n){let e="";return xl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function $p(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=S0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):On(n,e,t))}function Ul(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Hp(n){this.Ca=0,this.i=[],this.j=new tc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ul("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ul("baseRetryDelayMs",5e3,n),this.bb=Ul("retryDelaySeedMs",1e4,n),this.$a=Ul("forwardChannelMaxRetries",2,n),this.ta=Ul("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new nD(n&&n.concurrentRequestLimit),this.Fa=new GT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Fh(n){if(Uh(n),3==n.G){var e=n.U++,t=so(n.F);On(t,"SID",n.I),On(t,"RID",e),On(t,"TYPE","terminate"),Vl(n,t),(e=new Oh(n,n.j,e,void 0)).K=2,e.v=ic(so(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=dD(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ot(e)}lD(n)}function Lh(n){n.g&&(my(n),n.g.cancel(),n.g=null)}function Uh(n){Lh(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),yi(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function Gp(n){rD(n.h)||n.m||(n.m=!0,Xm(n.Ja,n),n.C=0)}function cD(n,e){var t;t=e?e.m:n.U++;const r=so(n.F);On(r,"SID",n.I),On(r,"RID",t),On(r,"AID",n.T),Vl(n,r),n.o&&n.s&&$p(r,n.o,n.s),t=new Oh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=gy(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),I0(n.h,t),ay(t,r,e)}function Vl(n,e){n.ia&&xl(n.ia,function(t,r){On(e,r,t)}),n.l&&Lp({},function(t,r){On(e,r,t)})}function gy(n,e,t){t=Math.min(n.i.length,t);var r=n.l?mi(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let p=!0;for(let v=0;v<t;v++){let b=o[v].h;const S=o[v].g;if(b-=u,0>b)u=Math.max(0,o[v].h-100),p=!1;else try{pu(S,d,"req"+b+"_")}catch(O){r&&r(S)}}if(p){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function x0(n){n.g||n.u||(n.Z=1,Xm(n.Ia,n),n.A=0)}function zp(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Np(mi(n.Ia,n),O0(n,n.A)),n.A++,0))}function my(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function R0(n){n.g=new Oh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=so(n.sa);On(e,"RID","rpc"),On(e,"SID",n.I),On(e,"CI",n.L?"0":"1"),On(e,"AID",n.T),On(e,"TYPE","xmlhttp"),Vl(n,e),n.o&&n.s&&$p(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=ic(so(e)),t.s=null,t.P=!0,uy(t,n)}function yi(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function M0(n,e){var t=null;if(n.g==e){yi(n),my(n),n.g=null;var r=2}else{if(!w0(n.h,e))return;t=e.D,sD(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Cr(r=Op(),new $I(r,t)),Gp(n)}else x0(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function A0(n,e){return!(iD(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Np(mi(n.Ja,n,e),O0(n,n.C)),n.C++,0)))}(n,e)||2==r&&zp(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Bl(n,5);break;case 4:Bl(n,10);break;case 3:Bl(n,6);break;default:Bl(n,2)}}function O0(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Bl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=mi(n.kb,n);t||(t=new fu("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||ly(t,"https"),ic(t)),function py(n,e){const t=new tc;if(Ft.Image){const r=new Image;r.onload=Dh(Up,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Dh(Up,t,r,"TestLoadImage: error",!1,e),r.onabort=Dh(Up,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dh(Up,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zn(2);n.G=0,n.l&&n.l.va(e),lD(n),Uh(n)}function lD(n){if(n.G=0,n.la=[],n.l){const e=oD(n.h);(0!=e.length||0!=n.i.length)&&(wp(n.la,e),wp(n.la,n.i),n.h.i.length=0,Al(n.i),n.i.length=0),n.l.ua()}}function yy(n,e,t){var r=t instanceof fu?so(t):new fu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Ph(r,r.m);else{var o=Ft.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new fu(null,void 0);r&&ly(u,r),e&&(u.g=e),o&&Ph(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&On(r,t,e),On(r,"VER",n.ma),Vl(n,r),r}function dD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Da&&!n.ra?new Pl({jb:!0}):n.ra)).Ka(n.H),e}function N0(){}function jl(){if(Xu&&!(10<=Number(s0)))throw Error("Environmental error: no available transport.")}function zi(n,e){Ur.call(this),this.g=new Hp(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Ip(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ip(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $l(this)}function P0(n){kp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function k0(){ry.call(this),this.status=1}function $l(n){this.g=n}(ut=ur.prototype).Ka=function(n){this.L=n},ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():iy.g(),this.C=function GI(n){return n.h||(n.h=n.i())}(this.u?this.u:iy),this.g.onreadystatechange=mi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void C0(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Ft.FormData&&n instanceof Ft.FormData,!(0<=Ep(T0,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lc(this),0<this.B&&((this.K=function uD(n){return Xu&&function jT(){return function Q_(n){var e=BT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=TI(String(ro)).split("."),t=TI("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=$m(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||$m(0==o[2].length,0==u[2].length)||$m(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mi(this.qa,this)):this.A=ec(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){C0(this,u)}},ut.qa=function(){void 0!==_p&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cr(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Cr(this,"complete"),Cr(this,"abort"),Ll(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ll(this,!0)),ur.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?cc(this):this.fb())},ut.fb=function(){cc(this)},ut.aa=function(){try{return 2<ps(this)?this.g.status:-1}catch(n){return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),b0(e)}},ut.Ea=function(){return this.m},ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=Hp.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Oh(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=zm(u),Rl(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=gy(this,o,e),On(t=so(this.F),"RID",n),On(t,"CVER",22),this.D&&On(t,"X-HTTP-Session-Id",this.D),Vl(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(S0(u)))+"&"+e:this.o&&$p(t,this.o,u)),I0(this.h,o),this.Ya&&On(t,"TYPE","init"),this.O?(On(t,"$req",e),On(t,"SID","null"),o.Z=!0,ay(o,t,null)):ay(o,t,e),this.G=2}}else 3==this.G&&(n?cD(this,n):0==this.i.length||rD(this.h)||cD(this))},ut.Ia=function(){if(this.u=null,R0(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Np(mi(this.eb,this),n)}},ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,zn(10),Lh(this),R0(this))},ut.cb=function(){null!=this.v&&(this.v=null,Lh(this),zp(this),zn(19))},ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),zn(2)):(this.j.info("Failed to ping google.com"),zn(1))},(ut=N0.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Ra=function(){},jl.prototype.g=function(n,e){return new zi(n,e)},oi(zi,Ur),zi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;zn(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=yy(n,null,n.V),Gp(n)},zi.prototype.close=function(){Fh(this.g)},zi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Sh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Gp(e)},zi.prototype.M=function(){this.g.l=null,delete this.j,Fh(this.g),delete this.g,zi.X.M.call(this)},oi(P0,kp),oi(k0,ry),oi($l,N0),$l.prototype.xa=function(){Cr(this.g,"a")},$l.prototype.wa=function(n){Cr(this.g,new P0(n))},$l.prototype.va=function(n){Cr(this.g,new k0)},$l.prototype.ua=function(){Cr(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,Rh.NO_ERROR=0,Rh.TIMEOUT=8,Rh.HTTP_ERROR=6,HI.COMPLETE="complete",ny.EventType=Mh,Mh.OPEN="a",Mh.CLOSE="b",Mh.ERROR="c",Mh.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.Oa,ur.prototype.getLastErrorCode=ur.prototype.Ea,ur.prototype.getStatus=ur.prototype.aa,ur.prototype.getResponseJson=ur.prototype.Sa,ur.prototype.getResponseText=ur.prototype.fa,ur.prototype.send=ur.prototype.da,ur.prototype.setWithCredentials=ur.prototype.Ka;var F0=Hi.createWebChannelTransport=function(){return new jl},hD=Hi.getStatEventTarget=function(){return Op()},qp=Hi.ErrorCode=Rh,fD=Hi.EventType=HI,pD=Hi.Event=nc,vy=Hi.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},L0=Hi.FetchXmlHttpFactory=Pl,Wp=Hi.WebChannel=ny,Bo=Hi.XhrIo=ur;const Kp="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let Hl="9.18.0";const hc=new No.Yd("@firebase/firestore");function Zp(){return hc.logLevel}function ke(n,...e){if(hc.logLevel<=No.in.DEBUG){const t=e.map(_y);hc.debug(`Firestore (${Hl}): ${n}`,...t)}}function Er(n,...e){if(hc.logLevel<=No.in.ERROR){const t=e.map(_y);hc.error(`Firestore (${Hl}): ${n}`,...t)}}function Ia(n,...e){if(hc.logLevel<=No.in.WARN){const t=e.map(_y);hc.warn(`Firestore (${Hl}): ${n}`,...t)}}function _y(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function ct(n,e){n||rt()}function Qe(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ar{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class wy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qT{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ar,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=d;e.enqueueRetryable((0,me.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},v=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ar)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new mD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new Wr(e)}}class yD{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class U0{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new yD(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V0{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.A=t.token,new Iy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function B0(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class jo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=B0(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function Gl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function j0(n){return n+"\0"}class Xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Xn(0,0))}static max(){return new mt(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class zl{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends zl{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const Vh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends zl{construct(e,t,r){return new cr(e,t,r)}static isValidIdentifier(e){return Vh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Oe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Oe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Oe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===p?(d=!d,o++):"."!==p||d?(r+=p,o++):(u(),o++)}if(u(),d)throw new Oe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(t)}static emptyPath(){return new cr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(tn.fromString(e))}static fromName(e){return new Ke(tn.fromString(e).popFirst(5))}static empty(){return new Ke(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new tn(e.slice()))}}class Bh{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Yp(n){return n.fields.find(e=>2===e.kind)}function gu(n){return n.fields.filter(e=>2!==e.kind)}Bh.UNKNOWN_ID=-1;class ql{constructor(e,t){this.fieldPath=e,this.kind=t}}class jh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jh(0,qi.min())}}function Dy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=mt.fromTimestamp(1e9===r?new Xn(t+1,0):new Xn(t,r));return new qi(o,Ke.empty(),e)}function fc(n){return new qi(n.readTime,n.key,-1)}class qi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qi(mt.min(),Ke.empty(),-1)}static max(){return new qi(mt.max(),Ke.empty(),-1)}}function by(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const $0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function mu(n){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,me.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==$0)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),Ty.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,d=!1;e.forEach(p=>{++o,p.next(()=>{++u,d&&u===o&&t()},v=>r(v))}),d=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,d=new Array(u);let p=0;for(let v=0;v<u;v++){const b=v;t(e[b]).next(S=>{d[b]=S,++p,p===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Qp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ar,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Wl(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Sy(r.target.error);this.P.reject(new Wl(e,o))}}static open(e,t,r,o){try{return new Qp(t,e.transaction(o,r))}catch(u){throw new Wl(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new H0(t)}}class xr{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===xr.D((0,cn.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),yu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,cn.hl)())return!1;if(xr.N())return!0;const e=(0,cn.z$)(),t=xr.D(e),r=0<t&&t<10,o=xr.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,me.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Wl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const p=d.target.error;o("VersionError"===p.name?new Oe(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Oe(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Wl(e,p))},u.onupgradeneeded=d=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.F(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const d="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.O(e);const v=Qp.open(u.db,e,d?"readonly":"readwrite",r),b=o(v).next(S=>(v.V(),S)).catch(S=>(v.abort(S),se.reject(S))).toPromise();return b.catch(()=>{}),yield v.v,b}catch(v){const b=v,S="FirebaseError"!==b.name&&p<3;if(ke("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Cy{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return yu(this.q.delete())}}class Wl extends Oe{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Da(n){return"IndexedDbTransactionError"===n.name}class H0{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yu(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),yu(this.store.add(e))}get(e){return yu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),yu(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),yu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,d)=>{o.onerror=p=>{d(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const o=this.cursor(r);return this.H(o,(u,d,p)=>p.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const d=Sy(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(p=>{p?d.continue():r()}):r()}})}H(e,t){const r=[];return new se((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const p=d.target.result;if(!p)return void o();const v=new Cy(p),b=t(p.primaryKey,p.value,v);if(b instanceof se){const S=b.catch(O=>(v.done(),se.reject(O)));r.push(S)}v.isDone?o():null===v.G?p.continue():p.continue(v.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yu(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Sy(r.target.error);t(o)}})}let G0=!1;function Sy(n){const e=xr.D((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return G0||(G0=!0,setTimeout(()=>{throw r},0)),r}}return n}class wD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Da(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield mu(r)}yield t.nt(6e4)}))}}class ID{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return ke("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(p=>{o-=p,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(p=>(ke("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=fc(u);by(d,r)>0&&(r=d)}),new qi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Wi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class bD{constructor(e,t,r,o,u,d,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.useFetchStreams=v}}class gc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}function TD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ba(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function z0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Kl(n){return null==n}function Zl(n){return 0===n&&1/n==-1/0}function CD(n){return"number"==typeof n&&Number.isInteger(n)&&!Zl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class oo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw o instanceof DOMException?new oo("Invalid base64 string: "+o):o}}(e);return new Kr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kr.EMPTY_BYTE_STRING=new Kr("");const q0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ta(n){if(ct(!!n),"string"==typeof n){let e=0;const t=q0.exec(n);if(ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jn(n.seconds),nanos:Jn(n.nanos)}}function Jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function mc(n){return"string"==typeof n?Kr.fromBase64String(n):Kr.fromUint8Array(n)}function W0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ay(n){const e=n.mapValue.fields.__previous_value__;return W0(e)?Ay(e):e}function Yl(n){const e=Ta(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}const vu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ql={nullValue:"NULL_VALUE"};function yc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?W0(n)?4:td(n)?9007199254740991:10:rt()}function $o(n,e){if(n===e)return!0;const t=yc(n);if(t!==yc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yl(n).isEqual(Yl(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ta(r.timestampValue),d=Ta(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,mc(n.bytesValue).isEqual(mc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Jn(r.geoPointValue.latitude)===Jn(o.geoPointValue.latitude)&&Jn(r.geoPointValue.longitude)===Jn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Jn(r.integerValue)===Jn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Jn(r.doubleValue),d=Jn(o.doubleValue);return u===d?Zl(u)===Zl(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Gl(n.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(TD(u)!==TD(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===d[p]||!$o(u[p],d[p])))return!1;return!0}(n,e);default:return rt()}var o}function $h(n,e){return void 0!==(n.values||[]).find(t=>$o(t,e))}function _u(n,e){if(n===e)return 0;const t=yc(n),r=yc(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Jn(o.integerValue||o.doubleValue),p=Jn(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return K0(n.timestampValue,e.timestampValue);case 4:return K0(Yl(n),Yl(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=mc(o),p=mc(u);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),p=u.split("/");for(let v=0;v<d.length&&v<p.length;v++){const b=Nt(d[v],p[v]);if(0!==b)return b}return Nt(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Nt(Jn(o.latitude),Jn(u.latitude));return 0!==d?d:Nt(Jn(o.longitude),Jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],p=u.values||[];for(let v=0;v<d.length&&v<p.length;++v){const b=_u(d[v],p[v]);if(b)return b}return Nt(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===vu.mapValue&&u===vu.mapValue)return 0;if(o===vu.mapValue)return 1;if(u===vu.mapValue)return-1;const d=o.fields||{},p=Object.keys(d),v=u.fields||{},b=Object.keys(v);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const O=Nt(p[S],b[S]);if(0!==O)return O;const q=_u(d[p[S]],v[b[S]]);if(0!==q)return q}return Nt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function K0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Ta(n),r=Ta(e),o=Nt(t.seconds,r.seconds);return 0!==o?o:Nt(t.nanos,r.nanos)}function Xl(n){return Jl(n)}function Jl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ta(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?mc(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Jl(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const p of o)d?d=!1:u+=",",u+=`${p}:${Jl(r.fields[p])}`;return u+"}"}(n.mapValue):rt();var e}function Bs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xy(n){return!!n&&"integerValue"in n}function Ca(n){return!!n&&"arrayValue"in n}function Z0(n){return!!n&&"nullValue"in n}function Y0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ed(n){return!!n&&"mapValue"in n}function Ki(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ba(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ki(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ki(n.arrayValue.values[t]);return e}return Object.assign({},n)}function td(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vi(n){return"nullValue"in n?Ql:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bs(gc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function vc(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bs(gc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vu:rt()}function Hh(n,e){const t=_u(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function gs(n,e){const t=_u(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ho{constructor(e,t){this.position=e,this.inclusive=t}}function _c(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(d.referenceValue),t.key):_u(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Ec(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$o(n.position[t],e.position[t]))return!1;return!0}class wc{}class Qt extends wc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Q0(e,t,r):"array-contains"===t?new eE(e,r):"in"===t?new tE(e,r):"not-in"===t?new SD(e,r):"array-contains-any"===t?new AD(e,r):new Qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new X0(e,r):new J0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(_u(t,this.value)):null!==t&&yc(this.value)===yc(t)&&this.matchesComparison(_u(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class hn extends wc{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new hn(e,t)}matches(e){return ao(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ao(n){return"and"===n.op}function Eu(n){return"or"===n.op}function wu(n){return Ic(n)&&ao(n)}function Ic(n){for(const e of n.filters)if(e instanceof hn)return!1;return!0}function Jp(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+Xl(n.value);if(wu(n))return n.filters.map(e=>Jp(e)).join(",");{const e=n.filters.map(t=>Jp(t)).join(",");return`${n.op}(${e})`}}function Ry(n,e){return n instanceof Qt?(t=n,(r=e)instanceof Qt&&t.op===r.op&&t.field.isEqual(r.field)&&$o(t.value,r.value)):n instanceof hn?function(t,r){return r instanceof hn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,d)=>o&&Ry(u,r.filters[d]),!0)}(n,e):void rt();var t,r}function My(n,e){const t=n.filters.concat(e);return hn.create(t,n.op)}function Oy(n){return n instanceof Qt?`${(e=n).field.canonicalString()} ${e.op} ${Xl(e.value)}`:n instanceof hn?function(e){return e.op.toString()+" {"+e.getFilters().map(Oy).join(" ,")+"}"}(n):"Filter";var e}class Q0 extends Qt{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class X0 extends Qt{constructor(e,t){super(e,"in",t),this.keys=Ny(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class J0 extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=Ny(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ny(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class eE extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ca(t)&&$h(t.arrayValue,this.value)}}class tE extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$h(this.value.arrayValue,t)}}class SD extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if($h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$h(this.value.arrayValue,t)}}class AD extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ca(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$h(this.value.arrayValue,r))}}class nd{constructor(e,t="asc"){this.field=e,this.dir=t}}function nE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class lr{constructor(e,t){this.comparator=e,this.root=t||Zr.EMPTY}insert(e,t){return new lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eg(this.root,e,this.comparator,!0)}}class eg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Zr.RED,this.left=null!=o?o:Zr.EMPTY,this.right=null!=u?u:Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Zr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Zr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1,Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new An(this.comparator);return t.data=e,t}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rd(n){return n.hasNext()?n.getNext():void 0}class Zi{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new Zi([])}unionWith(e){let t=new An(cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ki(t)}setAll(e){let t=cr.emptyPath(),r={},o=[];e.forEach((d,p)=>{if(!t.isImmediateParentOf(p)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=p.popLast()}d?r[p.lastSegment()]=Ki(d):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];ed(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ba(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ai(Ki(this.value))}}function rE(n){const e=[];return ba(n.fields,(t,r)=>{const o=new cr([t]);if(ed(r)){const u=rE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Zi(e)}class Nn{constructor(e,t,r,o,u,d,p){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Nn(e,0,mt.min(),mt.min(),mt.min(),ai.empty(),0)}static newFoundDocument(e,t,r,o){return new Nn(e,1,t,mt.min(),r,o,0)}static newNoDocument(e,t){return new Nn(e,2,t,mt.min(),mt.min(),ai.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,mt.min(),mt.min(),ai.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ky{constructor(e,t=null,r=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this._t=null}}function Fy(n,e=null,t=[],r=[],o=null,u=null,d=null){return new ky(n,e,t,r,o,u,d)}function id(n){const e=Qe(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Kl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xl(r)).join(",")),e._t=t}return e._t}function tg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ry(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ec(n.startAt,e.startAt)&&Ec(n.endAt,e.endAt)}function Ly(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ng(n,e){return n.filters.filter(t=>t instanceof Qt&&t.field.isEqual(e))}function Uy(n,e,t){let r=Ql,o=!0;for(const u of ng(n,e)){let d=Ql,p=!0;switch(u.op){case"<":case"<=":d=vi(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,p=!1;break;case"!=":case"not-in":d=Ql}Hh({value:r,inclusive:o},{value:d,inclusive:p})<0&&(r=d,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Hh({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function xD(n,e,t){let r=vu,o=!0;for(const u of ng(n,e)){let d=vu,p=!0;switch(u.op){case">=":case">":d=vc(u.value),p=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,p=!1;break;case"!=":case"not-in":d=vu}gs({value:r,inclusive:o},{value:d,inclusive:p})>0&&(r=d,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];gs({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Sa{constructor(e,t=null,r=[],o=[],u=null,d="F",p=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=v,this.wt=null,this.gt=null}}function Dc(n,e,t,r,o,u,d,p){return new Sa(n,e,t,r,o,u,d,p)}function sd(n){return new Sa(n)}function Vy(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function By(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Gh(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function od(n){return null!==n.collectionGroup}function bc(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=Gh(e),r=By(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new nd(t)),e.wt.push(new nd(cr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new nd(cr.keyField(),u))}}}return e.wt}function _i(n){const e=Qe(n);if(!e.gt)if("F"===e.limitType)e.gt=Fy(e.path,e.collectionGroup,bc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of bc(e))t.push(new nd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ho(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ho(e.startAt.position,e.startAt.inclusive):null;e.gt=Fy(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.gt}function jy(n,e){e.getFirstInequalityField(),Gh(n);const t=n.filters.concat([e]);return new Sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rg(n,e,t){return new Sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zh(n,e){return tg(_i(n),_i(e))&&n.limitType===e.limitType}function iE(n){return`${id(_i(n))}|lt:${n.limitType}`}function $y(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Oy(r)).join(", ")}]`),Kl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xl(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xl(r)).join(",")),`Target(${t})`}(_i(n))}; limitType=${n.limitType})`}function ad(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ke.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of bc(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const p=_c(o,u,d);return o.inclusive?p<=0:p<0}(t.startAt,bc(t),r)||t.endAt&&!function(o,u,d){const p=_c(o,u,d);return o.inclusive?p>=0:p>0}(t.endAt,bc(t),r)));var t,r}function sE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Hy(n){return(e,t)=>{let r=!1;for(const o of bc(n)){const u=oE(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function oE(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(o,u,d){const p=u.data.field(o),v=d.data.field(o);return null!==p&&null!==v?_u(p,v):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function ig(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zl(e)?"-0":e}}function RD(n){return{integerValue:""+n}}function sg(n,e){return CD(e)?RD(e):ig(n,e)}class og{constructor(){this._=void 0}}function ZT(n,e,t){return n instanceof Tc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Aa?aE(n,e):n instanceof xa?ag(n,e):function(r,o){const u=Gy(r,o),d=MD(u)+MD(r.It);return xy(u)&&xy(r.It)?RD(d):ig(r.Tt,d)}(n,e)}function qh(n,e,t){return n instanceof Aa?aE(n,e):n instanceof xa?ag(n,e):t}function Gy(n,e){return n instanceof Iu?xy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Tc extends og{}class Aa extends og{constructor(e){super(),this.elements=e}}function aE(n,e){const t=uE(e);for(const r of n.elements)t.some(o=>$o(o,r))||t.push(r);return{arrayValue:{values:t}}}class xa extends og{constructor(e){super(),this.elements=e}}function ag(n,e){let t=uE(e);for(const r of n.elements)t=t.filter(o=>!$o(o,r));return{arrayValue:{values:t}}}class Iu extends og{constructor(e,t){super(),this.Tt=e,this.It=t}}function MD(n){return Jn(n.integerValue||n.doubleValue)}function uE(n){return Ca(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Cc{constructor(e,t){this.field=e,this.transform=t}}class cE{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ud(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wh{}function qy(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ld(n.key,qn.none()):new Sc(n.key,n.data,qn.none());{const t=n.data,r=ai.empty();let o=new An(cr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new uo(n.key,r,new Zi(o.toArray()),qn.none())}}function Wy(n,e,t){n instanceof Sc?function(r,o,u){const d=r.value.clone(),p=dE(r.fieldTransforms,o,u.transformResults);d.setAll(p),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof uo?function(r,o,u){if(!ud(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=dE(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(lE(r)),p.setAll(d),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function cd(n,e,t,r){return n instanceof Sc?function(o,u,d,p){if(!ud(o.precondition,u))return d;const v=o.value.clone(),b=hE(o.fieldTransforms,p,u);return v.setAll(b),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof uo?function(o,u,d,p){if(!ud(o.precondition,u))return d;const v=hE(o.fieldTransforms,p,u),b=u.data;return b.setAll(lE(o)),b.setAll(v),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,ud(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function OD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Gy(r.transform,o||null);null!=u&&(null===t&&(t=ai.empty()),t.set(r.field,u))}return t||null}function Ky(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Gl(t,r,(o,u)=>function zy(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Aa&&r instanceof Aa||t instanceof xa&&r instanceof xa?Gl(t.elements,r.elements,$o):t instanceof Iu&&r instanceof Iu?$o(t.It,r.It):t instanceof Tc&&r instanceof Tc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Sc extends Wh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class uo extends Wh{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function lE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dE(n,e,t){const r=new Map;ct(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,p=e.data.field(u.field);r.set(u.field,qh(d,p,t[o]))}return r}function hE(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,ZT(u,d,e))}return r}class ld extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ug extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zy{constructor(e){this.count=e}}var wr,ln;function Yy(n){switch(n){default:return rt();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function Qy(n){if(void 0===n)return Er("GRPC error has no .code"),oe.UNKNOWN;switch(n){case wr.OK:return oe.OK;case wr.CANCELLED:return oe.CANCELLED;case wr.UNKNOWN:return oe.UNKNOWN;case wr.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case wr.INTERNAL:return oe.INTERNAL;case wr.UNAVAILABLE:return oe.UNAVAILABLE;case wr.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case wr.NOT_FOUND:return oe.NOT_FOUND;case wr.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case wr.ABORTED:return oe.ABORTED;case wr.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case wr.DATA_LOSS:return oe.DATA_LOSS;default:return rt()}}(ln=wr||(wr={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return z0(this.inner)}size(){return this.innerSize}}const fE=new lr(Ke.comparator);function Mi(){return fE}const Xy=new lr(Ke.comparator);function cg(...n){let e=Xy;for(const t of n)e=e.insert(t.key,t);return e}function pE(n){let e=Xy;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Go(){return Kh()}function Jy(){return Kh()}function Kh(){return new Ra(n=>n.toString(),(n,e)=>n.isEqual(e))}const Vr=new lr(Ke.comparator),gE=new An(Ke.comparator);function Wt(...n){let e=gE;for(const t of n)e=e.add(t);return e}const ND=new An(Nt);function Zh(){return ND}class Yh{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,dd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yh(mt.min(),o,Zh(),Mi(),Wt())}}class dd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dd(r,t,Wt(),Wt(),Wt())}}class Qh{constructor(e,t,r,o){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=o}}class Ac{constructor(e,t){this.targetId=e,this.Rt=t}}class mE{constructor(e,t,r=Kr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class yE{constructor(){this.Pt=0,this.vt=ev(),this.bt=Kr.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=Wt(),t=Wt(),r=Wt();return this.vt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new dd(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=ev()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class vE{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Mi(),this.Kt=_E(),this.Gt=new An(Nt)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,o)=>{this.Jt(o)&&t(o)})}Zt(e){const t=e.targetId,r=e.Rt.count,o=this.Xt(t);if(o){const u=o.target;if(Ly(u))if(0===r){const d=new Ke(u.path);this.zt(t,d,Nn.newNoDocument(d,mt.min()))}else ct(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((u,d)=>{const p=this.Xt(d);if(p){if(u.current&&Ly(p.target)){const v=new Ke(p.target.path);null!==this.Ut.get(v)||this.ne(d,v)||this.zt(d,v,Nn.newNoDocument(v,e))}u.Ct&&(t.set(d,u.Nt()),u.kt())}});let r=Wt();this.Kt.forEach((u,d)=>{let p=!0;d.forEachWhile(v=>{const b=this.Xt(v);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new Yh(e,t,this.Gt,this.Ut,r);return this.Ut=Mi(),this.Kt=_E(),this.Gt=new An(Nt),o}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const o=this.Ht(e);this.ne(e,t)?o.$t(t,1):o.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new yE,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new An(Nt),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new yE),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function _E(){return new lr(Ke.comparator)}function ev(){return new lr(Ke.comparator)}const YT={asc:"ASCENDING",desc:"DESCENDING"},EE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wE={and:"AND",or:"OR"};class zo{constructor(e,t){this.databaseId=e,this.yt=t}}function hd(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IE(n,e){return n.yt?e.toBase64():e.toUint8Array()}function qo(n,e){return hd(n,e.toTimestamp())}function _n(n){return ct(!!n),mt.fromTimestamp(function(e){const t=Ta(e);return new Xn(t.seconds,t.nanos)}(n))}function ms(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function tv(n){const e=tn.fromString(n);return ct(iv(e)),e}function fd(n,e){return ms(n.databaseId,e.path)}function Wo(n,e){const t=tv(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(lg(t))}function nv(n,e){return ms(n.databaseId,e)}function DE(n){const e=tv(n);return 4===e.length?tn.emptyPath():lg(e)}function Xh(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lg(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pd(n,e,t){return{name:fd(n,e),fields:t.value.mapValue.fields}}function bE(n,e,t){const r=Wo(n,e.name),o=_n(e.updateTime),u=e.createTime?_n(e.createTime):mt.min(),d=new ai({mapValue:{fields:e.fields}}),p=Nn.newFoundDocument(r,o,u,d);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function gd(n,e){let t;if(e instanceof Sc)t={update:pd(n,e.key,e.value)};else if(e instanceof ld)t={delete:fd(n,e.key)};else if(e instanceof uo)t={update:pd(n,e.key,e.data),updateMask:OE(e.fieldMask)};else{if(!(e instanceof ug))return rt();t={verify:fd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Tc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Aa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof xa)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Iu)return{fieldPath:u.field.canonicalString(),increment:d.It};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:qo(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function dg(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?qn.updateTime(_n(o.updateTime)):void 0!==o.exists?qn.exists(o.exists):qn.none():qn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let p=null;"setToServerValue"in d?(ct("REQUEST_TIME"===d.setToServerValue),p=new Tc):"appendMissingElements"in d?p=new Aa(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new xa(d.removeAllFromArray.values||[]):"increment"in d?p=new Iu(u,d.increment):rt();const v=cr.fromServerFormat(d.fieldPath);return new Cc(v,p)}(n,o)):[];var o;if(e.update){const o=Wo(n,e.update.name),u=new ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Zi((e.updateMask.fieldPaths||[]).map(b=>cr.fromServerFormat(b)));return new uo(o,u,d,t,r)}return new Sc(o,u,t,r)}if(e.delete){const o=Wo(n,e.delete);return new ld(o,t)}if(e.verify){const o=Wo(n,e.verify);return new ug(o,t)}return rt()}function CE(n,e){return{documents:[nv(n,e.path)]}}function fg(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=nv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=nv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0!==v.length)return rv(hn.create(v,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(b=>{return{field:Ma((S=b).field),direction:xE(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.yt||Kl(b)?b:{value:b});var b,p,v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function SE(n){let e=DE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ct(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const O=pg(S);return O instanceof hn&&wu(O)?O.getFilters():[O]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new nd(xc((O=S).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let p=null;t.limit&&(p=function(S){let O;return O="object"==typeof S?S.value:S,Kl(O)?null:O}(t.limit));let v=null;var S;t.startAt&&(v=new Ho((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Ho(S.values||[],!S.before)}(t.endAt)),Dc(e,o,d,u,p,"F",v,b)}function pg(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xc(e.unaryFilter.field);return Qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=xc(e.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xc(e.unaryFilter.field);return Qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=xc(e.unaryFilter.field);return Qt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?Qt.create(xc((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return hn.create(e.compositeFilter.filters.map(t=>pg(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function xE(n){return YT[n]}function RE(n){return EE[n]}function ME(n){return wE[n]}function Ma(n){return{fieldPath:n.canonicalString()}}function xc(n){return cr.fromServerFormat(n.fieldPath)}function rv(n){return n instanceof Qt?function(e){if("=="===e.op){if(Y0(e.value))return{unaryFilter:{field:Ma(e.field),op:"IS_NAN"}};if(Z0(e.value))return{unaryFilter:{field:Ma(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Y0(e.value))return{unaryFilter:{field:Ma(e.field),op:"IS_NOT_NAN"}};if(Z0(e.value))return{unaryFilter:{field:Ma(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(e.field),op:RE(e.op),value:e.value}}}(n):n instanceof hn?function(e){const t=e.getFilters().map(r=>rv(r));return 1===t.length?t[0]:{compositeFilter:{op:ME(e.op),filters:t}}}(n):rt()}function OE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Oi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NE(e)),e=kD(n.get(t),e);return NE(e)}function kD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function NE(n){return n+"\x01\x01"}function Ko(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&rt(),n.charAt(d+1)){case"\x01":const p=n.substring(u,d);let v;0===o.length?v=p:(o+=p,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:rt()}u=d+2}return new tn(r)}const PE=["userId","batchId"];function gg(n,e){return[n,Oi(e)]}function kE(n,e,t){return[n,Oi(e),t]}const FD={},LD=["prefixPath","collectionGroup","readTime","documentId"],UD=["prefixPath","collectionGroup","documentId"],VD=["collectionGroup","readTime","prefixPath","documentId"],BD=["canonicalId","targetId"],jD=["targetId","path"],$D=["path","targetId"],HD=["collectionId","parent"],GD=["indexId","uid"],zD=["uid","sequenceNumber"],qD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],FE=["indexId","uid","orderedDocumentKey"],LE=["userId","collectionPath","documentId"],UE=["userId","collectionPath","largestBatchId"],VE=["userId","collectionGroup","largestBatchId"],sv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BE=[...sv,"documentOverlays"],ov=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],av=ov,jE=[...av,"indexConfiguration","indexState","indexEntries"];class mg extends pc{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function Br(n,e){const t=Qe(n);return xr.M(t.re,e)}class Oa{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Wy(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Jy();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=t.has(o.key)?null:p;const v=qy(d,p);null!==v&&r.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,(t,r)=>Ky(t,r))&&Gl(this.baseMutations,e.baseMutations,(t,r)=>Ky(t,r))}}class uv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ct(e.mutations.length===r.length);let o=Vr;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new uv(e,t,r,o)}}class cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ys{constructor(e,t,r,o,u=mt.min(),d=mt.min(),p=Kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class WD{constructor(e){this.oe=e}}function KD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:fd(o=n.oe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:hd(o,u.version.toTimestamp()),createTime:hd(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Du(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:Du(e.version)}}var o,u;return r}function Jh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Du(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function md(n){const e=new Xn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function _t(n,e){const t=(e.baseMutations||[]).map(u=>dg(n.oe,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>dg(n.oe,u)),o=Xn.fromMillis(e.localWriteTimeMs);return new Oa(e.batchId,o,t,r)}function ef(n){const e=md(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?md(n.lastLimboFreeSnapshotVersion):mt.min();let r;var o;return void 0!==n.query.documents?(ct(1===(o=n.query).documents.length),r=_i(sd(DE(o.documents[0])))):r=_i(SE(n.query)),new ys(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Kr.fromBase64String(n.resumeToken))}function $E(n,e){const t=Du(e.snapshotVersion),r=Du(e.lastLimboFreeSnapshotVersion);let o;o=Ly(e.target)?CE(n.oe,e.target):fg(n.oe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:id(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function dv(n){const e=SE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?rg(e,e.limit,"L"):e}function yd(n,e){return new cv(e.largestBatchId,dg(n.oe,e.overlayMutation))}function HE(n,e){const t=e.path.lastSegment();return[n,Oi(e.path.popLast()),t]}function tf(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Du(r.readTime),documentKey:Oi(r.documentKey.path),largestBatchId:r.largestBatchId}}class yg{getBundleMetadata(e,t){return er(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:md(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return er(e).put({bundleId:(r=t).id,createTime:Du(_n(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ZD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:dv(o.bundledQuery),readTime:md(o.readTime)};var o})}saveNamedQuery(e,t){return ZD(e).put({name:(r=t).name,readTime:Du(_n(r.readTime)),bundledQuery:r.bundledQuery});var r}}function er(n){return Br(n,"bundles")}function ZD(n){return Br(n,"namedQueries")}class nf{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new nf(e,t.uid||"")}getOverlay(e,t){return rf(e).get(HE(this.userId,t)).next(r=>r?yd(this.Tt,r):null)}getOverlays(e,t){const r=Go();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const p=new cv(t,d);o.push(this.ce(e,p))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Oi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const p=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(rf(e).Y("collectionPathOverlayIndex",p))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Go(),u=Oi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return rf(e).W("collectionPathOverlayIndex",d).next(p=>{for(const v of p){const b=yd(this.Tt,v);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Go();let d;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rf(e).X({index:"collectionGroupOverlayIndex",range:p},(v,b,S)=>{const O=yd(this.Tt,b);u.size()<o||O.largestBatchId===d?(u.set(O.getKey(),O),d=O.largestBatchId):S.done()}).next(()=>u)}ce(e,t){return rf(e).put(function(r,o,u){const[d,p,v]=HE(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:gd(r.oe,u.mutation)}}(this.Tt,this.userId,t))}}function rf(n){return Br(n,"documentOverlays")}class Rc{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(Jn(e.integerValue));else if("doubleValue"in e){const r=Jn(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),Zl(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(mc(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?td(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):rt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const o of Object.keys(r))this.we(o,t),this.he(r[o],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const o of r)this.he(o,t)}ye(e,t){this.fe(t,37),Ke.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function GE(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function hv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=GE(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Rc.Ee=new Rc;class zE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const o=t.codePointAt(0);this.Re(240|o>>>18),this.Re(128|63&o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Ve()}Ce(e){const t=this.xe(e),r=hv(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}ke(e){const t=this.xe(e),r=hv(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class qE{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class YD{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class sf{constructor(){this.Le=new zE,this.qe=new qE(this.Le),this.Ue=new YD(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Mc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Mc(this.indexId,this.documentKey,this.arrayValue,r)}}function js(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=WE(n.arrayValue,e.arrayValue),0!==t?t:(t=WE(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function WE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class QD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){ct(e.collectionGroup===this.collectionId);const t=Yp(e);if(void 0!==t&&!this.He(t))return!1;const r=gu(e);let o=0,u=0;for(;o<r.length&&this.He(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.ze){const d=r[o];if(!this.Je(this.ze,d)||!this.Ye(this.Qe[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Qe.length||!this.Ye(this.Qe[u++],d))return!1}return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function KE(n){var e,t;if(ct(n instanceof Qt||n instanceof hn),n instanceof Qt){if(n instanceof tE){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Qt.create(n.field,"==",u)))||[];return hn.create(o,"or")}return n}const r=n.filters.map(o=>KE(o));return hn.create(r,n.op)}function vg(n){if(0===n.getFilters().length)return[];const e=pv(KE(n));return ct(fv(e)),_g(e)||Eg(e)?[e]:e.getFilters()}function _g(n){return n instanceof Qt}function Eg(n){return n instanceof hn&&wu(n)}function fv(n){return _g(n)||Eg(n)||function(e){if(e instanceof hn&&Eu(e)){for(const t of e.getFilters())if(!_g(t)&&!Eg(t))return!1;return!0}return!1}(n)}function pv(n){if(ct(n instanceof Qt||n instanceof hn),n instanceof Qt)return n;if(1===n.filters.length)return pv(n.filters[0]);const e=n.filters.map(r=>pv(r));let t=hn.create(e,n.op);return t=wg(t),fv(t)?t:(ct(t instanceof hn),ct(ao(t)),ct(t.filters.length>1),t.filters.reduce((r,o)=>Oc(r,o)))}function Oc(n,e){let t;return ct(n instanceof Qt||n instanceof hn),ct(e instanceof Qt||e instanceof hn),t=n instanceof Qt?e instanceof Qt?hn.create([n,e],"and"):vd(n,e):e instanceof Qt?vd(e,n):function(r,o){if(ct(r.filters.length>0&&o.filters.length>0),ao(r)&&ao(o))return My(r,o.getFilters());const u=Eu(r)?r:o,d=Eu(r)?o:r,p=u.filters.map(v=>Oc(v,d));return hn.create(p,"or")}(n,e),wg(t)}function vd(n,e){if(ao(e))return My(e,n.getFilters());{const t=e.filters.map(r=>Oc(n,r));return hn.create(t,"or")}}function wg(n){if(ct(n instanceof Qt||n instanceof hn),n instanceof Qt)return n;const e=n.getFilters();if(1===e.length)return wg(e[0]);if(Ic(n))return n;const t=e.map(o=>wg(o)),r=[];return t.forEach(o=>{o instanceof Qt?r.push(o):o instanceof hn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:hn.create(r,n.op)}class XD{constructor(){this.Ze=new gv}addToCollectionParentIndex(e,t){return this.Ze.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(qi.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class gv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new An(tn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new An(tn.comparator)).toArray()}}const of=new Uint8Array(0);class ZE{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new gv,this.tn=new Ra(r=>id(r),(r,o)=>tg(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Oi(o)};return mv(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[j0(t),""],!1,!0);return mv(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Ko(d.parent))}return r})}addFieldIndex(e,t){const r=uf(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=cf(e);return u.next(p=>{d.put(tf(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=uf(e),o=cf(e),u=af(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=af(e);let o=!0;const u=new Map;return se.forEach(this.en(t),d=>this.nn(e,d).next(p=>{o&&(o=!!p),u.set(d,p)})).next(()=>{if(o){let d=Wt();const p=[];return se.forEach(u,(v,b)=>{var S;ke("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Vt=>`${Vt.fieldPath}:${Vt.kind}`).join(",")}`} to execute ${id(t)}`);const O=function(Vt,Kt){const Bt=Yp(Kt);if(void 0===Bt)return null;for(const en of ng(Vt,Bt.fieldPath))switch(en.op){case"array-contains-any":return en.value.arrayValue.values||[];case"array-contains":return[en.value]}return null}(b,v),q=function(Vt,Kt){const Bt=new Map;for(const en of gu(Kt))for(const wi of ng(Vt,en.fieldPath))switch(wi.op){case"==":case"in":Bt.set(en.fieldPath.canonicalString(),wi.value);break;case"not-in":case"!=":return Bt.set(en.fieldPath.canonicalString(),wi.value),Array.from(Bt.values())}return null}(b,v),Z=function(Vt,Kt){const Bt=[];let en=!0;for(const wi of gu(Kt)){const zd=0===wi.kind?Uy(Vt,wi.fieldPath,Vt.startAt):xD(Vt,wi.fieldPath,Vt.startAt);Bt.push(zd.value),en&&(en=zd.inclusive)}return new Ho(Bt,en)}(b,v),he=function(Vt,Kt){const Bt=[];let en=!0;for(const wi of gu(Kt)){const zd=0===wi.kind?xD(Vt,wi.fieldPath,Vt.endAt):Uy(Vt,wi.fieldPath,Vt.endAt);Bt.push(zd.value),en&&(en=zd.inclusive)}return new Ho(Bt,en)}(b,v),Pe=this.sn(v,b,Z),Ye=this.sn(v,b,he),Xt=this.rn(v,b,q),sn=this.on(v.indexId,O,Pe,Z.inclusive,Ye,he.inclusive,Xt);return se.forEach(sn,Vt=>r.J(Vt,t.limit).next(Kt=>{Kt.forEach(Bt=>{const en=Ke.fromSegments(Bt.documentKey);d.has(en)||(d=d.add(en),p.push(en))})}))}).next(()=>p)}return se.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:vg(hn.create(e.filters,"and")).map(r=>Fy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,o,u,d,p){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),b=v/(null!=t?t.length:1),S=[];for(let O=0;O<v;++O){const q=t?this.un(t[O/b]):of,Z=this.cn(e,q,r[O%b],o),he=this.an(e,q,u[O%b],d),Pe=p.map(Ye=>this.cn(e,q,Ye,!0));S.push(...this.createRange(Z,he,Pe))}return S}cn(e,t,r,o){const u=new Mc(e,Ke.empty(),t,r);return o?u:u.Ge()}an(e,t,r,o){const u=new Mc(e,Ke.empty(),t,r);return o?u.Ge():u}nn(e,t){const r=new QD(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const p of u)r.We(p)&&(!d||p.fields.length>d.fields.length)&&(d=p);return d})}getIndexType(e,t){let r=2;const o=this.en(t);return se.forEach(o,u=>this.nn(e,u).next(d=>{d?0!==r&&d.fields.length<function(p){let v=new An(cr.comparator),b=!1;for(const S of p.filters)for(const O of S.getFlattenedFilters())O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?b=!0:v=v.add(O.field));for(const S of p.orderBy)S.field.isKeyField()||(v=v.add(S.field));return v.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}hn(e,t){const r=new sf;for(const o of gu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ke(o.kind);Rc.Ee.ae(u,d)}return r.Be()}un(e){const t=new sf;return Rc.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new sf;return Rc.Ee.ae(Bs(this.databaseId,t),r.Ke(function(o){const u=gu(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let o=[];o.push(new sf);let u=0;for(const d of gu(e)){const p=r[u++];for(const v of o)if(this.fn(t,d.fieldPath)&&Ca(p))o=this.dn(o,d,p);else{const b=v.Ke(d.kind);Rc.Ee.ae(p,b)}}return this._n(o)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const p of o){const v=new sf;v.seed(p.Be()),Rc.Ee.ae(d,v.Ke(t.kind)),u.push(v)}return u}fn(e,t){return!!e.filters.find(r=>r instanceof Qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=uf(e),o=cf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return se.forEach(u,p=>o.get([p.indexId,this.uid]).next(v=>{d.push(function(b,S){const O=S?new jh(S.sequenceNumber,new qi(md(S.readTime),new Ke(Ko(S.documentKey)),S.largestBatchId)):jh.empty(),q=b.fields.map(([Z,he])=>new ql(cr.fromServerFormat(Z),he));return new Bh(b.indexId,b.collectionGroup,q,O)}(p,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=uf(e),u=cf(e);return this.wn(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>se.forEach(p,v=>u.put(tf(v.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?se.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),se.forEach(p,v=>this.mn(e,o,v).next(b=>{const S=this.gn(u,v);return b.isEqual(S)?se.resolve():this.yn(e,u,v,b,S)}))))})}pn(e,t,r,o){return af(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,o){return af(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const o=af(e);let u=new An(js);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(d,p)=>{u=u.add(new Mc(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}gn(e,t){let r=new An(js);const o=this.hn(t,e);if(null==o)return r;const u=Yp(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Ca(d))for(const p of d.arrayValue.values||[])r=r.add(new Mc(t.indexId,e.key,this.un(p),o))}else r=r.add(new Mc(t.indexId,e.key,of,o));return r}yn(e,t,r,o,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(p,v,b,S,O){const q=p.getIterator(),Z=v.getIterator();let he=rd(q),Pe=rd(Z);for(;he||Pe;){let Ye=!1,Xt=!1;if(he&&Pe){const sn=b(he,Pe);sn<0?Xt=!0:sn>0&&(Ye=!0)}else null!=he?Xt=!0:Ye=!0;Ye?(S(Pe),Pe=rd(Z)):Xt?(O(he),he=rd(q)):(he=rd(q),Pe=rd(Z))}}(o,u,js,p=>{d.push(this.pn(e,t,r,p))},p=>{d.push(this.In(e,t,r,p))}),se.waitFor(d)}wn(e){let t=1;return cf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,p)=>js(d,p)).filter((d,p,v)=>!p||0!==js(d,v[p-1]));const o=[];o.push(e);for(const d of r){const p=js(d,e),v=js(d,t);if(0===p)o[0]=e.Ge();else if(p>0&&v<0)o.push(d),o.push(d.Ge());else if(v>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2){if(this.Tn(o[d],o[d+1]))return[];u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,of,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,of,[]]))}return u}Tn(e,t){return js(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(YE)}getMinOffset(e,t){return se.mapArray(this.en(t),r=>this.nn(e,r).next(o=>o||rt())).next(YE)}}function mv(n){return Br(n,"collectionParents")}function af(n){return Br(n,"indexEntries")}function uf(n){return Br(n,"indexConfiguration")}function cf(n){return Br(n,"indexState")}function YE(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;by(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new qi(e.readTime,e.documentKey,t)}const JD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vs(e,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eb(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let p=0;const v=r.X({range:d},(S,O,q)=>(p++,q.delete()));u.push(v.next(()=>{ct(1===p)}));const b=[];for(const S of t.mutations){const O=kE(e,S.key.path,t.batchId);u.push(o.delete(O)),b.push(S.key)}return se.waitFor(u).next(()=>b)}function yv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}vs.DEFAULT_COLLECTION_PERCENTILE=10,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vs.DEFAULT=new vs(41943040,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vs.DISABLED=new vs(-1,0,0);class lf{constructor(e,t,r,o){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=o,this.En={}}static ue(e,t,r,o){ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new lf(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bu(e).X({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=_d(e),d=bu(e);return d.add({}).next(p=>{ct("number"==typeof p);const v=new Oa(p,t,r,o),b=function(q,Z,he){const Pe=he.baseMutations.map(Xt=>gd(q.oe,Xt)),Ye=he.mutations.map(Xt=>gd(q.oe,Xt));return{userId:Z,batchId:he.batchId,localWriteTimeMs:he.localWriteTime.toMillis(),baseMutations:Pe,mutations:Ye}}(this.Tt,this.userId,v),S=[];let O=new An((q,Z)=>Nt(q.canonicalString(),Z.canonicalString()));for(const q of o){const Z=kE(this.userId,q.key.path,p);O=O.add(q.key.path.popLast()),S.push(d.put(b)),S.push(u.put(Z,FD))}return O.forEach(q=>{S.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.En[p]=v.keys()}),se.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return bu(e).get(t).next(r=>r?(ct(r.userId===this.userId),_t(this.Tt,r)):null)}An(e,t){return this.En[t]?se.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.En[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return bu(e).X({index:"userMutationsIndex",range:o},(d,p,v)=>{p.userId===this.userId&&(ct(p.batchId>=r),u=_t(this.Tt,p)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bu(e).W("userMutationsIndex",t).next(r=>r.map(o=>_t(this.Tt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return _d(e).X({range:o},(d,p,v)=>{const[b,S,O]=d,q=Ko(S);if(b===this.userId&&t.path.isEqual(q))return bu(e).get(O).next(Z=>{if(!Z)throw rt();ct(Z.userId===this.userId),u.push(_t(this.Tt,Z))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Nt);const o=[];return t.forEach(u=>{const d=gg(this.userId,u.path),p=IDBKeyRange.lowerBound(d),v=_d(e).X({range:p},(b,S,O)=>{const[q,Z,he]=b,Pe=Ko(Z);q===this.userId&&u.path.isEqual(Pe)?r=r.add(he):O.done()});o.push(v)}),se.waitFor(o).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=gg(this.userId,r),d=IDBKeyRange.lowerBound(u);let p=new An(Nt);return _d(e).X({range:d},(v,b,S)=>{const[O,q,Z]=v,he=Ko(q);O===this.userId&&r.isPrefixOf(he)?he.length===o&&(p=p.add(Z)):S.done()}).next(()=>this.Rn(e,p))}Rn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(bu(e).get(u).next(d=>{if(null===d)throw rt();ct(d.userId===this.userId),r.push(_t(this.Tt,d))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return eb(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return _d(e).X({range:r},(u,d,p)=>{if(u[0]===this.userId){const v=Ko(u[1]);o.push(v)}else p.done()}).next(()=>{ct(0===o.length)})})}containsKey(e,t){return df(e,this.userId,t)}vn(e){return vv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function df(n,e,t){const r=gg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return _d(n).X({range:u,Z:!0},(p,v,b)=>{const[S,O,q]=p;S===e&&O===o&&(d=!0),b.done()}).next(()=>d)}function bu(n){return Br(n,"mutations")}function _d(n){return Br(n,"documentMutations")}function vv(n){return Br(n,"mutationQueues")}class co{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new co(0)}static Sn(){return new co(-1)}}class tb{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new co(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>mt.fromTimestamp(new Xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Cn(e,o)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ed(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Ed(e).X((d,p)=>{const v=ef(p);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Ed(e).X((r,o)=>{const u=ef(o);t(u)})}Dn(e){return QE(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}Cn(e,t){return QE(e).put("targetGlobalKey",t)}xn(e,t){return Ed(e).put($E(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=id(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ed(e).X({range:o,index:"queryTargetsIndex"},(d,p,v)=>{const b=ef(p);tg(t,b.target)&&(u=b,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Tu(e);return t.forEach(d=>{const p=Oi(d.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,d))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=Tu(e);return se.forEach(t,u=>{const d=Oi(u.path);return se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Tu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Tu(e);let u=Wt();return o.X({range:r,Z:!0},(d,p,v)=>{const b=Ko(d[1]),S=new Ke(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Oi(t.path),o=IDBKeyRange.bound([r],[j0(r)],!1,!0);let u=0;return Tu(e).X({index:"documentTargetsIndex",Z:!0,range:o},([d,p],v,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}ie(e,t){return Ed(e).get(t).next(r=>r?ef(r):null)}}function Ed(n){return Br(n,"targets")}function QE(n){return Br(n,"targetGlobal")}function Tu(n){return Br(n,"targetDocuments")}function XE([n,e],[t,r]){const o=Nt(n,t);return 0===o?Nt(e,r):o}class JE{constructor(e){this.kn=e,this.buffer=new An(XE),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();XE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Da(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield mu(r)}yield t.Bn(3e5)}))}}class rb{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Wi.at);const r=new JE(t);return this.Ln.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.Ln.Un(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(JD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JD):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,o,u,d,p,v,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,d=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,p=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(b=Date.now(),Zp()<=No.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(p-d)+`ms\n\tRemoved ${u} targets in `+(v-p)+`ms\n\tRemoved ${O} documents in `+(b-v)+`ms\nTotal Duration: ${b-S}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O})))}}class wd{constructor(e,t){this.db=e,this.garbageCollector=new rb(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,o)=>t(o))}addReference(e,t,r){return Ig(e,r)}removeReference(e,t,r){return Ig(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ig(e,t)}jn(e,t){return function(r,o){let u=!1;return vv(r).tt(d=>df(r,d,o).next(p=>(p&&(u=!0),se.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Qn(e,(d,p)=>{if(p<=t){const v=this.jn(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,mt.min()),Tu(e).delete([0,Oi(d.path)])))});o.push(v)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ig(e,t)}Qn(e,t){const r=Tu(e);let o,u=Wi.at;return r.X({index:"documentTargetsIndex"},([d,p],{path:v,sequenceNumber:b})=>{0===d?(u!==Wi.at&&t(new Ke(Ko(o)),u),u=b,o=v):u=Wi.at}).next(()=>{u!==Wi.at&&t(new Ke(Ko(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ig(n,e){return Tu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Oi(e.path),sequenceNumber:r}));var r}class _v{constructor(){this.changes=new Ra(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ib{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nc(e).put(r)}removeEntry(e,t,r){return Nc(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Jh(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Nc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Pc(t))},(o,u)=>{r=this.Wn(t,u)}).next(()=>r)}Hn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Nc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Pc(t))},(o,u)=>{r={document:this.Wn(t,u),size:yv(u)}}).next(()=>r)}getEntries(e,t){let r=Mi();return this.Jn(e,t,(o,u)=>{const d=this.Wn(o,u);r=r.insert(o,d)}).next(()=>r)}Yn(e,t){let r=Mi(),o=new lr(Ke.comparator);return this.Jn(e,t,(u,d)=>{const p=this.Wn(u,d);r=r.insert(u,p),o=o.insert(u,yv(d))}).next(()=>({documents:r,Zn:o}))}Jn(e,t,r){if(t.isEmpty())return se.resolve();let o=new An(Iv);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(Pc(o.first()),Pc(o.last())),d=o.getIterator();let p=d.getNext();return Nc(e).X({index:"documentKeyIndex",range:u},(v,b,S)=>{const O=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&Iv(p,O)<0;)r(p,null),p=d.getNext();p&&p.isEqual(O)&&(r(p,b),p=d.hasNext()?d.getNext():null),p?S.j(Pc(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),Jh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nc(e).W(IDBKeyRange.bound(d,p,!0)).next(v=>{let b=Mi();for(const S of v){const O=this.Wn(Ke.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);O.isFoundDocument()&&(ad(t,O)||o.has(O.key))&&(b=b.insert(O.key,O))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=Mi();const d=ew(t,r),p=ew(t,qi.max());return Nc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,p,!0)},(v,b,S)=>{const O=this.Wn(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(O.key,O),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new sb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wv(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}zn(e,t){return wv(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function lv(n,e){let t;if(e.document)t=bE(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),o=md(e.noDocument.readTime);t=Nn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=Ke.fromSegments(e.unknownDocument.path),o=md(e.unknownDocument.version);t=Nn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Xn(r[0],r[1]);return mt.fromTimestamp(o)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return Nn.newInvalidDocument(e)}}function Ev(n){return new ib(n)}class sb extends _v{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new Ra(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new An((u,d)=>Nt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const p=this.ts.get(u);if(t.push(this.Xn.removeEntry(e,u,p.readTime)),d.isValidDocument()){const v=KD(this.Xn.Tt,d);o=o.add(u.path.popLast()),r+=yv(v)-p.size,t.push(this.Xn.addEntry(e,u,v))}else if(r-=p.size,this.trackRemovals){const v=KD(this.Xn.Tt,d.convertToNoDocument(mt.min()));t.push(this.Xn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Xn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:o})=>(o.forEach((u,d)=>{this.ts.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function wv(n){return Br(n,"remoteDocumentGlobal")}function Nc(n){return Br(n,"remoteDocumentsV14")}function Pc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ew(n,e){const t=e.documentKey.path.toArray();return[n,Jh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Iv(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Nt(t[u],r[u]),o)return o;return o=Nt(t.length,r.length),o||(o=Nt(t[t.length-2],r[r.length-2]),o||Nt(t[t.length-1],r[r.length-1]))}class tw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nw{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&cd(r.mutation,o,Zi.empty(),Xn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const o=Go();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=cg();return u.forEach((p,v)=>{d=d.insert(p,v.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,p)=>{t.set(d,p)})})}computeViews(e,t,r,o){let u=Mi();const d=Kh(),p=Kh();return t.forEach((v,b)=>{const S=r.get(b.key);o.has(b.key)&&(void 0===S||S.mutation instanceof uo)?u=u.insert(b.key,b):void 0!==S?(d.set(b.key,S.mutation.getFieldMask()),cd(S.mutation,b,S.mutation.getFieldMask(),Xn.now())):d.set(b.key,Zi.empty())}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((b,S)=>d.set(b,S)),t.forEach((b,S)=>{var O;return p.set(b,new tw(S,null!==(O=d.get(b))&&void 0!==O?O:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Kh();let o=new lr((d,p)=>d-p),u=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const p of d)p.keys().forEach(v=>{const b=t.get(v);if(null===b)return;let S=r.get(v)||Zi.empty();S=p.applyToLocalView(b,S),r.set(v,S);const O=(o.get(p.batchId)||Wt()).add(v);o=o.insert(p.batchId,O)})}).next(()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),b=v.key,S=v.value,O=Jy();S.forEach(q=>{if(!u.has(q)){const Z=qy(t.get(q),r.get(q));null!==Z&&O.set(q,Z),u=u.add(q)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,O))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):od(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Go());let p=-1,v=u;return d.next(b=>se.forEach(b,(S,O)=>(p<O.largestBatchId&&(p=O.largestBatchId),u.get(S)?se.resolve():this.remoteDocumentCache.getEntry(e,S).next(q=>{v=v.insert(S,q)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,v,b,Wt())).next(S=>({batchId:p,changes:pE(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let o=cg();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=cg();return this.indexManager.getCollectionParents(e,o).next(d=>se.forEach(d,p=>{const v=(b=t,S=p.child(o),new Sa(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(b=>{b.forEach((S,O)=>{u=u.insert(S,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((p,v)=>{const b=v.getKey();null===u.get(b)&&(u=u.insert(b,Nn.newInvalidDocument(b)))});let d=cg();return u.forEach((p,v)=>{const b=o.get(p);void 0!==b&&cd(b.mutation,v,Zi.empty(),Xn.now()),ad(t,v)&&(d=d.insert(p,v))}),d})}}class ob{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return se.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:_n(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:dv(r.bundledQuery),readTime:_n(r.readTime)}),se.resolve();var r}}class ab{constructor(){this.overlays=new lr(Ke.comparator),this.ss=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Go();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ce(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ss.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ss.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Go(),u=t.length+1,d=new Ke(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const v=p.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new lr((b,S)=>b-S);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=Go(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=Go(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=o)););return se.resolve(p)}ce(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.ss.get(o.largestBatchId).delete(r.key);this.ss.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new cv(t,r));let u=this.ss.get(t);void 0===u&&(u=Wt(),this.ss.set(t,u)),this.ss.set(t,u.add(r.key))}}class hf{constructor(){this.rs=new An(Yr.os),this.us=new An(Yr.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Yr(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Yr(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new Ke(new tn([])),r=new Yr(t,e),o=new Yr(t,e+1),u=[];return this.us.forEachInRange([r,o],d=>{this.ls(d),u.push(d.key)}),u}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new Ke(new tn([])),r=new Yr(t,e),o=new Yr(t,e+1);let u=Wt();return this.us.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Yr(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Yr{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return Ke.comparator(e.key,t.key)||Nt(e.gs,t.gs)}static cs(e,t){return Nt(e.gs,t.gs)||Ke.comparator(e.key,t.key)}}class rw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new An(Yr.os)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ys;this.ys++;const d=new Oa(u,t,r,o);this.mutationQueue.push(d);for(const p of o)this.ps=this.ps.add(new Yr(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ts(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yr(t,0),o=new Yr(t,Number.POSITIVE_INFINITY),u=[];return this.ps.forEachInRange([r,o],d=>{const p=this.Is(d.gs);u.push(p)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Nt);return t.forEach(o=>{const u=new Yr(o,0),d=new Yr(o,Number.POSITIVE_INFINITY);this.ps.forEachInRange([u,d],p=>{r=r.add(p.gs)})}),se.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const d=new Yr(new Ke(u),0);let p=new An(Nt);return this.ps.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(p=p.add(v.gs)),!0)},d),se.resolve(this.Es(p))}Es(e){const t=[];return e.forEach(r=>{const o=this.Is(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ct(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return se.forEach(t.mutations,o=>{const u=new Yr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new Yr(t,0),o=this.ps.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ub{constructor(e){this.Rs=e,this.docs=new lr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=Mi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Nn.newInvalidDocument(o))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Mi();const d=t.path,p=new Ke(d.child("")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:b,value:{document:S}}=v.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||by(fc(S),r)<=0||(o.has(S.key)||ad(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,t,r,o){rt()}Ps(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cb(this)}getSize(e){return se.resolve(this.size)}}class cb extends _v{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Xn.addEntry(e,o)):this.Xn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class lb{constructor(e){this.persistence=e,this.vs=new Ra(t=>id(t),tg),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Vs=new hf,this.targetCount=0,this.Ss=co.Vn()}forEachTarget(e,t){return this.vs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new co(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.xn(t),se.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.vs.forEach((d,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.vs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Vs.containsKey(t))}}class iw{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Wi(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new lb(this),this.indexManager=new XD,this.remoteDocumentCache=new ub(r=>this.referenceDelegate.ks(r)),this.Tt=new WD(t),this.$s=new ob(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ab,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new rw(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new db(this.Cs.next());return this.referenceDelegate.Ms(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Fs(e,t){return se.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class db extends pc{constructor(e){super(),this.currentSequenceNumber=e}}class Dg{constructor(e){this.persistence=e,this.Bs=new hf,this.Ls=null}static qs(e){return new Dg(e)}get Us(){if(this.Ls)return this.Ls;throw rt()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),se.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(o=>this.Us.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Us.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Us,r=>{const o=Ke.fromPath(r);return this.Ks(e,o).next(u=>{u||t.removeEntry(o,mt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return se.or([()=>se.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class hb{constructor(e){this.Tt=e}F(e,t,r,o){const u=new Qp("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PE,{unique:!0}),p.createObjectStore("documentMutations"),sw(e),function(p){p.createObjectStore("remoteDocuments")}(e));let d=se.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),sw(e)),d=d.next(()=>function(p){const v=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(p,v){return v.store("mutations").W().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PE,{unique:!0});const S=v.store("mutations"),O=b.map(q=>S.put(q));return se.waitFor(O)})}(e,u))),d=d.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Gs(u))),r<6&&o>=6&&(d=d.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(u)))),r<7&&o>=7&&(d=d.next(()=>this.js(u))),r<8&&o>=8&&(d=d.next(()=>this.zs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Ws(u))),r<11&&o>=11&&(d=d.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(p){const v=p.createObjectStore("documentOverlays",{keyPath:LE});v.createIndex("collectionPathOverlayIndex",UE,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",VE,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(p){const v=p.createObjectStore("remoteDocumentsV14",{keyPath:LD});v.createIndex("documentKeyIndex",UD),v.createIndex("collectionGroupIndex",VD)}(e)).next(()=>this.Hs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.Js(e,u))),r<15&&o>=15&&(d=d.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:GD}).createIndex("sequenceNumberIndex",zD,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:qD}).createIndex("documentKeyIndex",FE,{unique:!1})}(e))),d}Qs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=yv(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>se.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(p=>se.forEach(p,v=>{ct(v.userId===u.userId);const b=_t(this.Tt,v);return eb(e,u.userId,b).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((d,p)=>{const v=new tn(d),b=[0,Oi(v)];u.push(t.get(b).next(S=>S?se.resolve():t.put({targetId:0,path:Oi(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:HD});const r=t.store("collectionParents"),o=new gv,u=d=>{if(o.add(d)){const p=d.lastSegment(),v=d.popLast();return r.put({collectionId:p,parent:Oi(v)})}};return t.store("remoteDocuments").X({Z:!0},(d,p)=>{const v=new tn(d);return u(v.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([d,p,v],b)=>{const S=Ko(p);return u(S.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,o)=>{const u=ef(o),d=$E(this.Tt,u);return t.put(d)})}Hs(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,d)=>{const p=t.store("remoteDocumentsV14"),v=(b=d,b.document?new Ke(tn.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(p.put(S))}).next(()=>se.waitFor(o))}Js(e,t){const r=t.store("mutations"),o=Ev(this.Tt),u=new iw(Dg.qs,this.Tt.oe);return r.W().next(d=>{const p=new Map;return d.forEach(v=>{var b;let S=null!==(b=p.get(v.userId))&&void 0!==b?b:Wt();_t(this.Tt,v).keys().forEach(O=>S=S.add(O)),p.set(v.userId,S)}),se.forEach(p,(v,b)=>{const S=new Wr(b),O=nf.ue(this.Tt,S),q=u.getIndexManager(S),Z=lf.ue(S,this.Tt,q,u.referenceDelegate);return new nw(o,Z,O,q).recalculateAndSaveOverlaysForDocumentKeys(new mg(t,Wi.at),v).next()})})}}function sw(n){n.createObjectStore("targetDocuments",{keyPath:jD}).createIndex("documentTargetsIndex",$D,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BD,{unique:!0}),n.createObjectStore("targetGlobal")}const bg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Tg{constructor(e,t,r,o,u,d,p,v,b,S,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=u,this.window=d,this.document=p,this.Zs=b,this.Xs=S,this.ti=O,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=q=>Promise.resolve(),!Tg.C())throw new Oe(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wd(this,o),this.oi=t+"main",this.Tt=new WD(v),this.ui=new xr(this.oi,this.ti,new hb(this.Tt)),this.Ns=new tb(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Ev(this.Tt),this.$s=new yg,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===S&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(oe.FAILED_PRECONDITION,bg);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Wi(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Da(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return ff(e).get("owner").next(t=>se.resolve(this.yi(t)))}pi(e){return Cg(e).delete(this.clientId)}Ii(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Br(r,"clientMetadata");return o.W().next(u=>{const d=e.Ei(u,18e5),p=u.filter(v=>-1===d.indexOf(v));return se.forEach(p,v=>o.delete(v.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?se.resolve(!0):ff(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Oe(oe.FAILED_PRECONDITION,bg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cg(e).W().next(r=>void 0===this.Ei(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new mg(t,Wi.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Cg(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return lf.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZE(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return nf.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.ti)?jE:14===d?av:13===d?ov:12===d?BE:11===d?sv:void rt();var d;let p;return this.ui.runTransaction(e,o,u,v=>(p=new mg(v,this.Cs?this.Cs.next():Wi.at),"readwrite-primary"===t?this._i(p).next(b=>!!b||this.wi(p)).next(b=>{if(!b)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Oe(oe.FAILED_PRECONDITION,$0);return r(p)}).next(b=>this.gi(p).next(()=>b)):this.Di(p).next(()=>r(p)))).then(v=>(p.raiseOnCommittedEvent(),v))}Di(e){return ff(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(oe.FAILED_PRECONDITION,bg)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ff(e).put("owner",t)}static C(){return xr.C()}mi(e){const t=ff(e);return t.get("owner").next(r=>this.yi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,cn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(e){}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ff(n){return Br(n,"owner")}function Cg(n){return Br(n,"clientMetadata")}function Sg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Dv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=o}static Ni(e,t){let r=Wt(),o=Wt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Dv(e,t.fromCache,r,o)}}class ow{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Mi(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Fi(e,t))}Mi(e,t){if(Vy(t))return se.resolve(null);let r=_i(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=rg(t,null,"F"),r=_i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Wt(...u);return this.$i.getDocuments(e,d).next(p=>this.indexManager.getMinOffset(e,r).next(v=>{const b=this.Bi(t,p);return this.Li(t,b,d,v.readTime)?this.Mi(e,rg(t,null,"F")):this.qi(e,b,t,v)}))})))}Oi(e,t,r,o){return Vy(t)||o.isEqual(mt.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(u=>{const d=this.Bi(t,u);return this.Li(t,d,r,o)?this.Fi(e,t):(Zp()<=No.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),$y(t)),this.qi(e,d,t,Dy(o,-1)))})}Bi(e,t){let r=new An(Hy(e));return t.forEach((o,u)=>{ad(e,u)&&(r=r.add(u))}),r}Li(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Fi(e,t){return Zp()<=No.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",$y(t)),this.$i.getDocumentsMatchingQuery(e,t,qi.min())}qi(e,t,r,o){return this.$i.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class fb{constructor(e,t,r,o){this.persistence=e,this.Ui=t,this.Tt=o,this.Ki=new lr(Nt),this.Gi=new Ra(u=>id(u),tg),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nw(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function Ag(n,e,t,r){return new fb(n,e,t,r)}function xg(n,e){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,me.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],p=[];let v=Wt();for(const b of o){d.push(b.batchId);for(const S of b.mutations)v=v.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(r,v).next(b=>({Wi:b,removedBatchIds:d,addedBatchIds:p}))})})}),Rg.apply(this,arguments)}function bv(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ji.newChangeBuffer({trackRemovals:!0});return function(d,p,v,b){const S=v.batch,O=S.keys();let q=se.resolve();return O.forEach(Z=>{q=q.next(()=>b.getEntry(p,Z)).next(he=>{const Pe=v.docVersions.get(Z);ct(null!==Pe),he.version.compareTo(Pe)<0&&(S.applyToRemoteDocument(he,v),he.isValidDocument()&&(he.setReadTime(v.commitVersion),b.addEntry(he)))})}),q.next(()=>d.mutationQueue.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Wt();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(p=p.add(d.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function aw(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function pb(n,e){const t=Qe(n),r=e.snapshotVersion;let o=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.ji.newChangeBuffer({trackRemovals:!0});o=t.Ki;const p=[];e.targetChanges.forEach((S,O)=>{const q=o.get(O);if(!q)return;p.push(t.Ns.removeMatchingKeys(u,S.removedDocuments,O).next(()=>t.Ns.addMatchingKeys(u,S.addedDocuments,O)));let Z=q.withSequenceNumber(u.currentSequenceNumber);var he,Pe,Ye;e.targetMismatches.has(O)?Z=Z.withResumeToken(Kr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):S.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(S.resumeToken,r)),o=o.insert(O,Z),Pe=Z,Ye=S,(0===(he=q).resumeToken.approximateByteSize()||Pe.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=3e8||Ye.addedDocuments.size+Ye.modifiedDocuments.size+Ye.removedDocuments.size>0)&&p.push(t.Ns.updateTargetData(u,Z))});let v=Mi(),b=Wt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),p.push(Mg(u,d,e.documentUpdates).next(S=>{v=S.Hi,b=S.Ji})),!r.isEqual(mt.min())){const S=t.Ns.getLastRemoteSnapshotVersion(u).next(O=>t.Ns.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(S)}return se.waitFor(p).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,b)).next(()=>v)}).then(u=>(t.Ki=o,u))}function Mg(n,e,t){let r=Wt(),o=Wt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Mi();return t.forEach((p,v)=>{const b=u.get(p);v.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(mt.min())?(e.removeEntry(p,v.readTime),d=d.insert(p,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(v),d=d.insert(p,v)):ke("LocalStore","Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",v.version)}),{Hi:d,Ji:o}})}function gb(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Id(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ns.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Ns.allocateTargetId(r).next(d=>(o=new ys(e,d,0,r.currentSequenceNumber),t.Ns.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ki.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function Dd(n,e,t){return Og.apply(this,arguments)}function Og(){return Og=(0,me.Z)(function*(n,e,t){const r=Qe(n),o=r.Ki.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Da(d))throw d;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(o.target)}),Og.apply(this,arguments)}function Ng(n,e,t){const r=Qe(n);let o=mt.min(),u=Wt();return r.persistence.runTransaction("Execute query","readonly",d=>function(p,v,b){const S=Qe(p),O=S.Gi.get(b);return void 0!==O?se.resolve(S.Ki.get(O)):S.Ns.getTargetData(v,b)}(r,d,_i(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(d,p.targetId).next(v=>{u=v})}).next(()=>r.Ui.getDocumentsMatchingQuery(d,e,t?o:mt.min(),t?u:Wt())).next(p=>(uw(r,sE(e),p),{documents:p,Yi:u})))}function Tv(n,e){const t=Qe(n),r=Qe(t.Ns),o=t.Ki.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ie(u,e).next(d=>d?d.target:null))}function mb(n,e){const t=Qe(n),r=t.Qi.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ji.getAllFromCollectionGroup(o,e,Dy(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(uw(t,e,o),o))}function uw(n,e,t){let r=n.Qi.get(e)||mt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Qi.set(e,r)}function Cv(){return Cv=(0,me.Z)(function*(n,e,t,r){const o=Qe(n);let u=Wt(),d=Mi();for(const b of t){const S=e.Zi(b.metadata.name);b.document&&(u=u.add(S));const O=e.Xi(b);O.setReadTime(e.tr(b.metadata.readTime)),d=d.insert(S,O)}const p=o.ji.newChangeBuffer({trackRemovals:!0}),v=yield Id(o,(b=r,_i(sd(tn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>Mg(b,p,d).next(S=>(p.apply(b),S)).next(S=>o.Ns.removeMatchingKeysForTargetId(b,v.targetId).next(()=>o.Ns.addMatchingKeys(b,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,S.Hi,S.Ji)).next(()=>S.Hi)))}),Cv.apply(this,arguments)}function bd(n,e){return kc.apply(this,arguments)}function kc(){return kc=(0,me.Z)(function*(n,e,t=Wt()){const r=yield Id(n,_i(dv(e.bundledQuery))),o=Qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=_n(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.$s.saveNamedQuery(u,e);const p=r.withResumeToken(Kr.EMPTY_BYTE_STRING,d);return o.Ki=o.Ki.insert(p.targetId,p),o.Ns.updateTargetData(u,p).next(()=>o.Ns.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Ns.addMatchingKeys(u,t,r.targetId)).next(()=>o.$s.saveNamedQuery(u,e))})}),kc.apply(this,arguments)}function cw(n,e){return`firestore_clients_${n}_${e}`}function yb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kg(n,e){return`firestore_targets_${n}_${e}`}class Fg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static er(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Oe(o.error.code,o.error.message))),d?new Fg(e,t,o.state,u):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Oe(r.error.code,r.error.message))),u?new pf(e,r.state,o):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Zh();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=CD(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Lg(e,u):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Sv{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Sv(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ug{constructor(){this.activeTargetIds=Zh()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vg{constructor(e,t,r,o,u){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new lr(Nt),this.started=!1,this.hr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.lr=cw(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Ug),this._r=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Si();for(const o of t){if(o===e.rr)continue;const u=e.getItem(cw(e.persistenceKey,o));if(u){const d=Lg.er(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const o=e.Ir(r);o&&e.Tr(o)}for(const o of e.hr)e.cr(o);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(kg(this.persistenceKey,e));if(r){const o=pf.er(e,r);o&&(t=o.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kg(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Rr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const o=t.Sr(r.key);return t.Dr(o,null)}{const o=t.Cr(r.key,r.newValue);if(o)return t.Dr(o.clientId,o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const o=t.$r(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.gr){if(null!==r.newValue){const o=t.Ir(r.newValue);if(o)return t.Tr(o)}}else if(r.key===t.dr){const o=function(u){let d=Wi.at;if(null!=u)try{const p=JSON.parse(u);ct("number"==typeof p),d=p}catch(p){Er("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);o!==Wi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.yr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const o=new Fg(this.currentUser,e,t,r),u=yb(this.persistenceKey,this.currentUser,e);this.setItem(u,o.nr())}Rr(e){const t=yb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const o=kg(this.persistenceKey,e),u=new pf(e,t,r);this.setItem(o,u.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return Lg.er(r,t)}Nr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Fg.er(new Wr(void 0!==r[2]?r[2]:null),o,t)}$r(e,t){const r=this.mr.exec(e),o=Number(r[1]);return pf.er(o,t)}Ir(e){return Sv.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Er(this.ar),u=this.Er(r),d=[],p=[];return u.forEach(v=>{o.has(v)||d.push(v)}),o.forEach(v=>{u.has(v)||p.push(v)}),this.syncEngine.qr(d,p).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=Zh();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Bg{constructor(){this.Ur=new Ug,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Ug,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jg{Gr(e){}shutdown(){}}class Td{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let $g=null;function Hg(){return null===$g?$g=268435456+Math.round(2147483648*Math.random()):$g++,"0x"+$g.toString(16)}const lw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vb{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const Ei="WebChannelConnection";class Av extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,o,u){const d=Hg(),p=this.fo(e,t);ke("RestConnection",`Sending RPC '${e}' ${d}:`,p,r);const v={};return this._o(v,o,u),this.wo(e,p,v,r).then(b=>(ke("RestConnection",`Received RPC '${e}' ${d}: `,b),b),b=>{throw Ia("RestConnection",`RPC '${e}' ${d} failed with error: `,b,"url: ",p,"request:",r),b})}mo(e,t,r,o,u,d){return this.lo(e,t,r,o,u)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}fo(e,t){return`${this.co}/v1/${t}:${lw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,o){const u=Hg();return new Promise((d,p)=>{const v=new Bo;v.setWithCredentials(!0),v.listenOnce(fD.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case qp.NO_ERROR:const S=v.getResponseJson();ke(Ei,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),d(S);break;case qp.TIMEOUT:ke(Ei,`RPC '${e}' ${u} timed out`),p(new Oe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case qp.HTTP_ERROR:const O=v.getStatus();if(ke(Ei,`RPC '${e}' ${u} failed with status:`,O,"response text:",v.getResponseText()),O>0){let q=v.getResponseJson();Array.isArray(q)&&(q=q[0]);const Z=null==q?void 0:q.error;if(Z&&Z.status&&Z.message){const he=function(Pe){const Ye=Pe.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Ye)>=0?Ye:oe.UNKNOWN}(Z.status);p(new Oe(he,Z.message))}else p(new Oe(oe.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new Oe(oe.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{ke(Ei,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);ke(Ei,`RPC '${e}' ${u} sending request:`,o),v.send(t,"POST",b,r,15)})}yo(e,t,r){const o=Hg(),u=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=F0(),p=hD(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(v.xmlHttpFactory=new L0({})),this._o(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const b=u.join("");ke(Ei,`Creating RPC '${e}' stream ${o}: ${b}`,v);const S=d.createWebChannel(b,v);let O=!1,q=!1;const Z=new vb({Yr:Pe=>{q?ke(Ei,`Not sending because RPC '${e}' stream ${o} is closed:`,Pe):(O||(ke(Ei,`Opening RPC '${e}' stream ${o} transport.`),S.open(),O=!0),ke(Ei,`RPC '${e}' stream ${o} sending:`,Pe),S.send(Pe))},Zr:()=>S.close()}),he=(Pe,Ye,Xt)=>{Pe.listen(Ye,sn=>{try{Xt(sn)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return he(S,Wp.EventType.OPEN,()=>{q||ke(Ei,`RPC '${e}' stream ${o} transport opened.`)}),he(S,Wp.EventType.CLOSE,()=>{q||(q=!0,ke(Ei,`RPC '${e}' stream ${o} transport closed`),Z.oo())}),he(S,Wp.EventType.ERROR,Pe=>{q||(q=!0,Ia(Ei,`RPC '${e}' stream ${o} transport errored:`,Pe),Z.oo(new Oe(oe.UNAVAILABLE,"The operation could not be completed")))}),he(S,Wp.EventType.MESSAGE,Pe=>{var Ye;if(!q){const Xt=Pe.data[0];ct(!!Xt);const sn=Xt,Vt=sn.error||(null===(Ye=sn[0])||void 0===Ye?void 0:Ye.error);if(Vt){ke(Ei,`RPC '${e}' stream ${o} received error:`,Vt);const Kt=Vt.status;let Bt=function(wi){const zd=wr[wi];if(void 0!==zd)return Qy(zd)}(Kt),en=Vt.message;void 0===Bt&&(Bt=oe.INTERNAL,en="Unknown error status: "+Kt+" with message "+Vt.message),q=!0,Z.oo(new Oe(Bt,en)),S.close()}else ke(Ei,`RPC '${e}' stream ${o} received:`,Xt),Z.uo(Xt)}}),he(p,pD.STAT_EVENT,Pe=>{Pe.stat===vy.PROXY?ke(Ei,`RPC '${e}' stream ${o} detected buffering proxy`):Pe.stat===vy.NOPROXY&&ke(Ei,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Z.ro()},0),Z}}function dw(){return"undefined"!=typeof window?window:null}function xv(){return"undefined"!=typeof document?document:null}function gf(n){return new zo(n,!0)}class Rv{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=o,this.To=u,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,o,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class Fc{constructor(e,t,r,o,u,d,p,v){this.Ys=e,this.So=r,this.Do=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Rv(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,me.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Co===t&&this.jo(r,o)},r=>{e(()=>{const o=new Oe(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(o)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(o=>{r(()=>this.zo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.ko.vo((0,me.Z)(function*(){e.state=0,e.start()}))}zo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hw extends Fc{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.Tt=u}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function PD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:rt(),o=e.targetChange.targetIds||[],u=function(v,b){return v.yt?(ct(void 0===b||"string"==typeof b),Kr.fromBase64String(b||"")):(ct(void 0===b||b instanceof Uint8Array),Kr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(v){const b=void 0===v.code?oe.UNKNOWN:Qy(v.code);return new Oe(b,v.message||"")}(d);t=new mE(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=Wo(n,r.document.name),u=_n(r.document.updateTime),d=r.document.createTime?_n(r.document.createTime):mt.min(),p=new ai({mapValue:{fields:r.document.fields}}),v=Nn.newFoundDocument(o,u,d,p);t=new Qh(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,o=Wo(n,r.document),u=r.readTime?_n(r.readTime):mt.min(),d=Nn.newNoDocument(o,u);t=new Qh([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Wo(n,r.document);t=new Qh([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new Zy(r.count||0);t=new Ac(r.targetId,u)}}var v;return t}(this.Tt,e),r=function(o){if(!("targetChange"in o))return mt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?_n(u.readTime):mt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=Xh(this.Tt),t.addTarget=function(o,u){let d;const p=u.target;return d=Ly(p)?{documents:CE(o,p)}:{query:fg(o,p)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=IE(o,u.resumeToken):u.snapshotVersion.compareTo(mt.min())>0&&(d.readTime=hd(o,u.snapshotVersion.toTimestamp())),d}(this.Tt,e);const r=function AE(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=Xh(this.Tt),t.removeTarget=e,this.qo(t)}}class Cd extends Fc{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.Tt=u,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function hg(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(r,o){let u=_n(r.updateTime?r.updateTime:o);return u.isEqual(mt.min())&&(u=_n(o)),new cE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.eu(r,t)}return ct(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Xh(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>gd(this.Tt,r))};this.qo(t)}}class QT extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=o,this.iu=!1}ru(){if(this.iu)throw new Oe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.lo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(oe.UNKNOWN,o.toString())})}mo(e,t,r,o){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.mo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Oe(oe.UNKNOWN,u.toString())})}terminate(){this.iu=!0}}class XT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Er(t),this.cu=!1):ke("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class pw{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=u,this.yu.Gr(p=>{r.enqueueAndForget((0,me.Z)(function*(){var v;Na(d)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,me.Z)(function*(b){const S=Qe(b);S.mu.add(4),yield Cu(S),S.pu.set("Unknown"),S.mu.delete(4),yield Gg(S)}),function(b){return v.apply(this,arguments)})(d))}))}),this.pu=new XT(r,o)}}function Gg(n){return zg.apply(this,arguments)}function zg(){return zg=(0,me.Z)(function*(n){if(Na(n))for(const e of n.gu)yield e(!0)}),zg.apply(this,arguments)}function Cu(n){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,me.Z)(function*(n){for(const e of n.gu)yield e(!1)}),Ov.apply(this,arguments)}function qg(n,e){const t=Qe(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),kv(t)?Pv(t):Md(t).Mo()&&Nv(t,e))}function mf(n,e){const t=Qe(n),r=Md(t);t.wu.delete(e),r.Mo()&&gw(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Na(t)&&t.pu.set("Unknown"))}function Nv(n,e){n.Iu.Ot(e.targetId),Md(n).Jo(e)}function gw(n,e){n.Iu.Ot(e),Md(n).Yo(e)}function Pv(n){n.Iu=new vE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),Md(n).start(),n.pu.au()}function kv(n){return Na(n)&&!Md(n).$o()&&n.wu.size>0}function Na(n){return 0===Qe(n).mu.size}function mw(n){n.Iu=void 0}function _b(n){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,me.Z)(function*(n){n.wu.forEach((e,t)=>{Nv(n,e)})}),Lc.apply(this,arguments)}function yw(n,e){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,me.Z)(function*(n,e){mw(n),kv(n)?(n.pu.fu(e),Pv(n)):n.pu.set("Unknown")}),Wg.apply(this,arguments)}function vw(n,e,t){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,me.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof mE&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const d=u.cause;for(const p of u.targetIds)o.wu.has(p)&&(yield o.remoteSyncer.rejectListen(p,d),o.wu.delete(p),o.Iu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yf(n,r)}else if(e instanceof Qh?n.Iu.Qt(e):e instanceof Ac?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(mt.min()))try{const r=yield aw(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.Iu.ee(u);return d.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const b=o.wu.get(v);b&&o.wu.set(v,b.withResumeToken(p.resumeToken,u))}}),d.targetMismatches.forEach(p=>{const v=o.wu.get(p);if(!v)return;o.wu.set(p,v.withResumeToken(Kr.EMPTY_BYTE_STRING,v.snapshotVersion)),gw(o,p);const b=new ys(v.target,p,1,v.sequenceNumber);Nv(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield yf(n,r)}var r}),Kg.apply(this,arguments)}function yf(n,e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,me.Z)(function*(n,e,t){if(!Da(e))throw e;n.mu.add(1),yield Cu(n),n.pu.set("Offline"),t||(t=()=>aw(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield Gg(n)}))}),Fv.apply(this,arguments)}function _w(n,e){return e().catch(t=>yf(n,t,e))}function Sd(n){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,me.Z)(function*(n){const e=Qe(n),t=Pa(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Eb(e);)try{const o=yield gb(e.localStore,r);if(null===o){0===e._u.length&&t.Bo();break}r=o.batchId,wb(e,o)}catch(o){yield yf(e,o)}Ew(e)&&Ad(e)}),Lv.apply(this,arguments)}function Eb(n){return Na(n)&&n._u.length<10}function wb(n,e){n._u.push(e);const t=Pa(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function Ew(n){return Na(n)&&!Pa(n).$o()&&n._u.length>0}function Ad(n){Pa(n).start()}function Ib(n){return vf.apply(this,arguments)}function vf(){return vf=(0,me.Z)(function*(n){Pa(n).su()}),vf.apply(this,arguments)}function Zo(n){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,me.Z)(function*(n){const e=Pa(n);for(const t of n._u)e.tu(t.mutations)}),Uv.apply(this,arguments)}function Vv(n,e,t){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,me.Z)(function*(n,e,t){const r=n._u.shift(),o=uv.from(r,e,t);yield _w(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Sd(n)}),Uc.apply(this,arguments)}function Db(n,e){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,me.Z)(function*(n,e){var t;e&&Pa(n).Xo&&(yield(t=(0,me.Z)(function*(r,o){if(Yy(u=o.code)&&u!==oe.ABORTED){const d=r._u.shift();Pa(r).Fo(),yield _w(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Sd(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Ew(n)&&Ad(n)}),Bv.apply(this,arguments)}function ww(n,e){return xd.apply(this,arguments)}function xd(){return xd=(0,me.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Na(t);t.mu.add(3),yield Cu(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield Gg(t)}),xd.apply(this,arguments)}function Rd(n,e){return jv.apply(this,arguments)}function jv(){return jv=(0,me.Z)(function*(n,e){const t=Qe(n);e?(t.mu.delete(2),yield Gg(t)):e||(t.mu.add(2),yield Cu(t),t.pu.set("Unknown"))}),jv.apply(this,arguments)}function Md(n){return n.Tu||(n.Tu=function(e,t,r){const o=Qe(e);return o.ru(),new hw(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:_b.bind(null,n),no:yw.bind(null,n),Ho:vw.bind(null,n)}),n.gu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.Fo(),kv(n)?Pv(n):n.pu.set("Unknown")):(yield n.Tu.stop(),mw(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function Pa(n){return n.Eu||(n.Eu=function(e,t,r){const o=Qe(e);return o.ru(),new Cd(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:Ib.bind(null,n),no:Db.bind(null,n),nu:Zo.bind(null,n),eu:Vv.bind(null,n)}),n.gu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Eu.Fo(),yield Sd(n)):(yield n.Eu.stop(),n._u.length>0&&(ke("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class Zg{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,p=new Zg(e,t,d,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Su(n,e){if(Er("AsyncQueue",`${e}: ${n}`),Da(n))return new Oe(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class Vc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=cg(),this.sortedSet=new lr(this.comparator)}static emptySet(e){return new Vc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Iw{constructor(){this.Au=new lr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):rt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class Od{constructor(e,t,r,o,u,d,p,v,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(p=>{d.push({type:0,doc:p})}),new Od(e,t,Vc.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class JT{constructor(){this.Pu=void 0,this.listeners=[]}}class $v{constructor(){this.queries=new Ra(e=>iE(e),zh),this.onlineState="Unknown",this.vu=new Set}}function _f(n,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,me.Z)(function*(n,e){const t=Qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new JT),o)try{u.Pu=yield t.onListen(r)}catch(d){const p=Su(d,`Initialization of query '${$y(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Pu&&e.Vu(u.Pu)&&Hv(t)}),Yg.apply(this,arguments)}function Ef(n,e){return wf.apply(this,arguments)}function wf(){return wf=(0,me.Z)(function*(n,e){const t=Qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),wf.apply(this,arguments)}function bb(n,e){const t=Qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const p of d.listeners)p.Vu(o)&&(r=!0);d.Pu=o}}r&&Hv(t)}function Tb(n,e,t){const r=Qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Hv(n){n.vu.forEach(e=>{e.next()})}class Gv{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Od(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class Dw{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class Qg{constructor(e){this.Tt=e}Zi(e){return Wo(this.Tt,e)}Xi(e){return e.metadata.exists?bE(this.Tt,e.document,!1):Nn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return _n(e)}}class bw{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Tw(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=tn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new Qg(this.Tt);for(const o of e)if(o.metadata.queries){const u=r.Zi(o.metadata.name);for(const d of o.metadata.queries){const p=(t.get(d)||Wt()).add(u);t.set(d,p)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function Pg(n,e,t,r){return Cv.apply(this,arguments)}(e.localStore,new Qg(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const o of e.queries)yield bd(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function Tw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class zv{constructor(e){this.key=e}}class qv{constructor(e){this.key=e}}class Cw{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Wt(),this.mutatedKeys=Wt(),this.ju=Hy(e),this.zu=new Vc(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new Iw,o=t?t.zu:this.zu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,O)=>{const q=o.get(S),Z=ad(this.query,O)?O:null,he=!!q&&this.mutatedKeys.has(q.key),Pe=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ye=!1;q&&Z?q.data.isEqual(Z.data)?he!==Pe&&(r.track({type:3,doc:Z}),Ye=!0):this.Yu(q,Z)||(r.track({type:2,doc:Z}),Ye=!0,(v&&this.ju(Z,v)>0||b&&this.ju(Z,b)<0)&&(p=!0)):!q&&Z?(r.track({type:0,doc:Z}),Ye=!0):q&&!Z&&(r.track({type:1,doc:q}),Ye=!0,(v||b)&&(p=!0)),Ye&&(Z?(d=d.add(Z),u=Pe?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{zu:d,Ju:r,Li:p,mutatedKeys:u}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const u=e.Ju.Ru();u.sort((b,S)=>function(O,q){const Z=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return Z(O)-Z(q)}(b.type,S.type)||this.ju(b.doc,S.doc)),this.Zu(r);const d=t?this.Xu():[],p=0===this.Qu.size&&this.current?1:0,v=p!==this.Gu;return this.Gu=p,0!==u.length||v?{snapshot:new Od(this.query,e.zu,o,u,e.mutatedKeys,0===p,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:d}:{tc:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Iw,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Wt(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new qv(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new zv(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=Wt();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return Od.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class Sw{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Aw{constructor(e){this.key=e,this.ic=!1}}class Cb{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.rc={},this.oc=new Ra(p=>iE(p),zh),this.uc=new Map,this.cc=new Set,this.ac=new lr(Ke.comparator),this.hc=new Map,this.lc=new hf,this.fc={},this.dc=new Map,this._c=co.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function xw(n,e){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,me.Z)(function*(n,e){const t=sm(n);let r,o;const u=t.oc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.sc();else{const d=yield Id(t.localStore,_i(e));t.isPrimaryClient&&qg(t.remoteStore,d);const p=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield ui(t,e,r,"current"===p,d.resumeToken)}return o}),Wv.apply(this,arguments)}function ui(n,e,t,r,o){return Au.apply(this,arguments)}function Au(){return Au=(0,me.Z)(function*(n,e,t,r,o){n.mc=(O,q,Z)=>{return(he=(0,me.Z)(function*(Pe,Ye,Xt,sn){let Vt=Ye.view.Hu(Xt);Vt.Li&&(Vt=yield Ng(Pe.localStore,Ye.query,!1).then(({documents:en})=>Ye.view.Hu(en,Vt)));const Kt=sn&&sn.targetChanges.get(Ye.targetId),Bt=Ye.view.applyChanges(Vt,Pe.isPrimaryClient,Kt);return Pd(Pe,Ye.targetId,Bt.tc),Bt.snapshot}),function(Pe,Ye,Xt,sn){return he.apply(this,arguments)})(n,O,q,Z);var he};const u=yield Ng(n.localStore,e,!0),d=new Cw(e,u.Yi),p=d.Hu(u.documents),v=dd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=d.applyChanges(p,n.isPrimaryClient,v);Pd(n,t,b.tc);const S=new Sw(e,t,d);return n.oc.set(e,S),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),b.snapshot}),Au.apply(this,arguments)}function Sb(n,e){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,me.Z)(function*(n,e){const t=Qe(n),r=t.oc.get(e),o=t.uc.get(r.targetId);if(o.length>1)return t.uc.set(r.targetId,o.filter(u=>!zh(u,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),mf(t.remoteStore,r.targetId),Nd(t,r.targetId)}).catch(mu))):(Nd(t,r.targetId),yield Dd(t.localStore,r.targetId,!0))}),Kv.apply(this,arguments)}function Bc(){return Bc=(0,me.Z)(function*(n,e,t){const r=$w(n);try{const o=yield function(u,d){const p=Qe(u),v=Xn.now(),b=d.reduce((q,Z)=>q.add(Z.key),Wt());let S,O;return p.persistence.runTransaction("Locally write mutations","readwrite",q=>{let Z=Mi(),he=Wt();return p.ji.getEntries(q,b).next(Pe=>{Z=Pe,Z.forEach((Ye,Xt)=>{Xt.isValidDocument()||(he=he.add(Ye))})}).next(()=>p.localDocuments.getOverlayedDocuments(q,Z)).next(Pe=>{S=Pe;const Ye=[];for(const Xt of d){const sn=OD(Xt,S.get(Xt.key).overlayedDocument);null!=sn&&Ye.push(new uo(Xt.key,sn,rE(sn.value.mapValue),qn.exists(!0)))}return p.mutationQueue.addMutationBatch(q,v,Ye,d)}).next(Pe=>{O=Pe;const Ye=Pe.applyToLocalDocumentSet(S,he);return p.documentOverlayCache.saveOverlays(q,Pe.batchId,Ye)})}).then(()=>({batchId:O.batchId,changes:pE(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,p){let v=u.fc[u.currentUser.toKey()];v||(v=new lr(Nt)),v=v.insert(d,p),u.fc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield lo(r,o.changes),yield Sd(r.remoteStore)}catch(o){const u=Su(o,"Failed to persist write");t.reject(u)}}),Bc.apply(this,arguments)}function Rw(n,e){return If.apply(this,arguments)}function If(){return If=(0,me.Z)(function*(n,e){const t=Qe(n);try{const r=yield pb(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.hc.get(u);d&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ic=!0:o.modifiedDocuments.size>0?ct(d.ic):o.removedDocuments.size>0&&(ct(d.ic),d.ic=!1))}),yield lo(t,r,e)}catch(r){yield mu(r)}}),If.apply(this,arguments)}function Mw(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.oc.forEach((u,d)=>{const p=d.view.bu(e);p.snapshot&&o.push(p.snapshot)}),function(u,d){const p=Qe(u);p.onlineState=d;let v=!1;p.queries.forEach((b,S)=>{for(const O of S.listeners)O.bu(d)&&(v=!0)}),v&&Hv(p)}(r.eventManager,e),o.length&&r.rc.Ho(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ow(n,e,t){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,me.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.hc.get(e),u=o&&o.key;if(u){let d=new lr(Ke.comparator);d=d.insert(u,Nn.newNoDocument(u,mt.min()));const p=Wt().add(u),v=new Yh(mt.min(),new Map,new An(Nt),d,p);yield Rw(r,v),r.ac=r.ac.remove(u),r.hc.delete(e),Qv(r)}else yield Dd(r.localStore,e,!1).then(()=>Nd(r,e,t)).catch(mu)}),Zv.apply(this,arguments)}function Ab(n,e){return Df.apply(this,arguments)}function Df(){return Df=(0,me.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const o=yield bv(t.localStore,e);em(t,r,null),Pw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lo(t,o)}catch(o){yield mu(o)}}),Df.apply(this,arguments)}function Nw(n,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,me.Z)(function*(n,e,t){const r=Qe(n);try{const o=yield function(u,d){const p=Qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return p.mutationQueue.lookupMutationBatch(v,d).next(S=>(ct(null!==S),b=S.keys(),p.mutationQueue.removeMutationBatch(v,S))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,b,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>p.localDocuments.getDocuments(v,b))})}(r.localStore,e);em(r,e,t),Pw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lo(r,o)}catch(o){yield mu(o)}}),Xg.apply(this,arguments)}function bf(){return bf=(0,me.Z)(function*(n,e){const t=Qe(n);Na(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.dc.get(r)||[];o.push(e),t.dc.set(r,o)}catch(r){const o=Su(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),bf.apply(this,arguments)}function Pw(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function em(n,e,t){const r=Qe(n);let o=r.fc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.fc[r.currentUser.toKey()]=o}}function Nd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||Yv(n,r)})}function Yv(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(mf(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),Qv(n))}function Pd(n,e,t){for(const r of t)r instanceof zv?(n.lc.addReference(r.key,e),kw(n,r)):r instanceof qv?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||Yv(n,r.key)):rt()}function kw(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.cc.add(r),Qv(n))}function Qv(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new Ke(tn.fromString(e)),r=n._c.next();n.hc.set(r,new Aw(t)),n.ac=n.ac.insert(t,r),qg(n.remoteStore,new ys(_i(sd(t.path)),r,2,Wi.at))}}function lo(n,e,t){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,me.Z)(function*(n,e,t){const r=Qe(n),o=[],u=[],d=[];var p;r.oc.isEmpty()||(r.oc.forEach((p,v)=>{d.push(r.mc(v,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,(null==b?void 0:b.fromCache)?"not-current":"current"),b){o.push(b);const S=Dv.Ni(v.targetId,b);u.push(S)}}))}),yield Promise.all(d),r.rc.Ho(o),yield(p=(0,me.Z)(function*(v,b){const S=Qe(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>se.forEach(b,q=>se.forEach(q.Ci,Z=>S.persistence.referenceDelegate.addReference(O,q.targetId,Z)).next(()=>se.forEach(q.xi,Z=>S.persistence.referenceDelegate.removeReference(O,q.targetId,Z)))))}catch(O){if(!Da(O))throw O;ke("LocalStore","Failed to update sequence numbers: "+O)}for(const O of b){const q=O.targetId;if(!O.fromCache){const Z=S.Ki.get(q),Pe=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);S.Ki=S.Ki.insert(q,Pe)}}}),function(v,b){return p.apply(this,arguments)})(r.localStore,u))}),Tf.apply(this,arguments)}function tC(n,e){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,me.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield xg(t.localStore,e);t.currentUser=e,(o=t).dc.forEach(d=>{d.forEach(p=>{p.reject(new Oe(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lo(t,r.Wi)}var o}),Xv.apply(this,arguments)}function xb(n,e){const t=Qe(n),r=t.hc.get(e);if(r&&r.ic)return Wt().add(r.key);{let o=Wt();const u=t.uc.get(e);if(!u)return o;for(const d of u){const p=t.oc.get(d);o=o.unionWith(p.view.Wu)}return o}}function Fw(n,e){return tm.apply(this,arguments)}function tm(){return tm=(0,me.Z)(function*(n,e){const t=Qe(n),r=yield Ng(t.localStore,e.query,!0),o=e.view.nc(r);return t.isPrimaryClient&&Pd(t,e.targetId,o.tc),o}),tm.apply(this,arguments)}function Rb(n,e){return nm.apply(this,arguments)}function nm(){return nm=(0,me.Z)(function*(n,e){const t=Qe(n);return mb(t.localStore,e).then(r=>lo(t,r))}),nm.apply(this,arguments)}function Lw(n,e,t,r){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,me.Z)(function*(n,e,t,r){const o=Qe(n),u=yield function(d,p){const v=Qe(d),b=Qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.An(S,p).next(O=>O?v.localDocuments.getDocuments(S,O):se.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield Sd(o.remoteStore):"acknowledged"===t||"rejected"===t?(em(o,e,r||null),Pw(o,e),p=e,Qe(Qe(o.localStore).mutationQueue).Pn(p)):rt(),yield lo(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Jv.apply(this,arguments)}function rm(){return rm=(0,me.Z)(function*(n,e){const t=Qe(n);if(sm(t),$w(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Uw(t,r.toArray());t.wc=!0,yield Rd(t.remoteStore,!0);for(const u of o)qg(t.remoteStore,u)}else if(!1===e&&!1!==t.wc){const r=[];let o=Promise.resolve();t.uc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Nd(t,d),Dd(t.localStore,d,!0))),mf(t.remoteStore,d)}),yield o,yield Uw(t,r),function(u){const d=Qe(u);d.hc.forEach((p,v)=>{mf(d.remoteStore,v)}),d.lc._s(),d.hc=new Map,d.ac=new lr(Ke.comparator)}(t),t.wc=!1,yield Rd(t.remoteStore,!1)}}),rm.apply(this,arguments)}function Uw(n,e,t){return im.apply(this,arguments)}function im(){return im=(0,me.Z)(function*(n,e,t){const r=Qe(n),o=[],u=[];for(const d of e){let p;const v=r.uc.get(d);if(v&&0!==v.length){p=yield Id(r.localStore,_i(v[0]));for(const b of v){const S=r.oc.get(b),O=yield Fw(r,S);O.snapshot&&u.push(O.snapshot)}}else{const b=yield Tv(r.localStore,d);p=yield Id(r.localStore,b),yield ui(r,e_(b),d,!1,p.resumeToken)}o.push(p)}return r.rc.Ho(u),o}),im.apply(this,arguments)}function e_(n){return Dc(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Vw(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).Si()}function Bw(n,e,t,r){return t_.apply(this,arguments)}function t_(){return t_=(0,me.Z)(function*(n,e,t,r){const o=Qe(n);if(o.wc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=o.uc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield mb(o.localStore,sE(u[0])),p=Yh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Kr.EMPTY_BYTE_STRING);yield lo(o,d,p);break}case"rejected":yield Dd(o.localStore,e,!0),Nd(o,e,r);break;default:rt()}}),t_.apply(this,arguments)}function Ob(n,e,t){return jw.apply(this,arguments)}function jw(){return jw=(0,me.Z)(function*(n,e,t){const r=sm(n);if(r.wc){for(const o of e){if(r.uc.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield Tv(r.localStore,o),d=yield Id(r.localStore,u);yield ui(r,e_(u),d.targetId,!1,d.resumeToken),qg(r.remoteStore,d)}for(const o of t)r.uc.has(o)&&(yield Dd(r.localStore,o,!1).then(()=>{mf(r.remoteStore,o),Nd(r,o)}).catch(mu))}}),jw.apply(this,arguments)}function sm(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ow.bind(null,e),e.rc.Ho=bb.bind(null,e.eventManager),e.rc.gc=Tb.bind(null,e.eventManager),e}function $w(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ab.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nw.bind(null,e),e}class Nb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.Tt=gf(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return Ag(this.persistence,new ow,e.initialUser,this.Tt)}Tc(e){return new iw(Dg.qs,this.Tt)}Ic(e){return new Bg}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Pb extends Nb{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield $w(r.Pc.syncEngine),yield Sd(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return Ag(this.persistence,new ow,e.initialUser,this.Tt)}Ac(e,t){return new nb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new ID(t,this.persistence);return new wD(e.asyncQueue,r)}Tc(e){const t=Sg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new Tg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,dw(),xv(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new Bg}}class rC extends Pb{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.Pc.syncEngine;r.sharedClientState instanceof Vg&&(r.sharedClientState.syncEngine={Br:Lw.bind(null,o),Lr:Bw.bind(null,o),qr:Ob.bind(null,o),Si:Vw.bind(null,o),Fr:Rb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var u=(0,me.Z)(function*(d){yield function Mb(n,e){return rm.apply(this,arguments)}(r.Pc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}Ic(e){const t=dw();if(!Vg.C(t))throw new Oe(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Sg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Hw{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Mw(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=tC.bind(null,r.syncEngine),yield Rd(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $v}createDatastore(e){const t=gf(e.databaseInfo.databaseId),r=new Av(e.databaseInfo);return new QT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>Mw(this.syncEngine,p,0),d=Td.C()?new Td:new jg,new pw(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,p,v,b){const S=new Cb(r,o,u,d,p,v);return b&&(S.wc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Qe(t);ke("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield Cu(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function kb(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class n_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class om{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Ar,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),o=Number(r);isNaN(o)&&e.xc(`length string (${r}) is not valid number`);const u=yield e.Nc(o);return new Dw(JSON.parse(u),t.length+o)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,me.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,me.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class iC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,d){const p=Qe(u),v=Xh(p.Tt)+"/documents",b={documents:d.map(Z=>fd(p.Tt,Z))},S=yield p.mo("BatchGetDocuments",v,b,d.length),O=new Map;S.forEach(Z=>{const he=function TE(n,e){return"found"in e?function(t,r){ct(!!r.found);const o=Wo(t,r.found.name),u=_n(r.found.updateTime),d=r.found.createTime?_n(r.found.createTime):mt.min(),p=new ai({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(o,u,d,p)}(n,e):"missing"in e?function(t,r){ct(!!r.missing),ct(!!r.readTime);const o=Wo(t,r.missing),u=_n(r.readTime);return Nn.newNoDocument(o,u)}(n,e):rt()}(p.Tt,Z);O.set(he.key.toString(),he)});const q=[];return d.forEach(Z=>{const he=O.get(Z.toString());ct(!!he),q.push(he)}),q}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ld(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ke.fromPath(o);e.mutations.push(new ug(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const d=Qe(o),p=Xh(d.Tt)+"/documents",v={writes:u.map(b=>gd(d.Tt,b))};yield d.lo("Commit",p,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?qn.exists(!1):qn.updateTime(t):qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Oe(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(t)}return qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Gw{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Mc=r.maxAttempts,this.ko=new Rv(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,me.Z)(function*(){const t=new iC(e.datastore),r=e.Fc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Bc(u)}))}).catch(o=>{e.Bc(o)})}))}Fc(e){try{const t=this.updateFunction(e);return!Kl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Yy(t)}return!1}}class r_{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Wr.UNAUTHENTICATED,this.clientId=jo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(p){ke("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(ke("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Su(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function i_(n,e){return am.apply(this,arguments)}function am(){return am=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield xg(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),am.apply(this,arguments)}function Fb(n,e){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield um(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>ww(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>ww(e.remoteStore,u)),n.onlineComponents=e}),Cf.apply(this,arguments)}function um(n){return s_.apply(this,arguments)}function s_(){return s_=(0,me.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield i_(n,new Nb)),n.offlineComponents}),s_.apply(this,arguments)}function Sf(n){return zw.apply(this,arguments)}function zw(){return zw=(0,me.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield Fb(n,new Hw)),n.onlineComponents}),zw.apply(this,arguments)}function qw(n){return um(n).then(e=>e.persistence)}function cm(n){return um(n).then(e=>e.localStore)}function Af(n){return Sf(n).then(e=>e.remoteStore)}function o_(n){return Sf(n).then(e=>e.syncEngine)}function xf(n){return Ww.apply(this,arguments)}function Ww(){return Ww=(0,me.Z)(function*(n){const e=yield Sf(n),t=e.eventManager;return t.onListen=xw.bind(null,e.syncEngine),t.onUnlisten=Sb.bind(null,e.syncEngine),t}),Ww.apply(this,arguments)}function jb(n,e,t={}){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,p,v){const b=new n_({next:O=>{u.enqueueAndForget(()=>Ef(o,S));const q=O.docs.has(d);!q&&O.fromCache?v.reject(new Oe(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&O.fromCache&&p&&"server"===p.source?v.reject(new Oe(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(O)},error:O=>v.reject(O)}),S=new Gv(sd(d.path),b,{includeMetadataChanges:!0,$u:!0});return _f(o,S)}(yield xf(n),n.asyncQueue,e,t,r)})),r.promise}function lm(n,e,t={}){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,p,v){const b=new n_({next:O=>{u.enqueueAndForget(()=>Ef(o,S)),O.fromCache&&"server"===p.source?v.reject(new Oe(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(O)},error:O=>v.reject(O)}),S=new Gv(d,b,{includeMetadataChanges:!0,$u:!0});return _f(o,S)}(yield xf(n),n.asyncQueue,e,t,r)})),r.promise}const dm=new Map;function a_(n,e,t){if(!t)throw new Oe(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Kw(n,e,t,r){if(!0===e&&!0===r)throw new Oe(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hm(n){if(!Ke.isDocumentKey(n))throw new Oe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function u_(n){if(Ke.isDocumentKey(n))throw new Oe(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rf(n);throw new Oe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function c_(n,e){if(e<=0)throw new Oe(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Zw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Kw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zw(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zT;switch(t.type){case"gapi":return new U0(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Oe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dm.get(e);t&&(ke("ComponentProvider","Removing Datastore"),dm.delete(e),t.terminate())}(this),Promise.resolve()}}class Pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class tr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tr(this.firestore,e,this._query)}}class fo extends tr{constructor(e,t,r){super(e,t,sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new Ke(e))}withConverter(e){return new fo(this.firestore,e,this._path)}}function l_(n,e,...t){if(n=(0,cn.m9)(n),a_("collection","path",e),n instanceof Mf){const r=tn.fromString(e,...t);return u_(r),new fo(n,null,r)}{if(!(n instanceof Pn||n instanceof fo))throw new Oe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return u_(r),new fo(n.firestore,null,r)}}function d_(n,e,...t){if(n=(0,cn.m9)(n),1===arguments.length&&(e=jo.R()),a_("doc","path",e),n instanceof Mf){const r=tn.fromString(e,...t);return hm(r),new Pn(n,null,new Ke(r))}{if(!(n instanceof Pn||n instanceof fo))throw new Oe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return hm(r),new Pn(n.firestore,n instanceof fo?n.converter:null,new Ke(r))}}function Qw(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),(n instanceof Pn||n instanceof fo)&&(e instanceof Pn||e instanceof fo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function h_(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),n instanceof tr&&e instanceof tr&&n.firestore===e.firestore&&zh(n._query,e._query)&&n.converter===e.converter}class qb{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Rv(this,"async_queue_retry"),this.Hc=()=>{const t=xv();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=xv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=xv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Ar;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Da(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const o=Zg.createAndSchedule(this,e,t,r,u=>this.Xc(u));return this.Gc.push(o),o}Jc(){this.Qc&&rt()}verifyOperationInProgress(){}ta(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function fm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Wb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends Mf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new qb,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Jw(this),this._firestoreClient.terminate()}}function Ir(n){return n._firestoreClient||Jw(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Jw(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bD(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new r_(n._authCredentials,n._appCheckCredentials,n._queue,r)}function pm(n,e,t){const r=new Ar;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield i_(n,t),yield Fb(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===oe.FAILED_PRECONDITION||d.code===oe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Ia("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function Xb(n){if(n._initialized||n._terminated)throw new Oe(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yo(Kr.fromBase64String(e))}catch(t){throw new Oe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yo(Kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ka{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fd{constructor(e){this._methodName=e}}class p_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const aC=/^__.*__$/;class uC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sc(e,this.data,t,this.fieldTransforms)}}class iI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Of(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class gm{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ia(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new gm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.aa(e),o}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.ia(),o}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return kf(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(Of(this.ra)&&aC.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class eT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||gf(e)}wa(e,t,r,o=!1){return new gm({ra:e,methodName:t,_a:r,path:cr.emptyPath(),ca:!1,da:o},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function xu(n){const e=n._freezeSettings(),t=gf(n._databaseId);return new eT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qo(n,e,t,r,o,u={}){const d=n.wa(u.merge||u.mergeFields?2:0,e,t,o);v_("Data must be an object, but it was:",d,r);const p=rT(r,d);let v,b;if(u.merge)v=new Zi(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const O of u.mergeFields){const q=Pf(e,O,t);if(!d.contains(q))throw new Oe(oe.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);__(S,q)||S.push(q)}v=new Zi(S),b=d.fieldTransforms.filter(O=>v.covers(O.field))}else v=null,b=d.fieldTransforms;return new uC(new ai(p),v,b)}class Ld extends Fd{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}function mm(n,e,t){return new gm({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class Nf extends Fd{_toFieldTransform(e){return new Cc(e.path,new Tc)}isEqual(e){return e instanceof Nf}}class tT extends Fd{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=mm(this,e,!0),r=this.ma.map(u=>Vd(u,t)),o=new Aa(r);return new Cc(e.path,o)}isEqual(e){return this===e}}class g_ extends Fd{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=mm(this,e,!0),r=this.ma.map(u=>Vd(u,t)),o=new xa(r);return new Cc(e.path,o)}isEqual(e){return this===e}}class m_ extends Fd{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Iu(e.Tt,sg(e.Tt,this.ga));return new Cc(e.path,t)}isEqual(e){return this===e}}function Ud(n,e,t,r){const o=n.wa(1,e,t);v_("Data must be an object, but it was:",o,r);const u=[],d=ai.empty();ba(r,(v,b)=>{const S=ym(e,v,t);b=(0,cn.m9)(b);const O=o.ha(S);if(b instanceof Ld)u.push(S);else{const q=Vd(b,O);null!=q&&(u.push(S),d.set(S,q))}});const p=new Zi(u);return new iI(d,p,o.fieldTransforms)}function sI(n,e,t,r,o,u){const d=n.wa(1,e,t),p=[Pf(e,r,t)],v=[o];if(u.length%2!=0)throw new Oe(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<u.length;q+=2)p.push(Pf(e,u[q])),v.push(u[q+1]);const b=[],S=ai.empty();for(let q=p.length-1;q>=0;--q)if(!__(b,p[q])){const Z=p[q];let he=v[q];he=(0,cn.m9)(he);const Pe=d.ha(Z);if(he instanceof Ld)b.push(Z);else{const Ye=Vd(he,Pe);null!=Ye&&(b.push(Z),S.set(Z,Ye))}}const O=new Zi(b);return new iI(S,O,d.fieldTransforms)}function nT(n,e,t,r=!1){return Vd(t,n.wa(r?4:3,e))}function Vd(n,e){if(y_(n=(0,cn.m9)(n)))return v_("Unsupported field value:",e,n),rT(n,e);if(n instanceof Fd)return function(t,r){if(!Of(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let p=Vd(d,r.la(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,cn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return sg(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Xn.fromDate(t);return{timestampValue:hd(r.Tt,o)}}if(t instanceof Xn){const o=new Xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hd(r.Tt,o)}}if(t instanceof p_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yo)return{bytesValue:IE(r.Tt,t._byteString)};if(t instanceof Pn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.fa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ms(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${Rf(t)}`)}(n,e)}function rT(n,e){const t={};return z0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(n,(r,o)=>{const u=Vd(o,e.ua(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function y_(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xn||n instanceof p_||n instanceof Yo||n instanceof Pn||n instanceof Fd)}function v_(n,e,t){if(!y_(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Rf(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function Pf(n,e,t){if((e=(0,cn.m9)(e))instanceof ka)return e._internalPath;if("string"==typeof e)return ym(n,e);throw kf("Field path arguments must be of type string or ",n,!1,void 0,t)}const iT=new RegExp("[~\\*/\\[\\]]");function ym(n,e,t){if(e.search(iT)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ka(...e.split("."))._internalPath}catch(r){throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kf(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${o}`),v+=")"),new Oe(oe.INVALID_ARGUMENT,p+n+v)}function __(n,e){return n.some(t=>t.isEqual(e))}class Bd{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sT extends Bd{data(){return super.data()}}function vm(n,e){return"string"==typeof e?ym(n,e):e instanceof ka?e._internalPath:e._delegate._internalPath}function E_(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ff{}class _m extends Ff{}function Fa(n,e,...t){let r=[];e instanceof Ff&&r.push(e),r=r.concat(t),function(o){const u=o.filter(p=>p instanceof jd).length,d=o.filter(p=>p instanceof jc).length;if(u>1||u>0&&d>0)throw new Oe(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class jc extends _m{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new jc(e,t,r)}_apply(e){const t=this._parse(e);return a(e._query,t),new tr(e.firestore,e.converter,jy(e._query,t))}_parse(e){const t=xu(e.firestore);return function(o,u,d,p,v,b,S){let O;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Oe(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){s(S,b);const q=[];for(const Z of S)q.push(i(p,o,Z));O={arrayValue:{values:q}}}else O=i(p,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||s(S,b),O=nT(d,"where",S,"in"===b||"not-in"===b);return Qt.create(v,b,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class jd extends Ff{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const d=o.getFlattenedFilters();for(const p of d)a(u,p),u=jy(u,p)}(e._query,t),new tr(e.firestore,e.converter,jy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class w_ extends _m{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new w_(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Oe(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new nd(o,u);return function(p,v){if(null===By(p)){const b=Gh(p);null!==b&&c(0,b,v.field)}}(r,d),d}(e._query,this._field,this._direction);return new tr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Sa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class I_ extends _m{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new I_(e,t,r)}_apply(e){return new tr(e.firestore,e.converter,rg(e._query,this._limit,this._limitType))}}class D_ extends _m{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new D_(e,t,r)}_apply(e){const t=cT(e,this.type,this._docOrFields,this._inclusive);return new tr(e.firestore,e.converter,(o=t,new Sa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class b_ extends _m{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new b_(e,t,r)}_apply(e){const t=cT(e,this.type,this._docOrFields,this._inclusive);return new tr(e.firestore,e.converter,(o=t,new Sa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function cT(n,e,t,r){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof Bd)return function(o,u,d,p,v){if(!p)throw new Oe(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const S of bc(o))if(S.field.isKeyField())b.push(Bs(u,p.key));else{const O=p.data.field(S.field);if(W0(O))throw new Oe(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const q=S.field.canonicalString();throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}b.push(O)}return new Ho(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=xu(n.firestore);return function(u,d,p,v,b,S){const O=u.explicitOrderBy;if(b.length>O.length)throw new Oe(oe.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let Z=0;Z<b.length;Z++){const he=b[Z];if(O[Z].field.isKeyField()){if("string"!=typeof he)throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof he}`);if(!od(u)&&-1!==he.indexOf("/"))throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${he}' contains a slash.`);const Pe=u.path.child(tn.fromString(he));if(!Ke.isDocumentKey(Pe))throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Pe}' is not because it contains an odd number of segments.`);const Ye=new Ke(Pe);q.push(Bs(d,Ye))}else{const Pe=nT(p,v,he);q.push(Pe)}}return new Ho(q,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function i(n,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new Oe(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!od(e)&&-1!==t.indexOf("/"))throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Ke.isDocumentKey(r))throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bs(n,new Ke(r))}if(t instanceof Pn)return Bs(n,t._key);throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rf(t)}.`)}function s(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a(n,e){if(e.isInequality()){const r=Gh(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=By(n);null!==u&&c(0,o,u)}const t=function(r,o){for(const u of r)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Oe(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function c(n,e,t){if(!t.isEqual(e))throw new Oe(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class h{convertValue(e,t="none"){switch(yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return ba(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new p_(Jn(e.latitude),Jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ay(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const t=Ta(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);ct(iv(r));const o=new gc(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return o.isEqual(t)||Er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function m(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class E extends h{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}class Y{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class de extends Bd{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Le(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Le extends de{data(e={}){return super.data(e)}}class Be{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Y(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Le(this._firestore,this._userDataWriter,r.key,r,new Y(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Le(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Y(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const p=new Le(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Y(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:ot(d.type),doc:p,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ot(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function Se(n,e){return n instanceof de&&e instanceof de?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Be&&e instanceof Be&&n._firestore===e._firestore&&h_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ht extends h{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}function Em(n,e,t){n=nn(n,Pn);const r=nn(n.firestore,Wn),o=m(n.converter,e,t);return Ru(r,[Qo(xu(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,qn.none())])}function wm(n,e,t,...r){n=nn(n,Pn);const o=nn(n.firestore,Wn),u=xu(o);let d;return d="string"==typeof(e=(0,cn.m9)(e))||e instanceof ka?sI(u,"updateDoc",n._key,e,t,r):Ud(u,"updateDoc",n._key,e),Ru(o,[d.toMutation(n._key,qn.exists(!0))])}function Im(n,...e){var t,r,o;n=(0,cn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||fm(e[d])||(u=e[d],d++);const p={includeMetadataChanges:u.includeMetadataChanges};if(fm(e[d])){const O=e[d];e[d]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[d+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[d+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let v,b,S;if(n instanceof Pn)b=nn(n.firestore,Wn),S=sd(n._key.path),v={next:O=>{e[d]&&e[d](lT(b,n,O))},error:e[d+1],complete:e[d+2]};else{const O=nn(n,tr);b=nn(O.firestore,Wn),S=O._query;const q=new Ht(b);v={next:Z=>{e[d]&&e[d](new Be(b,q,O,Z))},error:e[d+1],complete:e[d+2]},E_(n._query)}return function(O,q,Z,he){const Pe=new n_(he),Ye=new Gv(q,Pe,Z);return O.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return _f(yield xf(O),Ye)})),()=>{Pe.bc(),O.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Ef(yield xf(O),Ye)}))}}(Ir(b),S,p,v)}function Ru(n,e){return function(t,r){const o=new Ar;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function eC(n,e,t){return Bc.apply(this,arguments)}(yield o_(t),r,o)})),o.promise}(Ir(n),e)}function lT(n,e,t){const r=t.docs.get(e._key),o=new Ht(n);return new de(n,o,e._key,r,new Y(t.hasPendingWrites,t.fromCache),e.converter)}const ZS={maxAttempts:5};class pC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xu(e)}set(e,t,r){this._verifyNotCommitted();const o=$d(e,this._firestore),u=m(o.converter,t,r),d=Qo(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,qn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=$d(e,this._firestore);let d;return d="string"==typeof(t=(0,cn.m9)(t))||t instanceof ka?sI(this._dataReader,"WriteBatch.update",u._key,t,r,o):Ud(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$d(e,this._firestore);return this._mutations=this._mutations.concat(new ld(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $d(n,e){if((n=(0,cn.m9)(n)).firestore!==e)throw new Oe(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class YS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xu(e)}get(e){const t=$d(e,this._firestore),r=new E(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const u=o[0];if(u.isFoundDocument())return new Bd(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Bd(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=$d(e,this._firestore),u=m(o.converter,t,r),d=Qo(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=$d(e,this._firestore);let d;return d="string"==typeof(t=(0,cn.m9)(t))||t instanceof ka?sI(this._dataReader,"Transaction.update",u._key,t,r,o):Ud(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=$d(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$d(e,this._firestore),r=new Ht(this._firestore);return super.get(e).then(o=>new de(this._firestore,r,t._key,o._document,new Y(!1,!1),t.converter))}}function dT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function mC(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function yC(){if(!function KT(){return"undefined"!=typeof atob}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hl=Ns.SDK_VERSION,(0,Ns._registerComponent)(new vl.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Wn(new qT(t.getProvider("auth-internal")),new V0(t.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Oe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(p.options.projectId,v)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Ns.registerVersion)(Kp,"3.9.0",n),(0,Ns.registerVersion)(Kp,"3.9.0","esm2017")}();class R_{constructor(e){this._delegate=e}static fromBase64String(e){return yC(),new R_(Yo.fromBase64String(e))}static fromUint8Array(e){return mC(),new R_(Yo.fromUint8Array(e))}toBase64(){return yC(),this._delegate.toBase64()}toUint8Array(){return mC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hT(n){return function sA(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oA{enableIndexedDbPersistence(e,t){return function eI(n,e){Xb(n=nn(n,Wn));const t=Ir(n),r=n._freezeSettings(),o=new Hw;return pm(t,o,new Pb(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function f_(n){Xb(n=nn(n,Wn));const e=Ir(n),t=n._freezeSettings(),r=new Hw;return pm(e,r,new rC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tI(n){if(n._initialized&&!n._terminated)throw new Oe(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ar;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!xr.C())return Promise.resolve();const o=r+"main";yield xr.delete(o)}),function(r){return t.apply(this,arguments)})(Sg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class vC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ia("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Yw(n,e,t,r={}){var o;const u=(n=nn(n,Mf))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ia("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=Wr.MOCK_USER;else{d=(0,cn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Oe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Wr(v)}n._authCredentials=new wy(new mD(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function nI(n){return function Ub(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield qw(n),t=yield Af(n);return e.setNetworkEnabled(!0),function(r){const o=Qe(r);return o.mu.delete(0),Gg(o)}(t)}))}(Ir(n=nn(n,Wn)))}(this._delegate)}disableNetwork(){return function rI(n){return function Vb(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield qw(n),t=yield Af(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=Qe(o);u.mu.add(0),yield Cu(u),u.pu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ir(n=nn(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Kw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Yb(n){return function(e){const t=new Ar;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Jg(n,e){return bf.apply(this,arguments)}(yield o_(e),t)})),t.promise}(Ir(n=nn(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function x_(n,e){return function Hb(n,e){const t=new n_(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield xf(n),o=t,Qe(r).vu.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield xf(n),o=t,void Qe(r).vu.delete(o);var r,o}))}}(Ir(n=nn(n,Wn)),fm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dm(this,l_(this._delegate,e))}catch(t){throw Es(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xo(this,d_(this._delegate,e))}catch(t){throw Es(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ws(this,function zb(n,e){if(n=nn(n,Mf),a_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new tr(n,null,(t=e,new Sa(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Es(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function QS(n,e,t){n=nn(n,Wn);const r=Object.assign(Object.assign({},ZS),t);return function(o){if(o.maxAttempts<1)throw new Oe(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const p=new Ar;return o.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const v=yield function Lb(n){return Sf(n).then(e=>e.datastore)}(o);new Gw(o.asyncQueue,v,d,u,p).run()})),p.promise}(Ir(n),o=>e(new YS(n,o)),r)}(this._delegate,t=>e(new _C(this,t)))}batch(){return Ir(this._delegate),new EC(new pC(this._delegate,e=>Ru(this._delegate,e)))}loadBundle(e){return function Qb(n,e){const t=Ir(n=nn(n,Wn)),r=new Wb;return function ho(n,e,t,r){const o=function(u,d){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,b){if(v instanceof Uint8Array)return kb(v,b);if(v instanceof ArrayBuffer)return kb(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new om(v,d);var v}(t,gf(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function nC(n,e,t){const r=Qe(n);var o;(o=(0,me.Z)(function*(u,d,p){try{const v=yield d.getMetadata();if(yield function(q,Z){const he=Qe(q),Pe=_n(Z.createTime);return he.persistence.runTransaction("hasNewerBundle","readonly",Ye=>he.$s.getBundleMetadata(Ye,Z.id)).then(Ye=>!!Ye&&Ye.createTime.compareTo(Pe)>=0)}(u.localStore,v))return yield d.close(),p._completeWith({taskState:"Success",documentsLoaded:(q=v).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);p._updateProgress(Tw(v));const b=new bw(v,u.localStore,d.Tt);let S=yield d.yc();for(;S;){const q=yield b.Bu(S);q&&p._updateProgress(q),S=yield d.yc()}const O=yield b.complete();return yield lo(u,O.Uu,void 0),yield function(q,Z){const he=Qe(q);return he.persistence.runTransaction("Save bundle","readwrite",Pe=>he.$s.saveBundleMetadata(Pe,Z))}(u.localStore,v),p._completeWith(O.progress),Promise.resolve(O.qu)}catch(v){return Ia("SyncEngine",`Loading bundle failed with ${v}`),p._failWith(v),Promise.resolve(new Set)}var q}),function(u,d,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield o_(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function oC(n,e){return function Gb(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=Qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.$s.getNamedQuery(u,r))}(yield cm(n),e)}))}(Ir(n=nn(n,Wn)),e).then(t=>t?new tr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ws(this,t):null)}}class oI extends h{constructor(e){super(),this.firestore=e}convertBytes(e){return new R_(new Yo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xo.forKey(t,this.firestore,null)}}class _C{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oI(e)}get(e){const t=Uf(e);return this._delegate.get(t).then(r=>new M_(this._firestore,new de(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Uf(e);return r?(dT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Uf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Uf(e);return this._delegate.delete(t),this}}class EC{constructor(e){this._delegate=e}set(e,t,r){const o=Uf(e);return r?(dT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Uf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Uf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Le(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new O_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Lf(e,new oI(e),t),o.set(t,u)),u}}Lf.INSTANCES=new WeakMap;class Xo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xo(t,new Pn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Xo(t,new Pn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Dm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dm(this.firestore,l_(this._delegate,e))}catch(t){throw Es(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof Pn&&Qw(this._delegate,e)}set(e,t){t=dT("DocumentReference.set",t);try{return t?Em(this._delegate,e,t):Em(this._delegate,e)}catch(r){throw Es(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?wm(this._delegate,e):wm(this._delegate,e,t,...r)}catch(o){throw Es(o,"updateDoc()","DocumentReference.update()")}}delete(){return function S_(n){return Ru(nn(n.firestore,Wn),[new ld(n._key,qn.none())])}(this._delegate)}onSnapshot(...e){const t=wC(e),r=IC(e,o=>new M_(this.firestore,new de(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Im(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Dn(n){n=nn(n,Pn);const e=nn(n.firestore,Wn),t=Ir(e),r=new Ht(e);return function Bb(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const p=yield function(v,b){const S=Qe(v);return S.persistence.runTransaction("read document","readonly",O=>S.localDocuments.getDocument(O,b))}(o,u);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new Oe(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const v=Su(p,`Failed to get document '${u} from cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield cm(n),e,t);var r})),t.promise}(t,n._key).then(o=>new de(e,r,n._key,o,new Y(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function _s(n){n=nn(n,Pn);const e=nn(n.firestore,Wn);return jb(Ir(e),n._key,{source:"server"}).then(t=>lT(e,n,t))}(this._delegate):function It(n){n=nn(n,Pn);const e=nn(n.firestore,Wn);return jb(Ir(e),n._key).then(t=>lT(e,n,t))}(this._delegate),t.then(r=>new M_(this.firestore,new de(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Xo(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}function Es(n,e,t){return n.message=n.message.replace(e,t),n}function wC(n){for(const e of n)if("object"==typeof e&&!hT(e))return e;return{}}function IC(n,e){var t,r;let o;return o=hT(n[0])?n[0]:hT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class M_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Se(this._delegate,e._delegate)}}class O_ extends M_{data(e){const t=this._delegate.data(e);return function Ey(n,e){n||rt()}(void 0!==t),t}}class ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oI(e)}where(e,t,r){try{return new ws(this.firestore,Fa(this._delegate,function oT(n,e,t){const r=e,o=vm("where",n);return jc._create(o,r,t)}(e,t,r)))}catch(o){throw Es(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ws(this.firestore,Fa(this._delegate,function aT(n,e="asc"){const t=e,r=vm("orderBy",n);return w_._create(r,t)}(e,t)))}catch(r){throw Es(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ws(this.firestore,Fa(this._delegate,function cC(n){return c_("limit",n),I_._create("limit",n,"F")}(e)))}catch(t){throw Es(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ws(this.firestore,Fa(this._delegate,function lC(n){return c_("limitToLast",n),I_._create("limitToLast",n,"L")}(e)))}catch(t){throw Es(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ws(this.firestore,Fa(this._delegate,function dC(...n){return D_._create("startAt",n,!0)}(...e)))}catch(t){throw Es(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ws(this.firestore,Fa(this._delegate,function uT(...n){return D_._create("startAfter",n,!1)}(...e)))}catch(t){throw Es(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ws(this.firestore,Fa(this._delegate,function hC(...n){return b_._create("endBefore",n,!1)}(...e)))}catch(t){throw Es(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ws(this.firestore,Fa(this._delegate,function fC(...n){return b_._create("endAt",n,!0)}(...e)))}catch(t){throw Es(t,"endAt()","Query.endAt()")}}isEqual(e){return h_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function T_(n){n=nn(n,tr);const e=nn(n.firestore,Wn),t=Ir(e),r=new Ht(e);return function $b(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const p=yield Ng(o,u,!0),v=new Cw(u,p.Yi),b=v.Hu(p.documents),S=v.applyChanges(b,!1);d.resolve(S.snapshot)}catch(p){const v=Su(p,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield cm(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Be(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function C_(n){n=nn(n,tr);const e=nn(n.firestore,Wn),t=Ir(e),r=new Ht(e);return lm(t,n._query,{source:"server"}).then(o=>new Be(e,r,n,o))}(this._delegate):function $c(n){n=nn(n,tr);const e=nn(n.firestore,Wn),t=Ir(e),r=new Ht(e);return E_(n._query),lm(t,n._query).then(o=>new Be(e,r,n,o))}(this._delegate),t.then(r=>new fT(this.firestore,new Be(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wC(e),r=IC(e,o=>new fT(this.firestore,new Be(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Im(this._delegate,t,r)}withConverter(e){return new ws(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}class uA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new O_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new O_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new O_(this._firestore,r))})}isEqual(e){return Se(this._delegate,e._delegate)}}class Dm extends ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xo(this.firestore,e):null}doc(e){try{return new Xo(this.firestore,void 0===e?d_(this._delegate):d_(this._delegate,e))}catch(t){throw Es(t,"doc()","CollectionReference.doc()")}}add(e){return function A_(n,e){const t=nn(n.firestore,Wn),r=d_(n),o=m(n.converter,e);return Ru(t,[Qo(xu(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Xo(this.firestore,t))}isEqual(e){return Qw(this._delegate,e._delegate)}withConverter(e){return new Dm(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}function Uf(n){return nn(n,Pn)}class pT{constructor(...e){this._delegate=new ka(...e)}static documentId(){return new pT(cr.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof ka&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function JS(){return new Nf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Vf(e)}static delete(){const e=function XS(){return new Ld("deleteField")}();return e._methodName="FieldValue.delete",new Vf(e)}static arrayUnion(...e){const t=function eA(...n){return new tT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Vf(t)}static arrayRemove(...e){const t=function tA(...n){return new g_("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Vf(t)}static increment(e){const t=function nA(n){return new m_("increment",n)}(e);return t._methodName="FieldValue.increment",new Vf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cA={Firestore:vC,GeoPoint:p_,Timestamp:Xn,Blob:R_,Transaction:_C,WriteBatch:EC,DocumentReference:Xo,DocumentSnapshot:M_,Query:ws,QueryDocumentSnapshot:O_,QuerySnapshot:fT,CollectionReference:Dm,FieldPath:pT,FieldValue:Vf,setLogLevel:function aA(n){!function gD(n){hc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function DC(n,e){return function hA(n,e=ji.z){return new Si.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function gT(n,e){return DC(n,e).pipe((0,jt.U)(t=>({payload:t,type:"query"})))}function aI(n,e){return gT(n,e).pipe(lu(void 0),Ku(),(0,jt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,p)=>{const v=o.find(S=>S.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:d}})}),u}))}function bC(n,e,t){return aI(n,t).pipe(Ri((r,o)=>function pA(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gA(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function vh(n,e=Vi.y){return n=null!=n?n:_h,(0,qt.e)((t,r)=>{let o,u=!0;t.subscribe((0,Gr.x)(r,d=>{const p=e(d);(u||!n(o,p))&&(u=!1,o=p,r.next(d))}))})}(),(0,jt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function mT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function TC(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function dA(n){(function lA(n,e){n.INTERNAL.registerComponent(new vl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},cA)))})(n,(e,t)=>new vC(e,t,new oA)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(Zu.Z);class CC{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,jt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(lu(void 0),Ku(),ir(([r,o])=>o.length>0||!r),(0,jt.U)(([r,o])=>o),Qn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ri((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=TC(e);return bC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qn.iC)}valueChanges(e={}){return gT(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Qn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(Qn.iC)}add(e){return this.ref.add(e)}doc(e){return new SC(this.ref.doc(e),this.afs)}}class SC{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=RC(r,t);return new CC(o,u,this.afs)}snapshotChanges(){return function fA(n,e){return DC(n,e).pipe(lu(void 0),Ku(),(0,jt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,jt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Rn.D)(this.ref.get(e)).pipe(Qn.iC)}}class mA{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aI(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ir(t=>t.length>0),Qn.iC):aI(this.query,this.afs.schedulers.outsideAngular).pipe(Qn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ri((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=TC(e);return bC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qn.iC)}valueChanges(e={}){return gT(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Qn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(Qn.iC)}}const AC=new _.OlP("angularfire2.enableFirestorePersistence"),xC=new _.OlP("angularfire2.firestore.persistenceSettings"),yA=new _.OlP("angularfire2.firestore.settings"),vA=new _.OlP("angularfire2.firestore.use-emulator");function RC(n,e=(t=>t)){return{query:e(n),ref:n}}let _A=(()=>{class n{constructor(t,r,o,u,d,p,v,b,S,O,q,Z,he,Pe,Ye,Xt,sn){this.schedulers=v;const Vt=(0,Ci.on)(t,p,r),Kt=S;O&&gt(Vt,p,q,he,Pe,Ye,Z,Xt),[this.firestore,this.persistenceEnabled$]=(0,Ci.cc)(`${Vt.name}.firestore`,"AngularFirestore",Vt.name,()=>{const Bt=p.runOutsideAngular(()=>Vt.firestore());if(u&&Bt.settings(u),Kt&&Bt.useEmulator(...Kt),o&&!Pr(d)){const en=()=>{try{return(0,Rn.D)(Bt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(wi){return"undefined"!=typeof console&&console.warn(wi),Tt(!1)}};return[Bt,p.runOutsideAngular(en)]}return[Bt,Tt(!1)]},[u,Kt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=RC(o,r),p=this.schedulers.ngZone.run(()=>u);return new CC(p,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new mA(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new SC(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Ci.Dh),_.LFG(Ci.xv,8),_.LFG(AC,8),_.LFG(yA,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Qn.HU),_.LFG(xC,8),_.LFG(vA,8),_.LFG($t,8),_.LFG(w,8),_.LFG(A,8),_.LFG(k,8),_.LFG(J,8),_.LFG(Re,8),_.LFG(Je,8),_.LFG(hh,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),EA=(()=>{class n{constructor(){f.Z.registerVersion("angularfire",Qn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:AC,useValue:!0},{provide:xC,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[_A]}),n})();class po extends Ys.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:wA}=Array,{getPrototypeOf:IA,prototype:DA,keys:bA}=Object;const{isArray:SA}=Array;var MA=L(9672);function OA(...n){const e=(0,vr.yG)(n),t=(0,vr.jO)(n),{args:r,keys:o}=function TA(n){if(1===n.length){const e=n[0];if(wA(e))return{args:e,keys:null};if(function CA(n){return n&&"object"==typeof n&&IA(n)===DA}(e)){const t=bA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Rn.D)([],e);const u=new Si.y(function NA(n,e,t=Vi.y){return r=>{MC(e,()=>{const{length:o}=n,u=new Array(o);let d=o,p=o;for(let v=0;v<o;v++)MC(e,()=>{const b=(0,Rn.D)(n[v],e);let S=!1;b.subscribe((0,Gr.x)(r,O=>{u[v]=O,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function RA(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):Vi.y));return t?u.pipe(function xA(n){return(0,jt.U)(e=>function AA(n,e){return SA(e)?n(...e):n(e)}(n,e))}(t)):u}function MC(n,e,t){n?(0,MA.f)(t,n,e):e()}function uI(n,e){const t=(0,Bi.m)(n)?n:()=>n,r=o=>o.error(t());return new Si.y(e?o=>e.schedule(r,0,o):r)}function OC(n){return new Si.y(e=>{(0,qa.Xf)(n()).subscribe(e)})}var NC=L(727);function PC(){return(0,qt.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class PA extends Si.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new NC.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=NC.w0.EMPTY)}return e}refCount(){return PC()(this)}}function Hd(n){return(0,qt.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Gr.x)(t,void 0,void 0,d=>{u=(0,qa.Xf)(n(d,Hd(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Yi=L(5577);function N_(n,e){return(0,Bi.m)(e)?(0,Yi.z)(n,e,1):(0,Yi.z)(n,1)}function yT(n){return n<=0?()=>ri.E:(0,qt.e)((e,t)=>{let r=[];e.subscribe((0,Gr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var go=L(8505);class Hc{constructor(e,t){this.id=e,this.url=t}}class vT extends Hc{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class P_ extends Hc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kC extends Hc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class LA extends Hc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class UA extends Hc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VA extends Hc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BA extends Hc{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jA extends Hc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $A extends Hc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FC{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class LC{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HA{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GA{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zA{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qA{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UC{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const rn="primary";class WA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bm(n){return new WA(n)}const VC="ngNavigationCancelingError";function _T(n){const e=Error("NavigationCancelingError: "+n);return e[VC]=!0,e}function ZA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],p=n[u];if(d.startsWith(":"))o[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Mu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!BC(n[o],e[o]))return!1;return!0}function BC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function jC(n){return Array.prototype.concat.apply([],n)}function $C(n){return n.length>0?n[n.length-1]:null}function Ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ou(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):Tt(n)}const XA={exact:function zC(n,e,t){if(!jf(n.segments,e.segments)||!cI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!zC(n.children[r],e.children[r],t))return!1;return!0},subset:qC},HC={exact:function JA(n,e){return Mu(n,e)},subset:function ex(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>BC(n[t],e[t]))},ignored:()=>!0};function GC(n,e,t){return XA[t.paths](n.root,e.root,t.matrixParams)&&HC[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function qC(n,e,t){return WC(n,e,e.segments,t)}function WC(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!jf(o,t)||e.hasChildren()||!cI(o,t,r))}if(n.segments.length===t.length){if(!jf(n.segments,t)||!cI(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!qC(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(jf(n.segments,o)&&cI(n.segments,o,r)&&n.children[rn])&&WC(n.children[rn],e,u,r)}}function cI(n,e,t){return e.every((r,o)=>HC[t](n[o].parameters,r.parameters))}class Bf{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bm(this.queryParams)),this._queryParamMap}toString(){return rx.serialize(this)}}class fn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ni(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lI(this)}}class k_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bm(this.parameters)),this._parameterMap}toString(){return XC(this)}}function jf(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class KC{}class ZC{parse(e){const t=new hx(e);return new Bf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${F_(e.root,!0)}`,r=function ox(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${dI(t)}=${dI(o)}`).join("&"):`${dI(t)}=${dI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function ix(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const rx=new ZC;function lI(n){return n.segments.map(e=>XC(e)).join("/")}function F_(n,e){if(!n.hasChildren())return lI(n);if(e){const t=n.children[rn]?F_(n.children[rn],!1):"",r=[];return Ni(n.children,(o,u)=>{u!==rn&&r.push(`${u}:${F_(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nx(n,e){let t=[];return Ni(n.children,(r,o)=>{o===rn&&(t=t.concat(e(r,o)))}),Ni(n.children,(r,o)=>{o!==rn&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===rn?[F_(n.children[rn],!1)]:[`${o}:${F_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[rn]?`${lI(n)}/${t[0]}`:`${lI(n)}/(${t.join("//")})`}}function YC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dI(n){return YC(n).replace(/%3B/gi,";")}function ET(n){return YC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hI(n){return decodeURIComponent(n)}function QC(n){return hI(n.replace(/\+/g,"%20"))}function XC(n){return`${ET(n.path)}${function sx(n){return Object.keys(n).map(e=>`;${ET(e)}=${ET(n[e])}`).join("")}(n.parameters)}`}const ax=/^[^\/()?;=#]+/;function fI(n){const e=n.match(ax);return e?e[0]:""}const ux=/^[^=?&#]+/,lx=/^[^&#]+/;class hx{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fn([],{}):new fn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[rn]=new fn(e,t)),r}parseSegment(){const e=fI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new k_(hI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=fI(this.remaining);o&&(r=o,this.capture(r))}e[hI(t)]=hI(r)}parseQueryParam(e){const t=function cx(n){const e=n.match(ux);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function dx(n){const e=n.match(lx);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=QC(t),u=QC(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fI(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=rn);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[rn]:new fn([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class JC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=wT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=wT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=IT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return IT(e,this._root).map(t=>t.value)}}function wT(n,e){if(n===e.value)return e;for(const t of e.children){const r=wT(n,t);if(r)return r}return null}function IT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=IT(n,t);if(r.length)return r.unshift(e),r}return[]}class Gc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Tm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class eS extends JC{constructor(e,t){super(e),this.snapshot=t,DT(this,e)}toString(){return this.snapshot.toString()}}function tS(n,e){const t=function fx(n,e){const d=new pI([],{},{},"",{},rn,e,null,n.root,-1,{});return new rS("",new Gc(d,[]))}(n,e),r=new po([new k_("",{})]),o=new po({}),u=new po({}),d=new po({}),p=new po(""),v=new Cm(r,o,d,p,u,rn,e,t.root);return v.snapshot=t.root,new eS(new Gc(v,[]),t)}class Cm{constructor(e,t,r,o,u,d,p,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=p,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,jt.U)(e=>bm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,jt.U)(e=>bm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function px(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class pI{constructor(e,t,r,o,u,d,p,v,b,S,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=p,this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=S,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rS extends JC{constructor(e,t){super(t),this.url=e,DT(this,t)}toString(){return iS(this._root)}}function DT(n,e){e.value._routerState=n,e.children.forEach(t=>DT(n,t))}function iS(n){const e=n.children.length>0?` { ${n.children.map(iS).join(", ")} } `:"";return`${n.value}${e}`}function bT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mu(e.params,t.params)||n.params.next(t.params),function YA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function TT(n,e){const t=Mu(n.params,e.params)&&function tx(n,e){return jf(n,e)&&n.every((t,r)=>Mu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||TT(n.parent,e.parent))}function L_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function mx(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return L_(n,r,o);return L_(n,r)})}(n,e,t);return new Gc(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(p=>L_(n,p)),d}}const r=function yx(n){return new Cm(new po(n.url),new po(n.params),new po(n.queryParams),new po(n.fragment),new po(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>L_(n,u));return new Gc(r,o)}}function gI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function U_(n){return"object"==typeof n&&null!=n&&n.outlets}function CT(n,e,t,r,o){let u={};if(r&&Ni(r,(p,v)=>{u[v]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new Bf(t,u,o);const d=sS(n,e,t);return new Bf(d,u,o)}function sS(n,e,t){const r={};return Ni(n.children,(o,u)=>{r[u]=o===e?t:sS(o,e,t)}),new fn(n.segments,r)}class oS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gI(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(U_);if(o&&o!==$C(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ST{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function aS(n,e,t){if(n||(n=new fn([],{})),0===n.segments.length&&n.hasChildren())return mI(n,e,t);const r=function Dx(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],p=t[r];if(U_(p))break;const v=`${p}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!cS(v,b,d))return u;r+=2}else{if(!cS(v,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new fn(n.segments.slice(0,r.pathIndex),{});return u.children[rn]=new fn(n.segments.slice(r.pathIndex),n.children),mI(u,0,o)}return r.match&&0===o.length?new fn(n.segments,{}):r.match&&!n.hasChildren()?AT(n,e,t):r.match?mI(n,0,o):AT(n,e,t)}function mI(n,e,t){if(0===t.length)return new fn(n.segments,{});{const r=function Ix(n){return U_(n[0])?n[0].outlets:{[rn]:n}}(t),o={};return Ni(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=aS(n.children[d],e,u))}),Ni(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new fn(n.segments,o)}}function AT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(U_(u)){const v=bx(u.outlets);return new fn(r,v)}if(0===o&&gI(t[0])){r.push(new k_(n.segments[e].path,uS(t[0]))),o++;continue}const d=U_(u)?u.outlets[rn]:`${u}`,p=o<t.length-1?t[o+1]:null;d&&p&&gI(p)?(r.push(new k_(d,uS(p))),o+=2):(r.push(new k_(d,{})),o++)}return new fn(r,{})}function bx(n){const e={};return Ni(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=AT(new fn([],{}),0,t))}),e}function uS(n){const e={};return Ni(n,(t,r)=>e[r]=`${t}`),e}function cS(n,e,t){return n==t.path&&Mu(e,t.parameters)}class Cx{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Tm(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Ni(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Tm(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Tm(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Tm(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new qA(u.value.snapshot))}),e.children.length&&this.forwardEvent(new GA(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(bT(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),bT(p.route.value),this.activateChildRoutes(e,null,d.children)}else{const p=function Sx(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),v=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=v,d.outlet&&d.outlet.activateWith(o,v),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class xT{constructor(e,t){this.routes=e,this.module=t}}function Gd(n){return"function"==typeof n}function $f(n){return n instanceof Bf}const V_=Symbol("INITIAL_VALUE");function B_(){return Cn(n=>OA(n.map(e=>e.pipe(hi(1),lu(V_)))).pipe(Ri((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==V_?o:(u===V_&&(r=!0),r||!1!==u&&d!==t.length-1&&!$f(u)?o:u),e)},V_),ir(e=>e!==V_),(0,jt.U)(e=>$f(e)?e:!0===e),hi(1)))}class Nx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new j_,this.attachRef=null}}class j_{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Nx,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let lS=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=u||rn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,v=new Px(t,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(j_),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Px{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Cm?this.route:e===j_?this.childContexts:this.parent.get(e,t)}}let dS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[lS],encapsulation:2}),n})();function hS(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];kx(r,Fx(e,r))}}function kx(n,e){n.children&&hS(n.children,e)}function Fx(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function RT(n){const e=n.children&&n.children.map(RT),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==rn&&(t.component=dS),t}function Jo(n){return n.outlet||rn}function fS(n,e){const t=n.filter(r=>Jo(r)===e);return t.push(...n.filter(r=>Jo(r)!==e)),t}const pS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yI(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},pS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||ZA)(t,n,e);if(!u)return Object.assign({},pS);const d={};Ni(u.posParams,(v,b)=>{d[b]=v.path});const p=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function vI(n,e,t,r,o="corrected"){if(t.length>0&&function Vx(n,e,t){return t.some(r=>_I(n,e,r)&&Jo(r)!==rn)}(n,t,r)){const d=new fn(e,function Ux(n,e,t,r){const o={};o[rn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Jo(u)!==rn){const d=new fn([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Jo(u)]=d}return o}(n,e,r,new fn(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Bx(n,e,t){return t.some(r=>_I(n,e,r))}(n,t,r)){const d=new fn(n.segments,function Lx(n,e,t,r,o,u){const d={};for(const p of r)if(_I(n,t,p)&&!o[Jo(p)]){const v=new fn([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Jo(p)]=v}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new fn(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function _I(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gS(n,e,t,r){return!!(Jo(n)===r||r!==rn&&_I(e,t,n))&&("**"===n.path||yI(e,n,t).matched)}function mS(n,e,t){return 0===e.length&&!n.children[t]}class EI{constructor(e){this.segmentGroup=e||null}}class yS{constructor(e){this.urlTree=e}}function $_(n){return uI(new EI(n))}function vS(n){return uI(new yS(n))}function jx(n){return uI(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class Gx{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(_.h0i)}apply(){const e=vI(this.urlTree.root,[],[],this.config).segmentGroup,t=new fn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,rn).pipe((0,jt.U)(u=>this.createUrlTree(MT(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hd(u=>{if(u instanceof yS)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof EI?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,rn).pipe((0,jt.U)(o=>this.createUrlTree(MT(o),e.queryParams,e.fragment))).pipe(Hd(o=>{throw o instanceof EI?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new fn([],{[rn]:e}):e;return new Bf(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,jt.U)(u=>new fn([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Rn.D)(o).pipe(N_(u=>{const d=r.children[u],p=fS(t,u);return this.expandSegmentGroup(e,p,d,u).pipe((0,jt.U)(v=>({segment:v,outlet:u})))}),Ri((u,d)=>(u[d.outlet]=d.segment,u),{}),function kA(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ir((o,u)=>n(o,u,r)):Vi.y,yT(1),t?ga(e):ls(()=>new Qs))}())}expandSegment(e,t,r,o,u,d){return(0,Rn.D)(r).pipe(N_(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,d).pipe(Hd(b=>{if(b instanceof EI)return Tt(null);throw b}))),Os(p=>!!p),Hd((p,v)=>{if(p instanceof Qs||"EmptyError"===p.name)return mS(t,o,u)?Tt(new fn([],{})):$_(t);throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,d,p){return gS(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):$_(t):$_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vS(u):this.lineralizeSegments(r,u).pipe((0,Yi.z)(d=>{const p=new fn(d,{});return this.expandSegment(e,p,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:p,consumedSegments:v,remainingSegments:b,positionalParamSegments:S}=yI(t,o,u);if(!p)return $_(t);const O=this.applyRedirectCommands(v,o.redirectTo,S);return o.redirectTo.startsWith("/")?vS(O):this.lineralizeSegments(o,O).pipe((0,Yi.z)(q=>this.expandSegment(e,t,r,q.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,jt.U)(O=>(r._loadedConfig=O,new fn(o,{})))):Tt(new fn(o,{}));const{matched:d,consumedSegments:p,remainingSegments:v}=yI(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Yi.z)(S=>{const O=S.module,q=S.routes,{segmentGroup:Z,slicedSegments:he}=vI(t,p,v,q),Pe=new fn(Z.segments,Z.children);if(0===he.length&&Pe.hasChildren())return this.expandChildren(O,q,Pe).pipe((0,jt.U)(Vt=>new fn(p,Vt)));if(0===q.length&&0===he.length)return Tt(new fn(p,{}));const Ye=Jo(r)===u;return this.expandSegment(O,Pe,q,he,Ye?rn:u,!0).pipe((0,jt.U)(sn=>new fn(p.concat(sn.segments),sn.children)))})):$_(t)}getChildConfig(e,t,r){return t.children?Tt(new xT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Yi.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,jt.U)(u=>(t._loadedConfig=u,u))):function $x(n){return uI(_T(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Tt(new xT([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return Tt(!0);const u=o.map(d=>{const p=e.get(d);let v;if(function xx(n){return n&&Gd(n.canLoad)}(p))v=p.canLoad(t,r);else{if(!Gd(p))throw new Error("Invalid CanLoad guard");v=p(t,r)}return Ou(v)});return Tt(u).pipe(B_(),(0,go.b)(d=>{if(!$f(d))return;const p=_T(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),(0,jt.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Tt(r);if(o.numberOfChildren>1||!o.children[rn])return jx(e.redirectTo);o=o.children[rn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Bf(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ni(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Ni(t.children,(p,v)=>{d[v]=this.createSegmentGroup(e,p,r,o)}),new fn(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function MT(n){const e={};for(const r of Object.keys(n.children)){const u=MT(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function zx(n){if(1===n.numberOfChildren&&n.children[rn]){const e=n.children[rn];return new fn(n.segments.concat(e.segments),e.children)}return n}(new fn(n.segments,e))}class _S{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wI{constructor(e,t){this.component=e,this.route=t}}function Wx(n,e,t){const r=n._root;return H_(r,e?e._root:null,t,[r.value])}function II(n,e,t){const r=function Zx(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function H_(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Tm(e);return n.children.forEach(d=>{(function Yx(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function Qx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!jf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jf(n.url,e.url)||!Mu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TT(n,e)||!Mu(n.queryParams,e.queryParams);default:return!TT(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new _S(r)):(u.data=d.data,u._resolvedData=d._resolvedData),H_(n,e,u.component?p?p.children:null:t,r,o),v&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new wI(p.outlet.component,d))}else d&&G_(e,p,o),o.canActivateChecks.push(new _S(r)),H_(n,null,u.component?p?p.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Ni(u,(d,p)=>G_(d,t.getContext(p),o)),o}function G_(n,e,t){const r=Tm(n),o=n.value;Ni(r,(u,d)=>{G_(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new wI(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class oR{}function ES(n){return new Si.y(e=>e.error(n))}class uR{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=vI(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,rn);if(null===t)return null;const r=new pI([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},rn,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Gc(r,t),u=new rS(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=nS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],p=fS(e,u),v=this.processSegmentGroup(p,d,u);if(null===v)return null;r.push(...v)}const o=wS(r);return function cR(n){n.sort((e,t)=>e.value.outlet===rn?-1:t.value.outlet===rn?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return mS(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!gS(e,t,r,o))return null;let u,d=[],p=[];if("**"===e.path){const Z=r.length>0?$C(r).parameters:{};u=new pI(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bS(e),Jo(e),e.component,e,IS(t),DS(t)+r.length,TS(e))}else{const Z=yI(t,e,r);if(!Z.matched)return null;d=Z.consumedSegments,p=Z.remainingSegments,u=new pI(d,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bS(e),Jo(e),e.component,e,IS(t),DS(t)+d.length,TS(e))}const v=function lR(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=vI(t,d,p,v.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const Z=this.processChildren(v,b);return null===Z?null:[new Gc(u,Z)]}if(0===v.length&&0===S.length)return[new Gc(u,[])];const O=Jo(e)===o,q=this.processSegment(v,b,S,O?rn:o);return null===q?null:[new Gc(u,q)]}}function dR(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function wS(n){const e=[],t=new Set;for(const r of n){if(!dR(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=wS(r.children);e.push(new Gc(r.value,o))}return e.filter(r=>!t.has(r))}function IS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function DS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function bS(n){return n.data||{}}function TS(n){return n.resolve||{}}function CS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function OT(n){return Cn(e=>{const t=n(e);return t?(0,Rn.D)(t).pipe((0,jt.U)(()=>e)):Tt(e)})}class _R extends class vR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const NT=new _.OlP("ROUTES");class SS{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,jt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new xT(jC(d.injector.get(NT,void 0,_.XFs.Self|_.XFs.Optional)).map(RT),d)}),Hd(u=>{throw t._loader$=void 0,u}));return t._loader$=new PA(o,()=>new Ys.x).pipe(PC()),t._loader$}loadModuleFactory(e){return Ou(e()).pipe((0,Yi.z)(t=>t instanceof _.YKP?Tt(t):(0,Rn.D)(this.compiler.compileModuleAsync(t))))}}class wR{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function IR(n){throw n}function DR(n,e,t){return e.parse("/")}function AS(n,e){return Tt(null)}const bR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mo=(()=>{class n{constructor(t,r,o,u,d,p,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ys.x,this.errorHandler=IR,this.malformedUriErrorHandler=DR,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:AS,afterPreactivation:AS},this.urlHandlingStrategy=new wR,this.routeReuseStrategy=new _R,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(_.h0i),this.console=d.get(_.c2e);const O=d.get(_.R0b);this.isNgZoneEnabled=O instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function QA(){return new Bf(new fn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new SS(d,p,q=>this.triggerEvent(new FC(q)),q=>this.triggerEvent(new LC(q))),this.routerState=tS(this.currentUrlTree,this.rootComponentType),this.transitions=new po({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ir(o=>0!==o.id),(0,jt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Cn(o=>{let u=!1,d=!1;return Tt(o).pipe((0,go.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Cn(p=>{const v=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return xS(p.source)&&(this.browserUrlTree=p.extractedUrl),Tt(p).pipe(Cn(O=>{const q=this.transitions.getValue();return r.next(new vT(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),q!==this.transitions.getValue()?ri.E:Promise.resolve(O)}),function qx(n,e,t,r){return Cn(o=>function Hx(n,e,t,r,o){return new Gx(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,jt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,go.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function hR(n,e,t,r,o){return(0,Yi.z)(u=>function aR(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new uR(n,e,t,r,o,u).recognize();return null===d?ES(new oR):Tt(d)}catch(d){return ES(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,jt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,go.b)(O=>{if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(Z,O)}this.browserUrlTree=O.urlAfterRedirects}const q=new UA(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(q)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:Z,source:he,restoredState:Pe,extras:Ye}=p,Xt=new vT(q,this.serializeUrl(Z),he,Pe);r.next(Xt);const sn=tS(Z,this.rootComponentType).snapshot;return Tt(Object.assign(Object.assign({},p),{targetSnapshot:sn,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},Ye),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),ri.E}),OT(p=>{const{targetSnapshot:v,id:b,extractedUrl:S,rawUrl:O,extras:{skipLocationChange:q,replaceUrl:Z}}=p;return this.hooks.beforePreactivation(v,{navigationId:b,appliedUrlTree:S,rawUrlTree:O,skipLocationChange:!!q,replaceUrl:!!Z})}),(0,go.b)(p=>{const v=new VA(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),(0,jt.U)(p=>Object.assign(Object.assign({},p),{guards:Wx(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Xx(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?Tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Jx(n,e,t,r){return(0,Rn.D)(n).pipe((0,Yi.z)(o=>function sR(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Tt(u.map(p=>{const v=II(p,e,o);let b;if(function Ox(n){return n&&Gd(n.canDeactivate)}(v))b=Ou(v.canDeactivate(n,e,t,r));else{if(!Gd(v))throw new Error("Invalid CanDeactivate guard");b=Ou(v(n,e,t,r))}return b.pipe(Os())})).pipe(B_()):Tt(!0)}(o.component,o.route,t,e,r)),Os(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Yi.z)(p=>p&&function Ax(n){return"boolean"==typeof n}(p)?function eR(n,e,t,r){return(0,Rn.D)(e).pipe(N_(o=>Sl(function nR(n,e){return null!==n&&e&&e(new HA(n)),Tt(!0)}(o.route.parent,r),function tR(n,e){return null!==n&&e&&e(new zA(n)),Tt(!0)}(o.route,r),function iR(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Kx(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>OC(()=>Tt(d.guards.map(v=>{const b=II(v,d.node,t);let S;if(function Mx(n){return n&&Gd(n.canActivateChild)}(b))S=Ou(b.canActivateChild(r,n));else{if(!Gd(b))throw new Error("Invalid CanActivateChild guard");S=Ou(b(r,n))}return S.pipe(Os())})).pipe(B_())));return Tt(u).pipe(B_())}(n,o.path,t),function rR(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Tt(!0);const o=r.map(u=>OC(()=>{const d=II(u,e,t);let p;if(function Rx(n){return n&&Gd(n.canActivate)}(d))p=Ou(d.canActivate(e,n));else{if(!Gd(d))throw new Error("Invalid CanActivate guard");p=Ou(d(e,n))}return p.pipe(Os())}));return Tt(o).pipe(B_())}(n,o.route,t))),Os(o=>!0!==o,!0))}(r,u,n,e):Tt(p)),(0,jt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,go.b)(p=>{if($f(p.guardsResult)){const b=_T(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const v=new BA(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(v)}),ir(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),OT(p=>{if(p.guards.canActivateChecks.length)return Tt(p).pipe((0,go.b)(v=>{const b=new jA(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),Cn(v=>{let b=!1;return Tt(v).pipe(function fR(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Tt(t);let u=0;return(0,Rn.D)(o).pipe(N_(d=>function pR(n,e,t,r){return function gR(n,e,t,r){const o=CS(n);if(0===o.length)return Tt({});const u={};return(0,Rn.D)(o).pipe((0,Yi.z)(d=>function mR(n,e,t,r){const o=II(n,e,r);return Ou(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,go.b)(p=>{u[d]=p}))),yT(1),(0,Yi.z)(()=>CS(u).length===o.length?Tt(u):ri.E))}(n._resolve,n,e,r).pipe((0,jt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),nS(n,t).resolve),null)))}(d.route,r,n,e)),(0,go.b)(()=>u++),yT(1),(0,Yi.z)(d=>u===o.length?Tt(t):ri.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,go.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,go.b)(v=>{const b=new $A(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),OT(p=>{const{targetSnapshot:v,id:b,extractedUrl:S,rawUrl:O,extras:{skipLocationChange:q,replaceUrl:Z}}=p;return this.hooks.afterPreactivation(v,{navigationId:b,appliedUrlTree:S,rawUrlTree:O,skipLocationChange:!!q,replaceUrl:!!Z})}),(0,jt.U)(p=>{const v=function gx(n,e,t){const r=L_(n,e._root,t?t._root:void 0);return new eS(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:v})}),(0,go.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,jt.U)(r=>(new Cx(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,go.b)({next(){u=!0},complete(){u=!0}}),function FA(n){return(0,qt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===o.id&&(this.currentNavigation=null)}),Hd(p=>{if(d=!0,function KA(n){return n&&n[VC]}(p)){const v=$f(p.url);v||(this.navigated=!0,this.restoreHistory(o,!0));const b=new kC(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(b),v?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),O={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xS(o.source)};this.scheduleNavigation(S,"imperative",null,O,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new LA(o.id,this.serializeUrl(o.extractedUrl),p);r.next(v);try{o.resolve(this.errorHandler(p))}catch(b){o.reject(b)}}return ri.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const v=Object.assign({},d);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){hS(t),this.config=t.map(RT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:p,preserveFragment:v}=r,b=o||this.routerState.root,S=v?this.currentUrlTree.fragment:d;let O=null;switch(p){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),function vx(n,e,t,r,o){if(0===t.length)return CT(e.root,e.root,e.root,r,o);const u=function _x(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oS(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Ni(u.outlets,(v,b)=>{p[b]="string"==typeof v?v.split("/"):v}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((p,v)=>{0==v&&"."===p||(0==v&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new oS(t,e,r)}(t);if(u.toRoot())return CT(e.root,e.root,new fn([],{}),r,o);const d=function Ex(n,e,t){if(n.isAbsolute)return new ST(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new ST(u,u===e.root,0)}const r=gI(n.commands[0])?0:1;return function wx(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new ST(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=d.processChildren?mI(d.segmentGroup,d.index,u.commands):aS(d.segmentGroup,d.index,u.commands);return CT(e.root,d.segmentGroup,p,r,o)}(b,this.currentUrlTree,t,O,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=$f(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function CR(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},bR):!1===r?Object.assign({},TR):r,$f(t))return GC(this.currentUrlTree,t,o);const u=this.parseUrl(t);return GC(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new P_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var p,v;if(this.disposed)return Promise.resolve(!1);let b,S,O;d?(b=d.resolve,S=d.reject,O=d.promise):O=new Promise((he,Pe)=>{b=he,S=Pe});const q=++this.navigationId;let Z;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Z=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):Z=0,this.setTransition({id:q,targetPageId:Z,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:O,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),O.catch(he=>Promise.reject(he))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new kC(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function xS(n){return"imperative"!==n}class RS{}class MS{preload(e,t){return Tt(null)}}let OS=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new SS(o,r,v=>t.triggerEvent(new FC(v)),v=>t.triggerEvent(new LC(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(ir(t=>t instanceof P_),N_(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(_.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Rn.D)(o).pipe((0,$i.J)(),(0,jt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Tt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Yi.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(mo),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(RS))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),FT=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof P_&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof UC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new UC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Hf=new _.OlP("ROUTER_CONFIGURATION"),NS=new _.OlP("ROUTER_FORROOT_GUARD"),RR=[Te,{provide:KC,useClass:ZC},{provide:mo,useFactory:function kR(n,e,t,r,o,u,d={},p,v){const b=new mo(null,n,e,t,r,o,jC(u));return p&&(b.urlHandlingStrategy=p),v&&(b.routeReuseStrategy=v),function FR(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,b),d.enableTracing&&b.events.subscribe(S=>{var O,q;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(q=console.groupEnd)||void 0===q||q.call(console)}),b},deps:[KC,j_,Te,_.zs3,_.Sil,NT,Hf,[class ER{},new _.FiY],[class yR{},new _.FiY]]},j_,{provide:Cm,useFactory:function LR(n){return n.routerState.root},deps:[mo]},OS,MS,class xR{preload(e,t){return t().pipe(Hd(()=>Tt(null)))}},{provide:Hf,useValue:{enableTracing:!1}}];function MR(){return new _.PXZ("Router",mo)}let PS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[RR,kS(t),{provide:NS,useFactory:PR,deps:[[mo,new _.FiY,new _.tp0]]},{provide:Hf,useValue:r||{}},{provide:pe,useFactory:NR,deps:[ie,[new _.tBr(Ge),new _.FiY],Hf]},{provide:FT,useFactory:OR,deps:[mo,Ba,Hf]},{provide:RS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:MS},{provide:_.PXZ,multi:!0,useFactory:MR},[LT,{provide:_.ip1,multi:!0,useFactory:UR,deps:[LT]},{provide:FS,useFactory:VR,deps:[LT]},{provide:_.tb,multi:!0,useExisting:FS}]]}}static forChild(t){return{ngModule:n,providers:[kS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(NS,8),_.LFG(mo,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function OR(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new FT(n,e,t)}function NR(n,e,t={}){return t.useHash?new Ce(n,e):new ze(n,e)}function PR(n){return"guarded"}function kS(n){return[{provide:_.deG,multi:!0,useValue:n},{provide:NT,multi:!0,useValue:n}]}let LT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ys.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),u=this.injector.get(mo),d=this.injector.get(Hf);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Hf),o=this.injector.get(OS),u=this.injector.get(FT),d=this.injector.get(mo),p=this.injector.get(_.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function UR(n){return n.appInitializer.bind(n)}function VR(n){return n.bootstrapListener.bind(n)}const FS=new _.OlP("Router Initializer"),jR=[];let $R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[PS.forRoot(jR)],PS]}),n})();var HR=L(5114),LS=L(655);class GR extends Ys.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(e){const{hasError:t,_hasValue:r,_value:o,thrownError:u,isStopped:d,_isComplete:p}=this;t?e.error(u):(d||p)&&(r&&e.next(o),e.complete())}next(e){this.isStopped||(this._value=e,this._hasValue=!0)}complete(){const{_hasValue:e,_value:t,_isComplete:r}=this;r||(this._isComplete=!0,e&&super.next(t),super.complete())}}function US(n){return ir((e,t)=>n<=t)}class VS{constructor(){}loadScript(e,t,r,o=null){if("undefined"!=typeof document&&!document.getElementById(e)){let u=document.createElement("script");u.async=!0,u.src=t,u.onload=r,o||(o=document.head),o.appendChild(u)}}}class UT{}const qR={oneTapEnabled:!0};let z_=(()=>{class n extends VS{constructor(t,r){super(),this.clientId=t,this.initOptions=r,this.changeUser=new _.vpe,this._socialUser=new po(null),this._accessToken=new po(null),this._receivedAccessToken=new _.vpe,this.initOptions=Object.assign(Object.assign({},qR),this.initOptions),this._socialUser.pipe(US(1)).subscribe(this.changeUser),this._accessToken.pipe(US(1)).subscribe(this._receivedAccessToken)}initialize(t){return new Promise((r,o)=>{try{this.loadScript(n.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{var u;if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:d})=>{const p=this.createSocialUser(d);this._socialUser.next(p)},prompt_parent_id:null===(u=this.initOptions)||void 0===u?void 0:u.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(ir(d=>null===d)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const d=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(p=>p).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:d,prompt:this.initOptions.prompt,callback:p=>{p.error?this._accessToken.error({code:p.error,description:p.error_description,uri:p.error_uri}):this._accessToken.next(p.access_token)}})}r()})}catch(u){o(u)}})}getLoginStatus(){return new Promise((t,r)=>{this._socialUser.value?t(this._socialUser.value):r(`No user is currently logged in with ${n.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,r)=>{google.accounts.id.revoke(this._socialUser.value.id,o=>{o.error?r(o.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,r)=>{var o;this._tokenClient?(this._tokenClient.requestAccessToken({hint:null===(o=this._socialUser.value)||void 0===o?void 0:o.email}),this._receivedAccessToken.pipe(hi(1)).subscribe(t)):r(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,r)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):r("No access token to revoke"):r("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){return(0,LS.mG)(this,void 0,void 0,function*(){google.accounts.id.disableAutoSelect(),this._socialUser.next(null)})}createSocialUser(t){const r=new UT;r.idToken=t;const o=this.decodeJwt(t);return r.id=o.sub,r.name=o.name,r.email=o.email,r.photoUrl=o.picture,r.firstName=o.given_name,r.lastName=o.family_name,r}decodeJwt(t){const o=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),u=decodeURIComponent(window.atob(o).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(u)}}return n.PROVIDER_ID="GOOGLE",n})(),DI=(()=>{class n{constructor(t,r,o){this._ngZone=r,this._injector=o,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new th(1),this.initialized=!1,this._initState=new GR,t instanceof Promise?t.then(u=>{this.initialize(u)}):this.initialize(t)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(t){this.autoLogin=void 0!==t.autoLogin&&t.autoLogin;const{onError:r=console.error}=t;t.providers.forEach(o=>{this.providers.set(o.id,"prototype"in o.provider?this._injector.get(o.provider):o.provider)}),Promise.all(Array.from(this.providers.values()).map(o=>o.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const o=[];let u=!1;this.providers.forEach((d,p)=>{const v=d.getLoginStatus();o.push(v),v.then(b=>{this.setUser(b,p),u=!0}).catch(console.debug)}),Promise.all(o).catch(()=>{u||(this._user=null,this._authState.next(null))})}this.providers.forEach((o,u)=>{(function zR(n){return!!n&&(n instanceof Si.y||(0,Bi.m)(n.lift)&&(0,Bi.m)(n.subscribe))})(o.changeUser)&&o.changeUser.subscribe(d=>{this._ngZone.run(()=>{this.setUser(d,u)})})})}).catch(o=>{r(o)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(t){return(0,LS.mG)(this,void 0,void 0,function*(){const r=this.providers.get(t);if(!this.initialized)throw n.ERR_NOT_INITIALIZED;if(!r)throw n.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(r instanceof z_))throw n.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield r.getAccessToken()})}refreshAuthToken(t){return new Promise((r,o)=>{if(this.initialized){const u=this.providers.get(t);u?"function"!=typeof u.refreshToken?o(n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):u.refreshToken().then(d=>{this.setUser(d,t),r()}).catch(d=>{o(d)}):o(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(n.ERR_NOT_INITIALIZED)})}refreshAccessToken(t){return new Promise((r,o)=>{if(this.initialized)if(t!==z_.PROVIDER_ID)o(n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const u=this.providers.get(t);u instanceof z_?u.revokeAccessToken().then(r).catch(o):o(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(n.ERR_NOT_INITIALIZED)})}signIn(t,r){return new Promise((o,u)=>{if(this.initialized){let d=this.providers.get(t);d?d.signIn(r).then(p=>{this.setUser(p,t),o(p)}).catch(p=>{u(p)}):u(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else u(n.ERR_NOT_INITIALIZED)})}signOut(t=!1){return new Promise((r,o)=>{if(this.initialized)if(this._user){let d=this.providers.get(this._user.provider);d?d.signOut(t).then(()=>{r(),this.setUser(null)}).catch(p=>{o(p)}):o(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(n.ERR_NOT_LOGGED_IN);else o(n.ERR_NOT_INITIALIZED)})}setUser(t,r){t&&r&&(t.provider=r),this._user=t,this._authState.next(t)}}return n.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",n.ERR_NOT_LOGGED_IN="Not logged in",n.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",n.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",n.\u0275fac=function(t){return new(t||n)(_.LFG("SocialAuthServiceConfig"),_.LFG(_.R0b),_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WR=(()=>{class n{constructor(t,r){this.type="icon",this.size="medium",this.text="signin_with",this.shape="rectangular",this.theme="outline",this.logo_alignment="left",this.width="",this.locale="",r.initState.pipe(hi(1)).subscribe(()=>{Promise.resolve(this.width).then(o=>{o>"400"||o<"200"&&""!=o?Promise.reject("Please note .. max-width 400 , min-width 200 (https://developers.google.com/identity/gsi/web/tools/configurator)"):google.accounts.id.renderButton(t.nativeElement,{type:this.type,size:this.size,text:this.text,width:this.width,shape:this.shape,theme:this.theme,logo_alignment:this.logo_alignment,locale:this.locale})})})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.SBq),_.Y36(DI))},n.\u0275dir=_.lG2({type:n,selectors:[["asl-google-signin-button"]],inputs:{type:"type",size:"size",text:"text",shape:"shape",theme:"theme",logo_alignment:"logo_alignment",width:"width",locale:"locale"}}),n})(),KR=(()=>{class n{constructor(t){if(t)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(t){return{ngModule:n,providers:[DI,{provide:"SocialAuthServiceConfig",useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[DI],imports:[[Ts]]}),n})(),BS=(()=>{class n extends VS{constructor(t,r={}){super(),this.clientId=t,this.requestOptions={scope:"email,public_profile",locale:"en_US",fields:"name,email,picture,first_name,last_name",version:"v10.0"},this.requestOptions=Object.assign(Object.assign({},this.requestOptions),r)}initialize(){return new Promise((t,r)=>{try{this.loadScript(n.PROVIDER_ID,`//connect.facebook.net/${this.requestOptions.locale}/sdk.js`,()=>{FB.init({appId:this.clientId,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this.requestOptions.version}),t()})}catch(o){r(o)}})}getLoginStatus(){return new Promise((t,r)=>{FB.getLoginStatus(o=>{if("connected"===o.status){let u=o.authResponse;FB.api(`/me?fields=${this.requestOptions.fields}`,d=>{let p=new UT;p.id=d.id,p.name=d.name,p.email=d.email,p.photoUrl="https://graph.facebook.com/"+d.id+"/picture?type=normal&access_token="+u.accessToken,p.firstName=d.first_name,p.lastName=d.last_name,p.authToken=u.accessToken,p.response=d,t(p)})}else r(`No user is currently logged in with ${n.PROVIDER_ID}`)})})}signIn(t){const r=Object.assign(Object.assign({},this.requestOptions),t);return new Promise((o,u)=>{FB.login(d=>{if(d.authResponse){let p=d.authResponse;FB.api(`/me?fields=${r.fields}`,v=>{let b=new UT;b.id=v.id,b.name=v.name,b.email=v.email,b.photoUrl="https://graph.facebook.com/"+v.id+"/picture?type=normal",b.firstName=v.first_name,b.lastName=v.last_name,b.authToken=p.accessToken,b.response=v,o(b)})}else u("User cancelled login or did not fully authorize.")},r)})}signOut(){return new Promise((t,r)=>{FB.logout(o=>{t()})})}}return n.PROVIDER_ID="FACEBOOK",n})(),ZR=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.authState.subscribe(t=>{this.user=t,console.log(t)})}signInWithFB(){this.authService.signIn(HR.Q.PROVIDER_ID).then(t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(DI))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,consts:[["type","icon","size","medium"]],template:function(t,r){1&t&&_._UZ(0,"asl-google-signin-button",0)},directives:[WR],styles:[""]}),n})(),YR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[ZR]}),n.\u0275inj=_.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:z_.PROVIDER_ID,provider:new z_("1048526602451-efdtkes83qbi4c0es9fa42gebeejc34j.apps.googleusercontent.com")},{id:BS.PROVIDER_ID,provider:new BS("5268710979893896")}],onError:e=>{console.error(e)}}}],imports:[[Uu,$R,KR,Sn,EA,Sn,Ci.hO.initializeApp({apiKey:"AIzaSyBrKsjZv-j_EgWKUJE21fa1jThm25HQQr4",authDomain:"sociallogin-1744d.firebaseapp.com",projectId:"sociallogin-1744d",storageBucket:"sociallogin-1744d.appspot.com",messagingSenderId:"1048526602451",appId:"1:1048526602451:web:ceb1294fcc53c74141d426",measurementId:"G-JGRY2ZN5HQ"})]]}),n})();(0,_.G48)(),al().bootstrapModule(YR).catch(n=>console.error(n))},8306:(et,Ee,L)=>{L.d(Ee,{y:()=>H});var _=L(2961),B=L(727),N=L(8822),ne=L(4671);var ue=L(2416),ie=L(576),fe=L(2806);let H=(()=>{class be{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const pe=new be;return pe.source=this,pe.operator=Ue,pe}subscribe(Ue,pe,ye){const Ge=function je(be){return be&&be instanceof _.Lv||function ee(be){return be&&(0,ie.m)(be.next)&&(0,ie.m)(be.error)&&(0,ie.m)(be.complete)}(be)&&(0,B.Nn)(be)}(Ue)?Ue:new _.Hp(Ue,pe,ye);return(0,fe.x)(()=>{const{operator:ze,source:Ce}=this;Ge.add(ze?ze.call(Ge,Ce):Ce?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(pe){Ue.error(pe)}}forEach(Ue,pe){return new(pe=G(pe))((ye,Ge)=>{const ze=new _.Hp({next:Ce=>{try{Ue(Ce)}catch(Te){Ge(Te),ze.unsubscribe()}},error:Ge,complete:ye});this.subscribe(ze)})}_subscribe(Ue){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ue)}[N.L](){return this}pipe(...Ue){return function ce(be){return 0===be.length?ne.y:1===be.length?be[0]:function(Ue){return be.reduce((pe,ye)=>ye(pe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=G(Ue))((pe,ye)=>{let Ge;this.subscribe(ze=>Ge=ze,ze=>ye(ze),()=>pe(Ge))})}}return be.create=Fe=>new be(Fe),be})();function G(be){var Fe;return null!==(Fe=null!=be?be:ue.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(et,Ee,L)=>{L.d(Ee,{x:()=>ue});var _=L(8306),B=L(727);const ne=(0,L(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=L(8737),ce=L(2806);let ue=(()=>{class fe extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ee=new ie(this,this);return ee.operator=G,ee}_throwIfClosed(){if(this.closed)throw new ne}next(G){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(G)}})}error(G){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ee}=this;for(;ee.length;)ee.shift().error(G)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ee,isStopped:je,observers:be}=this;return ee||je?B.Lc:(this.currentObservers=null,be.push(G),new B.w0(()=>{this.currentObservers=null,(0,re.P)(be,G)}))}_checkFinalizedStatuses(G){const{hasError:ee,thrownError:je,isStopped:be}=this;ee?G.error(je):be&&G.complete()}asObservable(){const G=new _.y;return G.source=this,G}}return fe.create=(H,G)=>new ie(H,G),fe})();class ie extends ue{constructor(H,G){super(),this.destination=H,this.source=G}next(H){var G,ee;null===(ee=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ee||ee.call(G,H)}error(H){var G,ee;null===(ee=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ee||ee.call(G,H)}complete(){var H,G;null===(G=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===G||G.call(H)}_subscribe(H){var G,ee;return null!==(ee=null===(G=this.source)||void 0===G?void 0:G.subscribe(H))&&void 0!==ee?ee:B.Lc}}},2961:(et,Ee,L)=>{L.d(Ee,{Hp:()=>Ue,Lv:()=>ee});var _=L(576),B=L(727),N=L(2416),ne=L(7849);function re(){}const ce=fe("C",void 0,void 0);function fe(Ce,Te,ve){return{kind:Ce,value:Te,error:ve}}var H=L(3410),G=L(2806);class ee extends B.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,B.Nn)(Te)&&Te.add(this)):this.destination=ze}static create(Te,ve,$e){return new Ue(Te,ve,$e)}next(Te){this.isStopped?Ge(function ie(Ce){return fe("N",Ce,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?Ge(function ue(Ce){return fe("E",void 0,Ce)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?Ge(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function be(Ce,Te){return je.call(Ce,Te)}class Fe{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:ve}=this;if(ve.next)try{ve.next(Te)}catch($e){pe($e)}}error(Te){const{partialObserver:ve}=this;if(ve.error)try{ve.error(Te)}catch($e){pe($e)}else pe(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(ve){pe(ve)}}}class Ue extends ee{constructor(Te,ve,$e){let X;if(super(),(0,_.m)(Te)||!Te)X={next:null!=Te?Te:void 0,error:null!=ve?ve:void 0,complete:null!=$e?$e:void 0};else{let ae;this&&N.v.useDeprecatedNextContext?(ae=Object.create(Te),ae.unsubscribe=()=>this.unsubscribe(),X={next:Te.next&&be(Te.next,ae),error:Te.error&&be(Te.error,ae),complete:Te.complete&&be(Te.complete,ae)}):X=Te}this.destination=new Fe(X)}}function pe(Ce){N.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ce):(0,ne.h)(Ce)}function Ge(Ce,Te){const{onStoppedNotification:ve}=N.v;ve&&H.z.setTimeout(()=>ve(Ce,Te))}const ze={closed:!0,next:re,error:function ye(Ce){throw Ce},complete:re}},727:(et,Ee,L)=>{L.d(Ee,{Lc:()=>ce,w0:()=>re,Nn:()=>ue});var _=L(576);const N=(0,L(3888).d)(fe=>function(G){fe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ee,je)=>`${je+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ne=L(8737);class re{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const be of G)be.remove(this);else G.remove(this);const{initialTeardown:ee}=this;if((0,_.m)(ee))try{ee()}catch(be){H=be instanceof N?be.errors:[be]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const be of je)try{ie(be)}catch(Fe){H=null!=H?H:[],Fe instanceof N?H=[...H,...Fe.errors]:H.push(Fe)}}if(H)throw new N(H)}}add(H){var G;if(H&&H!==this)if(this.closed)ie(H);else{if(H instanceof re){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(H)}}_hasParent(H){const{_parentage:G}=this;return G===H||Array.isArray(G)&&G.includes(H)}_addParent(H){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(H),G):G?[G,H]:H}_removeParent(H){const{_parentage:G}=this;G===H?this._parentage=null:Array.isArray(G)&&(0,ne.P)(G,H)}remove(H){const{_finalizers:G}=this;G&&(0,ne.P)(G,H),H instanceof re&&H._removeParent(this)}}re.EMPTY=(()=>{const fe=new re;return fe.closed=!0,fe})();const ce=re.EMPTY;function ue(fe){return fe instanceof re||fe&&"closed"in fe&&(0,_.m)(fe.remove)&&(0,_.m)(fe.add)&&(0,_.m)(fe.unsubscribe)}function ie(fe){(0,_.m)(fe)?fe():fe.unsubscribe()}},2416:(et,Ee,L)=>{L.d(Ee,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(et,Ee,L)=>{L.d(Ee,{E:()=>B});const B=new(L(8306).y)(re=>re.complete())},8996:(et,Ee,L)=>{L.d(Ee,{D:()=>Te});var _=L(8421),B=L(5363),N=L(9468),ce=L(8306),ie=L(2202),fe=L(576),H=L(9672);function ee(ve,$e){if(!ve)throw new Error("Iterable cannot be null");return new ce.y(X=>{(0,H.f)(X,$e,()=>{const ae=ve[Symbol.asyncIterator]();(0,H.f)(X,$e,()=>{ae.next().then(ge=>{ge.done?X.complete():X.next(ge.value)})},0,!0)})})}var je=L(3670),be=L(8239),Fe=L(1144),Ue=L(6495),pe=L(2206),ye=L(4532),Ge=L(3260);function Te(ve,$e){return $e?function Ce(ve,$e){if(null!=ve){if((0,je.c)(ve))return function ne(ve,$e){return(0,_.Xf)(ve).pipe((0,N.R)($e),(0,B.Q)($e))}(ve,$e);if((0,Fe.z)(ve))return function ue(ve,$e){return new ce.y(X=>{let ae=0;return $e.schedule(function(){ae===ve.length?X.complete():(X.next(ve[ae++]),X.closed||this.schedule())})})}(ve,$e);if((0,be.t)(ve))return function re(ve,$e){return(0,_.Xf)(ve).pipe((0,N.R)($e),(0,B.Q)($e))}(ve,$e);if((0,pe.D)(ve))return ee(ve,$e);if((0,Ue.T)(ve))return function G(ve,$e){return new ce.y(X=>{let ae;return(0,H.f)(X,$e,()=>{ae=ve[ie.h](),(0,H.f)(X,$e,()=>{let ge,qe;try{({value:ge,done:qe}=ae.next())}catch(it){return void X.error(it)}qe?X.complete():X.next(ge)},0,!0)}),()=>(0,fe.m)(null==ae?void 0:ae.return)&&ae.return()})}(ve,$e);if((0,Ge.L)(ve))return function ze(ve,$e){return ee((0,Ge.Q)(ve),$e)}(ve,$e)}throw(0,ye.z)(ve)}(ve,$e):(0,_.Xf)(ve)}},8421:(et,Ee,L)=>{L.d(Ee,{Xf:()=>je});var _=L(655),B=L(1144),N=L(8239),ne=L(8306),re=L(3670),ce=L(2206),ue=L(4532),ie=L(6495),fe=L(3260),H=L(576),G=L(7849),ee=L(8822);function je(Ce){if(Ce instanceof ne.y)return Ce;if(null!=Ce){if((0,re.c)(Ce))return function be(Ce){return new ne.y(Te=>{const ve=Ce[ee.L]();if((0,H.m)(ve.subscribe))return ve.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,B.z)(Ce))return function Fe(Ce){return new ne.y(Te=>{for(let ve=0;ve<Ce.length&&!Te.closed;ve++)Te.next(Ce[ve]);Te.complete()})}(Ce);if((0,N.t)(Ce))return function Ue(Ce){return new ne.y(Te=>{Ce.then(ve=>{Te.closed||(Te.next(ve),Te.complete())},ve=>Te.error(ve)).then(null,G.h)})}(Ce);if((0,ce.D)(Ce))return ye(Ce);if((0,ie.T)(Ce))return function pe(Ce){return new ne.y(Te=>{for(const ve of Ce)if(Te.next(ve),Te.closed)return;Te.complete()})}(Ce);if((0,fe.L)(Ce))return function Ge(Ce){return ye((0,fe.Q)(Ce))}(Ce)}throw(0,ue.z)(Ce)}function ye(Ce){return new ne.y(Te=>{(function ze(Ce,Te){var ve,$e,X,ae;return(0,_.mG)(this,void 0,void 0,function*(){try{for(ve=(0,_.KL)(Ce);!($e=yield ve.next()).done;)if(Te.next($e.value),Te.closed)return}catch(ge){X={error:ge}}finally{try{$e&&!$e.done&&(ae=ve.return)&&(yield ae.call(ve))}finally{if(X)throw X.error}}Te.complete()})})(Ce,Te).catch(ve=>Te.error(ve))})}},6451:(et,Ee,L)=>{L.d(Ee,{T:()=>ce});var _=L(8189),B=L(8421),N=L(515),ne=L(7669),re=L(8996);function ce(...ue){const ie=(0,ne.yG)(ue),fe=(0,ne._6)(ue,1/0),H=ue;return H.length?1===H.length?(0,B.Xf)(H[0]):(0,_.J)(fe)((0,re.D)(H,ie)):N.E}},5403:(et,Ee,L)=>{L.d(Ee,{x:()=>B});var _=L(2961);function B(ne,re,ce,ue,ie){return new N(ne,re,ce,ue,ie)}class N extends _.Lv{constructor(re,ce,ue,ie,fe,H){super(re),this.onFinalize=fe,this.shouldUnsubscribe=H,this._next=ce?function(G){try{ce(G)}catch(ee){re.error(ee)}}:super._next,this._error=ie?function(G){try{ie(G)}catch(ee){re.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(G){re.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(et,Ee,L)=>{L.d(Ee,{U:()=>N});var _=L(4482),B=L(5403);function N(ne,re){return(0,_.e)((ce,ue)=>{let ie=0;ce.subscribe((0,B.x)(ue,fe=>{ue.next(ne.call(re,fe,ie++))}))})}},8189:(et,Ee,L)=>{L.d(Ee,{J:()=>N});var _=L(5577),B=L(4671);function N(ne=1/0){return(0,_.z)(B.y,ne)}},5577:(et,Ee,L)=>{L.d(Ee,{z:()=>ie});var _=L(4004),B=L(8421),N=L(4482),ne=L(9672),re=L(5403),ue=L(576);function ie(fe,H,G=1/0){return(0,ue.m)(H)?ie((ee,je)=>(0,_.U)((be,Fe)=>H(ee,be,je,Fe))((0,B.Xf)(fe(ee,je))),G):("number"==typeof H&&(G=H),(0,N.e)((ee,je)=>function ce(fe,H,G,ee,je,be,Fe,Ue){const pe=[];let ye=0,Ge=0,ze=!1;const Ce=()=>{ze&&!pe.length&&!ye&&H.complete()},Te=$e=>ye<ee?ve($e):pe.push($e),ve=$e=>{be&&H.next($e),ye++;let X=!1;(0,B.Xf)(G($e,Ge++)).subscribe((0,re.x)(H,ae=>{null==je||je(ae),be?Te(ae):H.next(ae)},()=>{X=!0},void 0,()=>{if(X)try{for(ye--;pe.length&&ye<ee;){const ae=pe.shift();Fe?(0,ne.f)(H,Fe,()=>ve(ae)):ve(ae)}Ce()}catch(ae){H.error(ae)}}))};return fe.subscribe((0,re.x)(H,Te,()=>{ze=!0,Ce()})),()=>{null==Ue||Ue()}}(ee,je,fe,G)))}},5363:(et,Ee,L)=>{L.d(Ee,{Q:()=>ne});var _=L(9672),B=L(4482),N=L(5403);function ne(re,ce=0){return(0,B.e)((ue,ie)=>{ue.subscribe((0,N.x)(ie,fe=>(0,_.f)(ie,re,()=>ie.next(fe),ce),()=>(0,_.f)(ie,re,()=>ie.complete(),ce),fe=>(0,_.f)(ie,re,()=>ie.error(fe),ce)))})}},3099:(et,Ee,L)=>{L.d(Ee,{B:()=>re});var _=L(8421),B=L(7579),N=L(2961),ne=L(4482);function re(ue={}){const{connector:ie=(()=>new B.x),resetOnError:fe=!0,resetOnComplete:H=!0,resetOnRefCountZero:G=!0}=ue;return ee=>{let je,be,Fe,Ue=0,pe=!1,ye=!1;const Ge=()=>{null==be||be.unsubscribe(),be=void 0},ze=()=>{Ge(),je=Fe=void 0,pe=ye=!1},Ce=()=>{const Te=je;ze(),null==Te||Te.unsubscribe()};return(0,ne.e)((Te,ve)=>{Ue++,!ye&&!pe&&Ge();const $e=Fe=null!=Fe?Fe:ie();ve.add(()=>{Ue--,0===Ue&&!ye&&!pe&&(be=ce(Ce,G))}),$e.subscribe(ve),!je&&Ue>0&&(je=new N.Hp({next:X=>$e.next(X),error:X=>{ye=!0,Ge(),be=ce(ze,fe,X),$e.error(X)},complete:()=>{pe=!0,Ge(),be=ce(ze,H),$e.complete()}}),(0,_.Xf)(Te).subscribe(je))})(ee)}}function ce(ue,ie,...fe){if(!0===ie)return void ue();if(!1===ie)return;const H=new N.Hp({next:()=>{H.unsubscribe(),ue()}});return ie(...fe).subscribe(H)}},9468:(et,Ee,L)=>{L.d(Ee,{R:()=>B});var _=L(4482);function B(N,ne=0){return(0,_.e)((re,ce)=>{ce.add(N.schedule(()=>re.subscribe(ce),ne))})}},8505:(et,Ee,L)=>{L.d(Ee,{b:()=>re});var _=L(576),B=L(4482),N=L(5403),ne=L(4671);function re(ce,ue,ie){const fe=(0,_.m)(ce)||ue||ie?{next:ce,error:ue,complete:ie}:ce;return fe?(0,B.e)((H,G)=>{var ee;null===(ee=fe.subscribe)||void 0===ee||ee.call(fe);let je=!0;H.subscribe((0,N.x)(G,be=>{var Fe;null===(Fe=fe.next)||void 0===Fe||Fe.call(fe,be),G.next(be)},()=>{var be;je=!1,null===(be=fe.complete)||void 0===be||be.call(fe),G.complete()},be=>{var Fe;je=!1,null===(Fe=fe.error)||void 0===Fe||Fe.call(fe,be),G.error(be)},()=>{var be,Fe;je&&(null===(be=fe.unsubscribe)||void 0===be||be.call(fe)),null===(Fe=fe.finalize)||void 0===Fe||Fe.call(fe)}))}):ne.y}},4408:(et,Ee,L)=>{L.d(Ee,{o:()=>re});var _=L(727);class B extends _.w0{constructor(ue,ie){super()}schedule(ue,ie=0){return this}}const N={setInterval(ce,ue,...ie){const{delegate:fe}=N;return(null==fe?void 0:fe.setInterval)?fe.setInterval(ce,ue,...ie):setInterval(ce,ue,...ie)},clearInterval(ce){const{delegate:ue}=N;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ce)},delegate:void 0};var ne=L(8737);class re extends B{constructor(ue,ie){super(ue,ie),this.scheduler=ue,this.work=ie,this.pending=!1}schedule(ue,ie=0){var fe;if(this.closed)return this;this.state=ue;const H=this.id,G=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(G,H,ie)),this.pending=!0,this.delay=ie,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(G,this.id,ie),this}requestAsyncId(ue,ie,fe=0){return N.setInterval(ue.flush.bind(ue,this),fe)}recycleAsyncId(ue,ie,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return ie;null!=ie&&N.clearInterval(ie)}execute(ue,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ue,ie);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ie){let H,fe=!1;try{this.work(ue)}catch(G){fe=!0,H=G||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ie}=this,{actions:fe}=ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(fe,this),null!=ue&&(this.id=this.recycleAsyncId(ie,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(et,Ee,L)=>{L.d(Ee,{v:()=>N});var _=L(6063);class B{constructor(re,ce=B.now){this.schedulerActionCtor=re,this.now=ce}schedule(re,ce=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,ce)}}B.now=_.l.now;class N extends B{constructor(re,ce=B.now){super(re,ce),this.actions=[],this._active=!1}flush(re){const{actions:ce}=this;if(this._active)return void ce.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=ce.shift());if(this._active=!1,ue){for(;re=ce.shift();)re.unsubscribe();throw ue}}}},4986:(et,Ee,L)=>{L.d(Ee,{z:()=>N});var _=L(4408);const N=new(L(7565).v)(_.o)},6063:(et,Ee,L)=>{L.d(Ee,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(et,Ee,L)=>{L.d(Ee,{z:()=>_});const _={setTimeout(B,N,...ne){const{delegate:re}=_;return(null==re?void 0:re.setTimeout)?re.setTimeout(B,N,...ne):setTimeout(B,N,...ne)},clearTimeout(B){const{delegate:N}=_;return((null==N?void 0:N.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(et,Ee,L)=>{L.d(Ee,{h:()=>B});const B=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(et,Ee,L)=>{L.d(Ee,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(et,Ee,L)=>{L.d(Ee,{_6:()=>ce,jO:()=>ne,yG:()=>re});var _=L(576);function N(ue){return ue[ue.length-1]}function ne(ue){return(0,_.m)(N(ue))?ue.pop():void 0}function re(ue){return function B(ue){return ue&&(0,_.m)(ue.schedule)}(N(ue))?ue.pop():void 0}function ce(ue,ie){return"number"==typeof N(ue)?ue.pop():ie}},8737:(et,Ee,L)=>{function _(B,N){if(B){const ne=B.indexOf(N);0<=ne&&B.splice(ne,1)}}L.d(Ee,{P:()=>_})},3888:(et,Ee,L)=>{function _(B){const ne=B(re=>{Error.call(re),re.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}L.d(Ee,{d:()=>_})},2806:(et,Ee,L)=>{L.d(Ee,{O:()=>ne,x:()=>N});var _=L(2416);let B=null;function N(re){if(_.v.useDeprecatedSynchronousErrorHandling){const ce=!B;if(ce&&(B={errorThrown:!1,error:null}),re(),ce){const{errorThrown:ue,error:ie}=B;if(B=null,ue)throw ie}}else re()}function ne(re){_.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=re)}},9672:(et,Ee,L)=>{function _(B,N,ne,re=0,ce=!1){const ue=N.schedule(function(){ne(),ce?B.add(this.schedule(null,re)):this.unsubscribe()},re);if(B.add(ue),!ce)return ue}L.d(Ee,{f:()=>_})},4671:(et,Ee,L)=>{function _(B){return B}L.d(Ee,{y:()=>_})},1144:(et,Ee,L)=>{L.d(Ee,{z:()=>_});const _=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(et,Ee,L)=>{L.d(Ee,{D:()=>B});var _=L(576);function B(N){return Symbol.asyncIterator&&(0,_.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(et,Ee,L)=>{function _(B){return"function"==typeof B}L.d(Ee,{m:()=>_})},3670:(et,Ee,L)=>{L.d(Ee,{c:()=>N});var _=L(8822),B=L(576);function N(ne){return(0,B.m)(ne[_.L])}},6495:(et,Ee,L)=>{L.d(Ee,{T:()=>N});var _=L(2202),B=L(576);function N(ne){return(0,B.m)(null==ne?void 0:ne[_.h])}},8239:(et,Ee,L)=>{L.d(Ee,{t:()=>B});var _=L(576);function B(N){return(0,_.m)(null==N?void 0:N.then)}},3260:(et,Ee,L)=>{L.d(Ee,{L:()=>ne,Q:()=>N});var _=L(655),B=L(576);function N(re){return(0,_.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:ie,done:fe}=yield(0,_.qq)(ue.read());if(fe)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ie)}}finally{ue.releaseLock()}})}function ne(re){return(0,B.m)(null==re?void 0:re.getReader)}},4482:(et,Ee,L)=>{L.d(Ee,{A:()=>B,e:()=>N});var _=L(576);function B(ne){return(0,_.m)(null==ne?void 0:ne.lift)}function N(ne){return re=>{if(B(re))return re.lift(function(ce){try{return ne(ce,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(et,Ee,L)=>{L.d(Ee,{h:()=>N});var _=L(2416),B=L(3410);function N(ne){B.z.setTimeout(()=>{const{onUnhandledError:re}=_.v;if(!re)throw ne;re(ne)})}},4532:(et,Ee,L)=>{function _(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ee,{z:()=>_})},655:(et,Ee,L)=>{function ne(W,le){var _e={};for(var Me in W)Object.prototype.hasOwnProperty.call(W,Me)&&le.indexOf(Me)<0&&(_e[Me]=W[Me]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(Me=Object.getOwnPropertySymbols(W);Ne<Me.length;Ne++)le.indexOf(Me[Ne])<0&&Object.prototype.propertyIsEnumerable.call(W,Me[Ne])&&(_e[Me[Ne]]=W[Me[Ne]])}return _e}function ee(W,le,_e,Me){return new(_e||(_e=Promise))(function(we,at){function Mt(ht){try{Xe(Me.next(ht))}catch(St){at(St)}}function mn(ht){try{Xe(Me.throw(ht))}catch(St){at(St)}}function Xe(ht){ht.done?we(ht.value):function Ne(we){return we instanceof _e?we:new _e(function(at){at(we)})}(ht.value).then(Mt,mn)}Xe((Me=Me.apply(W,le||[])).next())})}function Ce(W){return this instanceof Ce?(this.v=W,this):new Ce(W)}function Te(W,le,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,Me=_e.apply(W,le||[]),we=[];return Ne={},at("next"),at("throw"),at("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function at(Rt){Me[Rt]&&(Ne[Rt]=function(Ln){return new Promise(function(En,on){we.push([Rt,Ln,En,on])>1||Mt(Rt,Ln)})})}function Mt(Rt,Ln){try{!function mn(Rt){Rt.value instanceof Ce?Promise.resolve(Rt.value.v).then(Xe,ht):St(we[0][2],Rt)}(Me[Rt](Ln))}catch(En){St(we[0][3],En)}}function Xe(Rt){Mt("next",Rt)}function ht(Rt){Mt("throw",Rt)}function St(Rt,Ln){Rt(Ln),we.shift(),we.length&&Mt(we[0][0],we[0][1])}}function $e(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,le=W[Symbol.asyncIterator];return le?le.call(W):(W=function Ue(W){var le="function"==typeof Symbol&&Symbol.iterator,_e=le&&W[le],Me=0;if(_e)return _e.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&Me>=W.length&&(W=void 0),{value:W&&W[Me++],done:!W}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),_e={},Me("next"),Me("throw"),Me("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function Me(we){_e[we]=W[we]&&function(at){return new Promise(function(Mt,mn){!function Ne(we,at,Mt,mn){Promise.resolve(mn).then(function(Xe){we({value:Xe,done:Mt})},at)}(Mt,mn,(at=W[we](at)).done,at.value)})}}}L.d(Ee,{FC:()=>Te,KL:()=>$e,_T:()=>ne,mG:()=>ee,qq:()=>Ce})},5e3:(et,Ee,L)=>{L.d(Ee,{$8M:()=>Xs,$Z:()=>Gy,AFp:()=>i_,AaK:()=>ie,CRH:()=>qv,CZH:()=>r_,CqO:()=>qy,EJc:()=>o_,F4k:()=>Wh,FYo:()=>kg,FiY:()=>Et,G48:()=>Qb,GfV:()=>Ug,JOm:()=>Ls,LFG:()=>x,LSH:()=>Qm,Lbi:()=>s_,NdJ:()=>Wy,OlP:()=>$n,PXZ:()=>h_,QGY:()=>ud,Qsj:()=>Fg,R0b:()=>ho,RDi:()=>Nu,Rgc:()=>Uc,SBq:()=>kc,Sil:()=>Vb,Suo:()=>zv,TTD:()=>ra,VLi:()=>Yw,X6Q:()=>sC,XFs:()=>yt,Xpm:()=>At,Y36:()=>qh,YKP:()=>hw,Yjl:()=>De,Yz7:()=>Xe,ZZ4:()=>Ff,_UZ:()=>Iu,_Vd:()=>Pg,_c5:()=>w_,aQg:()=>jc,c2e:()=>qw,cJS:()=>St,cg1:()=>lv,dDg:()=>c_,deG:()=>me,dqk:()=>Gt,eFA:()=>fm,g9A:()=>um,h0i:()=>Fc,hGG:()=>aT,iGM:()=>bw,ifc:()=>Zt,ip1:()=>Gw,kL8:()=>Jh,lG2:()=>Q,oAB:()=>P,q4F:()=>Vg,qLn:()=>tc,sBO:()=>Jb,sIi:()=>Ca,s_b:()=>Rd,soG:()=>Af,tBr:()=>Ut,tb:()=>Sf,tp0:()=>Mn,uIk:()=>Ho,vHH:()=>Fe,vpe:()=>Zo,wAp:()=>_t,z2F:()=>f_,zSh:()=>tn,zs3:()=>xr});var _=L(7579),B=L(727),N=L(8306),ne=L(6451),re=L(3099);function ce(i){for(let s in i)if(i[s]===ce)return s;throw Error("Could not find renamed property on target object.")}function ie(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ie).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function fe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const H=ce({__forward_ref__:ce});function G(i){return i.__forward_ref__=G,i.toString=function(){return ie(this())},i}function ee(i){return function je(i){return"function"==typeof i&&i.hasOwnProperty(H)&&i.__forward_ref__===G}(i)?i():i}class Fe extends Error{constructor(s,a){super(function Ue(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function pe(i){return"string"==typeof i?i:null==i?"":String(i)}function ye(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():pe(i)}function Te(i,s){const a=s?` in ${s}`:"";throw new Fe(-201,`No provider for ${ye(i)} found${a}`)}function Ne(i,s){null==i&&function we(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Xe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function St(i){return{providers:i.providers||[],imports:i.imports||[]}}function Rt(i){return Ln(i,hr)||Ln(i,Un)}function Ln(i,s){return i.hasOwnProperty(s)?i[s]:null}function dr(i){return i&&(i.hasOwnProperty(Ii)||i.hasOwnProperty(Qi))?i[Ii]:null}const hr=ce({\u0275prov:ce}),Ii=ce({\u0275inj:ce}),Un=ce({ngInjectableDef:ce}),Qi=ce({ngInjectorDef:ce});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let jr;function an(i){const s=jr;return jr=i,s}function Rr(i,s,a){const c=Rt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&yt.Optional?null:void 0!==s?s:void Te(ie(i),"Injector")}function Or(i){return{toString:i}.toString()}var bn=(()=>((bn=bn||{})[bn.OnPush=0]="OnPush",bn[bn.Default=1]="Default",bn))(),Zt=(()=>{return(i=Zt||(Zt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Zt;var i})();const ft="undefined"!=typeof globalThis&&globalThis,nt="undefined"!=typeof window&&window,$r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=ft||"undefined"!=typeof global&&global||nt||$r,yn={},pt=[],Qr=ce({\u0275cmp:ce}),Jt=ce({\u0275dir:ce}),Kn=ce({\u0275pipe:ce}),Ze=ce({\u0275mod:ce}),Ie=ce({\u0275fac:ce}),We=ce({__NG_ELEMENT_ID__:ce});let Dt=0;function At(i){return Or(()=>{const a={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||pt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Zt.Emulated,id:"c",styles:i.styles||pt,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,h=i.features,m=i.pipes;return c.id+=Dt++,c.inputs=M(i.inputs,a),c.outputs=M(i.outputs),h&&h.forEach(E=>E(c)),c.directiveDefs=l?()=>("function"==typeof l?l():l).map(kn):null,c.pipeDefs=m?()=>("function"==typeof m?m():m).map($):null,c})}function kn(i){return He(i)||function vt(i){return i[Jt]||null}(i)}function $(i){return function bt(i){return i[Kn]||null}(i)}const j={};function P(i){return Or(()=>{const s={type:i.type,bootstrap:i.bootstrap||pt,declarations:i.declarations||pt,imports:i.imports||pt,exports:i.exports||pt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(j[i.id]=i.type),s})}function M(i,s){if(null==i)return yn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),a[l]=c,s&&(s[l]=h)}return a}const Q=At;function De(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function He(i){return i[Qr]||null}function xt(i,s){const a=i[Ze]||null;if(!a&&!0===s)throw new Error(`Type ${ie(i)} does not have '\u0275mod' property.`);return a}function bi(i){return Array.isArray(i)&&"object"==typeof i[1]}function ci(i){return Array.isArray(i)&&!0===i[1]}function qc(i){return 0!=(8&i.flags)}function La(i){return 2==(2&i.flags)}function Ds(i){return 1==(1&i.flags)}function li(i){return null!==i.template}function qd(i){return 0!=(512&i[2])}function di(i,s){return i.hasOwnProperty(Ie)?i[Ie]:null}class Do{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ra(){return ia}function ia(i){return i.type.prototype.ngOnChanges&&(i.setInput=Yf),Kd}function Kd(){const i=Xc(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===yn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Yf(i,s,a,c){const l=Xc(i)||function rs(i,s){return i[Ts]=s}(i,{previous:yn,current:null}),h=l.current||(l.current={}),m=l.previous,E=this.declaredInputs[a],I=m[E];h[E]=new Do(I&&I.currentValue,s,m===yn),i[c]=s}ra.ngInherit=!0;const Ts="__ngSimpleChanges__";function Xc(i){return i[Ts]||null}let ja;function Nu(i){ja=i}function In(i){return!!i.listen}const sa={createRenderer:(i,s)=>function is(){return void 0!==ja?ja:"undefined"!=typeof document?document:void 0}()};function gn(i){for(;Array.isArray(i);)i=i[0];return i}function nr(i,s){return gn(s[i.index])}function Bn(i,s){return i.data[s]}function mr(i,s){const a=s[i];return bi(a)?a:a[0]}function bo(i){return 4==(4&i[2])}function Fi(i){return 128==(128&i[2])}function ei(i,s){return null==s?null:i[s]}function Ss(i){i[18]=0}function As(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const wt={lFrame:ll(null),bindingsEnabled:!0};function To(){return wt.bindingsEnabled}function Ae(){return wt.lFrame.lView}function Yt(){return wt.lFrame.tView}function Tn(){let i=il();for(;null!==i&&64===i.type;)i=i.parent;return i}function il(){return wt.lFrame.currentTNode}function Li(i,s){const a=wt.lFrame;a.currentTNode=i,a.isParent=s}function Lu(){return wt.lFrame.isParent}function al(i,s){const a=wt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Uu(s)}function Uu(i){wt.lFrame.currentDirectiveIndex=i}function ul(){return wt.lFrame.currentQueryIndex}function cl(i){wt.lFrame.currentQueryIndex=i}function Vu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function la(i,s,a){if(a&yt.SkipSelf){let l=s,h=i;for(;!(l=l.parent,null!==l||a&yt.Host||(l=Vu(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;s=l,i=h}const c=wt.lFrame=Ks();return c.currentTNode=s,c.lView=i,!0}function da(i){const s=Ks(),a=i[1];wt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ks(){const i=wt.lFrame,s=null===i?null:i.child;return null===s?ll(i):s}function ll(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Xd(){const i=wt.lFrame;return wt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const za=Xd;function ni(){const i=Xd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Rs(i){wt.lFrame.selectedIndex=i}function as(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:R}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function ha(i,s,a){fl(i,s,3,a)}function fa(i,s,a,c){(3&i[2])===a&&fl(i,s,a,c)}function rr(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function fl(i,s,a,c){const h=null!=c?c:-1,m=s.length-1;let E=0;for(let I=void 0!==c?65535&i[18]:0;I<m;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=c&&E>=c)break}else s[I]<0&&(i[18]+=65536),(E<h||-1==h)&&(Xf(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Xf(i,s,a,c){const l=a[c]<0,h=a[c+1],E=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(E)}finally{}}}else try{h.call(E)}finally{}}class Ro{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Rn(i,s,a){const c=In(i);let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const m=a[l++],E=a[l++],I=a[l++];c?i.setAttribute(s,E,I,m):s.setAttributeNS(m,E,I)}else{const m=h,E=a[++l];Si(m)?c&&i.setProperty(s,m,E):c?i.setAttribute(s,m,E):s.setAttribute(m,E),l++}}return l}function Tt(i){return 3===i||4===i||6===i}function Si(i){return 64===i.charCodeAt(0)}function pa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||cs(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function cs(i,s,a,c,l){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const E=i[h++];if("number"==typeof E){if(E===s){m=-1;break}if(E>s){m=h-1;break}}}for(;h<i.length;){const E=i[h];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==l&&(i[h+1]=l));if(c===i[h+1])return void(i[h+2]=l)}h++,null!==c&&h++,null!==l&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==c&&i.splice(h++,0,c),null!==l&&i.splice(h++,0,l)}function qa(i){return-1!==i}function qt(i){return 32767&i}function Cn(i,s){let a=function Gr(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let jt=!0;function Ms(i){const s=jt;return jt=i,s}let Hu=0;function ir(i,s){const a=hi(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,ri(c.data,i),ri(s,null),ri(c.blueprint,null));const l=ga(i,s),h=i.injectorIndex;if(qa(l)){const m=qt(l),E=Cn(l,s),I=E[1].data;for(let C=0;C<8;C++)s[h+C]=E[m+C]|I[m+C]}return s[h+8]=l,h}function ri(i,s){i.push(0,0,0,0,0,0,0,0,s)}function hi(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ga(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){const h=l[1],m=h.type;if(c=2===m?h.declTNode:1===m?l[6]:null,null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function ls(i,s,a){!function Qs(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(We)&&(c=a[We]),null==c&&(c=a[We]=Hu++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Vi(i,s,a){if(a&yt.Optional)return i;Te(s,"NodeInjector")}function Os(i,s,a,c){if(a&yt.Optional&&void 0===c&&(c=null),0==(a&(yt.Self|yt.Host))){const l=i[9],h=an(void 0);try{return l?l.get(s,c,a&yt.Optional):Rr(s,c,a&yt.Optional)}finally{an(h)}}return Vi(c,s,a)}function Bi(i,s,a,c=yt.Default,l){if(null!==i){const h=function nh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(We)?i[We]:void 0;return"number"==typeof s?s>=0?255&s:Ka:s}(a);if("function"==typeof h){if(!la(s,i,c))return c&yt.Host?Vi(l,a,c):Os(s,a,c,l);try{const m=h(c);if(null!=m||c&yt.Optional)return m;Te(a)}finally{za()}}else if("number"==typeof h){let m=null,E=hi(i,s),I=-1,C=c&yt.Host?s[16][6]:null;for((-1===E||c&yt.SkipSelf)&&(I=-1===E?ga(i,s):s[E+8],-1!==I&&yl(c,!1)?(m=s[1],E=qt(I),s=Cn(I,s)):E=-1);-1!==E;){const R=s[1];if(Gu(h,E,R.data)){const U=Qn(E,s,a,m,c,C);if(U!==Mo)return U}I=s[E+8],-1!==I&&yl(c,s[1].data[E+8]===C)&&Gu(h,E,s)?(m=R,E=qt(I),s=Cn(I,s)):E=-1}}}return Os(s,a,c,l)}const Mo={};function Ka(){return new sr(Tn(),Ae())}function Qn(i,s,a,c,l,h){const m=s[1],E=m.data[i+8],R=Za(E,m,a,null==c?La(E)&&jt:c!=m&&0!=(3&E.type),l&yt.Host&&h===E);return null!==R?Ai(s,m,R,E):Mo}function Za(i,s,a,c,l){const h=i.providerIndexes,m=s.data,E=1048575&h,I=i.directiveStart,R=h>>20,z=l?E+R:i.directiveEnd;for(let Y=c?E:E+R;Y<z;Y++){const de=m[Y];if(Y<I&&a===de||Y>=I&&de.type===a)return Y}if(l){const Y=m[I];if(Y&&li(Y)&&Y.type===a)return I}return null}function Ai(i,s,a,c){let l=i[a];const h=s.data;if(function pl(i){return i instanceof Ro}(l)){const m=l;m.resolving&&function Ge(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${i}${a}`)}(ye(h[a]));const E=Ms(m.canSeeViewProviders);m.resolving=!0;const I=m.injectImpl?an(m.injectImpl):null;la(i,c,yt.Default);try{l=i[a]=m.factory(void 0,h,i,c),s.firstCreatePass&&a>=c.directiveStart&&function hl(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(c){const m=ia(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==I&&an(I),Ms(E),m.resolving=!1,za()}}return l}function Gu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function yl(i,s){return!(i&yt.Self||i&yt.Host&&s)}class sr{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Bi(this._tNode,this._lView,s,c,a)}}function Xs(i){return function ml(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const h=a[l];if(Tt(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(h===s)return a[l+1];l+=2}}}return null}(Tn(),i)}const Oo="__parameters__";function ma(i,s,a){return Or(()=>{const c=function ih(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...h){if(this instanceof l)return c.apply(this,h),this;const m=new l(...h);return E.annotation=m,E;function E(I,C,R){const U=I.hasOwnProperty(Oo)?I[Oo]:Object.defineProperty(I,Oo,{value:[]})[Oo];for(;U.length<=R;)U.push(null);return(U[R]=U[R]||[]).push(m),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class $n{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xe({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const me=new $n("AnalyzeForEntryComponents");function Fr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Fr(c,s)):s!==i&&s.push(c)}return s}function ii(i,s){i.forEach(a=>Array.isArray(a)?ii(a,s):s(a))}function _l(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ya(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const si={},ko="__NG_DI_FLAG__",pi="ngTempTokenPath",Wu=/\n/gm,Fo="__source",uh=ce({provide:String,useValue:ce});let Fs;function D(i){const s=Fs;return Fs=i,s}function T(i,s=yt.Default){if(void 0===Fs)throw new Fe(203,"");return null===Fs?Rr(i,void 0,s):Fs.get(i,s&yt.Optional?null:void 0,s)}function x(i,s=yt.Default){return(function wn(){return jr}()||T)(ee(i),s)}const K=x;function te(i){const s=[];for(let a=0;a<i.length;a++){const c=ee(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Fe(900,"");let l,h=yt.Default;for(let m=0;m<c.length;m++){const E=c[m],I=tt(E);"number"==typeof I?-1===I?l=E.token:h|=I:l=E}s.push(x(l,h))}else s.push(x(c))}return s}function xe(i,s){return i[ko]=s,i.prototype[ko]=s,i}function tt(i){return i[ko]}const Ut=xe(ma("Inject",i=>({token:i})),-1),Et=xe(ma("Optional"),8),Mn=xe(ma("SkipSelf"),4);var Ls=(()=>((Ls=Ls||{})[Ls.Important=1]="Important",Ls[Ls.DashCase=2]="DashCase",Ls))();const km="__ngContext__";function qr(i,s){i[km]=s}function cp(i){const s=function wa(i){return i[km]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function gh(i,s){return undefined(i,s)}function Cl(i){const s=i[3];return ci(s)?s[3]:s}function yp(i){return Um(i[13])}function mh(i){return Um(i[4])}function Um(i){for(;null!==i&&!ci(i);)i=i[4];return i}function y(i,s,a,c,l){if(null!=c){let h,m=!1;ci(c)?h=c:bi(c)&&(m=!0,c=c[0]);const E=gn(c);0===i&&null!==a?null==l?vh(s,a,E):Ri(s,a,E,l||null,!0):1===i&&null!==a?Ri(s,a,E,l||null,!0):2===i?function Bm(i,s,a){const c=Zu(i,s);c&&function vp(i,s,a,c){In(i)?i.removeChild(s,a,c):s.removeChild(a)}(i,c,s,a)}(s,E,m):3===i&&s.destroyNode(E),null!=h&&function oi(i,s,a,c,l){const h=a[7];h!==gn(a)&&y(s,i,c,h,l);for(let E=10;E<a.length;E++){const I=a[E];Ih(I[1],I,i,s,c,h)}}(s,i,h,a,l)}}function A(i,s,a){if(In(i))return i.createElement(s,a);{const c=null!==a?function Ba(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?i.createElement(s):i.createElementNS(c,s)}}function Sn(i,s){const a=i[9],c=a.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,As(l,-1)),a.splice(c,1)}function ji(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&Sn(l,c),s>0&&(i[a-1][4]=c[4]);const h=ya(i,10+s);!function k(i,s){Ih(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const m=h[19];null!==m&&m.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function $i(i,s){if(!(256&s[2])){const a=s[11];In(a)&&a.destroyNode&&Ih(i,s,a,3,null,null),function Je(i){let s=i[13];if(!s)return cu(i[1],i);for(;s;){let a=null;if(bi(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)bi(s)&&cu(s[1],s),s=s[3];null===s&&(s=i),bi(s)&&cu(s[1],s),a=s&&s[4]}s=a}}(s)}}function cu(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function lu(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof Ro)){const h=a[c+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const E=l[h[m]],I=h[m+1];try{I.call(E)}finally{}}else try{h.call(l)}finally{}}}}(i,s),function Sl(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+1],E="function"==typeof m?m(s):gn(s[m]),I=c[l=a[h+2]],C=a[h+3];"boolean"==typeof C?E.removeEventListener(a[h],I,C):C>=0?c[l=C]():c[l=-C].unsubscribe(),h+=2}else{const m=c[l=a[h+1]];a[h].call(m)}if(null!==c){for(let h=l+1;h<c.length;h++)c[h]();s[7]=null}}(i,s),1===s[1].type&&In(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ci(s[3])){a!==s[3]&&Sn(a,s);const c=s[19];null!==c&&c.detachView(i)}}}function Ku(i,s,a){return function yh(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===Zt.None||l===Zt.Emulated)return null}return nr(c,a)}(i,s.parent,a)}function Ri(i,s,a,c,l){In(i)?i.insertBefore(s,a,c,l):s.insertBefore(a,c,l)}function vh(i,s,a){In(i)?i.appendChild(s,a):s.appendChild(a)}function _h(i,s,a,c,l){null!==c?Ri(i,s,a,c,l):vh(i,s,a)}function Zu(i,s){return In(i)?i.parentNode(s):s.parentNode}let _p=function ut(i,s,a){return 40&i.type?nr(i,a):null};function Yu(i,s,a,c){const l=Ku(i,c,s),h=s[11],E=function Hi(i,s,a){return _p(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)_h(h,l,a[I],E,!1);else _h(h,l,a,E,!1)}function du(i,s){if(null!==s){const a=s.type;if(3&a)return nr(s,i);if(4&a)return wh(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return du(i,c);{const l=i[s.index];return ci(l)?wh(-1,l):gn(l)}}if(32&a)return gh(s,i)()||gn(i[s.index]);{const c=Z_(i,s);return null!==c?Array.isArray(c)?c[0]:du(Cl(i[16]),c):du(i,s.next)}}return null}function Z_(i,s){return null!==s?i[16][6].projection[s.projection]:null}function wh(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return du(c,l)}return s[7]}function jm(i,s,a,c,l,h,m){for(;null!=a;){const E=c[a.index],I=a.type;if(m&&0===s&&(E&&qr(gn(E),c),a.flags|=4),64!=(64&a.flags))if(8&I)jm(i,s,a.child,c,l,h,!1),y(s,i,l,E,h);else if(32&I){const C=gh(a,c);let R;for(;R=C();)y(s,i,l,R,h);y(s,i,l,E,h)}else 16&I?Dh(i,s,c,a,l,h):y(s,i,l,E,h);a=m?a.projectionNext:a.next}}function Ih(i,s,a,c,l,h){jm(a,c,i.firstChild,s,l,h,!1)}function Dh(i,s,a,c,l,h){const m=a[16],I=m[6].projection[c.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)y(s,i,l,I[C],h);else jm(i,s,I,m[3],l,h,!0)}function Y_(i,s,a){In(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Ep(i,s,a){In(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}class Xu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const xI=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Sr=(()=>((Sr=Sr||{})[Sr.NONE=0]="NONE",Sr[Sr.HTML=1]="HTML",Sr[Sr.STYLE=2]="STYLE",Sr[Sr.SCRIPT=3]="SCRIPT",Sr[Sr.URL=4]="URL",Sr[Sr.RESOURCE_URL=5]="RESOURCE_URL",Sr))();function Qm(i){const s=function ec(){const i=Ae();return i&&i[12]}();return s?s.sanitize(Sr.URL,i)||"":function Ju(i,s){const a=function Gm(i){return i instanceof Xu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function ro(i){return i instanceof Xu?i.changingThisBreaksApplicationSecurity:i}(i):function xl(i){return(i=String(i)).match(xI)||i.match(bp)?i:"unsafe:"+i}(pe(i))}function Mp(i){return i.ngOriginalError}function f0(i,...s){i.error(...s)}class tc{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),c=function h0(i){return i&&i.ngErrorLogger||f0}(s);c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Mp(s);for(;a&&Mp(a);)a=Mp(a);return a||null}}const p0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function zn(i){return i instanceof Function?i():i}function Pp(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const h=s.length;if(l+h===c||i.charCodeAt(l+h)<=32)return l}a=l+1}}const ny="ng-template";function Mh(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==Pp(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function kp(i){return 4===i.type&&i.value!==ny}function ry(i,s,a){return s===(4!==i.type||a?i.value:ny)}function iy(i,s,a){let c=4;const l=i.attrs||[],h=function oy(i){for(let s=0;s<i.length;s++)if(Tt(i[s]))return s;return i.length}(l);let m=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!m)if(4&c){if(c=2|1&c,""!==I&&!ry(i,I,a)||""===I&&1===s.length){if(Gi(c))return!1;m=!0}}else{const C=8&c?I:s[++E];if(8&c&&null!==i.attrs){if(!Mh(i.attrs,C,a)){if(Gi(c))return!1;m=!0}continue}const U=Oh(8&c?"class":I,l,kp(i),a);if(-1===U){if(Gi(c))return!1;m=!0;continue}if(""!==C){let z;z=U>h?"":l[U+1].toLowerCase();const Y=8&c?z:null;if(Y&&-1!==Pp(Y,C,0)||2&c&&C!==z){if(Gi(c))return!1;m=!0}}}}else{if(!m&&!Gi(c)&&!Gi(I))return!1;if(m&&Gi(I))continue;m=!1,c=I|1&c}}return Gi(c)||m}function Gi(i){return 0==(1&i)}function Oh(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let h=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let E=s[++l];for(;"string"==typeof E;)E=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function Fp(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function sy(i,s,a=!1){for(let c=0;c<s.length;c++)if(iy(i,s[c],a))return!0;return!1}function uy(i,s){return i?":not("+s.trim()+")":s}function m0(i){let s=i[0],a=1,c=2,l="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&c){const E=i[++a];l+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?l+="."+m:4&c&&(l+=" "+m);else""!==l&&!Gi(m)&&(s+=uy(h,l),l=""),c=m,h=h||!Gi(c);a++}return""!==l&&(s+=uy(h,l)),s}const Ot={};function T0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],h=a[c+1];if(-1!==h){const m=i.data[h];cl(l),m.contentQueries(2,s[h],h)}}}function Fl(i,s,a,c,l,h,m,E,I,C){const R=s.blueprint.slice();return R[0]=l,R[2]=140|c,Ss(R),R[3]=R[15]=i,R[8]=a,R[10]=m||i&&i[10],R[11]=E||i&&i[11],R[12]=I||i&&i[12]||null,R[9]=C||i&&i[9]||null,R[6]=h,R[16]=2==s.type?i[16]:R,R}function cc(i,s,a,c,l){let h=i.data[s];if(null===h)h=function Ll(i,s,a,c,l){const h=il(),m=Lu(),I=i.data[s]=function x0(i,s,a,c,l,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=I),null!==h&&(m?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(i,s,a,c,l),function Qd(){return wt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=c,h.attrs=l;const m=function os(){const i=wt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Li(h,!0),h}function lc(i,s,a,c){if(0===a)return-1;const l=s.length;for(let h=0;h<a;h++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function ps(i,s,a){da(s);try{const c=i.viewQuery;null!==c&&wy(1,c,a);const l=i.template;null!==l&&$p(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&T0(i,s),i.staticViewQueries&&wy(2,i.viewQuery,a);const h=i.components;null!==h&&function C0(i,s){for(let a=0;a<s.length;a++)_y(i,s[a])}(s,h)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,ni()}}function dc(i,s,a,c){const l=s[2];if(256!=(256&l)){da(s);try{Ss(s),function Co(i){return wt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&$p(i,s,a,2,c);const m=3==(3&l);if(m){const C=i.preOrderCheckHooks;null!==C&&ha(s,C,null)}else{const C=i.preOrderHooks;null!==C&&fa(s,C,0,null),rr(s,0)}if(function ke(i){for(let s=yp(i);null!==s;s=mh(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],h=l[3];0==(1024&l[2])&&As(h,1),l[2]|=1024}}}(s),function gD(i){for(let s=yp(i);null!==s;s=mh(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Fi(c)&&dc(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&T0(i,s),m){const C=i.contentCheckHooks;null!==C&&ha(s,C)}else{const C=i.contentHooks;null!==C&&fa(s,C,1),rr(s,1)}!function aD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Rs(~l);else{const h=l,m=a[++c],E=a[++c];al(m,h),E(2,s[h])}}}finally{Rs(-1)}}(i,s);const E=i.components;null!==E&&function uD(i,s){for(let a=0;a<s.length;a++)Er(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&wy(2,I,c),m){const C=i.viewCheckHooks;null!==C&&ha(s,C)}else{const C=i.viewHooks;null!==C&&fa(s,C,2),rr(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,As(s[3],-1))}finally{ni()}}}function S0(i,s,a,c){const l=s[10],m=bo(s);try{!m&&l.begin&&l.begin(),m&&ps(i,s,c),dc(i,s,a,c)}finally{!m&&l.end&&l.end()}}function $p(i,s,a,c,l){const h=function Dr(){return wt.lFrame.selectedIndex}(),m=2&c;try{Rs(-1),m&&s.length>20&&function Nh(i,s,a,c){if(!c)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&ha(s,h,a)}else{const h=i.preOrderHooks;null!==h&&fa(s,h,0,a)}Rs(a)}(i,s,20,!1),a(c,l)}finally{Rs(h)}}function Lh(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Uh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Uh(i,s,a,c,l,h,m,E,I,C){const R=20+c,U=R+l,z=function Gp(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ot);return a}(R,U),Y="function"==typeof C?C():C;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:E,declTNode:s,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function gy(i,s,a,c){const l=U0(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&Iy(i).push(c,l.length-1))}function zp(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function zi(i,s,a,c,l,h){const m=h.hostBindings;if(m){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function P0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(c,l,m)}}function F0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function qp(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function pD(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;li(s)&&(a[""]=i)}}function vy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function L0(i,s,a,c,l){i.data[c]=l;const h=l.factory||(l.factory=di(l.type)),m=new Ro(h,li(l),null);i.blueprint[c]=m,a[c]=m,zi(i,s,0,c,lc(i,a,l.hostVars,Ot),l)}function Wp(i,s,a){const c=nr(s,i),l=Lh(a),h=i[10],m=ct(i,Fl(i,l,null,a.onPush?64:16,c,s,h,h.createRenderer(c,a),null,null));i[s.index]=m}function Bo(i,s,a,c,l,h){const m=nr(i,s);!function Kp(i,s,a,c,l,h,m){if(null==h)In(i)?i.removeAttribute(s,l,a):s.removeAttribute(l);else{const E=null==m?pe(h):m(h,c||"",l);In(i)?i.setAttribute(s,l,E,a):a?s.setAttributeNS(a,l,E):s.setAttribute(l,E)}}(s[11],m,h,i.value,a,c,l)}function Wr(i,s,a,c,l,h){const m=h[s];if(null!==m){const E=c.setInput;for(let I=0;I<m.length;){const C=m[I++],R=m[I++],U=m[I++];null!==E?c.setInput(a,U,C,R):a[R]=U}}}function Hl(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Er(i,s){const a=mr(s,i);if(Fi(a)){const c=a[1];80&a[2]?dc(c,a,c.template,a[8]):a[5]>0&&Ia(a)}}function Ia(i){for(let c=yp(i);null!==c;c=mh(c))for(let l=10;l<c.length;l++){const h=c[l];if(1024&h[2]){const m=h[1];dc(m,h,m.template,h[8])}else h[5]>0&&Ia(h)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=mr(a[c],i);Fi(l)&&l[5]>0&&Ia(l)}}function _y(i,s){const a=mr(s,i),c=a[1];(function rt(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),ps(c,a,a[8])}function ct(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Ey(i){for(;i;){i[2]|=64;const s=Cl(i);if(qd(i)&&!s)return i;i=s}return null}function Ar(i){!function oe(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=cp(a),l=c[1];S0(l,c,l.template,a)}}(i[8])}function wy(i,s,a){cl(0),s(i,a)}const yD=(()=>Promise.resolve(null))();function U0(i){return i[7]||(i[7]=[])}function Iy(i){return i.cleanup||(i.cleanup=[])}function vD(i,s){const a=i[9],c=a?a.get(tc,null):null;c&&c.handleError(s)}function Nt(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const E=s[m];"number"==typeof E?h=E:1==h?l=fe(l,E):2==h&&(c=fe(c,E+": "+s[++m]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}const mt=new $n("INJECTOR",-1);class zl{get(s,a=si){if(a===si){const c=new Error(`NullInjectorError: No provider for ${ie(s)}!`);throw c.name="NullInjectorError",c}return a}}const tn=new $n("Set Injector scope."),Vh={},cr={};let Ke;function Bh(){return void 0===Ke&&(Ke=new zl),Ke}function Yp(i,s=null,a=null,c){const l=gu(i,s,a,c);return l._resolveInjectorDefTypes(),l}function gu(i,s=null,a=null,c){return new _D(i,a,s||Bh(),c)}class _D{constructor(s,a,c,l=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&ii(a,E=>this.processProvider(E,s,a)),ii([s],E=>this.processInjectorType(E,[],h)),this.records.set(mt,fc(void 0,this));const m=this.records.get(tn);this.scope=null!=m?m.value:null,this.source=l||("object"==typeof s?null:ie(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=si,c=yt.Default){this.assertNotDestroyed();const l=D(this),h=an(void 0);try{if(!(c&yt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function Qp(i){return"function"==typeof i||"object"==typeof i&&i instanceof $n}(s)&&Rt(s);E=I&&this.injectableDefInScope(I)?fc(ql(s),Vh):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&yt.Self?Bh():this.parent).get(s,a=c&yt.Optional&&a===si?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[pi]=m[pi]||[]).unshift(ie(s)),l)throw m;return function lt(i,s,a,c){const l=i[pi];throw s[Fo]&&l.unshift(s[Fo]),i.message=function dt(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=ie(s);if(Array.isArray(s))l=s.map(ie).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let E=s[m];h.push(m+":"+("string"==typeof E?JSON.stringify(E):ie(E)))}l=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Wu,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[pi]=null,i}(m,s,"R3InjectorError",this.source)}throw m}finally{an(h),D(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,l)=>s.push(ie(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(s,a,c){if(!(s=ee(s)))return!1;let l=dr(s);const h=null==l&&s.ngModule||void 0,m=void 0===h?s:h,E=-1!==c.indexOf(m);if(void 0!==h&&(l=dr(h)),null==l)return!1;if(null!=l.imports&&!E){let R;c.push(m);try{ii(l.imports,U=>{this.processInjectorType(U,a,c)&&(void 0===R&&(R=[]),R.push(U))})}finally{}if(void 0!==R)for(let U=0;U<R.length;U++){const{ngModule:z,providers:Y}=R[U];ii(Y,de=>this.processProvider(de,z,Y||pt))}}this.injectorDefTypes.add(m);const I=di(m)||(()=>new m);this.records.set(m,fc(I,Vh));const C=l.providers;if(null!=C&&!E){const R=s;ii(C,U=>this.processProvider(U,R,C))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,c){let l=pc(s=ee(s))?s:ee(s&&s.provide);const h=function jh(i,s,a){return qi(i)?fc(void 0,i.useValue):fc(function Dy(i,s,a){let c;if(pc(i)){const l=ee(i);return di(l)||ql(l)}if(qi(i))c=()=>ee(i.useValue);else if(function $0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...te(i.deps||[]));else if(function by(i){return!(!i||!i.useExisting)}(i))c=()=>x(ee(i.useExisting));else{const l=ee(i&&(i.useClass||i.provide));if(!function Ty(i){return!!i.deps}(i))return di(l)||ql(l);c=()=>new l(...te(i.deps))}return c}(i),Vh)}(s);if(pc(s)||!0!==s.multi)this.records.get(l);else{let m=this.records.get(l);m||(m=fc(void 0,Vh,!0),m.factory=()=>te(m.multi),this.records.set(l,m)),l=s,m.multi.push(s)}this.records.set(l,h)}hydrate(s,a){return a.value===Vh&&(a.value=cr,a.value=a.factory()),"object"==typeof a.value&&a.value&&function se(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ee(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function ql(i){const s=Rt(i),a=null!==s?s.factory:di(i);if(null!==a)return a;if(i instanceof $n)throw new Fe(204,!1);if(i instanceof Function)return function ED(i){const s=i.length;if(s>0)throw function va(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new Fe(204,!1);const a=function En(i){const s=i&&(i[hr]||i[Un]);if(s){const a=function on(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Fe(204,!1)}function fc(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function qi(i){return null!==i&&"object"==typeof i&&uh in i}function pc(i){return"function"==typeof i}let xr=(()=>{class i{static create(a,c){var l;if(Array.isArray(a))return Yp({name:""},c,a,"");{const h=null!==(l=a.name)&&void 0!==l?l:"";return Yp({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=si,i.NULL=new zl,i.\u0275prov=Xe({token:i,providedIn:"any",factory:()=>x(mt)}),i.__NG_ELEMENT_ID__=-1,i})();function mc(i,s){as(cp(i)[1],Tn())}let Jl=null;function Bs(){if(!Jl){const i=Gt.Symbol;if(i&&i.iterator)Jl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Jl=c)}}}return Jl}function Ca(i){return!!ed(i)&&(Array.isArray(i)||!(i instanceof Map)&&Bs()in i)}function ed(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ho(i,s,a,c){const l=Ae();return function vi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}(l,function So(){return wt.lFrame.bindingIndex++}(),s)&&(Yt(),Bo(function jn(){const i=wt.lFrame;return Bn(i.tView,i.selectedIndex)}(),l,i,s,a,c)),Ho}function qh(i,s=yt.Default){const a=Ae();return null===a?x(i,s):Bi(Tn(),a,ee(i),s)}function Gy(){throw new Error("invalid")}function Aa(i,s,a,c,l){const m=l?"class":"style";!function B0(i,s,a,c,l){for(let h=0;h<a.length;){const m=a[h++],E=a[h++],I=s[m],C=i.data[m];null!==C.setInput?C.setInput(I,l,c,E):I[E]=l}}(i,a,s.inputs[m],m,c)}function xa(i,s,a,c){const l=Ae(),h=Yt(),m=20+i,E=l[11],I=l[m]=A(E,s,function Qf(){return wt.lFrame.currentNamespace}()),C=h.firstCreatePass?function aE(i,s,a,c,l,h,m){const E=s.consts,C=cc(s,i,2,l,ei(E,h));return function jl(i,s,a,c){let l=!1;if(To()){const h=function hD(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let h=0;h<c.length;h++){const m=c[h];sy(a,m.selectors,!1)&&(l||(l=[]),ls(ir(a,s),i,m.type),li(m)?(qp(i,a),l.unshift(m)):l.push(m))}return l}(i,s,a),m=null===c?null:{"":-1};if(null!==h){l=!0,vy(a,i.data.length,h.length);for(let R=0;R<h.length;R++){const U=h[R];U.providersResolver&&U.providersResolver(U)}let E=!1,I=!1,C=lc(i,s,h.length,null);for(let R=0;R<h.length;R++){const U=h[R];a.mergedAttrs=pa(a.mergedAttrs,U.hostAttrs),L0(i,a,s,C,U),pD(C,U,m),null!==U.contentQueries&&(a.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(a.flags|=128);const z=U.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function my(i,s){const c=s.directiveEnd,l=i.data,h=s.attrs,m=[];let E=null,I=null;for(let C=s.directiveStart;C<c;C++){const R=l[C],U=R.inputs,z=null===h||kp(s)?null:Hl(U,h);m.push(z),E=zp(U,C,E),I=zp(R.outputs,C,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=E,s.outputs=I}(i,a)}m&&function fD(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const h=a[s[l+1]];if(null==h)throw new Fe(-301,!1);c.push(s[l],h)}}}(a,c,m)}return a.mergedAttrs=pa(a.mergedAttrs,a.attrs),l}(s,a,C,ei(E,m)),null!==C.attrs&&Nt(C,C.attrs,!1),null!==C.mergedAttrs&&Nt(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,h,l,0,s,a,c):h.data[m];Li(C,!0);const R=C.mergedAttrs;null!==R&&Rn(E,I,R);const U=C.classes;null!==U&&Ep(E,I,U);const z=C.styles;return null!==z&&Y_(E,I,z),64!=(64&C.flags)&&Yu(h,l,I,C),0===function nl(){return wt.lFrame.elementDepthCount}()&&qr(I,l),function aa(){wt.lFrame.elementDepthCount++}(),Ds(C)&&(function Hp(i,s,a){!To()||(function k0(i,s,a,c){const l=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||ir(a,s),qr(c,s);const m=a.initialInputs;for(let E=l;E<h;E++){const I=i.data[E],C=li(I);C&&Wp(s,a,I);const R=Ai(s,i,E,a);qr(R,s),null!==m&&Wr(0,E-l,R,I,0,m),C&&(mr(a.index,s)[8]=R)}}(i,s,a,nr(a,s)),128==(128&a.flags)&&function $l(i,s,a){const c=a.directiveStart,l=a.directiveEnd,m=a.index,E=function ca(){return wt.lFrame.currentDirectiveIndex}();try{Rs(m);for(let I=c;I<l;I++){const C=i.data[I],R=s[I];Uu(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&F0(C,R)}}finally{Rs(-1),Uu(E)}}(i,s,a))}(h,l,C),function Ul(i,s,a){if(qc(s)){const l=s.directiveEnd;for(let h=s.directiveStart;h<l;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,a[h],h)}}}(h,C,l)),null!==c&&function Fh(i,s,a=nr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let h=0;h<c.length;h+=2){const m=c[h+1],E=-1===m?a(s,i):i[m];i[l++]=E}}}(l,C),xa}function ag(){let i=Tn();Lu()?function ua(){wt.lFrame.isParent=!1}():(i=i.parent,Li(i,!1));const s=i;!function rl(){wt.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(as(a,i),qc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Jf(i){return 0!=(16&i.flags)}(s)&&Aa(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ci(i){return 0!=(32&i.flags)}(s)&&Aa(a,s,Ae(),s.stylesWithoutHost,!1),ag}function Iu(i,s,a,c){return xa(i,s,a,c),ag(),Iu}function ud(i){return!!i&&"function"==typeof i.then}function Wh(i){return!!i&&"function"==typeof i.subscribe}const qy=Wh;function Wy(i,s,a,c){const l=Ae(),h=Yt(),m=Tn();return function Ky(i,s,a,c,l,h,m,E){const I=Ds(c),R=i.firstCreatePass&&Iy(i),U=s[8],z=U0(s);let Y=!0;if(3&c.type||E){const Be=nr(c,s),ot=E?E(Be):Be,Se=z.length,It=E?Ht=>E(gn(Ht[c.index])):c.index;if(In(a)){let Ht=null;if(!E&&I&&(Ht=function OD(i,s,a,c){const l=i.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===a&&l[h+1]===c){const E=s[7],I=l[h+2];return E.length>I?E[I]:null}"string"==typeof m&&(h+=2)}return null}(i,s,l,c.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=h,Ht.__ngLastListenerFn__=h,Y=!1;else{h=uo(c,s,U,h,!1);const Dn=a.listen(ot,l,h);z.push(h,Dn),R&&R.push(l,It,Se,Se+1)}}else h=uo(c,s,U,h,!0),ot.addEventListener(l,h,m),z.push(h),R&&R.push(l,It,Se,m)}else h=uo(c,s,U,h,!1);const de=c.outputs;let Le;if(Y&&null!==de&&(Le=de[l])){const Be=Le.length;if(Be)for(let ot=0;ot<Be;ot+=2){const _s=s[Le[ot]][Le[ot+1]].subscribe(h),$c=z.length;z.push(h,_s),R&&R.push(l,c.index,$c,-($c+1))}}}(h,l,l[11],m,i,s,!!a,c),Wy}function Sc(i,s,a,c){try{return!1!==a(c)}catch(l){return vD(i,l),!1}}function uo(i,s,a,c,l){return function h(m){if(m===Function)return c;const E=2&i.flags?mr(i.index,s):s;0==(32&s[2])&&Ey(E);let I=Sc(s,0,c,m),C=h.__ngNextListenerFn__;for(;C;)I=Sc(s,0,C,m)&&I,C=C.__ngNextListenerFn__;return l&&!1===I&&(m.preventDefault(),m.returnValue=!1),I}}const Oa=void 0;var cv=["en",[["a","p"],["AM","PM"],Oa],[["AM","PM"],Oa,Oa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Oa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Oa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Oa,"{1} 'at' {0}",Oa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uv(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let ys={};function lv(i){const s=function ef(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Du(s);if(a)return a;const c=s.split("-")[0];if(a=Du(c),a)return a;if("en"===c)return cv;throw new Error(`Missing locale data for the locale "${i}".`)}function Jh(i){return lv(i)[_t.PluralCase]}function Du(i){return i in ys||(ys[i]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[i]),ys[i]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const yd="en-US";let nf=yd;class Og{}class uw{resolveComponentFactory(s){throw function Ng(i){const s=Error(`No component factory found for ${ie(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Pg=(()=>{class i{}return i.NULL=new uw,i})();function Cv(){return bd(Tn(),Ae())}function bd(i,s){return new kc(nr(i,s))}let kc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Cv,i})();function cw(i){return i instanceof kc?i.nativeElement:i}class kg{}let Fg=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Lg(){const i=Ae(),a=mr(Tn().index,i);return function pf(i){return i[11]}(bi(a)?a:i)}(),i})(),Sv=(()=>{class i{}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:()=>null}),i})();class Ug{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Vg=new Ug("13.3.12"),Bg={};function jg(i,s,a,c,l=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&c.push(gn(h)),ci(h))for(let E=10;E<h.length;E++){const I=h[E],C=I[1].firstChild;null!==C&&jg(I[1],I,C,c)}const m=a.type;if(8&m)jg(i,s,a.child,c);else if(32&m){const E=gh(a,s);let I;for(;I=E();)c.push(I)}else if(16&m){const E=Z_(s,a);if(Array.isArray(E))c.push(...E);else{const I=Cl(s[16]);jg(I[1],I,E,c,!0)}}a=l?a.projectionNext:a.next}return c}class Td{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return jg(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ci(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(ji(s,c),ya(a,c))}this._attachedToViewContainer=!1}$i(this._lView[1],this._lView)}onDestroy(s){gy(this._lView[1],this._lView,null,s)}markForCheck(){Ey(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Oe(i,s,a){const c=s[10];c.begin&&c.begin();try{dc(i,s,i.template,a)}catch(l){throw vD(s,l),l}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Re(i,s){Ih(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=s}}class $g extends Td{constructor(s){super(s),this._view=s}detectChanges(){Ar(this._view)}checkNoChanges(){}get context(){return null}}class Hg extends Pg{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=He(s);return new Av(a,this.ngModule)}}function lw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Av extends Og{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function y0(i){return i.map(m0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return lw(this.componentDef.inputs)}get outputs(){return lw(this.componentDef.outputs)}create(s,a,c,l){const h=(l=l||this.ngModule)?function Ei(i,s){return{get:(a,c,l)=>{const h=i.get(a,Bg,l);return h!==Bg||c===Bg?h:s.get(a,c,l)}}}(s,l.injector):s,m=h.get(kg,sa),E=h.get(Sv,null),I=m.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",R=c?function Vl(i,s,a){if(In(i))return i.selectRootElement(s,a===Zt.ShadowDom);let c="string"==typeof s?i.querySelector(s):s;return c.textContent="",c}(I,c,this.componentDef.encapsulation):A(m.createRenderer(null,this.componentDef),C,function vb(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(C)),U=this.componentDef.onPush?576:528,z=function Jn(i,s){return{components:[],scheduler:i||p0,clean:yD,playerHandler:s||null,flags:0}}(),Y=Uh(0,null,null,1,0,null,null,null,null,null),de=Fl(null,Y,z,U,null,null,m,I,E,h);let Le,Be;da(de);try{const ot=function q0(i,s,a,c,l,h){const m=a[1];a[20]=i;const I=cc(m,20,2,"#host",null),C=I.mergedAttrs=s.hostAttrs;null!==C&&(Nt(I,C,!0),null!==i&&(Rn(l,i,C),null!==I.classes&&Ep(l,i,I.classes),null!==I.styles&&Y_(l,i,I.styles)));const R=c.createRenderer(i,s),U=Fl(a,Lh(s),null,s.onPush?64:16,a[20],I,c,R,h||null,null);return m.firstCreatePass&&(ls(ir(I,a),m,s.type),qp(m,I),vy(I,a.length,1)),ct(a,U),a[20]=U}(R,this.componentDef,de,m,I);if(R)if(c)Rn(I,R,["ng-version",Vg.full]);else{const{attrs:Se,classes:It}=function qI(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let h=i[c];if("string"==typeof h)2===l?""!==h&&s.push(h,i[++c]):8===l&&a.push(h);else{if(!Gi(l))break;l=h}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Se&&Rn(I,R,Se),It&&It.length>0&&Ep(I,R,It.join(" "))}if(Be=Bn(Y,20),void 0!==a){const Se=Be.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const Ht=a[It];Se.push(null!=Ht?Array.from(Ht):null)}}Le=function Ta(i,s,a,c,l){const h=a[1],m=function N0(i,s,a){const c=Tn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),L0(i,c,s,lc(i,s,1,null),a));const l=Ai(s,i,c.directiveStart,c);qr(l,s);const h=nr(c,s);return h&&qr(h,s),l}(h,a,s);if(c.components.push(m),i[8]=m,l&&l.forEach(I=>I(m,s)),s.contentQueries){const I=Tn();s.contentQueries(1,m,I.directiveStart)}const E=Tn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Rs(E.index),zi(a[1],E,0,E.directiveStart,E.directiveEnd,s),F0(s,m)),m}(ot,this.componentDef,de,z,[mc]),ps(Y,de,null)}finally{ni()}return new gf(this.componentType,Le,bd(Be,de),de,Be)}}class gf extends class Dd{}{constructor(s,a,c,l,h){super(),this.location=c,this._rootLView=l,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new $g(l),this.componentType=s}get injector(){return new sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Fc{}class hw{}const Cd=new Map;class zg extends Fc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Hg(this);const c=xt(s);this._bootstrapComponents=zn(c.bootstrap),this._r3Injector=gu(s,a,[{provide:Fc,useValue:this},{provide:Pg,useValue:this.componentFactoryResolver}],ie(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=xr.THROW_IF_NOT_FOUND,c=yt.Default){return s===xr||s===Fc||s===mt?this:this._r3Injector.get(s,a,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Cu extends hw{constructor(s){super(),this.moduleType=s,null!==xt(s)&&function Mv(i){const s=new Set;!function a(c){const l=xt(c,!0),h=l.id;null!==h&&(function fw(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ie(s)} vs ${ie(s.name)}`)}(h,Cd.get(h),c),Cd.set(h,c));const m=zn(l.imports);for(const E of m)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new zg(this.moduleType,s)}}function vf(i){return s=>{setTimeout(i,void 0,s)}}const Zo=class Ib extends _.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var l,h,m;let E=s,I=a||(()=>null),C=c;if(s&&"object"==typeof s){const U=s;E=null===(l=U.next)||void 0===l?void 0:l.bind(U),I=null===(h=U.error)||void 0===h?void 0:h.bind(U),C=null===(m=U.complete)||void 0===m?void 0:m.bind(U)}this.__isAsync&&(I=vf(I),E&&(E=vf(E)),C&&(C=vf(C)));const R=super.subscribe({next:E,error:I,complete:C});return s instanceof B.w0&&s.add(R),R}};function Uv(){return this._results[Bs()]()}class Vv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Bs(),c=Vv.prototype;c[a]||(c[a]=Uv)}get changes(){return this._changes||(this._changes=new Zo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Fr(s);(this._changesDetected=!function qu(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],h=s[c];if(a&&(l=a(l),h=a(h)),h!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Uc=(()=>{class i{}return i.__NG_ELEMENT_ID__=ww,i})();const Db=Uc,Bv=class extends Db{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s){const a=this._declarationTContainer.tViews,c=Fl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(c[19]=h.createEmbeddedView(a)),ps(a,c,s),new Td(c)}};function ww(){return xd(Tn(),Ae())}function xd(i,s){return 4&i.type?new Bv(s,i,bd(i,s)):null}let Rd=(()=>{class i{}return i.__NG_ELEMENT_ID__=jv,i})();function jv(){return Vc(Tn(),Ae())}const Md=Rd,Pa=class extends Md{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return bd(this._hostTNode,this._hostLView)}get injector(){return new sr(this._hostTNode,this._hostLView)}get parentInjector(){const s=ga(this._hostTNode,this._hostLView);if(qa(s)){const a=Cn(s,this._hostLView),c=qt(s);return new sr(a[1].data[c+8],a)}return new sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Zg(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){const l=s.createEmbeddedView(a||{});return this.insert(l,c),l}createComponent(s,a,c,l,h){const m=s&&!function ds(i){return"function"==typeof i}(s);let E;if(m)E=a;else{const U=a||{};E=U.index,c=U.injector,l=U.projectableNodes,h=U.ngModuleRef}const I=m?s:new Av(He(s)),C=c||this.parentInjector;if(!h&&null==I.ngModule){const z=(m?C:this.parentInjector).get(Fc,null);z&&(h=z)}const R=I.create(C,l,void 0,h);return this.insert(R.hostView,E),R}insert(s,a){const c=s._lView,l=c[1];if(function ku(i){return ci(i[3])}(c)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const U=c[3],z=new Pa(U,U[6],U[3]);z.detach(z.indexOf(s))}}const h=this._adjustIndex(a),m=this._lContainer;!function gt(i,s,a,c){const l=10+c,h=a.length;c>0&&(a[l-1][4]=s),c<h-10?(s[4]=a[l],_l(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function $t(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(l,c,m,h);const E=wh(h,m),I=c[11],C=Zu(I,m[7]);return null!==C&&function J(i,s,a,c,l,h){c[0]=l,c[6]=s,Ih(i,c,a,1,l,h)}(l,m[6],I,c,C,E),s.attachToViewContainerRef(),_l(Su(m),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Zg(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=ji(this._lContainer,a);c&&(ya(Su(this._lContainer),a),$i(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=ji(this._lContainer,a);return c&&null!=ya(Su(this._lContainer),a)?new Td(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Zg(i){return i[8]}function Su(i){return i[8]||(i[8]=[])}function Vc(i,s){let a;const c=s[i.index];if(ci(c))a=c;else{let l;if(8&i.type)l=gn(c);else{const h=s[11];l=h.createComment("");const m=nr(i,s);Ri(h,Zu(h,m),l,function Vm(i,s){return In(i)?i.nextSibling(s):s.nextSibling}(h,m),!1)}s[i.index]=a=function Zp(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}(c,s,l,i),ct(s,a)}return new Pa(a,i,s)}class $v{constructor(s){this.queryList=s,this.matches=null}clone(){return new $v(this.queryList)}setDirty(){this.queryList.setDirty()}}class _f{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let h=0;h<c;h++){const m=a.getByIndex(h);l.push(this.queries[m.indexInDeclarationView].clone())}return new _f(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==xw(s,a).matches&&this.queries[a].setDirty()}}class Yg{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Ef{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(s,l);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new Ef(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class wf{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new wf(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const h=c[l];this.matchTNodeWithReadOption(s,a,bb(a,h)),this.matchTNodeWithReadOption(s,a,Za(a,s,h,!1,!1))}else c===Uc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Za(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===kc||l===Rd||l===Uc&&4&a.type)this.addMatch(a.index,-2);else{const h=Za(a,s,l,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function bb(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Hv(i,s,a,c){return-1===a?function Tb(i,s){return 11&i.type?bd(i,s):4&i.type?xd(i,s):null}(s,i):-2===a?function Gv(i,s,a){return a===kc?bd(s,i):a===Uc?xd(s,i):a===Rd?Vc(s,i):void 0}(i,s,c):Ai(i,i[1],a,s)}function Dw(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const h=i.data,m=a.matches,E=[];for(let I=0;I<m.length;I+=2){const C=m[I];E.push(C<0?null:Hv(s,h[C],m[I+1],a.metadata.read))}l.matches=E}return l.matches}function Qg(i,s,a,c){const l=i.queries.getByIndex(a),h=l.matches;if(null!==h){const m=Dw(i,s,l,a);for(let E=0;E<h.length;E+=2){const I=h[E];if(I>0)c.push(m[E/2]);else{const C=h[E+1],R=s[-I];for(let U=10;U<R.length;U++){const z=R[U];z[17]===z[3]&&Qg(z[1],z,C,c)}if(null!==R[9]){const U=R[9];for(let z=0;z<U.length;z++){const Y=U[z];Qg(Y[1],Y,C,c)}}}}}return c}function bw(i){const s=Ae(),a=Yt(),c=ul();cl(c+1);const l=xw(a,c);if(i.dirty&&bo(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const h=l.crossesNgTemplate?Qg(a,s,c,[]):Dw(a,s,l,c);i.reset(h,cw),i.notifyOnChanges()}return!0}return!1}function zv(i,s,a,c){const l=Yt();if(l.firstCreatePass){const h=Tn();(function Aw(i,s,a){null===i.queries&&(i.queries=new Ef),i.queries.track(new wf(s,a))})(l,new Yg(s,a,c),h.index),function Cb(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function Sw(i,s,a){const c=new Vv(4==(4&a));gy(i,s,c,c.destroy),null===s[19]&&(s[19]=new _f),s[19].queries.push(new $v(c))}(l,Ae(),a)}function qv(){return function Cw(i,s){return i[19].queries[s].queryList}(Ae(),ul())}function xw(i,s){return i.queries.getByIndex(s)}function om(...i){}const Gw=new $n("Application Initializer");let r_=(()=>{class i{constructor(a){this.appInits=a,this.resolve=om,this.reject=om,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(ud(h))a.push(h);else if(qy(h)){const m=new Promise((E,I)=>{h.subscribe({complete:E,error:I})});a.push(m)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(x(Gw,8))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const i_=new $n("AppId",{providedIn:"root",factory:function am(){return`${Cf()}${Cf()}${Cf()}`}});function Cf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const um=new $n("Platform Initializer"),s_=new $n("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Sf=new $n("appBootstrapListener");let qw=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Af=new $n("LocaleId",{providedIn:"root",factory:()=>K(Af,yt.Optional|yt.SkipSelf)||function cm(){return"undefined"!=typeof $localize&&$localize.locale||yd}()}),o_=new $n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ub{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Vb=(()=>{class i{compileModuleSync(a){return new Cu(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),h=zn(xt(a).declarations).reduce((m,E)=>{const I=He(E);return I&&m.push(new Av(I)),m},[]);return new Ub(c,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const $b=(()=>Promise.resolve(0))();function lm(i){"undefined"==typeof Zone?$b.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ho{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zo(!1),this.onMicrotaskEmpty=new Zo(!1),this.onStable=new Zo(!1),this.onError=new Zo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Hb(){let i=Gt.requestAnimationFrame,s=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Kw(i){const s=()=>{!function a_(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Gt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,hm(i),i.isCheckStableRunning=!0,dm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),hm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,h,m,E)=>{try{return u_(i),a.invokeTask(l,h,m,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Rf(i)}},onInvoke:(a,c,l,h,m,E,I)=>{try{return u_(i),a.invoke(l,h,m,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Rf(i)}},onHasTask:(a,c,l,h)=>{a.hasTask(l,h),c===l&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,hm(i),dm(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,l,h)=>(a.handleError(l,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ho.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ho.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,s,Gb,om,om);try{return h.runTask(m,a,c)}finally{h.cancelTask(m)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Gb={};function dm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function hm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function u_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Rf(i){i._nesting--,dm(i)}class nn{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zo,this.onMicrotaskEmpty=new Zo,this.onStable=new Zo,this.onError=new Zo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}let c_=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ho.assertNotInAngularZone(),lm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(x(ho))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac}),i})(),Zw=(()=>{class i{constructor(){this._applications=new Map,Pn.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Pn.findTestabilityInTree(this,a,c)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Mf{addToWindow(s){}findTestabilityInTree(s,a,c){return null}}function Yw(i){Pn=i}let Pn=new Mf,tr=null;const fo=new $n("AllowMultipleToken"),l_=new $n("PlatformOnDestroy");class h_{constructor(s,a){this.name=s,this.token=a}}function fm(i,s,a=[]){const c=`Platform: ${s}`,l=new $n(c);return(h=[])=>{let m=Xw();if(!m||m.injector.get(fo,!1)){const E=[...a,...h,{provide:l,useValue:!0}];i?i(E):function qb(i){if(tr&&!tr.get(fo,!1))throw new Fe(400,"");tr=i;const s=i.get(Zb),a=i.get(um,null);a&&a.forEach(c=>c())}(function Kb(i=[],s){return xr.create({name:s,providers:[{provide:tn,useValue:"platform"},{provide:l_,useValue:()=>tr=null},...i]})}(E,c))}return function Wb(i){const s=Xw();if(!s)throw new Fe(401,"");return s}()}}function Xw(){var i;return null!==(i=null==tr?void 0:tr.get(Zb))&&void 0!==i?i:null}let Zb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const E=function Ir(i,s){let a;return a="noop"===i?new nn:("zone.js"===i?void 0:i)||new ho({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:ho,useValue:E}];return E.run(()=>{const C=xr.create({providers:I,parent:this.injector,name:a.moduleType.name}),R=a.create(C),U=R.injector.get(tc,null);if(!U)throw new Fe(402,"");return E.runOutsideAngular(()=>{const z=E.onError.subscribe({next:Y=>{U.handleError(Y)}});R.onDestroy(()=>{pm(this._modules,R),z.unsubscribe()})}),function Jw(i,s,a){try{const c=a();return ud(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(U,E,()=>{const z=R.injector.get(r_);return z.runInitializers(),z.donePromise.then(()=>(function rf(i){Ne(i,"Expected localeId to be defined"),"string"==typeof i&&(nf=i.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Af,yd)||yd),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,c=[]){const l=eI({},c);return function zb(i,s,a){const c=new Cu(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(a){const c=a.injector.get(f_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Fe(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(l_,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(x(xr))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function eI(i,s){return Array.isArray(s)?s.reduce(eI,i):Object.assign(Object.assign({},i),s)}let f_=(()=>{class i{constructor(a,c,l,h){this._zone=a,this._injector=c,this._exceptionHandler=l,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new N.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{ho.assertNotInAngularZone(),lm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{ho.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ne.T)(m,E.pipe((0,re.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Fe(405,"");let l;l=a instanceof Og?a:this._injector.get(Pg).resolveComponentFactory(a),this.componentTypes.push(l.componentType);const h=function Qw(i){return i.isBoundToModule}(l)?void 0:this._injector.get(Fc),E=l.create(xr.NULL,[],c||l.selector,h),I=E.location.nativeElement,C=E.injector.get(c_,null),R=C&&E.injector.get(Zw);return C&&R&&R.registerApplication(I,C),E.onDestroy(()=>{this.detachView(E.hostView),pm(this.components,E),R&&R.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;pm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Sf,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(x(ho),x(xr),x(tc),x(r_))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function pm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let nI=!0,rI=!1;function sC(){return rI=!0,nI}function Qb(){if(rI)throw new Error("Cannot enable prod mode after platform setup.");nI=!1}let Jb=(()=>{class i{}return i.__NG_ELEMENT_ID__=Yo,i})();function Yo(i){return function ka(i,s,a){if(La(i)&&!a){const c=mr(i.index,s);return new Td(c,c)}return 47&i.type?new Td(s[16],s):null}(Tn(),Ae(),16==(16&i))}class y_{constructor(){}supports(s){return Ca(s)}create(s){return new Pf(s)}}const v_=(i,s)=>s;class Pf{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||v_}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,h=null;for(;a||c;){const m=!c||a&&a.currentIndex<__(c,l,h)?a:c,E=__(m,l,h),I=m.currentIndex;if(m===c)l--,c=c._nextRemoved;else if(a=a._next,null==m.previousIndex)l++;else{h||(h=[]);const C=E-l,R=I-l;if(C!=R){for(let z=0;z<C;z++){const Y=z<h.length?h[z]:h[z]=0,de=Y+z;R<=de&&de<C&&(h[z]=Y+1)}h[m.previousIndex]=R-C}}E!==I&&s(m,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Ca(s))throw new Fe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,m,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)h=s[E],m=this._trackByFn(E,h),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,h,m,E)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,E),c=!0),a=a._next}else l=0,function Y0(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Bs()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{m=this._trackByFn(l,E),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,E,m,l)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,m,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,l)):s=this._addAfter(new iT(a,c),h,l),s}_verifyReinsertion(s,a,c,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new kf),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kf),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class iT{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ym{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class kf{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new ym,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function __(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class Bd{constructor(){}supports(s){return s instanceof Map||ed(s)}create(){return new sT}}class sT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||ed(s)))throw new Fe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const c=new vm(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class vm{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function E_(){return new Ff([new y_])}let Ff=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||E_()),deps:[[i,new Mn,new Et]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new Fe(901,"")}}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:E_}),i})();function Fa(){return new jc([new Bd])}let jc=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Fa()),deps:[[i,new Mn,new Et]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new Fe(901,"")}}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:Fa}),i})();const w_=fm(null,"core",[]);let aT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(x(f_))},i.\u0275mod=P({type:i}),i.\u0275inj=St({}),i})()},3942:(et,Ee,L)=>{L.d(Ee,{Z:()=>Fe});var _=L(2090),B=L(4859),N=L(9681),ne=L(1877);class re{constructor(pe,ye){this._delegate=pe,this.firebase=ye,(0,N._addComponent)(pe,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(pe,ye=N._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(pe);return!ze.isInitialized()&&"EXPLICIT"===(null===(Ge=ze.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:ye})}_removeServiceInstance(pe,ye=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(ye)}_addComponent(pe){(0,N._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,N._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function fe(){const Ue=function ie(Ue){const pe={},ye={__esModule:!0,initializeApp:function Ce(X,ae={}){const ge=N.initializeApp(X,ae);if((0,_.r3)(pe,ge.name))return pe[ge.name];const qe=new Ue(ge,ye);return pe[ge.name]=qe,qe},app:ze,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function ve(X){const ae=X.name,ge=ae.replace("-compat","");if(N._registerComponent(X)&&"PUBLIC"===X.type){const qe=(it=ze())=>{if("function"!=typeof it[ge])throw ue.create("invalid-app-argument",{appName:ae});return it[ge]()};void 0!==X.serviceProps&&(0,_.ZB)(qe,X.serviceProps),ye[ge]=qe,Ue.prototype[ge]=function(...it){return this._getService.bind(this,ae).apply(this,X.multipleInstances?it:[])}}return"PUBLIC"===X.type?ye[ge]:null},removeApp:function Ge(X){delete pe[X]},useAsService:function $e(X,ae){return"serverAuth"===ae?null:ae},modularAPIs:N}};function ze(X){if(!(0,_.r3)(pe,X=X||N._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:X});return pe[X]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Te(){return Object.keys(pe).map(X=>pe[X])}}),ze.App=Ue,ye}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function pe(ye){(0,_.ZB)(Ue,ye)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Ue}(),G=new ne.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=H;!function be(Ue){(0,N.registerVersion)("@firebase/app-compat","0.2.5",Ue)}()},9681:(et,Ee,L)=>{L.r(Ee),L.d(Ee,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>hr,_DEFAULT_ENTRY_NAME:()=>Ne,_addComponent:()=>mn,_addOrOverwriteComponent:()=>Xe,_apps:()=>at,_clearComponents:()=>Ln,_components:()=>Mt,_getProvider:()=>St,_registerComponent:()=>ht,_removeServiceInstance:()=>Rt,deleteApp:()=>yt,getApp:()=>Un,getApps:()=>Qi,initializeApp:()=>Ii,onLog:()=>an,registerVersion:()=>wn,setLogLevel:()=>Rr});var _=L(5861),B=L(4859),N=L(1877),ne=L(2090),re=L(8766);class ce{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function ue(Ze){const Ie=Ze.getComponent();return"VERSION"===(null==Ie?void 0:Ie.type)}(We)){const Dt=We.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(We=>We).join(" ")}}const ie="@firebase/app",H=new N.Yd("@firebase/app"),Ne="[DEFAULT]",we={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},at=new Map,Mt=new Map;function mn(Ze,Ie){try{Ze.container.addComponent(Ie)}catch(We){H.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Ze.name}`,We)}}function Xe(Ze,Ie){Ze.container.addOrOverwriteComponent(Ie)}function ht(Ze){const Ie=Ze.name;if(Mt.has(Ie))return H.debug(`There were multiple attempts to register component ${Ie}.`),!1;Mt.set(Ie,Ze);for(const We of at.values())mn(We,Ze);return!0}function St(Ze,Ie){const We=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),Ze.container.getProvider(Ie)}function Rt(Ze,Ie,We=Ne){St(Ze,Ie).clearInstance(We)}function Ln(){Mt.clear()}const on=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dr{constructor(Ie,We,Dt){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw on.create("app-deleted",{appName:this._name})}}const hr="9.18.0";function Ii(Ze,Ie={}){let We=Ze;"object"!=typeof Ie&&(Ie={name:Ie});const Dt=Object.assign({name:Ne,automaticDataCollectionEnabled:!1},Ie),At=Dt.name;if("string"!=typeof At||!At)throw on.create("bad-app-name",{appName:String(At)});if(We||(We=(0,ne.aH)()),!We)throw on.create("no-options");const un=at.get(At);if(un){if((0,ne.vZ)(We,un.options)&&(0,ne.vZ)(Dt,un.config))return un;throw on.create("duplicate-app",{appName:At})}const kn=new B.H0(At);for(const j of Mt.values())kn.addComponent(j);const $=new dr(We,Dt,kn);return at.set(At,$),$}function Un(Ze=Ne){const Ie=at.get(Ze);if(!Ie&&Ze===Ne)return Ii();if(!Ie)throw on.create("no-app",{appName:Ze});return Ie}function Qi(){return Array.from(at.values())}function yt(Ze){return jr.apply(this,arguments)}function jr(){return(jr=(0,_.Z)(function*(Ze){const Ie=Ze.name;at.has(Ie)&&(at.delete(Ie),yield Promise.all(Ze.container.getProviders().map(We=>We.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function wn(Ze,Ie,We){var Dt;let At=null!==(Dt=we[Ze])&&void 0!==Dt?Dt:Ze;We&&(At+=`-${We}`);const un=At.match(/\s|\//),kn=Ie.match(/\s|\//);if(un||kn){const $=[`Unable to register library "${At}" with version "${Ie}":`];return un&&$.push(`library name "${At}" contains illegal characters (whitespace or "/")`),un&&kn&&$.push("and"),kn&&$.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void H.warn($.join(" "))}ht(new B.wA(`${At}-version`,()=>({library:At,version:Ie}),"VERSION"))}function an(Ze,Ie){if(null!==Ze&&"function"!=typeof Ze)throw on.create("invalid-log-argument");(0,N.Am)(Ze,Ie)}function Rr(Ze){(0,N.Ub)(Ze)}const bn="firebase-heartbeat-store";let fr=null;function Xi(){return fr||(fr=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Ze,Ie)=>{0===Ie&&Ze.createObjectStore(bn)}}).catch(Ze=>{throw on.create("idb-open",{originalErrorMessage:Ze.message})})),fr}function ft(){return(ft=(0,_.Z)(function*(Ze){try{return(yield Xi()).transaction(bn).objectStore(bn).get(Di(Ze))}catch(Ie){if(Ie instanceof ne.ZR)H.warn(Ie.message);else{const We=on.create("idb-get",{originalErrorMessage:null==Ie?void 0:Ie.message});H.warn(We.message)}}})).apply(this,arguments)}function nt(Ze,Ie){return $r.apply(this,arguments)}function $r(){return($r=(0,_.Z)(function*(Ze,Ie){try{const Dt=(yield Xi()).transaction(bn,"readwrite");return yield Dt.objectStore(bn).put(Ie,Di(Ze)),Dt.done}catch(We){if(We instanceof ne.ZR)H.warn(We.message);else{const Dt=on.create("idb-set",{originalErrorMessage:null==We?void 0:We.message});H.warn(Dt.message)}}})).apply(this,arguments)}function Di(Ze){return`${Ze.name}!${Ze.options.appId}`}class Hn{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new Qr(We),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Ie=this;return(0,_.Z)(function*(){const Dt=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=yn();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==At&&!Ie._heartbeatsCache.heartbeats.some(un=>un.date===At))return Ie._heartbeatsCache.heartbeats.push({date:At,agent:Dt}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(un=>{const kn=new Date(un.date).valueOf();return Date.now()-kn<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,_.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const We=yn(),{heartbeatsToSend:Dt,unsentEntries:At}=function pt(Ze,Ie=1024){const We=[];let Dt=Ze.slice();for(const At of Ze){const un=We.find(kn=>kn.agent===At.agent);if(un){if(un.dates.push(At.date),Jt(We)>Ie){un.dates.pop();break}}else if(We.push({agent:At.agent,dates:[At.date]}),Jt(We)>Ie){We.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:We,unsentEntries:Dt}}(Ie._heartbeatsCache.heartbeats),un=(0,ne.L)(JSON.stringify({version:2,heartbeats:Dt}));return Ie._heartbeatsCache.lastSentHeartbeatDate=We,At.length>0?(Ie._heartbeatsCache.heartbeats=At,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),un})()}}function yn(){return(new Date).toISOString().substring(0,10)}class Qr{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,_.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function Zt(Ze){return ft.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var We=this;return(0,_.Z)(function*(){var Dt;if(yield We._canUseIndexedDBPromise){const un=yield We.read();return nt(We.app,{lastSentHeartbeatDate:null!==(Dt=Ie.lastSentHeartbeatDate)&&void 0!==Dt?Dt:un.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var We=this;return(0,_.Z)(function*(){var Dt;if(yield We._canUseIndexedDBPromise){const un=yield We.read();return nt(We.app,{lastSentHeartbeatDate:null!==(Dt=Ie.lastSentHeartbeatDate)&&void 0!==Dt?Dt:un.lastSentHeartbeatDate,heartbeats:[...un.heartbeats,...Ie.heartbeats]})}})()}}function Jt(Ze){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function Kn(Ze){ht(new B.wA("platform-logger",Ie=>new ce(Ie),"PRIVATE")),ht(new B.wA("heartbeat",Ie=>new Hn(Ie),"PRIVATE")),wn(ie,"0.9.5",Ze),wn(ie,"0.9.5","esm2017"),wn("fire-js","")}("")},4859:(et,Ee,L)=>{L.d(Ee,{H0:()=>ie,wA:()=>N});var _=L(5861),B=L(2090);class N{constructor(H,G,ee){this.name=H,this.instanceFactory=G,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ne="[DEFAULT]";class re{constructor(H,G){this.name=H,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const G=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(G)){const ee=new B.BH;if(this.instancesDeferred.set(G,ee),this.isInitialized(G)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:G});je&&ee.resolve(je)}catch(je){}}return this.instancesDeferred.get(G).promise}getImmediate(H){var G;const ee=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),je=null!==(G=null==H?void 0:H.optional)&&void 0!==G&&G;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(be){if(je)return null;throw be}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ue(fe){return"EAGER"===fe.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(G){}for(const[G,ee]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(G);try{const be=this.getOrInitializeService({instanceIdentifier:je});ee.resolve(be)}catch(be){}}}}clearInstance(H=ne){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,_.Z)(function*(){const G=Array.from(H.instances.values());yield Promise.all([...G.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...G.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ne){return this.instances.has(H)}getOptions(H=ne){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:G={}}=H,ee=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:ee,options:G});for(const[be,Fe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(be)&&Fe.resolve(je);return je}onInit(H,G){var ee;const je=this.normalizeInstanceIdentifier(G),be=null!==(ee=this.onInitCallbacks.get(je))&&void 0!==ee?ee:new Set;be.add(H),this.onInitCallbacks.set(je,be);const Fe=this.instances.get(je);return Fe&&H(Fe,je),()=>{be.delete(H)}}invokeOnInitCallbacks(H,G){const ee=this.onInitCallbacks.get(G);if(ee)for(const je of ee)try{je(H,G)}catch(be){}}getOrInitializeService({instanceIdentifier:H,options:G={}}){let ee=this.instances.get(H);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=H,fe===ne?void 0:fe),options:G}),this.instances.set(H,ee),this.instancesOptions.set(H,G),this.invokeOnInitCallbacks(ee,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,ee)}catch(je){}var fe;return ee||null}normalizeInstanceIdentifier(H=ne){return this.component?this.component.multipleInstances?H:ne:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const G=this.getProvider(H.name);if(G.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);G.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const G=new re(H,this);return this.providers.set(H,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(et,Ee,L)=>{L.d(Ee,{Am:()=>fe,Ub:()=>ie,Yd:()=>ue,in:()=>B});const _=[];var B=(()=>{return(H=B||(B={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",B;var H})();const N={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ne=B.INFO,re={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ce=(H,G,...ee)=>{if(G<H.logLevel)return;const je=(new Date).toISOString(),be=re[G];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[be](`[${je}]  ${H.name}:`,...ee)};class ue{constructor(G){this.name=G,this._logLevel=ne,this._logHandler=ce,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in B))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?N[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...G),this._logHandler(this,B.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...G),this._logHandler(this,B.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,B.INFO,...G),this._logHandler(this,B.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,B.WARN,...G),this._logHandler(this,B.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...G),this._logHandler(this,B.ERROR,...G)}}function ie(H){_.forEach(G=>{G.setLogLevel(H)})}function fe(H,G){for(const ee of _){let je=null;G&&G.level&&(je=N[G.level]),ee.userLogHandler=null===H?null:(be,Fe,...Ue)=>{const pe=Ue.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch(Ge){return null}}).filter(ye=>ye).join(" ");Fe>=(null!=je?je:be.logLevel)&&H({level:B[Fe].toLowerCase(),message:pe,args:Ue,type:be.name})}}}},259:(et,Ee,L)=>{L.d(Ee,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=L(9681);(0,_.registerVersion)("firebase","9.18.0","app")},9260:(et,Ee,L)=>{L.d(Ee,{Z:()=>_.Z});var _=L(3942);_.Z.registerVersion("firebase","9.18.0","app-compat")},9568:(et,Ee,L)=>{L.r(Ee);var _=L(5861),B=L(3942),N=L(5114),ne=L(2090),ue=(L(9681),L(1877),L(4859));function ie(){return window}function G(){return(G=(0,_.Z)(function*(P,F,M){var Q;const{BuildInfo:De}=ie();(0,N.ap)(F.sessionId,"AuthEvent did not contain a session ID");const He=yield ye(F.sessionId),vt={};return(0,N.aq)()?vt.ibi=De.packageName:(0,N.ar)()?vt.apn=De.packageName:(0,N.as)(P,"operation-not-supported-in-this-environment"),De.displayName&&(vt.appDisplayName=De.displayName),vt.sessionId=He,(0,N.at)(P,M,F.type,void 0,null!==(Q=F.eventId)&&void 0!==Q?Q:void 0,vt)})).apply(this,arguments)}function je(){return(je=(0,_.Z)(function*(P){const{BuildInfo:F}=ie(),M={};(0,N.aq)()?M.iosBundleId=F.packageName:(0,N.ar)()?M.androidPackageName=F.packageName:(0,N.as)(P,"operation-not-supported-in-this-environment"),yield(0,N.au)(P,M)})).apply(this,arguments)}function Ue(){return(Ue=(0,_.Z)(function*(P,F,M){const{cordova:Q}=ie();let De=()=>{};try{yield new Promise((He,vt)=>{let bt=null;function xt(){var kt;He();const pr=null===(kt=Q.plugins.browsertab)||void 0===kt?void 0:kt.close;"function"==typeof pr&&pr(),"function"==typeof(null==M?void 0:M.close)&&M.close()}function Ct(){bt||(bt=window.setTimeout(()=>{vt((0,N.aw)(P,"redirect-cancelled-by-user"))},2e3))}function xn(){"visible"===(null==document?void 0:document.visibilityState)&&Ct()}F.addPassiveListener(xt),document.addEventListener("resume",Ct,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",xn,!1),De=()=>{F.removePassiveListener(xt),document.removeEventListener("resume",Ct,!1),document.removeEventListener("visibilitychange",xn,!1),bt&&window.clearTimeout(bt)}})}finally{De()}})).apply(this,arguments)}function ye(P){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,_.Z)(function*(P){const F=ze(P),M=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(M)).map(De=>De.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ze(P){if((0,N.ap)(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(P);const F=new ArrayBuffer(P.length),M=new Uint8Array(F);for(let Q=0;Q<P.length;Q++)M[Q]=P.charCodeAt(Q);return M}class Te extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(M=>M(F)),super.onEvent(F)}initialized(){var F=this;return(0,_.Z)(function*(){yield F.initPromise})()}}function X(P){return ae.apply(this,arguments)}function ae(){return(ae=(0,_.Z)(function*(P){const F=yield it()._get(st(P));return F&&(yield it()._remove(st(P))),F})).apply(this,arguments)}function qe(){const P=[],F="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<20;M++){const Q=Math.floor(Math.random()*F.length);P.push(F.charAt(Q))}return P.join("")}function it(){return(0,N.az)(N.b)}function st(P){return(0,N.aA)("authEvent",P.config.apiKey,P.name)}function le(P){if(!(null==P?void 0:P.includes("?")))return{};const[F,...M]=P.split("?");return(0,ne.zd)(M.join("?"))}function we(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function ht(){var P;return(null===(P=null==self?void 0:self.location)||void 0===P?void 0:P.protocol)||null}function Rt(P=(0,ne.z$)()){return!("file:"!==ht()&&"ionic:"!==ht()&&"capacitor:"!==ht()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function hr(){try{const P=self.localStorage,F=N.aI();if(P)return P.setItem(F,"1"),P.removeItem(F),!function dr(P=(0,ne.z$)()){return function En(){return(0,ne.w1)()&&11===(null==document?void 0:document.documentMode)}()||function on(P=(0,ne.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,ne.hl)()}catch(P){return Ii()&&(0,ne.hl)()}return!1}function Ii(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function St(){return"http:"===ht()||"https:"===ht()}()||(0,ne.ru)()||Rt())&&!function Ln(){return(0,ne.b$)()||(0,ne.UG)()}()&&hr()&&!Ii()}function Qi(){return Rt()&&"undefined"!=typeof document}function jr(){return(jr=(0,_.Z)(function*(){return!!Qi()&&new Promise(P=>{const F=setTimeout(()=>{P(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),P(!0)})})})).apply(this,arguments)}const an={LOCAL:"local",NONE:"none",SESSION:"session"},Rr=N.ax,Mr="persistence";function bn(P){return fr.apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(P){yield P._initializationPromise;const F=Zt(),M=N.aA(Mr,P.config.apiKey,P.name);F&&F.setItem(M,P._getPersistence())})).apply(this,arguments)}function Zt(){var P;try{return(null===(P=function wn(){return"undefined"!=typeof window?window:null}())||void 0===P?void 0:P.sessionStorage)||null}catch(F){return null}}const ft=N.ax;class nt{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(class Me{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(F){var M=this;return(0,_.Z)(function*(){const Q=F._key();let De=M.eventManagers.get(Q);return De||(De=new Te(F),M.eventManagers.set(Q,De),M.attachCallbackListeners(F,De)),De})()}_openPopup(F){(0,N.as)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,M,Q,De){var He=this;return(0,_.Z)(function*(){!function pe(P){var F,M,Q,De,He,vt,bt,xt,Ct,xn;const kt=ie();(0,N.ax)("function"==typeof(null===(F=null==kt?void 0:kt.universalLinks)||void 0===F?void 0:F.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(void 0!==(null===(M=null==kt?void 0:kt.BuildInfo)||void 0===M?void 0:M.packageName),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(He=null===(De=null===(Q=null==kt?void 0:kt.cordova)||void 0===Q?void 0:Q.plugins)||void 0===De?void 0:De.browsertab)||void 0===He?void 0:He.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(xt=null===(bt=null===(vt=null==kt?void 0:kt.cordova)||void 0===vt?void 0:vt.plugins)||void 0===bt?void 0:bt.browsertab)||void 0===xt?void 0:xt.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(xn=null===(Ct=null==kt?void 0:kt.cordova)||void 0===Ct?void 0:Ct.InAppBrowser)||void 0===xn?void 0:xn.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const vt=yield He._initialize(F);yield vt.initialized(),vt.resetRedirect(),(0,N.aD)(),yield He._originValidation(F);const bt=function ve(P,F,M=null){return{type:F,eventId:M,urlResponse:null,sessionId:qe(),postBody:null,tenantId:P.tenantId,error:(0,N.aw)(P,"no-auth-event")}}(F,Q,De);yield function $e(P,F){return it()._set(st(P),F)}(F,bt);const xt=yield function H(P,F,M){return G.apply(this,arguments)}(F,bt,M),Ct=yield function be(P){const{cordova:F}=ie();return new Promise(M=>{F.plugins.browsertab.isAvailable(Q=>{let De=null;Q?F.plugins.browsertab.openUrl(P):De=F.InAppBrowser.open(P,(0,N.av)()?"_blank":"_system","location=yes"),M(De)})})}(xt);return function Fe(P,F,M){return Ue.apply(this,arguments)}(F,vt,Ct)})()}_isIframeWebStorageSupported(F,M){throw new Error("Method not implemented.")}_originValidation(F){const M=F._key();return this.originValidationPromises[M]||(this.originValidationPromises[M]=function ee(P){return je.apply(this,arguments)}(F)),this.originValidationPromises[M]}attachCallbackListeners(F,M){const{universalLinks:Q,handleOpenURL:De,BuildInfo:He}=ie(),vt=setTimeout((0,_.Z)(function*(){yield X(F),M.onEvent(we())}),500),bt=function(){var xn=(0,_.Z)(function*(kt){clearTimeout(vt);const pr=yield X(F);let ki=null;pr&&(null==kt?void 0:kt.url)&&(ki=function ge(P,F){var M,Q;const De=function W(P){const F=le(P),M=F.link?decodeURIComponent(F.link):void 0,Q=le(M).link,De=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return le(De).link||De||Q||M||P}(F);if(De.includes("/__/auth/callback")){const He=le(De),vt=He.firebaseError?function Pt(P){try{return JSON.parse(P)}catch(F){return null}}(decodeURIComponent(He.firebaseError)):null,bt=null===(Q=null===(M=null==vt?void 0:vt.code)||void 0===M?void 0:M.split("auth/"))||void 0===Q?void 0:Q[1],xt=bt?(0,N.aw)(bt):null;return xt?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:xt,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:De,postBody:null}}return null}(pr,kt.url)),M.onEvent(ki||we())});return function(pr){return xn.apply(this,arguments)}}();void 0!==Q&&"function"==typeof Q.subscribe&&Q.subscribe(null,bt);const xt=De,Ct=`${He.packageName.toLowerCase()}://`;ie().handleOpenURL=function(){var xn=(0,_.Z)(function*(kt){if(kt.toLowerCase().startsWith(Ct)&&bt({url:kt}),"function"==typeof xt)try{xt(kt)}catch(pr){console.error(pr)}});return function(kt){return xn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(F){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,M,Q,De){var He=this;return(0,_.Z)(function*(){return yield He.selectUnderlyingResolver(),He.assertedUnderlyingResolver._openPopup(F,M,Q,De)})()}_openRedirect(F,M,Q,De){var He=this;return(0,_.Z)(function*(){return yield He.selectUnderlyingResolver(),He.assertedUnderlyingResolver._openRedirect(F,M,Q,De)})()}_isIframeWebStorageSupported(F,M){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,M)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return Qi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,_.Z)(function*(){if(F.underlyingResolver)return;const M=yield function yt(){return jr.apply(this,arguments)}();F.underlyingResolver=M?F.cordovaResolver:F.browserResolver})()}}function $r(P){return P.unwrap()}function Gt(P){return Hn(P)}function Hn(P){const{_tokenResponse:F}=P instanceof ne.ZR?P.customData:P;if(!F)return null;if(!(P instanceof ne.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return N.P.credentialFromResult(P);const M=F.providerId;if(!M||M===N.o.PASSWORD)return null;let Q;switch(M){case N.o.GOOGLE:Q=N.Q;break;case N.o.FACEBOOK:Q=N.N;break;case N.o.GITHUB:Q=N.T;break;case N.o.TWITTER:Q=N.W;break;default:const{oauthIdToken:De,oauthAccessToken:He,oauthTokenSecret:vt,pendingToken:bt,nonce:xt}=F;return He||vt||De||bt?bt?M.startsWith("saml.")?N.aL._create(M,bt):N.J._fromParams({providerId:M,signInMethod:M,pendingToken:bt,idToken:De,accessToken:He}):new N.U(M).credential({idToken:De,accessToken:He,rawNonce:xt}):null}return P instanceof ne.ZR?Q.credentialFromError(P):Q.credentialFromResult(P)}function yn(P,F){return F.catch(M=>{throw M instanceof ne.ZR&&function Pi(P,F){var M;const Q=null===(M=F.customData)||void 0===M?void 0:M._tokenResponse;if("auth/multi-factor-auth-required"===(null==F?void 0:F.code))F.resolver=new Jt(P,N.an(P,F));else if(Q){const De=Hn(F),He=F;De&&(He.credential=De,He.tenantId=Q.tenantId||void 0,He.email=Q.email||void 0,He.phoneNumber=Q.phoneNumber||void 0)}}(P,M),M}).then(M=>{const De=M.user;return{operationType:M.operationType,credential:Gt(M),additionalUserInfo:N.al(M),user:Kn.getOrCreate(De)}})}function pt(P,F){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,_.Z)(function*(P,F){const M=yield F;return{verificationId:M.verificationId,confirm:Q=>yn(P,M.confirm(Q))}})).apply(this,arguments)}class Jt{constructor(F,M){this.resolver=M,this.auth=function Di(P){return P.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return yn($r(this.auth),this.resolver.resolveSignIn(F))}}class Kn{constructor(F){this._delegate=F,this.multiFactor=N.ao(F)}static getOrCreate(F){return Kn.USER_MAP.has(F)||Kn.USER_MAP.set(F,new Kn(F)),Kn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var M=this;return(0,_.Z)(function*(){return yn(M.auth,N.Z(M._delegate,F))})()}linkWithPhoneNumber(F,M){var Q=this;return(0,_.Z)(function*(){return pt(Q.auth,N.l(Q._delegate,F,M))})()}linkWithPopup(F){var M=this;return(0,_.Z)(function*(){return yn(M.auth,N.d(M._delegate,F,nt))})()}linkWithRedirect(F){var M=this;return(0,_.Z)(function*(){return yield bn(N.aE(M.auth)),N.g(M._delegate,F,nt)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var M=this;return(0,_.Z)(function*(){return yn(M.auth,N._(M._delegate,F))})()}reauthenticateWithPhoneNumber(F,M){return pt(this.auth,N.r(this._delegate,F,M))}reauthenticateWithPopup(F){return yn(this.auth,N.e(this._delegate,F,nt))}reauthenticateWithRedirect(F){var M=this;return(0,_.Z)(function*(){return yield bn(N.aE(M.auth)),N.h(M._delegate,F,nt)})()}sendEmailVerification(F){return N.ab(this._delegate,F)}unlink(F){var M=this;return(0,_.Z)(function*(){return yield N.ak(M._delegate,F),M})()}updateEmail(F){return N.ag(this._delegate,F)}updatePassword(F){return N.ah(this._delegate,F)}updatePhoneNumber(F){return N.u(this._delegate,F)}updateProfile(F){return N.af(this._delegate,F)}verifyBeforeUpdateEmail(F,M){return N.ac(this._delegate,F,M)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Kn.USER_MAP=new WeakMap;const Ze=N.ax;let Ie=(()=>{class P{constructor(M,Q){if(this.app=M,Q.isInitialized())return this._delegate=Q.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:De}=M.options;Ze(De,"invalid-api-key",{appName:M.name}),Ze(De,"invalid-api-key",{appName:M.name});const He="undefined"!=typeof window?nt:void 0;this._delegate=Q.initialize({options:{persistence:Dt(De,M.name),popupRedirectResolver:He}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Kn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(M){this._delegate.languageCode=M}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(M){this._delegate.tenantId=M}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(M,Q){N.G(this._delegate,M,Q)}applyActionCode(M){return N.a2(this._delegate,M)}checkActionCode(M){return N.a3(this._delegate,M)}confirmPasswordReset(M,Q){return N.a1(this._delegate,M,Q)}createUserWithEmailAndPassword(M,Q){var De=this;return(0,_.Z)(function*(){return yn(De._delegate,N.a5(De._delegate,M,Q))})()}fetchProvidersForEmail(M){return this.fetchSignInMethodsForEmail(M)}fetchSignInMethodsForEmail(M){return N.aa(this._delegate,M)}isSignInWithEmailLink(M){return N.a8(this._delegate,M)}getRedirectResult(){var M=this;return(0,_.Z)(function*(){Ze(Un(),M._delegate,"operation-not-supported-in-this-environment");const Q=yield N.j(M._delegate,nt);return Q?yn(M._delegate,Promise.resolve(Q)):{credential:null,user:null}})()}addFrameworkForLogging(M){!function at(P,F){(0,N.aE)(P)._logFramework(F)}(this._delegate,M)}onAuthStateChanged(M,Q,De){const{next:He,error:vt,complete:bt}=We(M,Q,De);return this._delegate.onAuthStateChanged(He,vt,bt)}onIdTokenChanged(M,Q,De){const{next:He,error:vt,complete:bt}=We(M,Q,De);return this._delegate.onIdTokenChanged(He,vt,bt)}sendSignInLinkToEmail(M,Q){return N.a7(this._delegate,M,Q)}sendPasswordResetEmail(M,Q){return N.a0(this._delegate,M,Q||void 0)}setPersistence(M){var Q=this;return(0,_.Z)(function*(){let De;switch(function Or(P,F){Rr(Object.values(an).includes(F),P,"invalid-persistence-type"),(0,ne.b$)()?Rr(F!==an.SESSION,P,"unsupported-persistence-type"):(0,ne.UG)()?Rr(F===an.NONE,P,"unsupported-persistence-type"):Ii()?Rr(F===an.NONE||F===an.LOCAL&&(0,ne.hl)(),P,"unsupported-persistence-type"):Rr(F===an.NONE||hr(),P,"unsupported-persistence-type")}(Q._delegate,M),M){case an.SESSION:De=N.a;break;case an.LOCAL:De=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case an.NONE:De=N.L;break;default:return N.as("argument-error",{appName:Q._delegate.name})}return Q._delegate.setPersistence(De)})()}signInAndRetrieveDataWithCredential(M){return this.signInWithCredential(M)}signInAnonymously(){return yn(this._delegate,N.X(this._delegate))}signInWithCredential(M){return yn(this._delegate,N.Y(this._delegate,M))}signInWithCustomToken(M){return yn(this._delegate,N.$(this._delegate,M))}signInWithEmailAndPassword(M,Q){return yn(this._delegate,N.a6(this._delegate,M,Q))}signInWithEmailLink(M,Q){return yn(this._delegate,N.a9(this._delegate,M,Q))}signInWithPhoneNumber(M,Q){return pt(this._delegate,N.s(this._delegate,M,Q))}signInWithPopup(M){var Q=this;return(0,_.Z)(function*(){return Ze(Un(),Q._delegate,"operation-not-supported-in-this-environment"),yn(Q._delegate,N.c(Q._delegate,M,nt))})()}signInWithRedirect(M){var Q=this;return(0,_.Z)(function*(){return Ze(Un(),Q._delegate,"operation-not-supported-in-this-environment"),yield bn(Q._delegate),N.f(Q._delegate,M,nt)})()}updateCurrentUser(M){return this._delegate.updateCurrentUser(M)}verifyPasswordResetCode(M){return N.a4(this._delegate,M)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=an,P})();function We(P,F,M){let Q=P;"function"!=typeof P&&({next:Q,error:F,complete:M}=P);const De=Q;return{next:vt=>De(vt&&Kn.getOrCreate(vt)),error:F,complete:M}}function Dt(P,F){const M=function Xi(P,F){const M=Zt();if(!M)return[];const Q=N.aA(Mr,P,F);switch(M.getItem(Q)){case an.NONE:return[N.L];case an.LOCAL:return[N.i,N.a];case an.SESSION:return[N.a];default:return[]}}(P,F);if("undefined"!=typeof self&&!M.includes(N.i)&&M.push(N.i),"undefined"!=typeof window)for(const Q of[N.b,N.a])M.includes(Q)||M.push(Q);return M.includes(N.L)||M.push(N.L),M}class At{constructor(){this.providerId="phone",this._delegate=new N.P($r(B.Z.auth()))}static credential(F,M){return N.P.credential(F,M)}verifyPhoneNumber(F,M){return this._delegate.verifyPhoneNumber(F,M)}unwrap(){return this._delegate}}At.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,At.PROVIDER_ID=N.P.PROVIDER_ID;const un=N.ax;class kn{constructor(F,M,Q=B.Z.app()){var De;un(null===(De=Q.options)||void 0===De?void 0:De.apiKey,"invalid-api-key",{appName:Q.name}),this._delegate=new N.R(F,M,Q.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function j(P){P.INTERNAL.registerComponent(new ue.wA("auth-compat",F=>{const M=F.getProvider("app-compat").getImmediate(),Q=F.getProvider("auth");return new Ie(M,Q)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:At,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:kn,TwitterAuthProvider:N.W,Auth:Ie,AuthCredential:N.H,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.3.5")}(B.Z)},8766:(et,Ee,L)=>{L.d(Ee,{Lj:()=>Ce,X3:()=>ze});var _=L(5861);let N,ne;const ue=new WeakMap,ie=new WeakMap,fe=new WeakMap,H=new WeakMap,G=new WeakMap;let be={get(ae,ge,qe){if(ae instanceof IDBTransaction){if("done"===ge)return ie.get(ae);if("objectStoreNames"===ge)return ae.objectStoreNames||fe.get(ae);if("store"===ge)return qe.objectStoreNames[1]?void 0:qe.objectStore(qe.objectStoreNames[0])}return ye(ae[ge])},set:(ae,ge,qe)=>(ae[ge]=qe,!0),has:(ae,ge)=>ae instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in ae};function pe(ae){return"function"==typeof ae?function Ue(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...ge){return ae.apply(Ge(this),ge),ye(ue.get(this))}:function(...ge){return ye(ae.apply(Ge(this),ge))}:function(ge,...qe){const it=ae.call(Ge(this),ge,...qe);return fe.set(it,ge.sort?ge.sort():[ge]),ye(it)}}(ae):(ae instanceof IDBTransaction&&function je(ae){if(ie.has(ae))return;const ge=new Promise((qe,it)=>{const st=()=>{ae.removeEventListener("complete",Pt),ae.removeEventListener("error",W),ae.removeEventListener("abort",W)},Pt=()=>{qe(),st()},W=()=>{it(ae.error||new DOMException("AbortError","AbortError")),st()};ae.addEventListener("complete",Pt),ae.addEventListener("error",W),ae.addEventListener("abort",W)});ie.set(ae,ge)}(ae),((ae,ge)=>ge.some(qe=>ae instanceof qe))(ae,function re(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,be):ae)}function ye(ae){if(ae instanceof IDBRequest)return function ee(ae){const ge=new Promise((qe,it)=>{const st=()=>{ae.removeEventListener("success",Pt),ae.removeEventListener("error",W)},Pt=()=>{qe(ye(ae.result)),st()},W=()=>{it(ae.error),st()};ae.addEventListener("success",Pt),ae.addEventListener("error",W)});return ge.then(qe=>{qe instanceof IDBCursor&&ue.set(qe,ae)}).catch(()=>{}),G.set(ge,ae),ge}(ae);if(H.has(ae))return H.get(ae);const ge=pe(ae);return ge!==ae&&(H.set(ae,ge),G.set(ge,ae)),ge}const Ge=ae=>G.get(ae);function ze(ae,ge,{blocked:qe,upgrade:it,blocking:st,terminated:Pt}={}){const W=indexedDB.open(ae,ge),le=ye(W);return it&&W.addEventListener("upgradeneeded",_e=>{it(ye(W.result),_e.oldVersion,_e.newVersion,ye(W.transaction))}),qe&&W.addEventListener("blocked",()=>qe()),le.then(_e=>{Pt&&_e.addEventListener("close",()=>Pt()),st&&_e.addEventListener("versionchange",()=>st())}).catch(()=>{}),le}function Ce(ae,{blocked:ge}={}){const qe=indexedDB.deleteDatabase(ae);return ge&&qe.addEventListener("blocked",()=>ge()),ye(qe).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],ve=["put","add","delete","clear"],$e=new Map;function X(ae,ge){if(!(ae instanceof IDBDatabase)||ge in ae||"string"!=typeof ge)return;if($e.get(ge))return $e.get(ge);const qe=ge.replace(/FromIndex$/,""),it=ge!==qe,st=ve.includes(qe);if(!(qe in(it?IDBIndex:IDBObjectStore).prototype)||!st&&!Te.includes(qe))return;const Pt=function(){var W=(0,_.Z)(function*(le,..._e){const Me=this.transaction(le,st?"readwrite":"readonly");let Ne=Me.store;return it&&(Ne=Ne.index(_e.shift())),(yield Promise.all([Ne[qe](..._e),st&&Me.done]))[0]});return function(_e){return W.apply(this,arguments)}}();return $e.set(ge,Pt),Pt}!function Fe(ae){be=ae(be)}(ae=>GS(HS({},ae),{get:(ge,qe,it)=>X(ge,qe)||ae.get(ge,qe,it),has:(ge,qe)=>!!X(ge,qe)||ae.has(ge,qe)}))},5861:(et,Ee,L)=>{function _(N,ne,re,ce,ue,ie,fe){try{var H=N[ie](fe),G=H.value}catch(ee){return void re(ee)}H.done?ne(G):Promise.resolve(G).then(ce,ue)}function B(N){return function(){var ne=this,re=arguments;return new Promise(function(ce,ue){var ie=N.apply(ne,re);function fe(G){_(ie,ce,ue,fe,H,"next",G)}function H(G){_(ie,ce,ue,fe,H,"throw",G)}fe(void 0)})}}L.d(Ee,{Z:()=>B})}},et=>{et(et.s=4629)}]);