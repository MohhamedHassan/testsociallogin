"use strict";var YR=Object.defineProperty,QR=Object.defineProperties,XR=Object.getOwnPropertyDescriptors,jS=Object.getOwnPropertySymbols,JR=Object.prototype.hasOwnProperty,eM=Object.prototype.propertyIsEnumerable,$S=(Je,ye,N)=>ye in Je?YR(Je,ye,{enumerable:!0,configurable:!0,writable:!0,value:N}):Je[ye]=N,HS=(Je,ye)=>{for(var N in ye||(ye={}))JR.call(ye,N)&&$S(Je,N,ye[N]);if(jS)for(var N of jS(ye))eM.call(ye,N)&&$S(Je,N,ye[N]);return Je},GS=(Je,ye)=>QR(Je,XR(ye));(self.webpackChunktest_packages=self.webpackChunktest_packages||[]).push([[179],{2011:(Je,ye,N)=>{N.d(ye,{Dh:()=>ie,GT:()=>oe,cc:()=>be,hO:()=>je,on:()=>V,pX:()=>ee,xv:()=>ae});var _=N(5e3),Y=N(9260),P=N(2122);Je=N.hmd(Je);const ne=["ngOnDestroy"],ee=(ve,He,Xe,Ie={})=>new Proxy(ve,{get:(fe,_e)=>Xe.runOutsideAngular(()=>{var Ue;if(ve[_e])return(null===(Ue=null==Ie?void 0:Ie.spy)||void 0===Ue?void 0:Ue.get)&&Ie.spy.get(_e,ve[_e]),ve[_e];if(ne.indexOf(_e)>-1)return()=>{};const Le=He.toPromise().then(H=>{const ge=H&&H[_e];return"function"==typeof ge?ge.bind(H):ge&&ge.then?ge.then(Fe=>Xe.run(()=>Fe)):Xe.run(()=>ge)});return new Proxy(()=>{},{get:(H,ge)=>Le[ge],apply:(H,ge,Fe)=>Le.then(vt=>{var Ke;const Lt=vt&&vt(...Fe);return(null===(Ke=null==Ie?void 0:Ie.spy)||void 0===Ke?void 0:Ke.apply)&&Ie.spy.apply(_e,Fe,Lt),Lt})})})}),oe=(ve,He)=>{He.forEach(Xe=>{Object.getOwnPropertyNames(Xe.prototype||Xe).forEach(Ie=>{Object.defineProperty(ve.prototype,Ie,Object.getOwnPropertyDescriptor(Xe.prototype||Xe,Ie))})})};class se{constructor(He){return He}}const ie=new _.OlP("angularfire2.app.options"),ae=new _.OlP("angularfire2.app.name");function V(ve,He,Xe){const fe="object"==typeof Xe&&Xe||{};fe.name=fe.name||"string"==typeof Xe&&Xe||"[DEFAULT]";const Ue=Y.Z.apps.filter(Le=>Le&&Le.name===fe.name)[0]||He.runOutsideAngular(()=>Y.Z.initializeApp(ve,fe));try{JSON.stringify(ve)!==JSON.stringify(Ue.options)&&j("error",`${Ue.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Le){}return new se(Ue)}const j=(ve,...He)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ve](...He)},Q={provide:se,useFactory:V,deps:[ie,_.R0b,[new _.FiY,ae]]};let je=(()=>{class ve{constructor(Xe){Y.Z.registerVersion("angularfire",P.q4.full,"core"),Y.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Y.Z.registerVersion("angular",_.q4F.full,Xe.toString())}static initializeApp(Xe,Ie){return{ngModule:ve,providers:[{provide:ie,useValue:Xe},{provide:ae,useValue:Ie}]}}}return ve.\u0275fac=function(Xe){return new(Xe||ve)(_.LFG(_.Lbi))},ve.\u0275mod=_.oAB({type:ve}),ve.\u0275inj=_.cJS({providers:[Q]}),ve})();function be(ve,He,Xe,Ie,fe){const[,_e,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===ve)||[];if(_e)return function Ne(ve,He){try{return ve.toString()===He.toString()}catch(Xe){return ve===He}}(fe,Ue)||(de("error",`${He} was already initialized on the ${Xe} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:fe,was:Ue})),_e;{const Le=Ie();return globalThis.\u0275AngularfireInstanceCache.push([ve,Le,fe]),Le}}const Be=!!Je.hot,de=(ve,...He)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ve](...He)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Je,ye,N)=>{N.d(ye,{q4:()=>Uh,iC:()=>wu,HU:()=>Pp,vb:()=>Ho,JM:()=>yu});var _=N(5e3),Y=N(259),P=N(5861),ne=N(9681),ee=N(2090),oe=N(4859),se=N(1877),ie=N(8766);const ae="@firebase/installations",V="0.6.4",Q=`w:${V}`,je="FIS_v2",He=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(D){return D instanceof ee.ZR&&D.code.includes("request-failed")}function Ie({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function fe(D){return{token:D.token,requestStatus:2,expiresIn:vt(D.expiresIn),creationTime:Date.now()}}function _e(D,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*(D,T){const F=(yield T.json()).error;return He.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Le({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function H(D,{refreshToken:T}){const x=Le(D);return x.append("Authorization",function Ke(D){return`${je} ${D}`}(T)),x}function ge(D){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,P.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function vt(D){return Number(D.replace("s","000"))}function Lt(D,T){return G.apply(this,arguments)}function G(){return(G=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:x}){const F=Ie(D),W=Le(D),X=T.getImmediate({optional:!0});if(X){const ut=yield X.getHeartbeatsHeader();ut&&W.append("x-firebase-client",ut)}const et={method:"POST",headers:W,body:JSON.stringify({fid:x,authVersion:je,appId:D.appId,sdkVersion:Q})},at=yield ge(()=>fetch(F,et));if(at.ok){const ut=yield at.json();return{fid:ut.fid||x,registrationStatus:2,refreshToken:ut.refreshToken,authToken:fe(ut.authToken)}}throw yield _e("Create Installation",at)})).apply(this,arguments)}function he(D){return new Promise(T=>{setTimeout(T,D)})}const xe=/^[cdef][\w-]{21}$/;function De(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function st(D){return function me(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return xe.test(x)?x:""}catch(D){return""}}function Mt(D){return`${D.appName}!${D.appId}`}const fn=new Map;function Qe(D,T){const x=Mt(D);ct(x,T),function Ln(D,T){const x=function En(){return!wn&&"BroadcastChannel"in self&&(wn=new BroadcastChannel("[Firebase] FID Change"),wn.onmessage=D=>{ct(D.data.key,D.data.fid)}),wn}();x&&x.postMessage({key:D,fid:T}),function Mn(){0===fn.size&&wn&&(wn.close(),wn=null)}()}(x,T)}function ct(D,T){const x=fn.get(D);if(x)for(const F of x)F(T)}let wn=null;const Kr="firebase-installations-store";let Ri=null;function wt(){return Ri||(Ri=(0,ie.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Kr)}})),Ri}function ai(D,T){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,P.Z)(function*(D,T){const x=Mt(D),W=(yield wt()).transaction(Kr,"readwrite"),X=W.objectStore(Kr),Se=yield X.get(x);return yield X.put(T,x),yield W.done,(!Se||Se.fid!==T.fid)&&Qe(D,T.fid),T})).apply(this,arguments)}function qn(D){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,P.Z)(function*(D){const T=Mt(D),F=(yield wt()).transaction(Kr,"readwrite");yield F.objectStore(Kr).delete(T),yield F.done})).apply(this,arguments)}function Mi(D,T){return tr.apply(this,arguments)}function tr(){return(tr=(0,P.Z)(function*(D,T){const x=Mt(D),W=(yield wt()).transaction(Kr,"readwrite"),X=W.objectStore(Kr),Se=yield X.get(x),et=T(Se);return void 0===et?yield X.delete(x):yield X.put(et,x),yield W.done,et&&(!Se||Se.fid!==et.fid)&&Qe(D,et.fid),et})).apply(this,arguments)}function Un(D){return vi.apply(this,arguments)}function vi(){return(vi=(0,P.Z)(function*(D){let T;const x=yield Mi(D.appConfig,F=>{const W=Gs(F),X=Yt(D,W);return T=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function Gs(D){return zs(D||{fid:De(),registrationStatus:0})}function Yt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(He.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},F=function lt(D,T){return It.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:cr(D)}:{installationEntry:T}}function It(){return(It=(0,P.Z)(function*(D,T){try{const x=yield Lt(D,T);return ai(D.appConfig,x)}catch(x){throw Xe(x)&&409===x.customData.serverCode?yield qn(D.appConfig):yield ai(D.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function cr(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,P.Z)(function*(D){let T=yield Ht(D.appConfig);for(;1===T.registrationStatus;)yield he(100),T=yield Ht(D.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Un(D);return F||x}return T})).apply(this,arguments)}function Ht(D){return Mi(D,T=>{if(!T)throw He.create("installation-not-found");return zs(T)})}function zs(D){return function kr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Fr(D,T){return pt.apply(this,arguments)}function pt(){return(pt=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:T},x){const F=qs(D,x),W=H(D,x),X=T.getImmediate({optional:!0});if(X){const ut=yield X.getHeartbeatsHeader();ut&&W.append("x-firebase-client",ut)}const et={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},at=yield ge(()=>fetch(F,et));if(at.ok)return fe(yield at.json());throw yield _e("Generate Auth Token",at)})).apply(this,arguments)}function qs(D,{fid:T}){return`${Ie(D)}/${T}/authTokens:generate`}function qt(D){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,P.Z)(function*(D,T=!1){let x;const F=yield Mi(D.appConfig,X=>{if(!Wt(X))throw He.create("not-registered");const Se=X.authToken;if(!T&&lr(Se))return X;if(1===Se.requestStatus)return x=Ze(D,T),X;{if(!navigator.onLine)throw He.create("app-offline");const et=L(X);return x=Tt(D,et),et}});return x?yield x:F.authToken})).apply(this,arguments)}function Ze(D,T){return we.apply(this,arguments)}function we(){return(we=(0,P.Z)(function*(D,T){let x=yield qe(D.appConfig);for(;1===x.authToken.requestStatus;)yield he(100),x=yield qe(D.appConfig);const F=x.authToken;return 0===F.requestStatus?qt(D,T):F})).apply(this,arguments)}function qe(D){return Mi(D,T=>{if(!Wt(T))throw He.create("not-registered");return function q(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Tt(D,T){return St.apply(this,arguments)}function St(){return(St=(0,P.Z)(function*(D,T){try{const x=yield Fr(D,T),F=Object.assign(Object.assign({},T),{authToken:x});return yield ai(D.appConfig,F),x}catch(x){if(!Xe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield ai(D.appConfig,F)}else yield qn(D.appConfig);throw x}})).apply(this,arguments)}function Wt(D){return void 0!==D&&2===D.registrationStatus}function lr(D){return 2===D.requestStatus&&!function U(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function L(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function J(){return(J=(0,P.Z)(function*(D){const T=D,{installationEntry:x,registrationPromise:F}=yield Un(T);return F?F.catch(console.error):qt(T).catch(console.error),x.fid})).apply(this,arguments)}function At(){return(At=(0,P.Z)(function*(D,T=!1){const x=D;return yield Ut(x),(yield qt(x,T)).token})).apply(this,arguments)}function Ut(D){return pn.apply(this,arguments)}function pn(){return(pn=(0,P.Z)(function*(D){const{registrationPromise:T}=yield Un(D);T&&(yield T)})).apply(this,arguments)}function Co(D){return He.create("missing-app-config-values",{valueName:D})}const Zr="installations",dt=D=>{const T=D.getProvider("app").getImmediate(),x=function _r(D){if(!D||!D.options)throw Co("App Configuration");if(!D.name)throw Co("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!D.options[x])throw Co(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ne._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},ln=D=>{const T=D.getProvider("app").getImmediate(),x=(0,ne._getProvider)(T,Zr).getImmediate();return{getId:()=>function Ee(D){return J.apply(this,arguments)}(x),getToken:W=>function nt(D){return At.apply(this,arguments)}(x,W)}};(function Lr(){(0,ne._registerComponent)(new oe.wA(Zr,dt,"PUBLIC")),(0,ne._registerComponent)(new oe.wA("installations-internal",ln,"PRIVATE"))})(),(0,ne.registerVersion)(ae,V),(0,ne.registerVersion)(ae,V,"esm2017");const Oi="@firebase/remote-config",Vn=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ep{constructor(T,x,F,W){this.client=T,this.storage=x,this.storageCache=F,this.logger=W}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,W=F<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${W}.`),W}fetch(T){var x=this;return(0,P.Z)(function*(){const[F,W]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(W&&x.isCachedDataFresh(T.cacheMaxAgeMillis,F))return W;T.eTag=W&&W.eTag;const X=yield x.client.fetch(T),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Se),X})()}}function Sl(D=navigator){return D.languages&&D.languages[0]||D.language}class Cr{constructor(T,x,F,W,X,Se){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=F,this.projectId=W,this.apiKey=X,this.appId=Se}fetch(T){var x=this;return(0,P.Z)(function*(){const[F,W]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},at={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:x.appId,language_code:Sl()},ut={method:"POST",headers:et,body:JSON.stringify(at)},Nt=fetch(Se,ut),mt=new Promise((Rr,Hi)=>{T.signal.addEventListener(()=>{const Eu=new Error("The operation was aborted.");Eu.name="AbortError",Hi(Eu)})});let gr;try{yield Promise.race([Nt,mt]),gr=yield Nt}catch(Rr){let Hi="fetch-client-network";throw"AbortError"===(null==Rr?void 0:Rr.name)&&(Hi="fetch-timeout"),Vn.create(Hi,{originalErrorMessage:null==Rr?void 0:Rr.message})}let Rn=gr.status;const Ma=gr.headers.get("ETag")||void 0;let qo,ti;if(200===gr.status){let Rr;try{Rr=yield gr.json()}catch(Hi){throw Vn.create("fetch-client-parse",{originalErrorMessage:null==Hi?void 0:Hi.message})}qo=Rr.entries,ti=Rr.state}if("INSTANCE_STATE_UNSPECIFIED"===ti?Rn=500:"NO_CHANGE"===ti?Rn=304:("NO_TEMPLATE"===ti||"EMPTY_CONFIG"===ti)&&(qo={}),304!==Rn&&200!==Rn)throw Vn.create("fetch-status",{httpStatus:Rn});return{status:Rn,eTag:Ma,config:qo}})()}}class Ip{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,P.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,F)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:F}){var W=this;return(0,P.Z)(function*(){yield function Is(D,T){return new Promise((x,F)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(x,W);D.addEventListener(()=>{clearTimeout(X),F(Vn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const X=yield W.client.fetch(T);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function Al(D){if(!(D instanceof ee.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const Se={throttleEndTimeMillis:Date.now()+(0,ee.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Se),W.attemptFetch(T,Se)}})()}}class xl{constructor(T,x,F,W,X){this.app=T,this._client=x,this._storageCache=F,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xu(D,T){const x=D.target.error||void 0;return Vn.create(T,{originalErrorMessage:x&&(null==x?void 0:x.message)})}const Ds="app_namespace_store";class Cp{constructor(T,x,F,W=function Tp(){return new Promise((D,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{T(Xu(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ds,{keyPath:"compositeKey"})}}catch(x){T(Vn.create("storage-open",{originalErrorMessage:null==x?void 0:x.message}))}})}()){this.appId=T,this.appName=x,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((W,X)=>{const et=F.transaction([Ds],"readonly").objectStore(Ds),at=x.createCompositeKey(T);try{const ut=et.get(at);ut.onerror=Nt=>{X(Xu(Nt,"storage-get"))},ut.onsuccess=Nt=>{const mt=Nt.target.result;W(mt?mt.value:void 0)}}catch(ut){X(Vn.create("storage-get",{originalErrorMessage:null==ut?void 0:ut.message}))}})})()}set(T,x){var F=this;return(0,P.Z)(function*(){const W=yield F.openDbPromise;return new Promise((X,Se)=>{const at=W.transaction([Ds],"readwrite").objectStore(Ds),ut=F.createCompositeKey(T);try{const Nt=at.put({compositeKey:ut,value:x});Nt.onerror=mt=>{Se(Xu(mt,"storage-set"))},Nt.onsuccess=()=>{X()}}catch(Nt){Se(Vn.create("storage-set",{originalErrorMessage:null==Nt?void 0:Nt.message}))}})})()}delete(T){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((W,X)=>{const et=F.transaction([Ds],"readwrite").objectStore(Ds),at=x.createCompositeKey(T);try{const ut=et.delete(at);ut.onerror=Nt=>{X(Xu(Nt,"storage-delete"))},ut.onsuccess=()=>{W()}}catch(ut){X(Vn.create("storage-delete",{originalErrorMessage:null==ut?void 0:ut.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ml{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const x=T.storage.getLastFetchStatus(),F=T.storage.getLastSuccessfulFetchTimestampMillis(),W=T.storage.getActiveConfig(),X=yield x;X&&(T.lastFetchStatus=X);const Se=yield F;Se&&(T.lastSuccessfulFetchTimestampMillis=Se);const et=yield W;et&&(T.activeConfig=et)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Xa(){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,P.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(D){return!1}})).apply(this,arguments)}!function So(){(0,ne._registerComponent)(new oe.wA("remote-config",function D(T,{instanceIdentifier:x}){const F=T.getProvider("app").getImmediate(),W=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vn.create("registration-window");if(!(0,ee.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:X,apiKey:Se,appId:et}=F.options;if(!X)throw Vn.create("registration-project-id");if(!Se)throw Vn.create("registration-api-key");if(!et)throw Vn.create("registration-app-id");const at=new Cp(et,F.name,x=x||"firebase"),ut=new Ml(at),Nt=new se.Yd(Oi);Nt.logLevel=se.in.ERROR;const mt=new Cr(W,ne.SDK_VERSION,x,X,Se,et),gr=new Ip(mt,at),Rn=new Ep(gr,at,ut,Nt),Ma=new xl(F,Rn,ut,at,Nt);return function gn(D){const T=(0,ee.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ma),Ma},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Oi,"0.4.4"),(0,ne.registerVersion)(Oi,"0.4.4","esm2017")}();const Nl="/firebase-messaging-sw.js",Sr="/firebase-cloud-messaging-push-scope",Zs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ao="google.c.a.c_id",Pl="google.c.a.c_l",Mh="google.c.a.ts",Ju="google.c.a.e";var xo=(()=>{return(D=xo||(xo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",xo;var D})();function Ur(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kl(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),W=new Uint8Array(F.length);for(let X=0;X<F.length;++X)W[X]=F.charCodeAt(X);return W}const Vr="fcm_token_details_db",li="fcm_token_object_Store";function ec(D){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Vr))return null;let T=null;return(yield(0,ie.X3)(Vr,5,{upgrade:(F=(0,P.Z)(function*(W,X,Se,et){var at;if(X<2||!W.objectStoreNames.contains(li))return;const ut=et.objectStore(li),Nt=yield ut.index("fcmSenderId").get(D);if(yield ut.clear(),Nt)if(2===X){const mt=Nt;if(!mt.auth||!mt.p256dh||!mt.endpoint)return;T={token:mt.fcmToken,createTime:null!==(at=mt.createTime)&&void 0!==at?at:Date.now(),subscriptionOptions:{auth:mt.auth,p256dh:mt.p256dh,endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:"string"==typeof mt.vapidKey?mt.vapidKey:Ur(mt.vapidKey)}}}else if(3===X){const mt=Nt;T={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:Ur(mt.auth),p256dh:Ur(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:Ur(mt.vapidKey)}}}else if(4===X){const mt=Nt;T={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:Ur(mt.auth),p256dh:Ur(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:Ur(mt.vapidKey)}}}}),function(X,Se,et,at){return F.apply(this,arguments)})})).close(),yield(0,ie.Lj)(Vr),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),tc(T)?T:null;var F}),Fl.apply(this,arguments)}function tc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Ui="firebase-messaging-store";let Oh=null;function mn(){return Oh||(Oh=(0,ie.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Ui)}})),Oh}function va(D){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,P.Z)(function*(D){const T=hr(D),F=yield(yield mn()).transaction(Ui).objectStore(Ui).get(T);if(F)return F;{const W=yield ec(D.appConfig.senderId);if(W)return yield un(D,W),W}})).apply(this,arguments)}function un(D,T){return _a.apply(this,arguments)}function _a(){return(_a=(0,P.Z)(function*(D,T){const x=hr(D),W=(yield mn()).transaction(Ui,"readwrite");return yield W.objectStore(Ui).put(T,x),yield W.done,T})).apply(this,arguments)}function Ja(D){return bs.apply(this,arguments)}function bs(){return(bs=(0,P.Z)(function*(D){const T=hr(D),F=(yield mn()).transaction(Ui,"readwrite");yield F.objectStore(Ui).delete(T),yield F.done})).apply(this,arguments)}function hr({appConfig:D}){return D.appId}const An=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vi(D,T){return wr.apply(this,arguments)}function wr(){return(wr=(0,P.Z)(function*(D,T){const x=yield Oo(D),F=Ts(T),W={method:"POST",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(Bi(D.appConfig),W)).json()}catch(Se){throw An.create("token-subscribe-failed",{errorInfo:null==Se?void 0:Se.toString()})}if(X.error)throw An.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw An.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function Xs(D,T){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,P.Z)(function*(D,T){const x=yield Oo(D),F=Ts(T.subscriptionOptions),W={method:"PATCH",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${Bi(D.appConfig)}/${T.token}`,W)).json()}catch(Se){throw An.create("token-update-failed",{errorInfo:null==Se?void 0:Se.toString()})}if(X.error)throw An.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw An.create("token-update-no-token");return X.token})).apply(this,arguments)}function wa(D,T){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,P.Z)(function*(D,T){const F={method:"DELETE",headers:yield Oo(D)};try{const X=yield(yield fetch(`${Bi(D.appConfig)}/${T}`,F)).json();if(X.error)throw An.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw An.create("token-unsubscribe-failed",{errorInfo:null==W?void 0:W.toString()})}})).apply(this,arguments)}function Bi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Oo(D){return Et.apply(this,arguments)}function Et(){return(Et=(0,P.Z)(function*({appConfig:D,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ts({p256dh:D,auth:T,endpoint:x,vapidKey:F}){const W={web:{endpoint:x,auth:T,p256dh:D}};return F!==Zs&&(W.web.applicationPubKey=F),W}const ic=6048e5;function Ea(D){return sc.apply(this,arguments)}function sc(){return(sc=(0,P.Z)(function*(D){const T=yield Ia(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Ur(T.getKey("auth")),p256dh:Ur(T.getKey("p256dh"))},F=yield va(D.firebaseDependencies);if(F){if(nu(F.subscriptionOptions,x))return Date.now()>=F.createTime+ic?oc(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield wa(D.firebaseDependencies,F.token)}catch(W){console.warn(W)}return Te(D.firebaseDependencies,x)}return Te(D.firebaseDependencies,x)})).apply(this,arguments)}function eu(D){return tu.apply(this,arguments)}function tu(){return(tu=(0,P.Z)(function*(D){const T=yield va(D.firebaseDependencies);T&&(yield wa(D.firebaseDependencies,T.token),yield Ja(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function oc(D,T){return No.apply(this,arguments)}function No(){return(No=(0,P.Z)(function*(D,T){try{const x=yield Xs(D.firebaseDependencies,T),F=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield un(D.firebaseDependencies,F),x}catch(x){throw yield eu(D),x}})).apply(this,arguments)}function Te(D,T){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,P.Z)(function*(D,T){const F={token:yield Vi(D,T),createTime:Date.now(),subscriptionOptions:T};return yield un(D,F),F.token})).apply(this,arguments)}function Ia(D,T){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,P.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kl(T)})})).apply(this,arguments)}function nu(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function Js(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function di(D,T){if(!T.notification)return;D.notification={};const x=T.notification.title;x&&(D.notification.title=x);const F=T.notification.body;F&&(D.notification.body=F);const W=T.notification.image;W&&(D.notification.image=W);const X=T.notification.icon;X&&(D.notification.icon=X)}(T,D),function ac(D,T){!T.data||(D.data=T.data)}(T,D),function uc(D,T){var x,F,W,X,Se;if(!T.fcmOptions&&!(null===(x=T.notification)||void 0===x?void 0:x.click_action))return;D.fcmOptions={};const et=null!==(W=null===(F=T.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==W?W:null===(X=T.notification)||void 0===X?void 0:X.click_action;et&&(D.fcmOptions.link=et);const at=null===(Se=T.fcmOptions)||void 0===Se?void 0:Se.analytics_label;at&&(D.fcmOptions.analyticsLabel=at)}(T,D),T}function cc(D){return"object"==typeof D&&!!D&&Ao in D}function Ll(D,T){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<T.length&&x.push(T.charAt(F));return x.join("")}function es(D){return An.create("missing-app-config-values",{valueName:D})}Ll("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ll("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ar{constructor(T,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Sp(D){if(!D||!D.options)throw es("App Configuration Object");if(!D.name)throw es("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of T)if(!x[F])throw es(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:W,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function hi(D){return ru.apply(this,arguments)}function ru(){return(ru=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Nl,{scope:Sr}),D.swRegistration.update().catch(()=>{})}catch(T){throw An.create("failed-service-worker-registration",{browserErrorMessage:null==T?void 0:T.message})}})).apply(this,arguments)}function Cs(D,T){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,P.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield hi(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function lc(D,T){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Zs)})).apply(this,arguments)}function dc(){return(dc=(0,P.Z)(function*(D,T){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield lc(D,null==T?void 0:T.vapidKey),yield Cs(D,null==T?void 0:T.serviceWorkerRegistration),Ea(D)})).apply(this,arguments)}function Da(D,T,x){return ou.apply(this,arguments)}function ou(){return(ou=(0,P.Z)(function*(D,T,x){const F=au(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Ao],message_name:x[Pl],message_time:x[Mh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function au(D){switch(D){case xo.NOTIFICATION_CLICKED:return"notification_open";case xo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vl(){return(Vl=(0,P.Z)(function*(D,T){const x=T.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===xo.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Js(x)):D.onMessageHandler.next(Js(x)));const F=x.data;cc(F)&&"1"===F[Ju]&&(yield Da(D,x.messageType,F))})).apply(this,arguments)}const uu="@firebase/messaging",Bl=D=>{const T=new Ar(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ul(D,T){return Vl.apply(this,arguments)}(T,x)),T},Po=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:F=>function su(D,T){return dc.apply(this,arguments)}(T,F)}};function cu(){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,P.Z)(function*(){try{yield(0,ee.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function jl(){(0,ne._registerComponent)(new oe.wA("messaging",Bl,"PUBLIC")),(0,ne._registerComponent)(new oe.wA("messaging-internal",Po,"PRIVATE")),(0,ne.registerVersion)(uu,"0.12.4"),(0,ne.registerVersion)(uu,"0.12.4","esm2017")}();const Hl="analytics",Ap="firebase_id",ts="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",no="https://www.googletagmanager.com/gtag/js",nr=new se.Yd("@firebase/analytics");function Gl(D){return Promise.all(D.map(T=>T.catch(x=>x)))}function xp(D,T){const x=document.createElement("script");x.src=`${no}?l=${D}&id=${T}`,x.async=!0,document.head.appendChild(x)}function ko(D,T,x,F,W,X){return lu.apply(this,arguments)}function lu(){return(lu=(0,P.Z)(function*(D,T,x,F,W,X){const Se=F[W];try{if(Se)yield T[Se];else{const at=(yield Gl(x)).find(ut=>ut.measurementId===W);at&&(yield T[at.appId])}}catch(et){nr.error(et)}D("config",W,X)})).apply(this,arguments)}function Rp(D,T,x,F,W){return ns.apply(this,arguments)}function ns(){return(ns=(0,P.Z)(function*(D,T,x,F,W){try{let X=[];if(W&&W.send_to){let Se=W.send_to;Array.isArray(Se)||(Se=[Se]);const et=yield Gl(x);for(const at of Se){const ut=et.find(mt=>mt.measurementId===at),Nt=ut&&T[ut.appId];if(!Nt){X=[];break}X.push(Nt)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),D("event",F,W||{})}catch(X){nr.error(X)}})).apply(this,arguments)}function Di(D){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(no)&&x.src.includes(D))return x;return null}const xr=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ta=new class rr{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ca(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function As(D){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,P.Z)(function*(D){var T;const{appId:x,apiKey:F}=D,W={method:"GET",headers:Ca(F)},X=ts.replace("{app-id}",x),Se=yield fetch(X,W);if(200!==Se.status&&304!==Se.status){let et="";try{const at=yield Se.json();(null===(T=at.error)||void 0===T?void 0:T.message)&&(et=at.error.message)}catch(at){}throw xr.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:et})}return Se.json()})).apply(this,arguments)}function Xt(D){return xn.apply(this,arguments)}function xn(){return(xn=(0,P.Z)(function*(D,T=Ta,x){const{appId:F,apiKey:W,measurementId:X}=D.options;if(!F)throw xr.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:F};throw xr.create("no-api-key")}const Se=T.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new pc;return setTimeout((0,P.Z)(function*(){et.abort()}),void 0!==x?x:6e4),kt({appId:F,apiKey:W,measurementId:X},Se,et,T)})).apply(this,arguments)}function kt(D,T,x){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,P.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:x},F,W=Ta){var X;const{appId:Se,measurementId:et}=D;try{yield fc(F,T)}catch(at){if(et)return nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${null==at?void 0:at.message}]`),{appId:Se,measurementId:et};throw at}try{const at=yield As(D);return W.deleteThrottleMetadata(Se),at}catch(at){const ut=at;if(!zl(ut)){if(W.deleteThrottleMetadata(Se),et)return nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${null==ut?void 0:ut.message}]`),{appId:Se,measurementId:et};throw at}const Nt=503===Number(null===(X=null==ut?void 0:ut.customData)||void 0===X?void 0:X.httpStatus)?(0,ee.$s)(x,W.intervalMillis,30):(0,ee.$s)(x,W.intervalMillis),mt={throttleEndTimeMillis:Date.now()+Nt,backoffCount:x+1};return W.setThrottleMetadata(Se,mt),nr.debug(`Calling attemptFetch again in ${Nt} millis`),kt(D,mt,F,W)}})).apply(this,arguments)}function fc(D,T){return new Promise((x,F)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(x,W);D.addEventListener(()=>{clearTimeout(X),F(xr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function zl(D){if(!(D instanceof ee.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class pc{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let hu,so;function Bn(){return(Bn=(0,P.Z)(function*(D,T,x,F,W){if(W&&W.global)D("event",x,F);else{const X=yield T;D("event",x,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function Sa(D){so=D}function Kn(D){hu=D}function Aa(){return is.apply(this,arguments)}function is(){return(is=(0,P.Z)(function*(){if(!(0,ee.hl)())return nr.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(D){return nr.warn(xr.create("indexeddb-unavailable",{errorInfo:null==D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function mc(){return(mc=(0,P.Z)(function*(D,T,x,F,W,X,Se){var et;const at=Xt(D);at.then(Rn=>{x[Rn.measurementId]=Rn.appId,D.options.measurementId&&Rn.measurementId!==D.options.measurementId&&nr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rn=>nr.error(Rn)),T.push(at);const ut=Aa().then(Rn=>{if(Rn)return F.getId()}),[Nt,mt]=yield Promise.all([at,ut]);Di(X)||xp(X,Nt.measurementId),so&&(W("consent","default",so),Sa(void 0)),W("js",new Date);const gr=null!==(et=null==Se?void 0:Se.config)&&void 0!==et?et:{};return gr.origin="firebase",gr.update=!0,null!=mt&&(gr[Ap]=mt),W("config",Nt.measurementId,gr),hu&&(W("set",hu),Kn(void 0)),Nt.measurementId})).apply(this,arguments)}class ql{constructor(T){this.app=T}_delete(){return delete Er[this.app.options.appId],Promise.resolve()}}let Er={},yc=[];const vc={};let Uo,Jr,oo="dataLayer",Vo=!1;function py(D,T,x){!function xa(){const D=[];if((0,ee.ru)()&&D.push("This is a browser extension environment."),(0,ee.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((F,W)=>`(${W+1}) ${F}`).join(" "),x=xr.create("invalid-analytics-context",{errorInfo:T});nr.warn(x.message)}}();const F=D.options.appId;if(!F)throw xr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw xr.create("no-api-key");nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Er[F])throw xr.create("already-exists",{id:F});if(!Vo){!function ro(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(oo);const{wrappedGtag:X,gtagCore:Se}=function Mp(D,T,x,F,W){let X=function(...Se){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function du(D,T,x,F){function X(){return(X=(0,P.Z)(function*(Se,et,at){try{"event"===Se?yield Rp(D,T,x,et,at):"config"===Se?yield ko(D,T,x,F,et,at):"consent"===Se?D("consent","update",at):D("set",et)}catch(ut){nr.error(ut)}})).apply(this,arguments)}return function W(Se,et,at){return X.apply(this,arguments)}}(X,D,T,x),{gtagCore:X,wrappedGtag:window[W]}}(Er,yc,vc,oo,"gtag");Jr=X,Uo=Se,Vo=!0}return Er[F]=function Lo(D,T,x,F,W,X,Se){return mc.apply(this,arguments)}(D,yc,vc,T,Uo,oo,x),new ql(D)}function pe(){return Os.apply(this,arguments)}function Os(){return(Os=(0,P.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(D){return!1}})).apply(this,arguments)}const jn="@firebase/analytics";!function uo(){(0,ne._registerComponent)(new oe.wA(Hl,(T,{options:x})=>py(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ne._registerComponent)(new oe.wA("analytics-internal",function D(T){try{const x=T.getProvider(Hl).getImmediate();return{logEvent:(F,W,X)=>function Ra(D,T,x,F){D=(0,ee.m9)(D),function fu(D,T,x,F,W){return Bn.apply(this,arguments)}(Jr,Er[D.app.options.appId],T,x,F).catch(W=>nr.error(W))}(x,F,W,X)}}catch(x){throw xr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ne.registerVersion)(jn,"0.9.4"),(0,ne.registerVersion)(jn,"0.9.4","esm2017")}();var Kl=N(4408),Br=N(7565);const pu=new class jr extends Br.v{}(class Lh extends Kl.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(T,x,F):(T.flush(this),0)}});var co=N(4986),Bo=N(8505),kn=N(9468),jo=N(5363);const Uh=new _.GfV("7.5.0"),gu="__angularfire_symbol__analyticsIsSupportedValue",lo="__angularfire_symbol__analyticsIsSupported",Zn="__angularfire_symbol__remoteConfigIsSupportedValue",Ns="__angularfire_symbol__remoteConfigIsSupported",Ps="__angularfire_symbol__messagingIsSupportedValue",Zl="__angularfire_symbol__messagingIsSupported";function yu(D,T,x){if(T){if(1===T.length)return T[0];const X=T.filter(Se=>Se.app===x);if(1===X.length)return X[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[lo]||(globalThis[lo]=pe().then(D=>globalThis[gu]=D).catch(()=>globalThis[gu]=!1)),globalThis[Zl]||(globalThis[Zl]=cu().then(D=>globalThis[Ps]=D).catch(()=>globalThis[Ps]=!1)),globalThis[Ns]||(globalThis[Ns]=Xa().then(D=>globalThis[Zn]=D).catch(()=>globalThis[Zn]=!1));const Ho=(D,T)=>{const x=T?[T]:(0,Y.C6)(),F=[];return x.forEach(W=>{W.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ks(){}class Fs{constructor(T,x=pu){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,F){const W=this.zone;return this.delegate.schedule(function(Se){W.runGuarded(()=>{T.apply(this,[Se])})},x,F)}}class vu{constructor(T){this.zone=T,this.task=null}call(T,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ks,{},ks,ks)),x.pipe((0,Bo.b)({next:F,complete:F,error:F})).subscribe(T).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pp=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Fs(Zone.current)),this.insideAngular=x.run(()=>new Fs(Zone.current,co.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(_.LFG(_.R0b))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ei(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function wu(D){return ei(),function ho(D){return function(x){return(x=x.lift(new vu(D.ngZone))).pipe((0,kn.R)(D.outsideAngular),(0,jo.Q)(D.insideAngular))}}(ei())(D)}},2090:(Je,ye,N)=>{N.d(ye,{$s:()=>Tt,BH:()=>_e,G6:()=>xe,L:()=>ae,LL:()=>Qe,Pz:()=>fe,Sg:()=>Ue,UG:()=>ge,US:()=>oe,ZB:()=>Q,ZR:()=>fn,aH:()=>Ie,b$:()=>Ke,eu:()=>De,hl:()=>Re,jU:()=>Fe,m9:()=>lr,ne:()=>Gs,pd:()=>Un,r3:()=>Kr,ru:()=>vt,tV:()=>V,uI:()=>H,vZ:()=>Sn,w1:()=>G,xO:()=>Mi,xb:()=>wt,z$:()=>Le,zI:()=>st,zd:()=>tr});const ne=function(U){const L=[];let q=0;for(let Ee=0;Ee<U.length;Ee++){let J=U.charCodeAt(Ee);J<128?L[q++]=J:J<2048?(L[q++]=J>>6|192,L[q++]=63&J|128):55296==(64512&J)&&Ee+1<U.length&&56320==(64512&U.charCodeAt(Ee+1))?(J=65536+((1023&J)<<10)+(1023&U.charCodeAt(++Ee)),L[q++]=J>>18|240,L[q++]=J>>12&63|128,L[q++]=J>>6&63|128,L[q++]=63&J|128):(L[q++]=J>>12|224,L[q++]=J>>6&63|128,L[q++]=63&J|128)}return L},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let J=0;J<U.length;J+=3){const nt=U[J],At=J+1<U.length,Ut=At?U[J+1]:0,pn=J+2<U.length,In=pn?U[J+2]:0;let ui=(15&Ut)<<2|In>>6,ci=63&In;pn||(ci=64,At||(ui=64)),Ee.push(q[nt>>2],q[(3&nt)<<4|Ut>>4],q[ui],q[ci])}return Ee.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(ne(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let q=0,Ee=0;for(;q<U.length;){const J=U[q++];if(J<128)L[Ee++]=String.fromCharCode(J);else if(J>191&&J<224){const nt=U[q++];L[Ee++]=String.fromCharCode((31&J)<<6|63&nt)}else if(J>239&&J<365){const pn=((7&J)<<18|(63&U[q++])<<12|(63&U[q++])<<6|63&U[q++])-65536;L[Ee++]=String.fromCharCode(55296+(pn>>10)),L[Ee++]=String.fromCharCode(56320+(1023&pn))}else{const nt=U[q++],At=U[q++];L[Ee++]=String.fromCharCode((15&J)<<12|(63&nt)<<6|63&At)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let J=0;J<U.length;){const nt=q[U.charAt(J++)],Ut=J<U.length?q[U.charAt(J)]:0;++J;const In=J<U.length?q[U.charAt(J)]:64;++J;const Pt=J<U.length?q[U.charAt(J)]:64;if(++J,null==nt||null==Ut||null==In||null==Pt)throw new se;Ee.push(nt<<2|Ut>>4),64!==In&&(Ee.push(Ut<<4&240|In>>2),64!==Pt&&Ee.push(In<<6&192|Pt))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ae=function(U){return function(U){const L=ne(U);return oe.encodeByteArray(L,!0)}(U).replace(/\./g,"")},V=function(U){try{return oe.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!je(q)||(U[q]=Q(U[q],L[q]));return U}function je(U){return"__proto__"!==U}const ve=()=>{try{return function be(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if("undefined"==typeof document)return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(q){return}const L=U&&V(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Ie=()=>{var U;return null===(U=ve())||void 0===U?void 0:U.config},fe=U=>{var L;return null===(L=ve())||void 0===L?void 0:L[`_${U}`]};class _e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,Ee)=>{q?this.reject(q):this.resolve(Ee),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,Ee))}}}function Ue(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=L||"demo-project",J=U.iat||0,nt=U.sub||U.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const At=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:J,exp:J+3600,auth_time:J,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(At)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function H(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function ge(){var U;const L=null===(U=ve())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function Fe(){return"object"==typeof self&&self.self===self}function vt(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function G(){const U=Le();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function xe(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"==typeof indexedDB}catch(U){return!1}}function De(){return new Promise((U,L)=>{try{let q=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(Ee);J.onsuccess=()=>{J.result.close(),q||self.indexedDB.deleteDatabase(Ee),U(!0)},J.onupgradeneeded=()=>{q=!1},J.onerror=()=>{var nt;L((null===(nt=J.error)||void 0===nt?void 0:nt.message)||"")}}catch(q){L(q)}})}function st(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class fn extends Error{constructor(L,q,Ee){super(q),this.code=L,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(L,q,Ee){this.service=L,this.serviceName=q,this.errors=Ee}create(L,...q){const Ee=q[0]||{},J=`${this.service}/${L}`,nt=this.errors[L],At=nt?function Qt(U,L){return U.replace(Dt,(q,Ee)=>{const J=L[Ee];return null!=J?String(J):`<${Ee}?>`})}(nt,Ee):"Error";return new fn(J,`${this.serviceName}: ${At} (${J}).`,Ee)}}const Dt=/\{\$([^}]+)}/g;function Kr(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function wt(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function Sn(U,L){if(U===L)return!0;const q=Object.keys(U),Ee=Object.keys(L);for(const J of q){if(!Ee.includes(J))return!1;const nt=U[J],At=L[J];if(qn(nt)&&qn(At)){if(!Sn(nt,At))return!1}else if(nt!==At)return!1}for(const J of Ee)if(!q.includes(J))return!1;return!0}function qn(U){return null!==U&&"object"==typeof U}function Mi(U){const L=[];for(const[q,Ee]of Object.entries(U))Array.isArray(Ee)?Ee.forEach(J=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(J))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(Ee));return L.length?"&"+L.join("&"):""}function tr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[J,nt]=Ee.split("=");L[decodeURIComponent(J)]=decodeURIComponent(nt)}}),L}function Un(U){const L=U.indexOf("?");if(!L)return"";const q=U.indexOf("#",L);return U.substring(L,q>0?q:void 0)}function Gs(U,L){const q=new Yt(U,L);return q.subscribe.bind(q)}class Yt{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(Ee=>{this.error(Ee)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,Ee){let J;if(void 0===L&&void 0===q&&void 0===Ee)throw new Error("Missing Observer.");J=function It(U,L){if("object"!=typeof U||null===U)return!1;for(const q of L)if(q in U&&"function"==typeof U[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:Ee},void 0===J.next&&(J.next=cr),void 0===J.error&&(J.error=cr),void 0===J.complete&&(J.complete=cr);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(At){}}),this.observers.push(J),nt}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cr(){}function Tt(U,L=1e3,q=2){const Ee=L*Math.pow(q,U),J=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+J)}function lr(U){return U&&U._delegate?U._delegate:U}},7658:(Je,ye,N)=>{var _=N(5e3);let Y=null;function P(){return Y}const se=new _.OlP("DocumentToken");let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ae(){return(0,_.LFG)(j)}()},providedIn:"platform"}),n})();const V=new _.OlP("Location Initialized");let j=(()=>{class n extends ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function je(){return new j((0,_.LFG)(se))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ve(n){const e=(0,_.LFG)(se).location;return new Xe((0,_.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const He=new _.OlP("appBaseHref");let Xe=(()=>{class n extends de{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Be(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Be(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie),_.LFG(He,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends de{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie),_.LFG(He,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),fe=(()=>{class n{constructor(t,r){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Le(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Le(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Be,n.joinWithSlash=be,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(_.LFG(de),_.LFG(ie))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function _e(){return new fe((0,_.LFG)(de),(0,_.LFG)(ie))}()},providedIn:"root"}),n})();function Le(n){return n.replace(/\/index.html$/,"")}let Ju=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function Ro(n){return"server"===n}let tc=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new Mo((0,_.LFG)(se),window)}),n})();class Mo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ui(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=nc(this.window.history)||nc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function nc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qs extends class va extends class oe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ee(n){Y||(Y=n)}(new Qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _a(){return un=un||document.querySelector("base"),un?un.getAttribute("href"):null}();return null==t?null:function bs(n){Ja=Ja||document.createElement("a"),Ja.setAttribute("href",n);const e=Ja.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){un=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ga(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ja,un=null;const hr=new _.OlP("TRANSITION_ID"),An=[{provide:_.ip1,useFactory:function rc(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[hr,se,_.zs3],multi:!0}];class Vi{static init(){(0,_.VLi)(new Vi)}addToWindow(e){_.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const o=_.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let wr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Xs=new _.OlP("EventManagerPlugins");let Ji=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Xs),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class wa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Bi=(()=>{class n extends Ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Oo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Oo))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Oo(n){P().remove(n)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ts=/%COMP%/g;function No(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?No(n,o,t):(o=o.replace(Ts,n),t.push(o))}return t}function Te(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ia=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Dn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new di(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case _.ifc.ShadowDom:return new ac(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=No(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Ji),_.LFG(Bi),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Dn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Et[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Et[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Et[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,o&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Te(r)):this.eventManager.addEventListener(e,t,Te(r))}}class di extends Dn{constructor(e,t,r,o){super(e),this.component=r;const u=No(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function tu(n){return"_ngcontent-%COMP%".replace(Ts,n)}(o+"-"+r.id),this.hostAttr=function oc(n){return"_nghost-%COMP%".replace(Ts,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ac extends Dn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=No(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let uc=(()=>{class n extends wa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const cc=["alt","control","meta","shift"],Sp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},es={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ar={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let hi=(()=>{class n extends wa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(cc.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=d,g}static getEventFullKey(t){let r="",o=function ru(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&es.hasOwnProperty(e)&&(e=es[e]))}return Sp[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),cc.forEach(u=>{u!=o&&Ar[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const su=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function Cs(){Qs.makeCurrent(),Vi.init()},multi:!0},{provide:se,useFactory:function lc(){return(0,_.RDi)(document),document},deps:[]}]),dc=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function Ii(){return new _.qLn},deps:[]},{provide:Xs,useClass:uc,multi:!0,deps:[se,_.R0b,_.Lbi]},{provide:Xs,useClass:hi,multi:!0,deps:[se]},{provide:Ia,useClass:Ia,deps:[Ji,Bi,_.AFp]},{provide:_.FYo,useExisting:Ia},{provide:Ei,useExisting:Bi},{provide:Bi,useClass:Bi,deps:[se]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Ji,useClass:Ji,deps:[Xs,_.R0b]},{provide:class mn{},useClass:wr,deps:[]}];let Da=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:hr,useExisting:_.AFp},An]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:dc,imports:[Ju,_.hGG]}),n})();"undefined"!=typeof window&&window;var Di=N(2011),Ss=N(7579),xr=N(7669),dn=N(8996);function bt(...n){const e=(0,xr.yG)(n);return(0,dn.D)(n,e)}var rr=N(8306),Ta=N(6451),Ca=N(5363),As=N(8421),Nn=N(4482),Xt=N(5403);function xn(n,e){return(0,Nn.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,Xt.x)(r,w=>{null==o||o.unsubscribe();let b=0;const A=u++;(0,As.Xf)(n(w,A)).subscribe(o=(0,Xt.x)(r,O=>r.next(e?e(w,O,A,b++):O),()=>{o=null,g()}))},()=>{d=!0,g()}))})}var kt=N(4004),Fo=N(6063);class fc extends Ss.x{constructor(e=1/0,t=1/0,r=Fo.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)g=w;g&&r.splice(0,g+1)}}}var zl=N(3099);function pc(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,zl.B)({connector:()=>new fc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const fu=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Bn(n,e){return(0,Nn.e)((t,r)=>{let o=0;t.subscribe((0,Xt.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var ji=N(515);function Xr(n){return n<=0?()=>ji.E:(0,Nn.e)((e,t)=>{let r=0;e.subscribe((0,Xt.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function xs(n){return(0,Nn.e)((e,t)=>{let r=!1;e.subscribe((0,Xt.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function io(n=gc){return(0,Nn.e)((e,t)=>{let r=!1;e.subscribe((0,Xt.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function gc(){return new fu}var rs=N(4671);function $i(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bn((o,u)=>n(o,u,r)):rs.y,Xr(1),t?xs(e):io(()=>new fu))}var Rs=N(576);function so(n,e){return(0,Rs.m)(e)?xn(()=>n,e):xn(()=>n)}var Sa=N(9468),Kn=N(2122);N(259);var pe=N(5861),Os=N(9681),Wl=N(4859),sn=N(2090),ao=N(1877);const Fh=new Map,Op={activated:!1,tokenObservers:[]},Ra={initialized:!1,enabled:!1};function pr(n){return Fh.get(n)||Object.assign({},Op)}function ss(){return Ra}class _c{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new sn.BH,yield function co(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new sn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const kn=new sn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Uh(n){if(!pr(n).activated)throw kn.create("use-before-activation",{appName:n.name})}function Zn(n,e){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const O=yield o.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,g;try{d=yield fetch(n,u)}catch(O){throw kn.create("fetch-network-error",{originalErrorMessage:null==O?void 0:O.message})}if(200!==d.status)throw kn.create("fetch-status-error",{httpStatus:d.status});try{g=yield d.json()}catch(O){throw kn.create("fetch-parse-error",{originalErrorMessage:null==O?void 0:O.message})}const w=g.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw kn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const b=1e3*Number(w[1]),A=Date.now();return{token:g.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}})).apply(this,arguments)}function $o(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const mu="firebase-app-check-store";let Ho=null;function ks(){return Ho||(Ho=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(kn.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(mu,{keyPath:"compositeKey"})}}catch(t){e(kn.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),Ho)}function $r(){return($r=(0,pe.Z)(function*(n,e){const r=(yield ks()).transaction(mu,"readwrite"),u=r.objectStore(mu).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var b;g(kn.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const ho=new ao.Yd("@firebase/app-check");function D(n,e){return(0,sn.hl)()?function vu(n,e){return function Go(n,e){return $r.apply(this,arguments)}(function wu(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ho.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function F(){return ss().enabled}function W(){return X.apply(this,arguments)}function X(){return(X=(0,pe.Z)(function*(){const n=ss();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const et={error:"UNKNOWN_ERROR"};function at(n){return sn.US.encodeString(JSON.stringify(n),!1)}function ut(n){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,pe.Z)(function*(n,e=!1){const t=n.app;Uh(t);const r=pr(t);let u,o=r.token;if(o&&!ti(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(ti(w)?o=w:yield D(t,void 0))}if(!e&&o&&ti(o))return{token:o.token};let g,d=!1;if(F()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Zn($o(t,yield W()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield D(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield pr(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?ho.warn(w.message):ho.error(w),u=w}return o?u?g=ti(o)?{token:o.token,internalError:u}:Rr(u):(g={token:o.token},r.token=o,yield D(t,o)):g=Rr(u),d&&qo(t,g),g})).apply(this,arguments)}function gr(n,e){const t=pr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Rn(n){const{app:e}=n,t=pr(e);let r=t.tokenRefresher;r||(r=function Ma(n){const{app:e}=n;return new _c((0,pe.Z)(function*(){let r;if(r=pr(e).token?yield ut(n,!0):yield ut(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qo(n,e){const t=pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function ti(n){return n.expireTimeMillis-Date.now()>0}function Rr(n){return{token:at(et),error:n}}class Hi{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=pr(this.app);for(const t of e)gr(this.app,t.next);return Promise.resolve()}}const Gp="app-check-internal";!function zp(){(0,Os._registerComponent)(new Wl.wA("app-check",n=>function Eu(n,e){return new Hi(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Gp).initialize()})),(0,Os._registerComponent)(new Wl.wA(Gp,n=>function gy(n){return{getToken:e=>ut(n,e),addTokenListener:e=>function mt(n,e,t,r){const{app:o}=n,u=pr(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&ti(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),Rn(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Rn(n))}(n,"INTERNAL",e),removeTokenListener:e=>gr(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Os.registerVersion)("@firebase/app-check","0.6.4")}();class Dc{constructor(){return(0,Kn.vb)("app-check")}}"undefined"!=typeof window&&window;var Us=N(9260);const Jp=new _.OlP("angularfire2.auth.use-emulator"),Du=new _.OlP("angularfire2.auth.settings"),eg=new _.OlP("angularfire2.auth.tenant-id"),nd=new _.OlP("angularfire2.auth.langugage-code"),tg=new _.OlP("angularfire2.auth.use-device-language"),ng=new _.OlP("angularfire.auth.persistence"),rd=(n,e,t,r,o,u,d,g)=>(0,Di.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[b,A]of Object.entries(d))w.settings[b]=A;return g&&w.setPersistence(g),w},[t,r,o,u,d,g]);let zh=(()=>{class n{constructor(t,r,o,u,d,g,w,b,A,O,$,K){const le=new Ss.x,Me=bt(void 0).pipe((0,Ca.Q)(d.outsideAngular),xn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8971)))),(0,kt.U)(()=>(0,Di.on)(t,u,r)),(0,kt.U)(Ge=>rd(Ge,u,g,b,A,O,w,$)),pc({bufferSize:1,refCount:!1}));if(Ro(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=bt(null);else{Me.pipe($i()).subscribe();const zt=Me.pipe(xn($t=>$t.getRedirectResult().then(Vt=>Vt,()=>null)),Kn.iC,pc({bufferSize:1,refCount:!1})),nn=Me.pipe(xn($t=>new rr.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>$t.onAuthStateChanged(Zt=>Vt.next(Zt),Zt=>Vt.error(Zt),()=>Vt.complete()))})))),Ft=Me.pipe(xn($t=>new rr.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>$t.onIdTokenChanged(Zt=>Vt.next(Zt),Zt=>Vt.error(Zt),()=>Vt.complete()))}))));this.authState=zt.pipe(so(nn),(0,Sa.R)(d.outsideAngular),(0,Ca.Q)(d.insideAngular)),this.user=zt.pipe(so(Ft),(0,Sa.R)(d.outsideAngular),(0,Ca.Q)(d.insideAngular)),this.idToken=this.user.pipe(xn($t=>$t?(0,dn.D)($t.getIdToken()):bt(null))),this.idTokenResult=this.user.pipe(xn($t=>$t?(0,dn.D)($t.getIdTokenResult()):bt(null))),this.credential=(0,Ta.T)(zt,le,this.authState.pipe(Bn($t=>!$t))).pipe((0,kt.U)($t=>(null==$t?void 0:$t.user)?$t:null),(0,Sa.R)(d.outsideAngular),(0,Ca.Q)(d.insideAngular))}return(0,Di.pX)(this,Me,u,{spy:{apply:(Ge,zt,nn)=>{(Ge.startsWith("signIn")||Ge.startsWith("createUser"))&&nn.then(Ft=>le.next(Ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Di.Dh),_.LFG(Di.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Kn.HU),_.LFG(Jp,8),_.LFG(Du,8),_.LFG(eg,8),_.LFG(nd,8),_.LFG(tg,8),_.LFG(ng,8),_.LFG(Dc,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qh=(()=>{class n{constructor(){Us.Z.registerVersion("angularfire",Kn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[zh]}),n})();var Tc=N(4986),Cc=N(8189);function Kh(...n){return function Wh(){return(0,Cc.J)(1)}()((0,dn.D)(n,(0,xr.yG)(n)))}function id(...n){const e=(0,xr.yG)(n);return(0,Nn.e)((t,r)=>{(e?Kh(n,t,e):Kh(n,t)).subscribe(r)})}function sd(){return(0,Nn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Xt.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Zh(n,e,t,r,o){return(u,d)=>{let g=t,w=e,b=0;u.subscribe((0,Xt.x)(d,A=>{const O=b++;w=g?n(w,A,O):(g=!0,A),r&&d.next(w)},o&&(()=>{g&&d.next(w),d.complete()})))}}function bi(n,e){return(0,Nn.e)(Zh(n,e,arguments.length>=2,!0))}function ig(n,e){return n===e}N(8971);var rt,bu=N(3942),Ey="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vs={},od=od||{},Ct=Ey||self;function Sc(){}function Ko(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Zo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ac="closure_uid_"+(1e9*Math.random()>>>0),Yh=0;function Oa(n,e,t){return n.call.apply(n.bind,arguments)}function xc(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Mr(n,e,t){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Oa:xc).apply(null,arguments)}function Rc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function Yo(){this.s=this.s,this.o=this.o}Yo.prototype.s=!1,Yo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function og(n){Object.prototype.hasOwnProperty.call(n,Ac)&&n[Ac]||(n[Ac]=++Yh)}(this)},Yo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Mc=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Qo(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Tu(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ko(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function Fn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Fn.prototype.h=function(){this.defaultPrevented=!0};var Iy=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",Sc,e),Ct.removeEventListener("test",Sc,e)}catch(t){}return n}();function Cu(n){return/^[\s\xa0]*$/.test(n)}var Dy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ri(n,e){return n<e?-1:n>e?1:0}function os(){var n=Ct.navigator;return n&&(n=n.userAgent)?n:""}function Ti(n){return-1!=os().indexOf(n)}function ad(n){return ad[" "](n),n}ad[" "]=Sc;var as,n,cd=Ti("Opera"),Na=Ti("Trident")||Ti("MSIE"),Qh=Ti("Edge"),Xh=Qh||Na,fo=Ti("Gecko")&&!(-1!=os().toLowerCase().indexOf("webkit")&&!Ti("Edge"))&&!(Ti("Trident")||Ti("MSIE"))&&!Ti("Edge"),ug=-1!=os().toLowerCase().indexOf("webkit")&&!Ti("Edge");function cg(){var n=Ct.document;return n?n.documentMode:void 0}e:{var Pa="",ld=(n=os(),fo?/rv:([^\);]+)(\)|;)/.exec(n):Qh?/Edge\/([\d\.]+)/.exec(n):Na?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ug?/WebKit\/(\S+)/.exec(n):cd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ld&&(Pa=ld?ld[1]:""),Na){var ii=cg();if(null!=ii&&ii>parseFloat(Pa)){as=String(ii);break e}}as=Pa}var lg={};var Su=Ct.document&&Na&&(cg()||parseInt(as,10))||void 0;function Au(n,e){if(Fn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fo){e:{try{ad(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Au.X.h.call(this)}}Or(Au,Fn);var fg={2:"touch",3:"pen",4:"mouse"};Au.prototype.h=function(){Au.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Oc="closure_listenable_"+(1e6*Math.random()|0),Jh=0;function b0(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++Jh,this.ba=this.ea=!1}function dd(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function xu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ef(n){const e={};for(const t in n)e[t]=n[t];return e}const m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function h(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<m.length;u++)t=m[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function f(n){this.src=n,this.g={},this.h=0}function v(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Mc(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(dd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function C(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}f.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=C(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new b0(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var M="closure_lm_"+(1e6*Math.random()|0),z={};function ue(n,e,t,r,o){if(r&&r.once)return yt(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ue(n,e[u],t,r,o);return null}return t=pd(t),n&&n[Oc]?n.N(e,t,Zo(r)?!!r.capture:!!r,o):ke(n,e,t,!1,r,o)}function ke(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Zo(o)?!!o.capture:!!o,g=fd(n);if(g||(n[M]=g=new f(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function Ye(){const e=hd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Iy||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Ci(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yt(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)yt(n,e[u],t,r,o);return null}return t=pd(t),n&&n[Oc]?n.O(e,t,Zo(r)?!!r.capture:!!r,o):ke(n,e,t,!0,r,o)}function gt(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)gt(n,e[u],t,r,o);else r=Zo(r)?!!r.capture:!!r,t=pd(t),n&&n[Oc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=C(u=n.g[e],t,r,o))&&(dd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=fd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=C(e,t,r,o)),(t=-1<n?e[n]:null)&&ir(t))}function ir(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Oc])v(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ci(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fd(e))?(v(t,n),0==t.h&&(t.src=null,e[M]=null)):dd(n)}}}function Ci(n){return n in z?z[n]:z[n]="on"+n}function hd(n,e){if(n.ba)n=!0;else{e=new Au(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ir(n),n=t.call(r,e)}return n}function fd(n){return(n=n[M])instanceof f?n:null}var Nc="__closure_events_fn_"+(1e9*Math.random()>>>0);function pd(n){return"function"==typeof n?n:(n[Nc]||(n[Nc]=function(e){return n.handleEvent(e)}),n[Nc])}function sr(){Yo.call(this),this.i=new f(this),this.P=this,this.I=null}function $n(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Fn(e,n);else if(e instanceof Fn)e.target=e.target||n;else{var o=e;h(e=new Fn(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Pc(d,r,!0,e)&&o}if(o=Pc(d=e.g=n,r,!0,e)&&o,o=Pc(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Pc(d=e.g=t[u],r,!1,e)&&o}function Pc(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var g=d.listener,w=d.ha||d.src;d.ea&&v(n.i,d),o=!1!==g.call(w,r)&&o}}return o&&!r.defaultPrevented}Or(sr,Yo),sr.prototype[Oc]=!0,sr.prototype.removeEventListener=function(n,e,t,r){gt(this,n,e,t,r)},sr.prototype.M=function(){if(sr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dd(t[r]);delete n.g[e],n.h--}}this.I=null},sr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},sr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ru=Ct.JSON.stringify;function tf(){var n=T0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ty,pg=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new nf,n=>n.reset());class nf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function rf(n){Ct.setTimeout(()=>{throw n},0)}function by(n,e){Ty||function VI(){var n=Ct.Promise.resolve(void 0);Ty=function(){n.then(BI)}}(),Cy||(Ty(),Cy=!0),T0.add(n,e)}var Cy=!1,T0=new class Yn{constructor(){this.h=this.g=null}add(e,t){const r=pg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function BI(){for(var n;n=tf();){try{n.h.call(n.g)}catch(t){rf(t)}var e=pg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cy=!1}function Sy(n,e){sr.call(this),this.h=n||1,this.g=e||Ct,this.j=Mr(this.lb,this),this.l=Date.now()}function C0(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function kc(n,e,t){if("function"==typeof n)t&&(n=Mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function gg(n){n.g=kc(()=>{n.g=null,n.i&&(n.i=!1,gg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(Sy,sr),(rt=Sy.prototype).ca=!1,rt.R=null,rt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$n(this,"tick"),this.ca&&(C0(this),this.start()))}},rt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Sy.X.M.call(this),C0(this),delete this.g};class jI extends Yo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gg(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sf(n){Yo.call(this),this.h=n,this.g={}}Or(sf,Yo);var mg=[];function S0(n,e,t,r){Array.isArray(t)||(t&&(mg[0]=t.toString()),t=mg);for(var o=0;o<t.length;o++){var u=ue(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function A0(n){xu(n.g,function(e,t){this.g.hasOwnProperty(t)&&ir(e)},n),n.g={}}function Fc(){this.g=!0}function gd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function zI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Ru(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}sf.prototype.M=function(){sf.X.M.call(this),A0(this)},sf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fc.prototype.Aa=function(){this.g=!1},Fc.prototype.info=function(){};var Lc={},x0=null;function yg(){return x0=x0||new sr}function R0(n){Fn.call(this,Lc.Pa,n)}function of(n){const e=yg();$n(e,new R0(e))}function Uc(n,e){Fn.call(this,Lc.STAT_EVENT,n),this.stat=e}function Hn(n){const e=yg();$n(e,new Uc(e,n))}function qI(n,e){Fn.call(this,Lc.Qa,n),this.size=e}function vg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}Lc.Pa="serverreachability",Or(R0,Fn),Lc.STAT_EVENT="statevent",Or(Uc,Fn),Lc.Qa="timingevent",Or(qI,Fn);var af={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},WI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function _g(){}function Ay(){}_g.prototype.h=null;var Ry,uf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function wg(){Fn.call(this,"d")}function xy(){Fn.call(this,"c")}function Gi(){}function cf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new sf(this),this.O=ZI,this.T=new Sy(n=Xh?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new My}function My(){this.i=null,this.g="",this.h=!1}Or(wg,Fn),Or(xy,Fn),Or(Gi,_g),Gi.prototype.g=function(){return new XMLHttpRequest},Gi.prototype.i=function(){return{}},Ry=new Gi;var ZI=45e3,Oy={},Eg={};function Ny(n,e,t){n.K=1,n.v=Vc(go(e)),n.s=t,n.P=!0,Py(n,null)}function Py(n,e){n.F=Date.now(),xt(n),n.A=go(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Uy(t.i,"t",r),n.C=0,t=n.l.H,n.h=new My,n.g=gD(n.l,t?e:null,!n.s),0<n.N&&(n.L=new jI(Mr(n.La,n,n.g),n.N)),S0(n.S,n.g,"readystatechange",n.ib),e=n.H?ef(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),of(),function $I(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),w=0;w<g.length;w++){var b=g[w].split("=");if(1<b.length){var A=b[0];b=b[1];var O=A.split("_");d=2<=O.length&&"type"==O[1]?d+(A+"=")+b+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function M0(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function O0(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=YI(n,t),o==Eg){4==e&&(n.o=4,Hn(14),r=!1),gd(n.j,n.m,null,"[Incomplete Response]");break}if(o==Oy){n.o=4,Hn(15),gd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}gd(n.j,n.m,o,null),us(n,o)}M0(n)&&o!=Eg&&o!=Oy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Hn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),$y(e),e.K=!0,Hn(11))):(gd(n.j,n.m,t,"[Invalid Chunked Response]"),Xo(n),md(n))}function YI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Eg:(t=Number(e.substring(t,r)),isNaN(t)?Oy:(r+=1)+t>e.length?Eg:(e=e.substr(r,t),n.C=r+t,e))}function xt(n){n.V=Date.now()+n.O,N0(n,n.O)}function N0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=vg(Mr(n.gb,n),e)}function lf(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function md(n){0==n.l.G||n.I||q0(n.l,n)}function Xo(n){lf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,C0(n.T),A0(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function us(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||F0(t.h,n)))if(!n.J&&F0(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=vg(Mr(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;fi(t),pf(t)}Rg(t),Hn(18)}if(1>=uD(t.h)&&t.ja){try{t.ja()}catch(b){}t.ja=void 0}}else bd(t,11)}else if((n.J||t.g==n)&&fi(t),!Cu(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const A=b[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const O=b[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const le=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(le){var u=r.h;u.g||-1==le.indexOf("spdy")&&-1==le.indexOf("quic")&&-1==le.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(L0(u,u.h),u.h=null))}if(r.D){const Me=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.za=Me,bn(r.F,r.D,Me))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=Hy(r,r.H?r.ka:null,r.V),d.J){cD(r.h,d);var g=d,w=r.J;w&&g.setTimeout(w),g.B&&(lf(g),xt(g)),r.g=d}else G0(r);0<t.i.length&&xg(t)}else"stop"!=b[0]&&"close"!=b[0]||bd(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?bd(t,7):ff(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}of()}catch(b){}}function Ig(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ko(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function QI(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Ko(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function P0(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ko(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(rt=cf.prototype).setTimeout=function(n){this.O=n},rt.ib=function(n){n=n.target;const e=this.L;e&&3==cs(n)?e.l():this.La(n)},rt.La=function(n){try{if(n==this.g)e:{const A=cs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Xh||this.g&&(this.h.h||this.g.fa()||qc(this.g)))){this.I||4!=A||7==e||of(),lf(this);var t=this.g.aa();this.Y=t;t:if(M0(this)){var r=qc(this.g);n="";var o=r.length,u=4==cs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xo(this),md(this);var d="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function HI(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,w=this.g;if((g=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cu(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Hn(12),Xo(this),md(this);break e}gd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,us(this,t)}this.P?(O0(this,A,d),Xh&&this.i&&3==A&&(S0(this.S,this.T,"tick",this.hb),this.T.start())):(gd(this.j,this.m,d,null),us(this,d)),4==A&&Xo(this),this.i&&!this.I&&(4==A?q0(this.l,this):(this.i=!1,xt(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Hn(12)):(this.o=0,Hn(13)),Xo(this),md(this)}}}catch(A){}},rt.hb=function(){if(this.g){var n=cs(this.g),e=this.g.fa();this.C<e.length&&(lf(this),O0(this,n,e),this.i&&4!=n&&xt(this))}},rt.cancel=function(){this.I=!0,Xo(this)},rt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function GI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(of(),Hn(17)),Xo(this),this.o=2,md(this)):N0(this,this.V-n)};var Jo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Mu){this.h=void 0!==e?e:n.h,Fy(this,n.j),this.s=n.s,this.g=n.g,df(this,n.m),this.l=n.l,e=n.i;var t=new yd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),XI(this,t),this.o=n.o}else n&&(t=String(n).match(Jo))?(this.h=!!e,Fy(this,t[1]||"",!0),this.s=Bc(t[2]||""),this.g=Bc(t[3]||"",!0),df(this,t[4]),this.l=Bc(t[5]||"",!0),XI(this,t[6]||"",!0),this.o=Bc(t[7]||"")):(this.h=!!e,this.i=new yd(null,this.h))}function go(n){return new Mu(n)}function Fy(n,e,t){n.j=t?Bc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function df(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function XI(n,e,t){e instanceof yd?(n.i=e,function sD(n,e){e&&!n.j&&($c(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(k0(this,r),Uy(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=jc(e,nD)),n.i=new yd(e,n.h))}function bn(n,e,t){n.i.set(e,t)}function Vc(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Bc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function jc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ly),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ly(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Mu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(jc(e,JI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(jc(e,JI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(jc(t,"/"==t.charAt(0)?tD:eD,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",jc(t,rD)),n.join("")};var JI=/[#\/\?@]/g,eD=/[#\?:]/g,tD=/[#\?]/g,nD=/[#\?@]/g,rD=/#/g;function yd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $c(n){n.g||(n.g=new Map,n.h=0,n.i&&function ky(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function k0(n,e){$c(n),e=Hc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function iD(n,e){return $c(n),e=Hc(n,e),n.g.has(e)}function Uy(n,e,t){k0(n,e),0<t.length&&(n.i=null,n.g.set(Hc(n,e),Qo(t)),n.h+=t.length)}function Hc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function oD(n){this.l=n||GT,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ga&&Ct.g.Ga()&&Ct.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=yd.prototype).add=function(n,e){$c(this),this.i=null,n=Hc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){$c(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},rt.oa=function(){$c(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},rt.W=function(n){$c(this);let e=[];if("string"==typeof n)iD(this,n)&&(e=e.concat(this.g.get(Hc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rt.set=function(n,e){return $c(this),this.i=null,iD(this,n=Hc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var GT=10;function aD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uD(n){return n.h?1:n.g?n.g.size:0}function F0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function L0(n,e){n.g?n.g.add(e):n.h=e}function cD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lD(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Qo(n.i)}function U0(){}function zT(){this.g=new U0}function Ou(n,e,t){const r=t||"";try{Ig(n,function(o,u){let d=o;Zo(o)&&(d=Ru(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Dg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function vd(n){this.l=n.ac||null,this.j=n.jb||!1}function _d(n,e){sr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=bg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oD.prototype.cancel=function(){if(this.i=lD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},U0.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},U0.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},Or(vd,_g),vd.prototype.g=function(){return new _d(this.l,this.j)},vd.prototype.i=function(n){return function(){return n}}({}),Or(_d,sr);var bg=0;function Tg(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function hf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Bs(n)}function Bs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=_d.prototype).open=function(n,e){if(this.readyState!=bg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Bs(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hf(this)),this.readyState=bg},rt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Bs(this)),this.g&&(this.readyState=3,Bs(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tg(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},rt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?hf(this):Bs(this),3==this.readyState&&Tg(this)}},rt.Va=function(n){this.g&&(this.response=this.responseText=n,hf(this))},rt.Ua=function(n){this.g&&(this.response=n,hf(this))},rt.ga=function(){this.g&&hf(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_d.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var V0=Ct.JSON.parse;function or(n){sr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cg,this.K=this.L=!1}Or(or,sr);var Cg="",dD=/^https?$/i,B0=["POST","PUT"];function j0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wd(n),Ed(n)}function wd(n){n.D||(n.D=!0,$n(n,"complete"),$n(n,"error"))}function Gc(n){if(n.h&&void 0!==od&&(!n.C[1]||4!=cs(n)||2!=n.aa()))if(n.v&&4==cs(n))kc(n.Ha,0,n);else if($n(n,"readystatechange"),4==cs(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Jo)[1]||null;if(!o&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;o=u.substr(0,u.length-1)}r=!dD.test(o?o.toLowerCase():"")}t=r}if(t)$n(n,"complete"),$n(n,"success");else{n.m=6;try{var d=2<cs(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.aa()+"]",wd(n)}}finally{Ed(n)}}}function Ed(n,e){if(n.g){zc(n);const t=n.g,r=n.C[0]?Sc:null;n.g=null,n.C=null,e||$n(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function zc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function cs(n){return n.g?n.g.readyState:0}function qc(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Cg:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function $0(n){let e="";return xu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Sg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=$0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function Id(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ag(n){this.Ca=0,this.i=[],this.j=new Fc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Id("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Id("baseRetryDelayMs",5e3,n),this.bb=Id("retryDelaySeedMs",1e4,n),this.$a=Id("forwardChannelMaxRetries",2,n),this.ta=Id("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new oD(n&&n.concurrentRequestLimit),this.Fa=new zT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ff(n){if(gf(n),3==n.G){var e=n.U++,t=go(n.F);bn(t,"SID",n.I),bn(t,"RID",e),bn(t,"TYPE","terminate"),Dd(n,t),(e=new cf(n,n.j,e,void 0)).K=2,e.v=Vc(go(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=gD(e.l,null),e.g.da(e.v)),e.F=Date.now(),xt(e)}pD(n)}function pf(n){n.g&&($y(n),n.g.cancel(),n.g=null)}function gf(n){pf(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),fi(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function xg(n){aD(n.h)||n.m||(n.m=!0,by(n.Ja,n),n.C=0)}function fD(n,e){var t;t=e?e.m:n.U++;const r=go(n.F);bn(r,"SID",n.I),bn(r,"RID",t),bn(r,"AID",n.T),Dd(n,r),n.o&&n.s&&Sg(r,n.o,n.s),t=new cf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=jy(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),L0(n.h,t),Ny(t,r,e)}function Dd(n,e){n.ia&&xu(n.ia,function(t,r){bn(e,r,t)}),n.l&&Ig({},function(t,r){bn(e,r,t)})}function jy(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Mr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let w=0;w<t;w++){let b=o[w].h;const A=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),g=!1;else try{Ou(A,d,"req"+b+"_")}catch(O){r&&r(A)}}if(g){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function G0(n){n.g||n.u||(n.Z=1,by(n.Ia,n),n.A=0)}function Rg(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=vg(Mr(n.Ia,n),W0(n,n.A)),n.A++,0))}function $y(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function z0(n){n.g=new cf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=go(n.sa);bn(e,"RID","rpc"),bn(e,"SID",n.I),bn(e,"CI",n.L?"0":"1"),bn(e,"AID",n.T),bn(e,"TYPE","xmlhttp"),Dd(n,e),n.o&&n.s&&Sg(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Vc(go(e)),t.s=null,t.P=!0,Py(t,n)}function fi(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function q0(n,e){var t=null;if(n.g==e){fi(n),$y(n),n.g=null;var r=2}else{if(!F0(n.h,e))return;t=e.D,cD(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;$n(r=yg(),new qI(r,t)),xg(n)}else G0(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function H0(n,e){return!(uD(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=vg(Mr(n.Ja,n,e),W0(n,n.C)),n.C++,0)))}(n,e)||2==r&&Rg(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:bd(n,5);break;case 4:bd(n,10);break;case 3:bd(n,6);break;default:bd(n,2)}}function W0(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function bd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Mr(n.kb,n);t||(t=new Mu("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||Fy(t,"https"),Vc(t)),function By(n,e){const t=new Fc;if(Ct.Image){const r=new Image;r.onload=Rc(Dg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Rc(Dg,t,r,"TestLoadImage: error",!1,e),r.onabort=Rc(Dg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Rc(Dg,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Hn(2);n.G=0,n.l&&n.l.va(e),pD(n),gf(n)}function pD(n){if(n.G=0,n.la=[],n.l){const e=lD(n.h);(0!=e.length||0!=n.i.length)&&(Tu(n.la,e),Tu(n.la,n.i),n.h.i.length=0,Qo(n.i),n.i.length=0),n.l.ua()}}function Hy(n,e,t){var r=t instanceof Mu?go(t):new Mu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),df(r,r.m);else{var o=Ct.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Mu(null,void 0);r&&Fy(u,r),e&&(u.g=e),o&&df(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&bn(r,t,e),bn(r,"VER",n.ma),Dd(n,r),r}function gD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new or(t&&n.Da&&!n.ra?new vd({jb:!0}):n.ra)).Ka(n.H),e}function K0(){}function Td(){if(Na&&!(10<=Number(Su)))throw Error("Environmental error: no available transport.")}function zi(n,e){sr.call(this),this.g=new Ag(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Cu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cu(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Cd(this)}function Z0(n){wg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Y0(){xy.call(this),this.status=1}function Cd(n){this.g=n}(rt=or.prototype).Ka=function(n){this.L=n},rt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ry.g(),this.C=function KI(n){return n.h||(n.h=n.i())}(this.u?this.u:Ry),this.g.onreadystatechange=Mr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void j0(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Ct.FormData&&n instanceof Ct.FormData,!(0<=Mc(B0,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zc(this),0<this.B&&((this.K=function hD(n){return Na&&function dg(){return function ud(n){var e=lg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Dy(String(as)).split("."),t=Dy("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=ri(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||ri(0==o[2].length,0==u[2].length)||ri(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.qa,this)):this.A=kc(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){j0(this,u)}},rt.qa=function(){void 0!==od&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$n(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$n(this,"complete"),$n(this,"abort"),Ed(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ed(this,!0)),or.X.M.call(this)},rt.Ha=function(){this.s||(this.F||this.v||this.l?Gc(this):this.fb())},rt.fb=function(){Gc(this)},rt.aa=function(){try{return 2<cs(this)?this.g.status:-1}catch(n){return-1}},rt.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),V0(e)}},rt.Ea=function(){return this.m},rt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=Ag.prototype).ma=8,rt.G=1,rt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new cf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=ef(u),h(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jy(this,o,e),bn(t=go(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),Dd(this,t),u&&(this.N?e="headers="+encodeURIComponent(String($0(u)))+"&"+e:this.o&&Sg(t,this.o,u)),L0(this.h,o),this.Ya&&bn(t,"TYPE","init"),this.O?(bn(t,"$req",e),bn(t,"SID","null"),o.Z=!0,Ny(o,t,null)):Ny(o,t,e),this.G=2}}else 3==this.G&&(n?fD(this,n):0==this.i.length||aD(this.h)||fD(this))},rt.Ia=function(){if(this.u=null,z0(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=vg(Mr(this.eb,this),n)}},rt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Hn(10),pf(this),z0(this))},rt.cb=function(){null!=this.v&&(this.v=null,pf(this),Rg(this),Hn(19))},rt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Hn(2)):(this.j.info("Failed to ping google.com"),Hn(1))},(rt=K0.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Ra=function(){},Td.prototype.g=function(n,e){return new zi(n,e)},Or(zi,sr),zi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Hn(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Hy(n,null,n.V),xg(n)},zi.prototype.close=function(){ff(this.g)},zi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Ru(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&xg(e)},zi.prototype.M=function(){this.g.l=null,delete this.j,ff(this.g),delete this.g,zi.X.M.call(this)},Or(Z0,wg),Or(Y0,xy),Or(Cd,K0),Cd.prototype.xa=function(){$n(this.g,"a")},Cd.prototype.wa=function(n){$n(this.g,new Z0(n))},Cd.prototype.va=function(n){$n(this.g,new Y0)},Cd.prototype.ua=function(){$n(this.g,"b")},Td.prototype.createWebChannel=Td.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,af.NO_ERROR=0,af.TIMEOUT=8,af.HTTP_ERROR=6,WI.COMPLETE="complete",Ay.EventType=uf,uf.OPEN="a",uf.CLOSE="b",uf.ERROR="c",uf.MESSAGE="d",sr.prototype.listen=sr.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.Oa,or.prototype.getLastErrorCode=or.prototype.Ea,or.prototype.getStatus=or.prototype.aa,or.prototype.getResponseJson=or.prototype.Sa,or.prototype.getResponseText=or.prototype.fa,or.prototype.send=or.prototype.da,or.prototype.setWithCredentials=or.prototype.Ka;var Q0=Vs.createWebChannelTransport=function(){return new Td},mD=Vs.getStatEventTarget=function(){return yg()},Mg=Vs.ErrorCode=af,yD=Vs.EventType=WI,vD=Vs.Event=Lc,Gy=Vs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},X0=Vs.FetchXmlHttpFactory=vd,Og=Vs.WebChannel=Ay,ea=Vs.XhrIo=or;const Ng="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let Sd="9.18.0";const Wc=new ao.Yd("@firebase/firestore");function Pg(){return Wc.logLevel}function Oe(n,...e){if(Wc.logLevel<=ao.in.DEBUG){const t=e.map(zy);Wc.debug(`Firestore (${Sd}): ${n}`,...t)}}function mr(n,...e){if(Wc.logLevel<=ao.in.ERROR){const t=e.map(zy);Wc.error(`Firestore (${Sd}): ${n}`,...t)}}function ka(n,...e){if(Wc.logLevel<=ao.in.WARN){const t=e.map(zy);Wc.warn(`Firestore (${Sd}): ${n}`,...t)}}function zy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Sd}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function ot(n,e){n||tt()}function ze(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends sn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class Wy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class WT{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ir,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=d;e.enqueueRetryable((0,pe.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ir)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot("string"==typeof r.accessToken),new wD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ot(null===e||"string"==typeof e),new Gr(e)}}class ED{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ot(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class J0{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new ED(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ky{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ew{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot("string"==typeof t.token),this.A=t.token,new Ky(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function tw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ta{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=tw(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function Ad(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function nw(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Qn(0,0))}static max(){return new ht(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xd{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends xd{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const mf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ar extends xd{construct(e,t,r){return new ar(e,t,r)}static isValidIdentifier(e){return mf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ar(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ae(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Ae(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new Ae(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ar(t)}static emptyPath(){return new ar([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Jt.fromString(e))}static fromName(e){return new $e(Jt.fromString(e).popFirst(5))}static empty(){return new $e(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Jt(e.slice()))}}class yf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function kg(n){return n.fields.find(e=>2===e.kind)}function Nu(n){return n.fields.filter(e=>2!==e.kind)}yf.UNKNOWN_ID=-1;class Rd{constructor(e,t){this.fieldPath=e,this.kind=t}}class vf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vf(0,qi.min())}}function Zy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=ht.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new qi(o,$e.empty(),e)}function Kc(n){return new qi(n.readTime,n.key,-1)}class qi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qi(ht.min(),$e.empty(),-1)}static max(){return new qi(ht.max(),$e.empty(),-1)}}function Yy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}const rw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Pu(n){return Qy.apply(this,arguments)}function Qy(){return Qy=(0,pe.Z)(function*(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==rw)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Qy.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(o=>o?te.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new te((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(A=>{d[b]=A,++g,g===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new te((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Fg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ir,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Md(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Jy(r.target.error);this.P.reject(new Md(e,o))}}static open(e,t,r,o){try{return new Fg(t,e.transaction(o,r))}catch(u){throw new Md(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iw(t)}}class Dr{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Dr.D((0,sn.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),ku(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,sn.hl)())return!1;if(Dr.N())return!0;const e=(0,sn.z$)(),t=Dr.D(e),r=0<t&&t<10,o=Dr.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Md(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Ae(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ae(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Md(e,g))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.F(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,pe.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.O(e);const w=Fg.open(u.db,e,d?"readonly":"readwrite",r),b=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),te.reject(A))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,A="FirebaseError"!==b.name&&g<3;if(Oe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Xy{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return ku(this.q.delete())}}class Md extends Ae{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fa(n){return"IndexedDbTransactionError"===n.name}class iw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ku(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),ku(this.store.add(e))}get(e){return ku(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),ku(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),ku(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new te((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const o=this.cursor(r);return this.H(o,(u,d,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new te((r,o)=>{t.onerror=u=>{const d=Jy(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}H(e,t){const r=[];return new te((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const w=new Xy(g),b=t(g.primaryKey,g.value,w);if(b instanceof te){const A=b.catch(O=>(w.done(),te.reject(O)));r.push(A)}w.isDone?o():null===w.G?g.continue():g.continue(w.G)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ku(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Jy(r.target.error);t(o)}})}let sw=!1;function Jy(n){const e=Dr.D((0,sn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sw||(sw=!0,setTimeout(()=>{throw r},0)),r}}return n}class TD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Fa(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Pu(r)}yield t.nt(6e4)}))}}class CD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return te.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Oe("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(g=>(Oe("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=Kc(u);Yy(d,r)>0&&(r=d)}),new qi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Wi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class AD{constructor(e,t,r,o,u,d,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=w}}class Yc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yc&&e.projectId===this.projectId&&e.database===this.database}}function xD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function La(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ow(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Od(n){return null==n}function Nd(n){return 0===n&&1/n==-1/0}function RD(n){return"number"==typeof n&&Number.isInteger(n)&&!Nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class mo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw o instanceof DOMException?new mo("Invalid base64 string: "+o):o}}(e);return new zr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const aw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ua(n){if(ot(!!n),"string"==typeof n){let e=0;const t=aw.exec(n);if(ot(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Qc(n){return"string"==typeof n?zr.fromBase64String(n):zr.fromUint8Array(n)}function uw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ev(n){const e=n.mapValue.fields.__previous_value__;return uw(e)?ev(e):e}function Pd(n){const e=Ua(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}const Fu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kd={nullValue:"NULL_VALUE"};function Xc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uw(n)?4:Vd(n)?9007199254740991:10:tt()}function na(n,e){if(n===e)return!0;const t=Xc(n);if(t!==Xc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pd(n).isEqual(Pd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ua(r.timestampValue),d=Ua(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Qc(n.bytesValue).isEqual(Qc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Xn(r.geoPointValue.latitude)===Xn(o.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Xn(r.integerValue)===Xn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Xn(r.doubleValue),d=Xn(o.doubleValue);return u===d?Nd(u)===Nd(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Ad(n.arrayValue.values||[],e.arrayValue.values||[],na);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(xD(u)!==xD(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!na(u[g],d[g])))return!1;return!0}(n,e);default:return tt()}var o}function _f(n,e){return void 0!==(n.values||[]).find(t=>na(t,e))}function Lu(n,e){if(n===e)return 0;const t=Xc(n),r=Xc(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Xn(o.integerValue||o.doubleValue),g=Xn(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return cw(n.timestampValue,e.timestampValue);case 4:return cw(Pd(n),Pd(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Qc(o),g=Qc(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let w=0;w<d.length&&w<g.length;w++){const b=Rt(d[w],g[w]);if(0!==b)return b}return Rt(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Rt(Xn(o.latitude),Xn(u.latitude));return 0!==d?d:Rt(Xn(o.longitude),Xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let w=0;w<d.length&&w<g.length;++w){const b=Lu(d[w],g[w]);if(b)return b}return Rt(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Fu.mapValue&&u===Fu.mapValue)return 0;if(o===Fu.mapValue)return 1;if(u===Fu.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),w=u.fields||{},b=Object.keys(w);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const O=Rt(g[A],b[A]);if(0!==O)return O;const $=Lu(d[g[A]],w[b[A]]);if(0!==$)return $}return Rt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw tt()}}function cw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=Ua(n),r=Ua(e),o=Rt(t.seconds,r.seconds);return 0!==o?o:Rt(t.nanos,r.nanos)}function Fd(n){return Ld(n)}function Ld(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ua(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Qc(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Ld(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${Ld(r.fields[g])}`;return u+"}"}(n.mapValue):tt();var e}function js(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tv(n){return!!n&&"integerValue"in n}function Va(n){return!!n&&"arrayValue"in n}function lw(n){return!!n&&"nullValue"in n}function dw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ud(n){return!!n&&"mapValue"in n}function Ki(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return La(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ki(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ki(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Vd(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function pi(n){return"nullValue"in n?kd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?js(Yc.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function Jc(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?js(Yc.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Fu:tt()}function wf(n,e){const t=Lu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ls(n,e){const t=Lu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ra{constructor(e,t){this.position=e,this.inclusive=t}}function el(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):Lu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function tl(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!na(n.position[t],e.position[t]))return!1;return!0}class nl{}class Gt extends nl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new hw(e,t,r):"array-contains"===t?new gw(e,r):"in"===t?new mw(e,r):"not-in"===t?new MD(e,r):"array-contains-any"===t?new OD(e,r):new Gt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new fw(e,r):new pw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Lu(t,this.value)):null!==t&&Xc(this.value)===Xc(t)&&this.matchesComparison(Lu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class on extends nl{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new on(e,t)}matches(e){return yo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function yo(n){return"and"===n.op}function Uu(n){return"or"===n.op}function Vu(n){return rl(n)&&yo(n)}function rl(n){for(const e of n.filters)if(e instanceof on)return!1;return!0}function Ug(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+Fd(n.value);if(Vu(n))return n.filters.map(e=>Ug(e)).join(",");{const e=n.filters.map(t=>Ug(t)).join(",");return`${n.op}(${e})`}}function nv(n,e){return n instanceof Gt?(t=n,(r=e)instanceof Gt&&t.op===r.op&&t.field.isEqual(r.field)&&na(t.value,r.value)):n instanceof on?function(t,r){return r instanceof on&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,d)=>o&&nv(u,r.filters[d]),!0)}(n,e):void tt();var t,r}function rv(n,e){const t=n.filters.concat(e);return on.create(t,n.op)}function iv(n){return n instanceof Gt?`${(e=n).field.canonicalString()} ${e.op} ${Fd(e.value)}`:n instanceof on?function(e){return e.op.toString()+" {"+e.getFilters().map(iv).join(" ,")+"}"}(n):"Filter";var e}class hw extends Gt{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class fw extends Gt{constructor(e,t){super(e,"in",t),this.keys=sv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pw extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=sv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class gw extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Va(t)&&_f(t.arrayValue,this.value)}}class mw extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_f(this.value.arrayValue,t)}}class MD extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_f(this.value.arrayValue,t)}}class OD extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Va(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_f(this.value.arrayValue,r))}}class Bd{constructor(e,t="asc"){this.field=e,this.dir=t}}function yw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ur{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vg(this.root,e,this.comparator,!0)}}class Vg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:qr.RED,this.left=null!=o?o:qr.EMPTY,this.right=null!=u?u:qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new qr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return qr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1,qr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(e){return new ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jd(n){return n.hasNext()?n.getNext():void 0}class Zi{constructor(e){this.fields=e,e.sort(ar.comparator)}static empty(){return new Zi([])}unionWith(e){let t=new _n(ar.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ad(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ud(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ki(t)}setAll(e){let t=ar.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=Ki(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Ud(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ud(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){La(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new si(Ki(this.value))}}function vw(n){const e=[];return La(n.fields,(t,r)=>{const o=new ar([t]);if(Ud(r)){const u=vw(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Zi(e)}class Tn{constructor(e,t,r,o,u,d,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Tn(e,0,ht.min(),ht.min(),ht.min(),si.empty(),0)}static newFoundDocument(e,t,r,o){return new Tn(e,1,t,ht.min(),r,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,ht.min(),ht.min(),si.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,ht.min(),ht.min(),si.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class av{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this._t=null}}function uv(n,e=null,t=[],r=[],o=null,u=null,d=null){return new av(n,e,t,r,o,u,d)}function $d(n){const e=ze(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ug(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fd(r)).join(",")),e._t=t}return e._t}function Bg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tl(n.startAt,e.startAt)&&tl(n.endAt,e.endAt)}function cv(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jg(n,e){return n.filters.filter(t=>t instanceof Gt&&t.field.isEqual(e))}function lv(n,e,t){let r=kd,o=!0;for(const u of jg(n,e)){let d=kd,g=!0;switch(u.op){case"<":case"<=":d=pi(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=kd}wf({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];wf({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function ND(n,e,t){let r=Fu,o=!0;for(const u of jg(n,e)){let d=Fu,g=!0;switch(u.op){case">=":case">":d=Jc(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=Fu}ls({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];ls({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Ba{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=w,this.wt=null,this.gt=null}}function il(n,e,t,r,o,u,d,g){return new Ba(n,e,t,r,o,u,d,g)}function Hd(n){return new Ba(n)}function dv(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function hv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ef(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Gd(n){return null!==n.collectionGroup}function sl(n){const e=ze(n);if(null===e.wt){e.wt=[];const t=Ef(e),r=hv(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Bd(t)),e.wt.push(new Bd(ar.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Bd(ar.keyField(),u))}}}return e.wt}function gi(n){const e=ze(n);if(!e.gt)if("F"===e.limitType)e.gt=uv(e.path,e.collectionGroup,sl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of sl(e))t.push(new Bd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ra(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new ra(e.startAt.position,e.startAt.inclusive):null;e.gt=uv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.gt}function fv(n,e){e.getFirstInequalityField(),Ef(n);const t=n.filters.concat([e]);return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $g(n,e,t){return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function If(n,e){return Bg(gi(n),gi(e))&&n.limitType===e.limitType}function _w(n){return`${$d(gi(n))}|lt:${n.limitType}`}function pv(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>iv(r)).join(", ")}]`),Od(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fd(r)).join(",")),`Target(${t})`}(gi(n))}; limitType=${n.limitType})`}function zd(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of sl(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=el(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,sl(t),r)||t.endAt&&!function(o,u,d){const g=el(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,sl(t),r)));var t,r}function ww(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gv(n){return(e,t)=>{let r=!1;for(const o of sl(n)){const u=Ew(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Ew(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),w=d.data.field(o);return null!==g&&null!==w?Lu(g,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function Hg(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function PD(n){return{integerValue:""+n}}function Gg(n,e){return RD(e)?PD(e):Hg(n,e)}class zg{constructor(){this._=void 0}}function YT(n,e,t){return n instanceof ol?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ja?Iw(n,e):n instanceof ia?bf(n,e):function(r,o){const u=mv(r,o),d=kD(u)+kD(r.It);return tv(u)&&tv(r.It)?PD(d):Hg(r.Tt,d)}(n,e)}function Df(n,e,t){return n instanceof ja?Iw(n,e):n instanceof ia?bf(n,e):t}function mv(n,e){return n instanceof Bu?tv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ol extends zg{}class ja extends zg{constructor(e){super(),this.elements=e}}function Iw(n,e){const t=Dw(e);for(const r of n.elements)t.some(o=>na(o,r))||t.push(r);return{arrayValue:{values:t}}}class ia extends zg{constructor(e){super(),this.elements=e}}function bf(n,e){let t=Dw(e);for(const r of n.elements)t=t.filter(o=>!na(o,r));return{arrayValue:{values:t}}}class Bu extends zg{constructor(e,t){super(),this.Tt=e,this.It=t}}function kD(n){return Xn(n.integerValue||n.doubleValue)}function Dw(n){return Va(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class al{constructor(e,t){this.field=e,this.transform=t}}class bw{constructor(e,t){this.version=e,this.transformResults=t}}class Gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Tf{}function vv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kd(n.key,Gn.none()):new ul(n.key,n.data,Gn.none());{const t=n.data,r=si.empty();let o=new _n(ar.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new vo(n.key,r,new Zi(o.toArray()),Gn.none())}}function _v(n,e,t){n instanceof ul?function(r,o,u){const d=r.value.clone(),g=Cw(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof vo?function(r,o,u){if(!qd(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Cw(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(Tw(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wd(n,e,t,r){return n instanceof ul?function(o,u,d,g){if(!qd(o.precondition,u))return d;const w=o.value.clone(),b=Sw(o.fieldTransforms,g,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof vo?function(o,u,d,g){if(!qd(o.precondition,u))return d;const w=Sw(o.fieldTransforms,g,u),b=u.data;return b.setAll(Tw(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,qd(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function FD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=mv(r.transform,o||null);null!=u&&(null===t&&(t=si.empty()),t.set(r.field,u))}return t||null}function wv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ad(t,r,(o,u)=>function yv(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ja&&r instanceof ja||t instanceof ia&&r instanceof ia?Ad(t.elements,r.elements,na):t instanceof Bu&&r instanceof Bu?na(t.It,r.It):t instanceof ol&&r instanceof ol);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ul extends Tf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class vo extends Tf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Tw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Cw(n,e,t){const r=new Map;ot(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,Df(d,g,t[o]))}return r}function Sw(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,YT(u,d,e))}return r}class Kd extends Tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qg extends Tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ev{constructor(e){this.count=e}}var yr,rn;function Iv(n){switch(n){default:return tt();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function Dv(n){if(void 0===n)return mr("GRPC error has no .code"),re.UNKNOWN;switch(n){case yr.OK:return re.OK;case yr.CANCELLED:return re.CANCELLED;case yr.UNKNOWN:return re.UNKNOWN;case yr.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case yr.INTERNAL:return re.INTERNAL;case yr.UNAVAILABLE:return re.UNAVAILABLE;case yr.UNAUTHENTICATED:return re.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case yr.NOT_FOUND:return re.NOT_FOUND;case yr.ALREADY_EXISTS:return re.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return re.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case yr.ABORTED:return re.ABORTED;case yr.OUT_OF_RANGE:return re.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return re.UNIMPLEMENTED;case yr.DATA_LOSS:return re.DATA_LOSS;default:return tt()}}(rn=yr||(yr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){La(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return ow(this.inner)}size(){return this.innerSize}}const Aw=new ur($e.comparator);function Si(){return Aw}const bv=new ur($e.comparator);function Wg(...n){let e=bv;for(const t of n)e=e.insert(t.key,t);return e}function xw(n){let e=bv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sa(){return Cf()}function Tv(){return Cf()}function Cf(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const Nr=new ur($e.comparator),Rw=new _n($e.comparator);function jt(...n){let e=Rw;for(const t of n)e=e.add(t);return e}const LD=new _n(Rt);function Sf(){return LD}class Af{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Zd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Af(ht.min(),o,Sf(),Si(),jt())}}class Zd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Zd(r,t,jt(),jt(),jt())}}class xf{constructor(e,t,r,o){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=o}}class cl{constructor(e,t){this.targetId=e,this.Rt=t}}class Mw{constructor(e,t,r=zr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Ow{constructor(){this.Pt=0,this.vt=Cv(),this.bt=zr.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=jt(),t=jt(),r=jt();return this.vt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new Zd(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=Cv()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class Nw{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Si(),this.Kt=Pw(),this.Gt=new _n(Rt)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,o)=>{this.Jt(o)&&t(o)})}Zt(e){const t=e.targetId,r=e.Rt.count,o=this.Xt(t);if(o){const u=o.target;if(cv(u))if(0===r){const d=new $e(u.path);this.zt(t,d,Tn.newNoDocument(d,ht.min()))}else ot(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((u,d)=>{const g=this.Xt(d);if(g){if(u.current&&cv(g.target)){const w=new $e(g.target.path);null!==this.Ut.get(w)||this.ne(d,w)||this.zt(d,w,Tn.newNoDocument(w,e))}u.Ct&&(t.set(d,u.Nt()),u.kt())}});let r=jt();this.Kt.forEach((u,d)=>{let g=!0;d.forEachWhile(w=>{const b=this.Xt(w);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new Af(e,t,this.Gt,this.Ut,r);return this.Ut=Si(),this.Kt=Pw(),this.Gt=new _n(Rt),o}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const o=this.Ht(e);this.ne(e,t)?o.$t(t,1):o.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new Ow,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new _n(Rt),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Ow),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function Pw(){return new ur($e.comparator)}function Cv(){return new ur($e.comparator)}const QT={asc:"ASCENDING",desc:"DESCENDING"},kw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fw={and:"AND",or:"OR"};class oa{constructor(e,t){this.databaseId=e,this.yt=t}}function Yd(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lw(n,e){return n.yt?e.toBase64():e.toUint8Array()}function aa(n,e){return Yd(n,e.toTimestamp())}function hn(n){return ot(!!n),ht.fromTimestamp(function(e){const t=Ua(e);return new Qn(t.seconds,t.nanos)}(n))}function ds(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Sv(n){const e=Jt.fromString(n);return ot(Mv(e)),e}function Qd(n,e){return ds(n.databaseId,e.path)}function ua(n,e){const t=Sv(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Kg(t))}function Av(n,e){return ds(n.databaseId,e)}function Uw(n){const e=Sv(n);return 4===e.length?Jt.emptyPath():Kg(e)}function Rf(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kg(n){return ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Xd(n,e,t){return{name:Qd(n,e),fields:t.value.mapValue.fields}}function Vw(n,e,t){const r=ua(n,e.name),o=hn(e.updateTime),u=e.createTime?hn(e.createTime):ht.min(),d=new si({mapValue:{fields:e.fields}}),g=Tn.newFoundDocument(r,o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Jd(n,e){let t;if(e instanceof ul)t={update:Xd(n,e.key,e.value)};else if(e instanceof Kd)t={delete:Qd(n,e.key)};else if(e instanceof vo)t={update:Xd(n,e.key,e.data),updateMask:qw(e.fieldMask)};else{if(!(e instanceof qg))return tt();t={verify:Qd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof ol)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ja)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ia)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Bu)return{fieldPath:u.field.canonicalString(),increment:d.It};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:aa(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function Zg(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Gn.updateTime(hn(o.updateTime)):void 0!==o.exists?Gn.exists(o.exists):Gn.none():Gn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(ot("REQUEST_TIME"===d.setToServerValue),g=new ol):"appendMissingElements"in d?g=new ja(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new ia(d.removeAllFromArray.values||[]):"increment"in d?g=new Bu(u,d.increment):tt();const w=ar.fromServerFormat(d.fieldPath);return new al(w,g)}(n,o)):[];var o;if(e.update){const o=ua(n,e.update.name),u=new si({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Zi((e.updateMask.fieldPaths||[]).map(b=>ar.fromServerFormat(b)));return new vo(o,u,d,t,r)}return new ul(o,u,t,r)}if(e.delete){const o=ua(n,e.delete);return new Kd(o,t)}if(e.verify){const o=ua(n,e.verify);return new qg(o,t)}return tt()}function jw(n,e){return{documents:[Av(n,e.path)]}}function Qg(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Av(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Av(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return Rv(on.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Ha((A=b).field),direction:Hw(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.yt||Od(b)?b:{value:b});var b,g,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function xv(n){let e=Uw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ot(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const O=Xg(A);return O instanceof on&&Vu(O)?O.getFilters():[O]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Bd(ll((O=A).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let g=null;t.limit&&(g=function(A){let O;return O="object"==typeof A?A.value:A,Od(O)?null:O}(t.limit));let w=null;var A;t.startAt&&(w=new ra((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new ra(A.values||[],!A.before)}(t.endAt)),il(e,o,d,u,g,"F",w,b)}function Xg(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ll(e.unaryFilter.field);return Gt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ll(e.unaryFilter.field);return Gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ll(e.unaryFilter.field);return Gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ll(e.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}(n):void 0!==n.fieldFilter?Gt.create(ll((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return on.create(e.compositeFilter.filters.map(t=>Xg(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return tt()}}(e.compositeFilter.op))}(n):tt();var e}function Hw(n){return QT[n]}function Gw(n){return kw[n]}function zw(n){return Fw[n]}function Ha(n){return{fieldPath:n.canonicalString()}}function ll(n){return ar.fromServerFormat(n.fieldPath)}function Rv(n){return n instanceof Gt?function(e){if("=="===e.op){if(dw(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NAN"}};if(lw(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dw(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NOT_NAN"}};if(lw(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(e.field),op:Gw(e.op),value:e.value}}}(n):n instanceof on?function(e){const t=e.getFilters().map(r=>Rv(r));return 1===t.length?t[0]:{compositeFilter:{op:zw(e.op),filters:t}}}(n):tt()}function qw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ww(e)),e=VD(n.get(t),e);return Ww(e)}function VD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Ww(n){return n+"\x01\x01"}function ca(n){const e=n.length;if(ot(e>=2),2===e)return ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let w;0===o.length?w=g:(o+=g,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new Jt(r)}const Kw=["userId","batchId"];function Jg(n,e){return[n,Ai(e)]}function Zw(n,e,t){return[n,Ai(e),t]}const BD={},jD=["prefixPath","collectionGroup","readTime","documentId"],$D=["prefixPath","collectionGroup","documentId"],HD=["collectionGroup","readTime","prefixPath","documentId"],GD=["canonicalId","targetId"],zD=["targetId","path"],qD=["path","targetId"],WD=["collectionId","parent"],KD=["indexId","uid"],ZD=["uid","sequenceNumber"],YD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yw=["indexId","uid","orderedDocumentKey"],Qw=["userId","collectionPath","documentId"],Xw=["userId","collectionPath","largestBatchId"],Jw=["userId","collectionGroup","largestBatchId"],Ov=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eE=[...Ov,"documentOverlays"],Nv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pv=Nv,tE=[...Pv,"indexConfiguration","indexState","indexEntries"];class em extends Zc{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function Pr(n,e){const t=ze(n);return Dr.M(t.re,e)}class Ga{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&_v(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Tv();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const w=vv(d,g);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&Ad(this.mutations,e.mutations,(t,r)=>wv(t,r))&&Ad(this.baseMutations,e.baseMutations,(t,r)=>wv(t,r))}}class kv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ot(e.mutations.length===r.length);let o=Nr;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new kv(e,t,r,o)}}class Fv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hs{constructor(e,t,r,o,u=ht.min(),d=ht.min(),g=zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class QD{constructor(e){this.oe=e}}function XD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Mf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Qd(o=n.oe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Yd(o,u.version.toTimestamp()),createTime:Yd(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ju(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:ju(e.version)}}var o,u;return r}function Mf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ju(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eh(n){const e=new Qn(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function ft(n,e){const t=(e.baseMutations||[]).map(u=>Zg(n.oe,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Zg(n.oe,u)),o=Qn.fromMillis(e.localWriteTimeMs);return new Ga(e.batchId,o,t,r)}function Of(n){const e=eh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?eh(n.lastLimboFreeSnapshotVersion):ht.min();let r;var o;return void 0!==n.query.documents?(ot(1===(o=n.query).documents.length),r=gi(Hd(Uw(o.documents[0])))):r=gi(xv(n.query)),new hs(r,n.targetId,0,n.lastListenSequenceNumber,e,t,zr.fromBase64String(n.resumeToken))}function nE(n,e){const t=ju(e.snapshotVersion),r=ju(e.lastLimboFreeSnapshotVersion);let o;o=cv(e.target)?jw(n.oe,e.target):Qg(n.oe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$d(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Uv(n){const e=xv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$g(e,e.limit,"L"):e}function th(n,e){return new Fv(e.largestBatchId,Zg(n.oe,e.overlayMutation))}function rE(n,e){const t=e.path.lastSegment();return[n,Ai(e.path.popLast()),t]}function Nf(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ju(r.readTime),documentKey:Ai(r.documentKey.path),largestBatchId:r.largestBatchId}}class tm{getBundleMetadata(e,t){return Jn(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:eh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Jn(e).put({bundleId:(r=t).id,createTime:ju(hn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return JD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Uv(o.bundledQuery),readTime:eh(o.readTime)};var o})}saveNamedQuery(e,t){return JD(e).put({name:(r=t).name,readTime:ju(hn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Jn(n){return Pr(n,"bundles")}function JD(n){return Pr(n,"namedQueries")}class Pf{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new Pf(e,t.uid||"")}getOverlay(e,t){return kf(e).get(rE(this.userId,t)).next(r=>r?th(this.Tt,r):null)}getOverlays(e,t){const r=sa();return te.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new Fv(t,d);o.push(this.ce(e,g))}),te.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ai(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(kf(e).Y("collectionPathOverlayIndex",g))}),te.waitFor(u)}getOverlaysForCollection(e,t,r){const o=sa(),u=Ai(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return kf(e).W("collectionPathOverlayIndex",d).next(g=>{for(const w of g){const b=th(this.Tt,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=sa();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kf(e).X({index:"collectionGroupOverlayIndex",range:g},(w,b,A)=>{const O=th(this.Tt,b);u.size()<o||O.largestBatchId===d?(u.set(O.getKey(),O),d=O.largestBatchId):A.done()}).next(()=>u)}ce(e,t){return kf(e).put(function(r,o,u){const[d,g,w]=rE(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Jd(r.oe,u.mutation)}}(this.Tt,this.userId,t))}}function kf(n){return Pr(n,"documentOverlays")}class dl{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(Xn(e.integerValue));else if("doubleValue"in e){const r=Xn(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),Nd(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Qc(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?Vd(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):tt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const o of Object.keys(r))this.we(o,t),this.he(r[o],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const o of r)this.he(o,t)}ye(e,t){this.fe(t,37),$e.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function iE(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Vv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=iE(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}dl.Ee=new dl;class sE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const o=t.codePointAt(0);this.Re(240|o>>>18),this.Re(128|63&o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Ve()}Ce(e){const t=this.xe(e),r=Vv(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}ke(e){const t=this.xe(e),r=Vv(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class oE{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class eb{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class Ff{constructor(){this.Le=new sE,this.qe=new oE(this.Le),this.Ue=new eb(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class hl{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hl(this.indexId,this.documentKey,this.arrayValue,r)}}function $s(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=aE(n.arrayValue,e.arrayValue),0!==t?t:(t=aE(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function aE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class tb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){ot(e.collectionGroup===this.collectionId);const t=kg(e);if(void 0!==t&&!this.He(t))return!1;const r=Nu(e);let o=0,u=0;for(;o<r.length&&this.He(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.ze){const d=r[o];if(!this.Je(this.ze,d)||!this.Ye(this.Qe[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Qe.length||!this.Ye(this.Qe[u++],d))return!1}return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function uE(n){var e,t;if(ot(n instanceof Gt||n instanceof on),n instanceof Gt){if(n instanceof mw){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Gt.create(n.field,"==",u)))||[];return on.create(o,"or")}return n}const r=n.filters.map(o=>uE(o));return on.create(r,n.op)}function nm(n){if(0===n.getFilters().length)return[];const e=jv(uE(n));return ot(Bv(e)),rm(e)||im(e)?[e]:e.getFilters()}function rm(n){return n instanceof Gt}function im(n){return n instanceof on&&Vu(n)}function Bv(n){return rm(n)||im(n)||function(e){if(e instanceof on&&Uu(e)){for(const t of e.getFilters())if(!rm(t)&&!im(t))return!1;return!0}return!1}(n)}function jv(n){if(ot(n instanceof Gt||n instanceof on),n instanceof Gt)return n;if(1===n.filters.length)return jv(n.filters[0]);const e=n.filters.map(r=>jv(r));let t=on.create(e,n.op);return t=sm(t),Bv(t)?t:(ot(t instanceof on),ot(yo(t)),ot(t.filters.length>1),t.filters.reduce((r,o)=>fl(r,o)))}function fl(n,e){let t;return ot(n instanceof Gt||n instanceof on),ot(e instanceof Gt||e instanceof on),t=n instanceof Gt?e instanceof Gt?on.create([n,e],"and"):nh(n,e):e instanceof Gt?nh(e,n):function(r,o){if(ot(r.filters.length>0&&o.filters.length>0),yo(r)&&yo(o))return rv(r,o.getFilters());const u=Uu(r)?r:o,d=Uu(r)?o:r,g=u.filters.map(w=>fl(w,d));return on.create(g,"or")}(n,e),sm(t)}function nh(n,e){if(yo(e))return rv(e,n.getFilters());{const t=e.filters.map(r=>fl(n,r));return on.create(t,"or")}}function sm(n){if(ot(n instanceof Gt||n instanceof on),n instanceof Gt)return n;const e=n.getFilters();if(1===e.length)return sm(e[0]);if(rl(n))return n;const t=e.map(o=>sm(o)),r=[];return t.forEach(o=>{o instanceof Gt?r.push(o):o instanceof on&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:on.create(r,n.op)}class nb{constructor(){this.Ze=new $v}addToCollectionParentIndex(e,t){return this.Ze.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(qi.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class $v{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new _n(Jt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new _n(Jt.comparator)).toArray()}}const Lf=new Uint8Array(0);class cE{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new $v,this.tn=new $a(r=>$d(r),(r,o)=>Bg(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ai(o)};return Hv(e).put(u)}return te.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[nw(t),""],!1,!0);return Hv(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ca(d.parent))}return r})}addFieldIndex(e,t){const r=Vf(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=Bf(e);return u.next(g=>{d.put(Nf(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Vf(e),o=Bf(e),u=Uf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Uf(e);let o=!0;const u=new Map;return te.forEach(this.en(t),d=>this.nn(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=jt();const g=[];return te.forEach(u,(w,b)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Ft=>`${Ft.fieldPath}:${Ft.kind}`).join(",")}`} to execute ${$d(t)}`);const O=function(Ft,$t){const Vt=kg($t);if(void 0===Vt)return null;for(const Zt of jg(Ft,Vt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(b,w),$=function(Ft,$t){const Vt=new Map;for(const Zt of Nu($t))for(const yi of jg(Ft,Zt.fieldPath))switch(yi.op){case"==":case"in":Vt.set(Zt.fieldPath.canonicalString(),yi.value);break;case"not-in":case"!=":return Vt.set(Zt.fieldPath.canonicalString(),yi.value),Array.from(Vt.values())}return null}(b,w),K=function(Ft,$t){const Vt=[];let Zt=!0;for(const yi of Nu($t)){const xh=0===yi.kind?lv(Ft,yi.fieldPath,Ft.startAt):ND(Ft,yi.fieldPath,Ft.startAt);Vt.push(xh.value),Zt&&(Zt=xh.inclusive)}return new ra(Vt,Zt)}(b,w),le=function(Ft,$t){const Vt=[];let Zt=!0;for(const yi of Nu($t)){const xh=0===yi.kind?ND(Ft,yi.fieldPath,Ft.endAt):lv(Ft,yi.fieldPath,Ft.endAt);Vt.push(xh.value),Zt&&(Zt=xh.inclusive)}return new ra(Vt,Zt)}(b,w),Me=this.sn(w,b,K),Ge=this.sn(w,b,le),zt=this.rn(w,b,$),nn=this.on(w.indexId,O,Me,K.inclusive,Ge,le.inclusive,zt);return te.forEach(nn,Ft=>r.J(Ft,t.limit).next($t=>{$t.forEach(Vt=>{const Zt=$e.fromSegments(Vt.documentKey);d.has(Zt)||(d=d.add(Zt),g.push(Zt))})}))}).next(()=>g)}return te.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:nm(on.create(e.filters,"and")).map(r=>uv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,o,u,d,g){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),A=[];for(let O=0;O<w;++O){const $=t?this.un(t[O/b]):Lf,K=this.cn(e,$,r[O%b],o),le=this.an(e,$,u[O%b],d),Me=g.map(Ge=>this.cn(e,$,Ge,!0));A.push(...this.createRange(K,le,Me))}return A}cn(e,t,r,o){const u=new hl(e,$e.empty(),t,r);return o?u:u.Ge()}an(e,t,r,o){const u=new hl(e,$e.empty(),t,r);return o?u.Ge():u}nn(e,t){const r=new tb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.We(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;const o=this.en(t);return te.forEach(o,u=>this.nn(e,u).next(d=>{d?0!==r&&d.fields.length<function(g){let w=new _n(ar.comparator),b=!1;for(const A of g.filters)for(const O of A.getFlattenedFilters())O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?b=!0:w=w.add(O.field));for(const A of g.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}hn(e,t){const r=new Ff;for(const o of Nu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ke(o.kind);dl.Ee.ae(u,d)}return r.Be()}un(e){const t=new Ff;return dl.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new Ff;return dl.Ee.ae(js(this.databaseId,t),r.Ke(function(o){const u=Nu(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let o=[];o.push(new Ff);let u=0;for(const d of Nu(e)){const g=r[u++];for(const w of o)if(this.fn(t,d.fieldPath)&&Va(g))o=this.dn(o,d,g);else{const b=w.Ke(d.kind);dl.Ee.ae(g,b)}}return this._n(o)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const w=new Ff;w.seed(g.Be()),dl.Ee.ae(d,w.Ke(t.kind)),u.push(w)}return u}fn(e,t){return!!e.filters.find(r=>r instanceof Gt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Vf(e),o=Bf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return te.forEach(u,g=>o.get([g.indexId,this.uid]).next(w=>{d.push(function(b,A){const O=A?new vf(A.sequenceNumber,new qi(eh(A.readTime),new $e(ca(A.documentKey)),A.largestBatchId)):vf.empty(),$=b.fields.map(([K,le])=>new Rd(ar.fromServerFormat(K),le));return new yf(b.indexId,b.collectionGroup,$,O)}(g,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Rt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Vf(e),u=Bf(e);return this.wn(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>te.forEach(g,w=>u.put(Nf(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?te.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),te.forEach(g,w=>this.mn(e,o,w).next(b=>{const A=this.gn(u,w);return b.isEqual(A)?te.resolve():this.yn(e,u,w,b,A)}))))})}pn(e,t,r,o){return Uf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,o){return Uf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const o=Uf(e);let u=new _n($s);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(d,g)=>{u=u.add(new hl(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}gn(e,t){let r=new _n($s);const o=this.hn(t,e);if(null==o)return r;const u=kg(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Va(d))for(const g of d.arrayValue.values||[])r=r.add(new hl(t.indexId,e.key,this.un(g),o))}else r=r.add(new hl(t.indexId,e.key,Lf,o));return r}yn(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,w,b,A,O){const $=g.getIterator(),K=w.getIterator();let le=jd($),Me=jd(K);for(;le||Me;){let Ge=!1,zt=!1;if(le&&Me){const nn=b(le,Me);nn<0?zt=!0:nn>0&&(Ge=!0)}else null!=le?zt=!0:Ge=!0;Ge?(A(Me),Me=jd(K)):zt?(O(le),le=jd($)):(le=jd($),Me=jd(K))}}(o,u,$s,g=>{d.push(this.pn(e,t,r,g))},g=>{d.push(this.In(e,t,r,g))}),te.waitFor(d)}wn(e){let t=1;return Bf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>$s(d,g)).filter((d,g,w)=>!g||0!==$s(d,w[g-1]));const o=[];o.push(e);for(const d of r){const g=$s(d,e),w=$s(d,t);if(0===g)o[0]=e.Ge();else if(g>0&&w<0)o.push(d),o.push(d.Ge());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2){if(this.Tn(o[d],o[d+1]))return[];u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Lf,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Lf,[]]))}return u}Tn(e,t){return $s(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lE)}getMinOffset(e,t){return te.mapArray(this.en(t),r=>this.nn(e,r).next(o=>o||tt())).next(lE)}}function Hv(n){return Pr(n,"collectionParents")}function Uf(n){return Pr(n,"indexEntries")}function Vf(n){return Pr(n,"indexConfiguration")}function Bf(n){return Pr(n,"indexState")}function lE(n){ot(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Yy(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new qi(e.readTime,e.documentKey,t)}const rb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fs(e,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ib(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const w=r.X({range:d},(A,O,$)=>(g++,$.delete()));u.push(w.next(()=>{ot(1===g)}));const b=[];for(const A of t.mutations){const O=Zw(e,A.key.path,t.batchId);u.push(o.delete(O)),b.push(A.key)}return te.waitFor(u).next(()=>b)}function Gv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}fs.DEFAULT_COLLECTION_PERCENTILE=10,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fs.DEFAULT=new fs(41943040,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fs.DISABLED=new fs(-1,0,0);class jf{constructor(e,t,r,o){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=o,this.En={}}static ue(e,t,r,o){ot(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new jf(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $u(e).X({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=rh(e),d=$u(e);return d.add({}).next(g=>{ot("number"==typeof g);const w=new Ga(g,t,r,o),b=function($,K,le){const Me=le.baseMutations.map(zt=>Jd($.oe,zt)),Ge=le.mutations.map(zt=>Jd($.oe,zt));return{userId:K,batchId:le.batchId,localWriteTimeMs:le.localWriteTime.toMillis(),baseMutations:Me,mutations:Ge}}(this.Tt,this.userId,w),A=[];let O=new _n(($,K)=>Rt($.canonicalString(),K.canonicalString()));for(const $ of o){const K=Zw(this.userId,$.key.path,g);O=O.add($.key.path.popLast()),A.push(d.put(b)),A.push(u.put(K,BD))}return O.forEach($=>{A.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.En[g]=w.keys()}),te.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return $u(e).get(t).next(r=>r?(ot(r.userId===this.userId),ft(this.Tt,r)):null)}An(e,t){return this.En[t]?te.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.En[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return $u(e).X({index:"userMutationsIndex",range:o},(d,g,w)=>{g.userId===this.userId&&(ot(g.batchId>=r),u=ft(this.Tt,g)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $u(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $u(e).W("userMutationsIndex",t).next(r=>r.map(o=>ft(this.Tt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return rh(e).X({range:o},(d,g,w)=>{const[b,A,O]=d,$=ca(A);if(b===this.userId&&t.path.isEqual($))return $u(e).get(O).next(K=>{if(!K)throw tt();ot(K.userId===this.userId),u.push(ft(this.Tt,K))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Rt);const o=[];return t.forEach(u=>{const d=Jg(this.userId,u.path),g=IDBKeyRange.lowerBound(d),w=rh(e).X({range:g},(b,A,O)=>{const[$,K,le]=b,Me=ca(K);$===this.userId&&u.path.isEqual(Me)?r=r.add(le):O.done()});o.push(w)}),te.waitFor(o).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Jg(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new _n(Rt);return rh(e).X({range:d},(w,b,A)=>{const[O,$,K]=w,le=ca($);O===this.userId&&r.isPrefixOf(le)?le.length===o&&(g=g.add(K)):A.done()}).next(()=>this.Rn(e,g))}Rn(e,t){const r=[],o=[];return t.forEach(u=>{o.push($u(e).get(u).next(d=>{if(null===d)throw tt();ot(d.userId===this.userId),r.push(ft(this.Tt,d))}))}),te.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return ib(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),te.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return rh(e).X({range:r},(u,d,g)=>{if(u[0]===this.userId){const w=ca(u[1]);o.push(w)}else g.done()}).next(()=>{ot(0===o.length)})})}containsKey(e,t){return $f(e,this.userId,t)}vn(e){return zv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $f(n,e,t){const r=Jg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return rh(n).X({range:u,Z:!0},(g,w,b)=>{const[A,O,$]=g;A===e&&O===o&&(d=!0),b.done()}).next(()=>d)}function $u(n){return Pr(n,"mutations")}function rh(n){return Pr(n,"documentMutations")}function zv(n){return Pr(n,"mutationQueues")}class _o{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new _o(0)}static Sn(){return new _o(-1)}}class sb{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new _o(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>ht.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Cn(e,o)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ih(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(ot(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ih(e).X((d,g)=>{const w=Of(g);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>te.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ih(e).X((r,o)=>{const u=Of(o);t(u)})}Dn(e){return dE(e).get("targetGlobalKey").next(t=>(ot(null!==t),t))}Cn(e,t){return dE(e).put("targetGlobalKey",t)}xn(e,t){return ih(e).put(nE(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$d(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ih(e).X({range:o,index:"queryTargetsIndex"},(d,g,w)=>{const b=Of(g);Bg(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Hu(e);return t.forEach(d=>{const g=Ai(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),te.waitFor(o)}removeMatchingKeys(e,t,r){const o=Hu(e);return te.forEach(t,u=>{const d=Ai(u.path);return te.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Hu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Hu(e);let u=jt();return o.X({range:r,Z:!0},(d,g,w)=>{const b=ca(d[1]),A=new $e(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Ai(t.path),o=IDBKeyRange.bound([r],[nw(r)],!1,!0);let u=0;return Hu(e).X({index:"documentTargetsIndex",Z:!0,range:o},([d,g],w,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}ie(e,t){return ih(e).get(t).next(r=>r?Of(r):null)}}function ih(n){return Pr(n,"targets")}function dE(n){return Pr(n,"targetGlobal")}function Hu(n){return Pr(n,"targetDocuments")}function hE([n,e],[t,r]){const o=Rt(n,t);return 0===o?Rt(e,r):o}class fE{constructor(e){this.kn=e,this.buffer=new _n(hE),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();hE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ob{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Fa(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Pu(r)}yield t.Bn(3e5)}))}}class ab{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(Wi.at);const r=new fE(t);return this.Ln.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.Ln.Un(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(rb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rb):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,o,u,d,g,w,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,d=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,g=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(b=Date.now(),Pg()<=ao.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(w-g)+`ms\n\tRemoved ${O} documents in `+(b-w)+`ms\nTotal Duration: ${b-A}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O})))}}class sh{constructor(e,t){this.db=e,this.garbageCollector=new ab(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,o)=>t(o))}addReference(e,t,r){return om(e,r)}removeReference(e,t,r){return om(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return om(e,t)}jn(e,t){return function(r,o){let u=!1;return zv(r).tt(d=>$f(r,d,o).next(g=>(g&&(u=!0),te.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Qn(e,(d,g)=>{if(g<=t){const w=this.jn(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,ht.min()),Hu(e).delete([0,Ai(d.path)])))});o.push(w)}}).next(()=>te.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return om(e,t)}Qn(e,t){const r=Hu(e);let o,u=Wi.at;return r.X({index:"documentTargetsIndex"},([d,g],{path:w,sequenceNumber:b})=>{0===d?(u!==Wi.at&&t(new $e(ca(o)),u),u=b,o=w):u=Wi.at}).next(()=>{u!==Wi.at&&t(new $e(ca(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function om(n,e){return Hu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ai(e.path),sequenceNumber:r}));var r}class qv{constructor(){this.changes=new $a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ub{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pl(e).put(r)}removeEntry(e,t,r){return pl(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Mf(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return pl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gl(t))},(o,u)=>{r=this.Wn(t,u)}).next(()=>r)}Hn(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return pl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gl(t))},(o,u)=>{r={document:this.Wn(t,u),size:Gv(u)}}).next(()=>r)}getEntries(e,t){let r=Si();return this.Jn(e,t,(o,u)=>{const d=this.Wn(o,u);r=r.insert(o,d)}).next(()=>r)}Yn(e,t){let r=Si(),o=new ur($e.comparator);return this.Jn(e,t,(u,d)=>{const g=this.Wn(u,d);r=r.insert(u,g),o=o.insert(u,Gv(d))}).next(()=>({documents:r,Zn:o}))}Jn(e,t,r){if(t.isEmpty())return te.resolve();let o=new _n(Zv);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(gl(o.first()),gl(o.last())),d=o.getIterator();let g=d.getNext();return pl(e).X({index:"documentKeyIndex",range:u},(w,b,A)=>{const O=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&Zv(g,O)<0;)r(g,null),g=d.getNext();g&&g.isEqual(O)&&(r(g,b),g=d.hasNext()?d.getNext():null),g?A.j(gl(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),Mf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pl(e).W(IDBKeyRange.bound(d,g,!0)).next(w=>{let b=Si();for(const A of w){const O=this.Wn($e.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);O.isFoundDocument()&&(zd(t,O)||o.has(O.key))&&(b=b.insert(O.key,O))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=Si();const d=pE(t,r),g=pE(t,qi.max());return pl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(w,b,A)=>{const O=this.Wn($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(O.key,O),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new cb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Kv(e).get("remoteDocumentGlobalKey").next(t=>(ot(!!t),t))}zn(e,t){return Kv(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function Lv(n,e){let t;if(e.document)t=Vw(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=eh(e.noDocument.readTime);t=Tn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=$e.fromSegments(e.unknownDocument.path),o=eh(e.unknownDocument.version);t=Tn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Qn(r[0],r[1]);return ht.fromTimestamp(o)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(ht.min()))return r}return Tn.newInvalidDocument(e)}}function Wv(n){return new ub(n)}class cb extends qv{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new $a(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new _n((u,d)=>Rt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.ts.get(u);if(t.push(this.Xn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const w=XD(this.Xn.Tt,d);o=o.add(u.path.popLast()),r+=Gv(w)-g.size,t.push(this.Xn.addEntry(e,u,w))}else if(r-=g.size,this.trackRemovals){const w=XD(this.Xn.Tt,d.convertToNoDocument(ht.min()));t.push(this.Xn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Xn.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:o})=>(o.forEach((u,d)=>{this.ts.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Kv(n){return Pr(n,"remoteDocumentGlobal")}function pl(n){return Pr(n,"remoteDocumentsV14")}function gl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pE(n,e){const t=e.documentKey.path.toArray();return[n,Mf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Zv(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Rt(t[u],r[u]),o)return o;return o=Rt(t.length,r.length),o||(o=Rt(t[t.length-2],r[r.length-2]),o||Rt(t[t.length-1],r[r.length-1]))}class gE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mE{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Wd(r.mutation,o,Zi.empty(),Qn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const o=sa();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Wg();return u.forEach((g,w)=>{d=d.insert(g,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=sa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=Si();const d=Cf(),g=Cf();return t.forEach((w,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof vo)?u=u.insert(b.key,b):void 0!==A?(d.set(b.key,A.mutation.getFieldMask()),Wd(A.mutation,b,A.mutation.getFieldMask(),Qn.now())):d.set(b.key,Zi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,A)=>d.set(b,A)),t.forEach((b,A)=>{var O;return g.set(b,new gE(A,null!==(O=d.get(b))&&void 0!==O?O:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Cf();let o=new ur((d,g)=>d-g),u=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let A=r.get(w)||Zi.empty();A=g.applyToLocalView(b,A),r.set(w,A);const O=(o.get(g.batchId)||jt()).add(w);o=o.insert(g.batchId,O)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const w=g.getNext(),b=w.key,A=w.value,O=Tv();A.forEach($=>{if(!u.has($)){const K=vv(t.get($),r.get($));null!==K&&O.set($,K),u=u.add($)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,O))}return te.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Gd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):te.resolve(sa());let g=-1,w=u;return d.next(b=>te.forEach(b,(A,O)=>(g<O.largestBatchId&&(g=O.largestBatchId),u.get(A)?te.resolve():this.remoteDocumentCache.getEntry(e,A).next($=>{w=w.insert(A,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,jt())).next(A=>({batchId:g,changes:xw(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let o=Wg();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Wg();return this.indexManager.getCollectionParents(e,o).next(d=>te.forEach(d,g=>{const w=(b=t,A=g.child(o),new Ba(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((A,O)=>{u=u.insert(A,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((g,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Tn.newInvalidDocument(b)))});let d=Wg();return u.forEach((g,w)=>{const b=o.get(g);void 0!==b&&Wd(b.mutation,w,Zi.empty(),Qn.now()),zd(t,w)&&(d=d.insert(g,w))}),d})}}class lb{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return te.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:hn(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:Uv(r.bundledQuery),readTime:hn(r.readTime)}),te.resolve();var r}}class db{constructor(){this.overlays=new ur($e.comparator),this.ss=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=sa();return te.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ce(e,t,u)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ss.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ss.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const o=sa(),u=t.length+1,d=new $e(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const w=g.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ur((b,A)=>b-A);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=sa(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const g=sa(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,A)=>g.set(b,A)),!(g.size()>=o)););return te.resolve(g)}ce(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.ss.get(o.largestBatchId).delete(r.key);this.ss.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Fv(t,r));let u=this.ss.get(t);void 0===u&&(u=jt(),this.ss.set(t,u)),this.ss.set(t,u.add(r.key))}}class Hf{constructor(){this.rs=new _n(Wr.os),this.us=new _n(Wr.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Wr(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Wr(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new $e(new Jt([])),r=new Wr(t,e),o=new Wr(t,e+1),u=[];return this.us.forEachInRange([r,o],d=>{this.ls(d),u.push(d.key)}),u}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new $e(new Jt([])),r=new Wr(t,e),o=new Wr(t,e+1);let u=jt();return this.us.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Wr(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Wr{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return $e.comparator(e.key,t.key)||Rt(e.gs,t.gs)}static cs(e,t){return Rt(e.gs,t.gs)||$e.comparator(e.key,t.key)}}class yE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new _n(Wr.os)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ys;this.ys++;const d=new Ga(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.ps=this.ps.add(new Wr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return te.resolve(d)}lookupMutationBatch(e,t){return te.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ts(t+1),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wr(t,0),o=new Wr(t,Number.POSITIVE_INFINITY),u=[];return this.ps.forEachInRange([r,o],d=>{const g=this.Is(d.gs);u.push(g)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Rt);return t.forEach(o=>{const u=new Wr(o,0),d=new Wr(o,Number.POSITIVE_INFINITY);this.ps.forEachInRange([u,d],g=>{r=r.add(g.gs)})}),te.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const d=new Wr(new $e(u),0);let g=new _n(Rt);return this.ps.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(w.gs)),!0)},d),te.resolve(this.Es(g))}Es(e){const t=[];return e.forEach(r=>{const o=this.Is(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ot(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return te.forEach(t.mutations,o=>{const u=new Wr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new Wr(t,0),o=this.ps.firstAfterOrEqual(r);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return te.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hb{constructor(e){this.Rs=e,this.docs=new ur($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Si();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Tn.newInvalidDocument(o))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Si();const d=t.path,g=new $e(d.child("")),w=this.docs.getIteratorFrom(g);for(;w.hasNext();){const{key:b,value:{document:A}}=w.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||Yy(Kc(A),r)<=0||(o.has(A.key)||zd(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,t,r,o){tt()}Ps(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fb(this)}getSize(e){return te.resolve(this.size)}}class fb extends qv{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Xn.addEntry(e,o)):this.Xn.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class pb{constructor(e){this.persistence=e,this.vs=new $a(t=>$d(t),Bg),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.bs=0,this.Vs=new Hf,this.targetCount=0,this.Ss=_o.Vn()}forEachTarget(e,t){return this.vs.forEach((r,o)=>t(o)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),te.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new _o(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.xn(t),te.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.vs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.vs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),te.waitFor(u).next(()=>o)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.Vs.containsKey(t))}}class vE{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Wi(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new pb(this),this.indexManager=new nb,this.remoteDocumentCache=new hb(r=>this.referenceDelegate.ks(r)),this.Tt=new QD(t),this.$s=new lb(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new db,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new yE(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new gb(this.Cs.next());return this.referenceDelegate.Ms(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Fs(e,t){return te.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class gb extends Zc{constructor(e){super(),this.currentSequenceNumber=e}}class am{constructor(e){this.persistence=e,this.Bs=new Hf,this.Ls=null}static qs(e){return new am(e)}get Us(){if(this.Ls)return this.Ls;throw tt()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),te.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(o=>this.Us.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Us.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Us,r=>{const o=$e.fromPath(r);return this.Ks(e,o).next(u=>{u||t.removeEntry(o,ht.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return te.or([()=>te.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class mb{constructor(e){this.Tt=e}F(e,t,r,o){const u=new Fg("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kw,{unique:!0}),g.createObjectStore("documentMutations"),_E(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=te.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),_E(e)),d=d.next(()=>function(g){const w=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,w){return w.store("mutations").W().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kw,{unique:!0});const A=w.store("mutations"),O=b.map($=>A.put($));return te.waitFor(O)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Gs(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(u)))),r<7&&o>=7&&(d=d.next(()=>this.js(u))),r<8&&o>=8&&(d=d.next(()=>this.zs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Ws(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const w=g.createObjectStore("documentOverlays",{keyPath:Qw});w.createIndex("collectionPathOverlayIndex",Xw,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",Jw,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const w=g.createObjectStore("remoteDocumentsV14",{keyPath:jD});w.createIndex("documentKeyIndex",$D),w.createIndex("collectionGroupIndex",HD)}(e)).next(()=>this.Hs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.Js(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:KD}).createIndex("sequenceNumberIndex",ZD,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:YD}).createIndex("documentKeyIndex",Yw,{unique:!1})}(e))),d}Qs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=Gv(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>te.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(g=>te.forEach(g,w=>{ot(w.userId===u.userId);const b=ft(this.Tt,w);return ib(e,u.userId,b).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((d,g)=>{const w=new Jt(d),b=[0,Ai(w)];u.push(t.get(b).next(A=>A?te.resolve():t.put({targetId:0,path:Ai(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>te.waitFor(u))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:WD});const r=t.store("collectionParents"),o=new $v,u=d=>{if(o.add(d)){const g=d.lastSegment(),w=d.popLast();return r.put({collectionId:g,parent:Ai(w)})}};return t.store("remoteDocuments").X({Z:!0},(d,g)=>{const w=new Jt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([d,g,w],b)=>{const A=ca(g);return u(A.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,o)=>{const u=Of(o),d=nE(this.Tt,u);return t.put(d)})}Hs(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,d)=>{const g=t.store("remoteDocumentsV14"),w=(b=d,b.document?new $e(Jt.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):tt()).path.toArray();var b;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(A))}).next(()=>te.waitFor(o))}Js(e,t){const r=t.store("mutations"),o=Wv(this.Tt),u=new vE(am.qs,this.Tt.oe);return r.W().next(d=>{const g=new Map;return d.forEach(w=>{var b;let A=null!==(b=g.get(w.userId))&&void 0!==b?b:jt();ft(this.Tt,w).keys().forEach(O=>A=A.add(O)),g.set(w.userId,A)}),te.forEach(g,(w,b)=>{const A=new Gr(b),O=Pf.ue(this.Tt,A),$=u.getIndexManager(A),K=jf.ue(A,this.Tt,$,u.referenceDelegate);return new mE(o,K,O,$).recalculateAndSaveOverlaysForDocumentKeys(new em(t,Wi.at),w).next()})})}}function _E(n){n.createObjectStore("targetDocuments",{keyPath:zD}).createIndex("documentTargetsIndex",qD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",GD,{unique:!0}),n.createObjectStore("targetGlobal")}const um="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cm{constructor(e,t,r,o,u,d,g,w,b,A,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=u,this.window=d,this.document=g,this.Zs=b,this.Xs=A,this.ti=O,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=$=>Promise.resolve(),!cm.C())throw new Ae(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sh(this,o),this.oi=t+"main",this.Tt=new QD(w),this.ui=new Dr(this.oi,this.ti,new mb(this.Tt)),this.Ns=new sb(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Wv(this.Tt),this.$s=new tm,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===A&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(re.FAILED_PRECONDITION,um);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Wi(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,pe.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Fa(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Gf(e).get("owner").next(t=>te.resolve(this.yi(t)))}pi(e){return lm(e).delete(this.clientId)}Ii(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Pr(r,"clientMetadata");return o.W().next(u=>{const d=e.Ei(u,18e5),g=u.filter(w=>-1===d.indexOf(w));return te.forEach(g,w=>o.delete(w.clientId)).next(()=>g)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?te.resolve(!0):Gf(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Ae(re.FAILED_PRECONDITION,um);return!1}}return!(!this.networkEnabled||!this.inForeground)||lm(e).W().next(r=>void 0===this.Ei(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new em(t,Wi.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>lm(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return jf.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cE(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Pf.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.ti)?tE:14===d?Pv:13===d?Nv:12===d?eE:11===d?Ov:void tt();var d;let g;return this.ui.runTransaction(e,o,u,w=>(g=new em(w,this.Cs?this.Cs.next():Wi.at),"readwrite-primary"===t?this._i(g).next(b=>!!b||this.wi(g)).next(b=>{if(!b)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Ae(re.FAILED_PRECONDITION,rw);return r(g)}).next(b=>this.gi(g).next(()=>b)):this.Di(g).next(()=>r(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Di(e){return Gf(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(re.FAILED_PRECONDITION,um)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gf(e).put("owner",t)}static C(){return Dr.C()}mi(e){const t=Gf(e);return t.get("owner").next(r=>this.yi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,sn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(e){}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gf(n){return Pr(n,"owner")}function lm(n){return Pr(n,"clientMetadata")}function dm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Yv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=o}static Ni(e,t){let r=jt(),o=jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Yv(e,t.fromCache,r,o)}}class wE{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Mi(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Fi(e,t))}Mi(e,t){if(dv(t))return te.resolve(null);let r=gi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=$g(t,null,"F"),r=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=jt(...u);return this.$i.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Bi(t,g);return this.Li(t,b,d,w.readTime)?this.Mi(e,$g(t,null,"F")):this.qi(e,b,t,w)}))})))}Oi(e,t,r,o){return dv(t)||o.isEqual(ht.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(u=>{const d=this.Bi(t,u);return this.Li(t,d,r,o)?this.Fi(e,t):(Pg()<=ao.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),pv(t)),this.qi(e,d,t,Zy(o,-1)))})}Bi(e,t){let r=new _n(gv(e));return t.forEach((o,u)=>{zd(e,u)&&(r=r.add(u))}),r}Li(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Fi(e,t){return Pg()<=ao.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",pv(t)),this.$i.getDocumentsMatchingQuery(e,t,qi.min())}qi(e,t,r,o){return this.$i.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class yb{constructor(e,t,r,o){this.persistence=e,this.Ui=t,this.Tt=o,this.Ki=new ur(Rt),this.Gi=new $a(u=>$d(u),Bg),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mE(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function hm(n,e,t,r){return new yb(n,e,t,r)}function fm(n,e){return pm.apply(this,arguments)}function pm(){return pm=(0,pe.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let w=jt();for(const b of o){d.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}for(const b of u){g.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(b=>({Wi:b,removedBatchIds:d,addedBatchIds:g}))})})}),pm.apply(this,arguments)}function Qv(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ji.newChangeBuffer({trackRemovals:!0});return function(d,g,w,b){const A=w.batch,O=A.keys();let $=te.resolve();return O.forEach(K=>{$=$.next(()=>b.getEntry(g,K)).next(le=>{const Me=w.docVersions.get(K);ot(null!==Me),le.version.compareTo(Me)<0&&(A.applyToRemoteDocument(le,w),le.isValidDocument()&&(le.setReadTime(w.commitVersion),b.addEntry(le)))})}),$.next(()=>d.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=jt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(g=g.add(d.batch.mutations[w].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function EE(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function vb(n,e){const t=ze(n),r=e.snapshotVersion;let o=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.ji.newChangeBuffer({trackRemovals:!0});o=t.Ki;const g=[];e.targetChanges.forEach((A,O)=>{const $=o.get(O);if(!$)return;g.push(t.Ns.removeMatchingKeys(u,A.removedDocuments,O).next(()=>t.Ns.addMatchingKeys(u,A.addedDocuments,O)));let K=$.withSequenceNumber(u.currentSequenceNumber);var le,Me,Ge;e.targetMismatches.has(O)?K=K.withResumeToken(zr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):A.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(A.resumeToken,r)),o=o.insert(O,K),Me=K,Ge=A,(0===(le=$).resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-le.snapshotVersion.toMicroseconds()>=3e8||Ge.addedDocuments.size+Ge.modifiedDocuments.size+Ge.removedDocuments.size>0)&&g.push(t.Ns.updateTargetData(u,K))});let w=Si(),b=jt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(gm(u,d,e.documentUpdates).next(A=>{w=A.Hi,b=A.Ji})),!r.isEqual(ht.min())){const A=t.Ns.getLastRemoteSnapshotVersion(u).next(O=>t.Ns.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return te.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ki=o,u))}function gm(n,e,t){let r=jt(),o=jt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Si();return t.forEach((g,w)=>{const b=u.get(g);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),w.isNoDocument()&&w.version.isEqual(ht.min())?(e.removeEntry(g,w.readTime),d=d.insert(g,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),d=d.insert(g,w)):Oe("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",w.version)}),{Hi:d,Ji:o}})}function _b(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oh(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ns.getTargetData(r,e).next(u=>u?(o=u,te.resolve(o)):t.Ns.allocateTargetId(r).next(d=>(o=new hs(e,d,0,r.currentSequenceNumber),t.Ns.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ki.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function ah(n,e,t){return mm.apply(this,arguments)}function mm(){return mm=(0,pe.Z)(function*(n,e,t){const r=ze(n),o=r.Ki.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Fa(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(o.target)}),mm.apply(this,arguments)}function ym(n,e,t){const r=ze(n);let o=ht.min(),u=jt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,w,b){const A=ze(g),O=A.Gi.get(b);return void 0!==O?te.resolve(A.Ki.get(O)):A.Ns.getTargetData(w,b)}(r,d,gi(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(d,g.targetId).next(w=>{u=w})}).next(()=>r.Ui.getDocumentsMatchingQuery(d,e,t?o:ht.min(),t?u:jt())).next(g=>(IE(r,ww(e),g),{documents:g,Yi:u})))}function Xv(n,e){const t=ze(n),r=ze(t.Ns),o=t.Ki.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ie(u,e).next(d=>d?d.target:null))}function wb(n,e){const t=ze(n),r=t.Qi.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ji.getAllFromCollectionGroup(o,e,Zy(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(IE(t,e,o),o))}function IE(n,e,t){let r=n.Qi.get(e)||ht.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Qi.set(e,r)}function Jv(){return Jv=(0,pe.Z)(function*(n,e,t,r){const o=ze(n);let u=jt(),d=Si();for(const b of t){const A=e.Zi(b.metadata.name);b.document&&(u=u.add(A));const O=e.Xi(b);O.setReadTime(e.tr(b.metadata.readTime)),d=d.insert(A,O)}const g=o.ji.newChangeBuffer({trackRemovals:!0}),w=yield oh(o,(b=r,gi(Hd(Jt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>gm(b,g,d).next(A=>(g.apply(b),A)).next(A=>o.Ns.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Ns.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.Hi,A.Ji)).next(()=>A.Hi)))}),Jv.apply(this,arguments)}function uh(n,e){return ml.apply(this,arguments)}function ml(){return ml=(0,pe.Z)(function*(n,e,t=jt()){const r=yield oh(n,gi(Uv(e.bundledQuery))),o=ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=hn(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.$s.saveNamedQuery(u,e);const g=r.withResumeToken(zr.EMPTY_BYTE_STRING,d);return o.Ki=o.Ki.insert(g.targetId,g),o.Ns.updateTargetData(u,g).next(()=>o.Ns.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Ns.addMatchingKeys(u,t,r.targetId)).next(()=>o.$s.saveNamedQuery(u,e))})}),ml.apply(this,arguments)}function DE(n,e){return`firestore_clients_${n}_${e}`}function Eb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _m(n,e){return`firestore_targets_${n}_${e}`}class wm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static er(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Ae(o.error.code,o.error.message))),d?new wm(e,t,o.state,u):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ae(r.error.code,r.error.message))),u?new zf(e,r.state,o):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Em{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Sf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=RD(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Em(e,u):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class e_{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new e_(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Im{constructor(){this.activeTargetIds=Sf()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dm{constructor(e,t,r,o,u){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new ur(Rt),this.started=!1,this.hr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.lr=DE(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Im),this._r=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Si();for(const o of t){if(o===e.rr)continue;const u=e.getItem(DE(e.persistenceKey,o));if(u){const d=Em.er(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const o=e.Ir(r);o&&e.Tr(o)}for(const o of e.hr)e.cr(o);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_m(this.persistenceKey,e));if(r){const o=zf.er(e,r);o&&(t=o.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_m(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Rr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const o=t.Sr(r.key);return t.Dr(o,null)}{const o=t.Cr(r.key,r.newValue);if(o)return t.Dr(o.clientId,o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const o=t.$r(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.gr){if(null!==r.newValue){const o=t.Ir(r.newValue);if(o)return t.Tr(o)}}else if(r.key===t.dr){const o=function(u){let d=Wi.at;if(null!=u)try{const g=JSON.parse(u);ot("number"==typeof g),d=g}catch(g){mr("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==Wi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.yr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const o=new wm(this.currentUser,e,t,r),u=Eb(this.persistenceKey,this.currentUser,e);this.setItem(u,o.nr())}Rr(e){const t=Eb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const o=_m(this.persistenceKey,e),u=new zf(e,t,r);this.setItem(o,u.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return Em.er(r,t)}Nr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return wm.er(new Gr(void 0!==r[2]?r[2]:null),o,t)}$r(e,t){const r=this.mr.exec(e),o=Number(r[1]);return zf.er(o,t)}Ir(e){return e_.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Er(this.ar),u=this.Er(r),d=[],g=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||g.push(w)}),this.syncEngine.qr(d,g).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=Sf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class bm{constructor(){this.Ur=new Im,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Im,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tm{Gr(e){}shutdown(){}}class ch{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cm=null;function Sm(){return null===Cm?Cm=268435456+Math.round(2147483648*Math.random()):Cm++,"0x"+Cm.toString(16)}const bE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ib{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const mi="WebChannelConnection";class t_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,o,u){const d=Sm(),g=this.fo(e,t);Oe("RestConnection",`Sending RPC '${e}' ${d}:`,g,r);const w={};return this._o(w,o,u),this.wo(e,g,w,r).then(b=>(Oe("RestConnection",`Received RPC '${e}' ${d}: `,b),b),b=>{throw ka("RestConnection",`RPC '${e}' ${d} failed with error: `,b,"url: ",g,"request:",r),b})}mo(e,t,r,o,u,d){return this.lo(e,t,r,o,u)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}fo(e,t){return`${this.co}/v1/${t}:${bE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,o){const u=Sm();return new Promise((d,g)=>{const w=new ea;w.setWithCredentials(!0),w.listenOnce(yD.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Mg.NO_ERROR:const A=w.getResponseJson();Oe(mi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),d(A);break;case Mg.TIMEOUT:Oe(mi,`RPC '${e}' ${u} timed out`),g(new Ae(re.DEADLINE_EXCEEDED,"Request time out"));break;case Mg.HTTP_ERROR:const O=w.getStatus();if(Oe(mi,`RPC '${e}' ${u} failed with status:`,O,"response text:",w.getResponseText()),O>0){let $=w.getResponseJson();Array.isArray($)&&($=$[0]);const K=null==$?void 0:$.error;if(K&&K.status&&K.message){const le=function(Me){const Ge=Me.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Ge)>=0?Ge:re.UNKNOWN}(K.status);g(new Ae(le,K.message))}else g(new Ae(re.UNKNOWN,"Server responded with status "+w.getStatus()))}else g(new Ae(re.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Oe(mi,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Oe(mi,`RPC '${e}' ${u} sending request:`,o),w.send(t,"POST",b,r,15)})}yo(e,t,r){const o=Sm(),u=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Q0(),g=mD(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(w.xmlHttpFactory=new X0({})),this._o(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const b=u.join("");Oe(mi,`Creating RPC '${e}' stream ${o}: ${b}`,w);const A=d.createWebChannel(b,w);let O=!1,$=!1;const K=new Ib({Yr:Me=>{$?Oe(mi,`Not sending because RPC '${e}' stream ${o} is closed:`,Me):(O||(Oe(mi,`Opening RPC '${e}' stream ${o} transport.`),A.open(),O=!0),Oe(mi,`RPC '${e}' stream ${o} sending:`,Me),A.send(Me))},Zr:()=>A.close()}),le=(Me,Ge,zt)=>{Me.listen(Ge,nn=>{try{zt(nn)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return le(A,Og.EventType.OPEN,()=>{$||Oe(mi,`RPC '${e}' stream ${o} transport opened.`)}),le(A,Og.EventType.CLOSE,()=>{$||($=!0,Oe(mi,`RPC '${e}' stream ${o} transport closed`),K.oo())}),le(A,Og.EventType.ERROR,Me=>{$||($=!0,ka(mi,`RPC '${e}' stream ${o} transport errored:`,Me),K.oo(new Ae(re.UNAVAILABLE,"The operation could not be completed")))}),le(A,Og.EventType.MESSAGE,Me=>{var Ge;if(!$){const zt=Me.data[0];ot(!!zt);const nn=zt,Ft=nn.error||(null===(Ge=nn[0])||void 0===Ge?void 0:Ge.error);if(Ft){Oe(mi,`RPC '${e}' stream ${o} received error:`,Ft);const $t=Ft.status;let Vt=function(yi){const xh=yr[yi];if(void 0!==xh)return Dv(xh)}($t),Zt=Ft.message;void 0===Vt&&(Vt=re.INTERNAL,Zt="Unknown error status: "+$t+" with message "+Ft.message),$=!0,K.oo(new Ae(Vt,Zt)),A.close()}else Oe(mi,`RPC '${e}' stream ${o} received:`,zt),K.uo(zt)}}),le(g,vD.STAT_EVENT,Me=>{Me.stat===Gy.PROXY?Oe(mi,`RPC '${e}' stream ${o} detected buffering proxy`):Me.stat===Gy.NOPROXY&&Oe(mi,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{K.ro()},0),K}}function TE(){return"undefined"!=typeof window?window:null}function n_(){return"undefined"!=typeof document?document:null}function qf(n){return new oa(n,!0)}class r_{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=o,this.To=u,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,o,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class yl{constructor(e,t,r,o,u,d,g,w){this.Ys=e,this.So=r,this.Do=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=w,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new r_(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,pe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===re.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Co===t&&this.jo(r,o)},r=>{e(()=>{const o=new Ae(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(o)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(o=>{r(()=>this.zo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.ko.vo((0,pe.Z)(function*(){e.state=0,e.start()}))}zo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CE extends yl{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.Tt=u}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function UD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.yt?(ot(void 0===b||"string"==typeof b),zr.fromBase64String(b||"")):(ot(void 0===b||b instanceof Uint8Array),zr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(w){const b=void 0===w.code?re.UNKNOWN:Dv(w.code);return new Ae(b,w.message||"")}(d);t=new Mw(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=ua(n,r.document.name),u=hn(r.document.updateTime),d=r.document.createTime?hn(r.document.createTime):ht.min(),g=new si({mapValue:{fields:r.document.fields}}),w=Tn.newFoundDocument(o,u,d,g);t=new xf(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=ua(n,r.document),u=r.readTime?hn(r.readTime):ht.min(),d=Tn.newNoDocument(o,u);t=new xf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ua(n,r.document);t=new xf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new Ev(r.count||0);t=new cl(r.targetId,u)}}var w;return t}(this.Tt,e),r=function(o){if(!("targetChange"in o))return ht.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ht.min():u.readTime?hn(u.readTime):ht.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=Rf(this.Tt),t.addTarget=function(o,u){let d;const g=u.target;return d=cv(g)?{documents:jw(o,g)}:{query:Qg(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Lw(o,u.resumeToken):u.snapshotVersion.compareTo(ht.min())>0&&(d.readTime=Yd(o,u.snapshotVersion.toTimestamp())),d}(this.Tt,e);const r=function $w(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=Rf(this.Tt),t.removeTarget=e,this.qo(t)}}class lh extends yl{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.Tt=u,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function Yg(n,e){return n&&n.length>0?(ot(void 0!==e),n.map(t=>function(r,o){let u=hn(r.updateTime?r.updateTime:o);return u.isEqual(ht.min())&&(u=hn(o)),new bw(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.eu(r,t)}return ot(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Rf(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jd(this.Tt,r))};this.qo(t)}}class XT extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=o,this.iu=!1}ru(){if(this.iu)throw new Ae(re.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.lo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(re.UNKNOWN,o.toString())})}mo(e,t,r,o){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.mo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(re.UNKNOWN,u.toString())})}terminate(){this.iu=!0}}class JT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(mr(t),this.cu=!1):Oe("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class AE{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=u,this.yu.Gr(g=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;za(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(b){const A=ze(b);A.mu.add(4),yield Gu(A),A.pu.set("Unknown"),A.mu.delete(4),yield Am(A)}),function(b){return w.apply(this,arguments)})(d))}))}),this.pu=new JT(r,o)}}function Am(n){return xm.apply(this,arguments)}function xm(){return xm=(0,pe.Z)(function*(n){if(za(n))for(const e of n.gu)yield e(!0)}),xm.apply(this,arguments)}function Gu(n){return s_.apply(this,arguments)}function s_(){return s_=(0,pe.Z)(function*(n){for(const e of n.gu)yield e(!1)}),s_.apply(this,arguments)}function Rm(n,e){const t=ze(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),u_(t)?a_(t):gh(t).Mo()&&o_(t,e))}function Wf(n,e){const t=ze(n),r=gh(t);t.wu.delete(e),r.Mo()&&xE(t,e),0===t.wu.size&&(r.Mo()?r.Bo():za(t)&&t.pu.set("Unknown"))}function o_(n,e){n.Iu.Ot(e.targetId),gh(n).Jo(e)}function xE(n,e){n.Iu.Ot(e),gh(n).Yo(e)}function a_(n){n.Iu=new Nw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),gh(n).start(),n.pu.au()}function u_(n){return za(n)&&!gh(n).$o()&&n.wu.size>0}function za(n){return 0===ze(n).mu.size}function RE(n){n.Iu=void 0}function Db(n){return vl.apply(this,arguments)}function vl(){return vl=(0,pe.Z)(function*(n){n.wu.forEach((e,t)=>{o_(n,e)})}),vl.apply(this,arguments)}function ME(n,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,pe.Z)(function*(n,e){RE(n),u_(n)?(n.pu.fu(e),a_(n)):n.pu.set("Unknown")}),Mm.apply(this,arguments)}function OE(n,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,pe.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof Mw&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.wu.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.wu.delete(g),o.Iu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kf(n,r)}else if(e instanceof xf?n.Iu.Qt(e):e instanceof cl?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(ht.min()))try{const r=yield EE(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.Iu.ee(u);return d.targetChanges.forEach((g,w)=>{if(g.resumeToken.approximateByteSize()>0){const b=o.wu.get(w);b&&o.wu.set(w,b.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const w=o.wu.get(g);if(!w)return;o.wu.set(g,w.withResumeToken(zr.EMPTY_BYTE_STRING,w.snapshotVersion)),xE(o,g);const b=new hs(w.target,g,1,w.sequenceNumber);o_(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield Kf(n,r)}var r}),Om.apply(this,arguments)}function Kf(n,e,t){return c_.apply(this,arguments)}function c_(){return c_=(0,pe.Z)(function*(n,e,t){if(!Fa(e))throw e;n.mu.add(1),yield Gu(n),n.pu.set("Offline"),t||(t=()=>EE(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield Am(n)}))}),c_.apply(this,arguments)}function NE(n,e){return e().catch(t=>Kf(n,t,e))}function dh(n){return l_.apply(this,arguments)}function l_(){return l_=(0,pe.Z)(function*(n){const e=ze(n),t=qa(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;bb(e);)try{const o=yield _b(e.localStore,r);if(null===o){0===e._u.length&&t.Bo();break}r=o.batchId,Tb(e,o)}catch(o){yield Kf(e,o)}PE(e)&&hh(e)}),l_.apply(this,arguments)}function bb(n){return za(n)&&n._u.length<10}function Tb(n,e){n._u.push(e);const t=qa(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function PE(n){return za(n)&&!qa(n).$o()&&n._u.length>0}function hh(n){qa(n).start()}function Cb(n){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,pe.Z)(function*(n){qa(n).su()}),Zf.apply(this,arguments)}function la(n){return d_.apply(this,arguments)}function d_(){return d_=(0,pe.Z)(function*(n){const e=qa(n);for(const t of n._u)e.tu(t.mutations)}),d_.apply(this,arguments)}function h_(n,e,t){return _l.apply(this,arguments)}function _l(){return _l=(0,pe.Z)(function*(n,e,t){const r=n._u.shift(),o=kv.from(r,e,t);yield NE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield dh(n)}),_l.apply(this,arguments)}function Sb(n,e){return f_.apply(this,arguments)}function f_(){return f_=(0,pe.Z)(function*(n,e){var t;e&&qa(n).Xo&&(yield(t=(0,pe.Z)(function*(r,o){if(Iv(u=o.code)&&u!==re.ABORTED){const d=r._u.shift();qa(r).Fo(),yield NE(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield dh(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),PE(n)&&hh(n)}),f_.apply(this,arguments)}function kE(n,e){return fh.apply(this,arguments)}function fh(){return fh=(0,pe.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=za(t);t.mu.add(3),yield Gu(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield Am(t)}),fh.apply(this,arguments)}function ph(n,e){return p_.apply(this,arguments)}function p_(){return p_=(0,pe.Z)(function*(n,e){const t=ze(n);e?(t.mu.delete(2),yield Am(t)):e||(t.mu.add(2),yield Gu(t),t.pu.set("Unknown"))}),p_.apply(this,arguments)}function gh(n){return n.Tu||(n.Tu=function(e,t,r){const o=ze(e);return o.ru(),new CE(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:Db.bind(null,n),no:ME.bind(null,n),Ho:OE.bind(null,n)}),n.gu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Tu.Fo(),u_(n)?a_(n):n.pu.set("Unknown")):(yield n.Tu.stop(),RE(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function qa(n){return n.Eu||(n.Eu=function(e,t,r){const o=ze(e);return o.ru(),new lh(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:Cb.bind(null,n),no:Sb.bind(null,n),nu:la.bind(null,n),eu:h_.bind(null,n)}),n.gu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Eu.Fo(),yield dh(n)):(yield n.Eu.stop(),n._u.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class Nm{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new Nm(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zu(n,e){if(mr("AsyncQueue",`${e}: ${n}`),Fa(n))return new Ae(re.UNAVAILABLE,`${e}: ${n}`);throw n}class wl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=Wg(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new wl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class FE{constructor(){this.Au=new ur($e.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):tt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class mh{constructor(e,t,r,o,u,d,g,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new mh(e,t,wl.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class eC{constructor(){this.Pu=void 0,this.listeners=[]}}class g_{constructor(){this.queries=new $a(e=>_w(e),If),this.onlineState="Unknown",this.vu=new Set}}function Yf(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,pe.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new eC),o)try{u.Pu=yield t.onListen(r)}catch(d){const g=zu(d,`Initialization of query '${pv(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Pu&&e.Vu(u.Pu)&&m_(t)}),Pm.apply(this,arguments)}function Qf(n,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,pe.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Xf.apply(this,arguments)}function Ab(n,e){const t=ze(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Vu(o)&&(r=!0);d.Pu=o}}r&&m_(t)}function xb(n,e,t){const r=ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function m_(n){n.vu.forEach(e=>{e.next()})}class y_{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new mh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class LE{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class km{constructor(e){this.Tt=e}Zi(e){return ua(this.Tt,e)}Xi(e){return e.metadata.exists?Vw(this.Tt,e.document,!1):Tn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return hn(e)}}class UE{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VE(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=Jt.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new km(this.Tt);for(const o of e)if(o.metadata.queries){const u=r.Zi(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||jt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function vm(n,e,t,r){return Jv.apply(this,arguments)}(e.localStore,new km(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const o of e.queries)yield uh(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function VE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class v_{constructor(e){this.key=e}}class __{constructor(e){this.key=e}}class BE{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=jt(),this.mutatedKeys=jt(),this.ju=gv(e),this.zu=new wl(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new FE,o=t?t.zu:this.zu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,O)=>{const $=o.get(A),K=zd(this.query,O)?O:null,le=!!$&&this.mutatedKeys.has($.key),Me=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Ge=!1;$&&K?$.data.isEqual(K.data)?le!==Me&&(r.track({type:3,doc:K}),Ge=!0):this.Yu($,K)||(r.track({type:2,doc:K}),Ge=!0,(w&&this.ju(K,w)>0||b&&this.ju(K,b)<0)&&(g=!0)):!$&&K?(r.track({type:0,doc:K}),Ge=!0):$&&!K&&(r.track({type:1,doc:$}),Ge=!0,(w||b)&&(g=!0)),Ge&&(K?(d=d.add(K),u=Me?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{zu:d,Ju:r,Li:g,mutatedKeys:u}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const u=e.Ju.Ru();u.sort((b,A)=>function(O,$){const K=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return K(O)-K($)}(b.type,A.type)||this.ju(b.doc,A.doc)),this.Zu(r);const d=t?this.Xu():[],g=0===this.Qu.size&&this.current?1:0,w=g!==this.Gu;return this.Gu=g,0!==u.length||w?{snapshot:new mh(this.query,e.zu,o,u,e.mutatedKeys,0===g,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:d}:{tc:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new FE,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=jt(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new __(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new v_(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=jt();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return mh.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class jE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $E{constructor(e){this.key=e,this.ic=!1}}class Rb{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.rc={},this.oc=new $a(g=>_w(g),If),this.uc=new Map,this.cc=new Set,this.ac=new ur($e.comparator),this.hc=new Map,this.lc=new Hf,this.fc={},this.dc=new Map,this._c=_o.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function HE(n,e){return w_.apply(this,arguments)}function w_(){return w_=(0,pe.Z)(function*(n,e){const t=Hm(n);let r,o;const u=t.oc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.sc();else{const d=yield oh(t.localStore,gi(e));t.isPrimaryClient&&Rm(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield oi(t,e,r,"current"===g,d.resumeToken)}return o}),w_.apply(this,arguments)}function oi(n,e,t,r,o){return qu.apply(this,arguments)}function qu(){return qu=(0,pe.Z)(function*(n,e,t,r,o){n.mc=(O,$,K)=>{return(le=(0,pe.Z)(function*(Me,Ge,zt,nn){let Ft=Ge.view.Hu(zt);Ft.Li&&(Ft=yield ym(Me.localStore,Ge.query,!1).then(({documents:Zt})=>Ge.view.Hu(Zt,Ft)));const $t=nn&&nn.targetChanges.get(Ge.targetId),Vt=Ge.view.applyChanges(Ft,Me.isPrimaryClient,$t);return vh(Me,Ge.targetId,Vt.tc),Vt.snapshot}),function(Me,Ge,zt,nn){return le.apply(this,arguments)})(n,O,$,K);var le};const u=yield ym(n.localStore,e,!0),d=new BE(e,u.Yi),g=d.Hu(u.documents),w=Zd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=d.applyChanges(g,n.isPrimaryClient,w);vh(n,t,b.tc);const A=new jE(e,t,d);return n.oc.set(e,A),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),b.snapshot}),qu.apply(this,arguments)}function Mb(n,e){return E_.apply(this,arguments)}function E_(){return E_=(0,pe.Z)(function*(n,e){const t=ze(n),r=t.oc.get(e),o=t.uc.get(r.targetId);if(o.length>1)return t.uc.set(r.targetId,o.filter(u=>!If(u,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ah(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Wf(t.remoteStore,r.targetId),yh(t,r.targetId)}).catch(Pu))):(yh(t,r.targetId),yield ah(t.localStore,r.targetId,!0))}),E_.apply(this,arguments)}function El(){return El=(0,pe.Z)(function*(n,e,t){const r=nI(n);try{const o=yield function(u,d){const g=ze(u),w=Qn.now(),b=d.reduce(($,K)=>$.add(K.key),jt());let A,O;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let K=Si(),le=jt();return g.ji.getEntries($,b).next(Me=>{K=Me,K.forEach((Ge,zt)=>{zt.isValidDocument()||(le=le.add(Ge))})}).next(()=>g.localDocuments.getOverlayedDocuments($,K)).next(Me=>{A=Me;const Ge=[];for(const zt of d){const nn=FD(zt,A.get(zt.key).overlayedDocument);null!=nn&&Ge.push(new vo(zt.key,nn,vw(nn.value.mapValue),Gn.exists(!0)))}return g.mutationQueue.addMutationBatch($,w,Ge,d)}).next(Me=>{O=Me;const Ge=Me.applyToLocalDocumentSet(A,le);return g.documentOverlayCache.saveOverlays($,Me.batchId,Ge)})}).then(()=>({batchId:O.batchId,changes:xw(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let w=u.fc[u.currentUser.toKey()];w||(w=new ur(Rt)),w=w.insert(d,g),u.fc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield wo(r,o.changes),yield dh(r.remoteStore)}catch(o){const u=zu(o,"Failed to persist write");t.reject(u)}}),El.apply(this,arguments)}function GE(n,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,pe.Z)(function*(n,e){const t=ze(n);try{const r=yield vb(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.hc.get(u);d&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ic=!0:o.modifiedDocuments.size>0?ot(d.ic):o.removedDocuments.size>0&&(ot(d.ic),d.ic=!1))}),yield wo(t,r,e)}catch(r){yield Pu(r)}}),Jf.apply(this,arguments)}function zE(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.oc.forEach((u,d)=>{const g=d.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=ze(u);g.onlineState=d;let w=!1;g.queries.forEach((b,A)=>{for(const O of A.listeners)O.bu(d)&&(w=!0)}),w&&m_(g)}(r.eventManager,e),o.length&&r.rc.Ho(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qE(n,e,t){return I_.apply(this,arguments)}function I_(){return I_=(0,pe.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.hc.get(e),u=o&&o.key;if(u){let d=new ur($e.comparator);d=d.insert(u,Tn.newNoDocument(u,ht.min()));const g=jt().add(u),w=new Af(ht.min(),new Map,new _n(Rt),d,g);yield GE(r,w),r.ac=r.ac.remove(u),r.hc.delete(e),b_(r)}else yield ah(r.localStore,e,!1).then(()=>yh(r,e,t)).catch(Pu)}),I_.apply(this,arguments)}function Ob(n,e){return ep.apply(this,arguments)}function ep(){return ep=(0,pe.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const o=yield Qv(t.localStore,e);Um(t,r,null),KE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wo(t,o)}catch(o){yield Pu(o)}}),ep.apply(this,arguments)}function WE(n,e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,pe.Z)(function*(n,e,t){const r=ze(n);try{const o=yield function(u,d){const g=ze(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return g.mutationQueue.lookupMutationBatch(w,d).next(A=>(ot(null!==A),b=A.keys(),g.mutationQueue.removeMutationBatch(w,A))).next(()=>g.mutationQueue.performConsistencyCheck(w)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(w,b,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>g.localDocuments.getDocuments(w,b))})}(r.localStore,e);Um(r,e,t),KE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wo(r,o)}catch(o){yield Pu(o)}}),Fm.apply(this,arguments)}function tp(){return tp=(0,pe.Z)(function*(n,e){const t=ze(n);za(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.dc.get(r)||[];o.push(e),t.dc.set(r,o)}catch(r){const o=zu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),tp.apply(this,arguments)}function KE(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function Um(n,e,t){const r=ze(n);let o=r.fc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.fc[r.currentUser.toKey()]=o}}function yh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||D_(n,r)})}function D_(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(Wf(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),b_(n))}function vh(n,e,t){for(const r of t)r instanceof v_?(n.lc.addReference(r.key,e),ZE(n,r)):r instanceof __?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||D_(n,r.key)):tt()}function ZE(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.cc.add(r),b_(n))}function b_(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new $e(Jt.fromString(e)),r=n._c.next();n.hc.set(r,new $E(t)),n.ac=n.ac.insert(t,r),Rm(n.remoteStore,new hs(gi(Hd(t.path)),r,2,Wi.at))}}function wo(n,e,t){return np.apply(this,arguments)}function np(){return np=(0,pe.Z)(function*(n,e,t){const r=ze(n),o=[],u=[],d=[];var g;r.oc.isEmpty()||(r.oc.forEach((g,w)=>{d.push(r.mc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,(null==b?void 0:b.fromCache)?"not-current":"current"),b){o.push(b);const A=Yv.Ni(w.targetId,b);u.push(A)}}))}),yield Promise.all(d),r.rc.Ho(o),yield(g=(0,pe.Z)(function*(w,b){const A=ze(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>te.forEach(b,$=>te.forEach($.Ci,K=>A.persistence.referenceDelegate.addReference(O,$.targetId,K)).next(()=>te.forEach($.xi,K=>A.persistence.referenceDelegate.removeReference(O,$.targetId,K)))))}catch(O){if(!Fa(O))throw O;Oe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of b){const $=O.targetId;if(!O.fromCache){const K=A.Ki.get($),Me=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);A.Ki=A.Ki.insert($,Me)}}}),function(w,b){return g.apply(this,arguments)})(r.localStore,u))}),np.apply(this,arguments)}function nC(n,e){return T_.apply(this,arguments)}function T_(){return T_=(0,pe.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield fm(t.localStore,e);t.currentUser=e,(o=t).dc.forEach(d=>{d.forEach(g=>{g.reject(new Ae(re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wo(t,r.Wi)}var o}),T_.apply(this,arguments)}function Nb(n,e){const t=ze(n),r=t.hc.get(e);if(r&&r.ic)return jt().add(r.key);{let o=jt();const u=t.uc.get(e);if(!u)return o;for(const d of u){const g=t.oc.get(d);o=o.unionWith(g.view.Wu)}return o}}function YE(n,e){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,pe.Z)(function*(n,e){const t=ze(n),r=yield ym(t.localStore,e.query,!0),o=e.view.nc(r);return t.isPrimaryClient&&vh(t,e.targetId,o.tc),o}),Vm.apply(this,arguments)}function Pb(n,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,pe.Z)(function*(n,e){const t=ze(n);return wb(t.localStore,e).then(r=>wo(t,r))}),Bm.apply(this,arguments)}function QE(n,e,t,r){return C_.apply(this,arguments)}function C_(){return C_=(0,pe.Z)(function*(n,e,t,r){const o=ze(n),u=yield function(d,g){const w=ze(d),b=ze(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.An(A,g).next(O=>O?w.localDocuments.getDocuments(A,O):te.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield dh(o.remoteStore):"acknowledged"===t||"rejected"===t?(Um(o,e,r||null),KE(o,e),g=e,ze(ze(o.localStore).mutationQueue).Pn(g)):tt(),yield wo(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),C_.apply(this,arguments)}function jm(){return jm=(0,pe.Z)(function*(n,e){const t=ze(n);if(Hm(t),nI(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield XE(t,r.toArray());t.wc=!0,yield ph(t.remoteStore,!0);for(const u of o)Rm(t.remoteStore,u)}else if(!1===e&&!1!==t.wc){const r=[];let o=Promise.resolve();t.uc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(yh(t,d),ah(t.localStore,d,!0))),Wf(t.remoteStore,d)}),yield o,yield XE(t,r),function(u){const d=ze(u);d.hc.forEach((g,w)=>{Wf(d.remoteStore,w)}),d.lc._s(),d.hc=new Map,d.ac=new ur($e.comparator)}(t),t.wc=!1,yield ph(t.remoteStore,!1)}}),jm.apply(this,arguments)}function XE(n,e,t){return $m.apply(this,arguments)}function $m(){return $m=(0,pe.Z)(function*(n,e,t){const r=ze(n),o=[],u=[];for(const d of e){let g;const w=r.uc.get(d);if(w&&0!==w.length){g=yield oh(r.localStore,gi(w[0]));for(const b of w){const A=r.oc.get(b),O=yield YE(r,A);O.snapshot&&u.push(O.snapshot)}}else{const b=yield Xv(r.localStore,d);g=yield oh(r.localStore,b),yield oi(r,S_(b),d,!1,g.resumeToken)}o.push(g)}return r.rc.Ho(u),o}),$m.apply(this,arguments)}function S_(n){return il(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function JE(n){const e=ze(n);return ze(ze(e.localStore).persistence).Si()}function eI(n,e,t,r){return A_.apply(this,arguments)}function A_(){return A_=(0,pe.Z)(function*(n,e,t,r){const o=ze(n);if(o.wc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.uc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield wb(o.localStore,ww(u[0])),g=Af.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,zr.EMPTY_BYTE_STRING);yield wo(o,d,g);break}case"rejected":yield ah(o.localStore,e,!0),yh(o,e,r);break;default:tt()}}),A_.apply(this,arguments)}function Fb(n,e,t){return tI.apply(this,arguments)}function tI(){return tI=(0,pe.Z)(function*(n,e,t){const r=Hm(n);if(r.wc){for(const o of e){if(r.uc.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield Xv(r.localStore,o),d=yield oh(r.localStore,u);yield oi(r,S_(u),d.targetId,!1,d.resumeToken),Rm(r.remoteStore,d)}for(const o of t)r.uc.has(o)&&(yield ah(r.localStore,o,!1).then(()=>{Wf(r.remoteStore,o),yh(r,o)}).catch(Pu))}}),tI.apply(this,arguments)}function Hm(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qE.bind(null,e),e.rc.Ho=Ab.bind(null,e.eventManager),e.rc.gc=xb.bind(null,e.eventManager),e}function nI(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ob.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WE.bind(null,e),e}class Lb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.Tt=qf(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return hm(this.persistence,new wE,e.initialUser,this.Tt)}Tc(e){return new vE(am.qs,this.Tt)}Ic(e){return new bm}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ub extends Lb{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield nI(r.Pc.syncEngine),yield dh(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return hm(this.persistence,new wE,e.initialUser,this.Tt)}Ac(e,t){return new ob(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new CD(t,this.persistence);return new TD(e.asyncQueue,r)}Tc(e){const t=dm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fs.withCacheSize(this.cacheSizeBytes):fs.DEFAULT;return new cm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,TE(),n_(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new bm}}class iC extends Ub{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const o=r.Pc.syncEngine;r.sharedClientState instanceof Dm&&(r.sharedClientState.syncEngine={Br:QE.bind(null,o),Lr:eI.bind(null,o),qr:Fb.bind(null,o),Si:JE.bind(null,o),Fr:Pb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var u=(0,pe.Z)(function*(d){yield function kb(n,e){return jm.apply(this,arguments)}(r.Pc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}Ic(e){const t=TE();if(!Dm.C(t))throw new Ae(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rI{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>zE(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=nC.bind(null,r.syncEngine),yield ph(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new g_}createDatastore(e){const t=qf(e.databaseInfo.databaseId),r=new t_(e.databaseInfo);return new XT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>zE(this.syncEngine,g,0),d=ch.C()?new ch:new Tm,new AE(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,w,b){const A=new Rb(r,o,u,d,g,w);return b&&(A.wc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=ze(t);Oe("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield Gu(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Vb(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class x_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Gm{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Ir,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),o=Number(r);isNaN(o)&&e.xc(`length string (${r}) is not valid number`);const u=yield e.Nc(o);return new LE(JSON.parse(u),t.length+o)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,pe.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,pe.Z)(function*(u,d){const g=ze(u),w=Rf(g.Tt)+"/documents",b={documents:d.map(K=>Qd(g.Tt,K))},A=yield g.mo("BatchGetDocuments",w,b,d.length),O=new Map;A.forEach(K=>{const le=function Bw(n,e){return"found"in e?function(t,r){ot(!!r.found);const o=ua(t,r.found.name),u=hn(r.found.updateTime),d=r.found.createTime?hn(r.found.createTime):ht.min(),g=new si({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(o,u,d,g)}(n,e):"missing"in e?function(t,r){ot(!!r.missing),ot(!!r.readTime);const o=ua(t,r.missing),u=hn(r.readTime);return Tn.newNoDocument(o,u)}(n,e):tt()}(g.Tt,K);O.set(le.key.toString(),le)});const $=[];return d.forEach(K=>{const le=O.get(K.toString());ot(!!le),$.push(le)}),$}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new qg(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(o,u){const d=ze(o),g=Rf(d.Tt)+"/documents",w={writes:u.map(b=>Jd(d.Tt,b))};yield d.lo("Commit",g,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?Gn.exists(!1):Gn.updateTime(t):Gn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new Ae(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gn.updateTime(t)}return Gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iI{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Mc=r.maxAttempts,this.ko=new r_(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,pe.Z)(function*(){const t=new sC(e.datastore),r=e.Fc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Bc(u)}))}).catch(o=>{e.Bc(o)})}))}Fc(e){try{const t=this.updateFunction(e);return!Od(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Iv(t)}return!1}}class R_{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Gr.UNAUTHENTICATED,this.clientId=ta.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,pe.Z)(function*(g){Oe("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=zu(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function M_(n,e){return zm.apply(this,arguments)}function zm(){return zm=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,pe.Z)(function*(u){r.isEqual(u)||(yield fm(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),zm.apply(this,arguments)}function Bb(n,e){return rp.apply(this,arguments)}function rp(){return rp=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qm(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>kE(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>kE(e.remoteStore,u)),n.onlineComponents=e}),rp.apply(this,arguments)}function qm(n){return O_.apply(this,arguments)}function O_(){return O_=(0,pe.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield M_(n,new Lb)),n.offlineComponents}),O_.apply(this,arguments)}function ip(n){return sI.apply(this,arguments)}function sI(){return sI=(0,pe.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield Bb(n,new rI)),n.onlineComponents}),sI.apply(this,arguments)}function oI(n){return qm(n).then(e=>e.persistence)}function Wm(n){return qm(n).then(e=>e.localStore)}function sp(n){return ip(n).then(e=>e.remoteStore)}function N_(n){return ip(n).then(e=>e.syncEngine)}function op(n){return aI.apply(this,arguments)}function aI(){return aI=(0,pe.Z)(function*(n){const e=yield ip(n),t=e.eventManager;return t.onListen=HE.bind(null,e.syncEngine),t.onUnlisten=Mb.bind(null,e.syncEngine),t}),aI.apply(this,arguments)}function zb(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,g,w){const b=new x_({next:O=>{u.enqueueAndForget(()=>Qf(o,A));const $=O.docs.has(d);!$&&O.fromCache?w.reject(new Ae(re.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&O.fromCache&&g&&"server"===g.source?w.reject(new Ae(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),A=new y_(Hd(d.path),b,{includeMetadataChanges:!0,$u:!0});return Yf(o,A)}(yield op(n),n.asyncQueue,e,t,r)})),r.promise}function Km(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,g,w){const b=new x_({next:O=>{u.enqueueAndForget(()=>Qf(o,A)),O.fromCache&&"server"===g.source?w.reject(new Ae(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),A=new y_(d,b,{includeMetadataChanges:!0,$u:!0});return Yf(o,A)}(yield op(n),n.asyncQueue,e,t,r)})),r.promise}const Zm=new Map;function P_(n,e,t){if(!t)throw new Ae(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uI(n,e,t,r){if(!0===e&&!0===r)throw new Ae(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ym(n){if(!$e.isDocumentKey(n))throw new Ae(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function k_(n){if($e.isDocumentKey(n))throw new Ae(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ap(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ap(n);throw new Ae(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function F_(n,e){if(e<=0)throw new Ae(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class cI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class up{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qT;switch(t.type){case"gapi":return new J0(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zm.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),Zm.delete(e),t.terminate())}(this),Promise.resolve()}}class Cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}}class er{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new er(this.firestore,e,this._query)}}class Io extends er{constructor(e,t,r){super(e,t,Hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new $e(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function L_(n,e,...t){if(n=(0,sn.m9)(n),P_("collection","path",e),n instanceof up){const r=Jt.fromString(e,...t);return k_(r),new Io(n,null,r)}{if(!(n instanceof Cn||n instanceof Io))throw new Ae(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return k_(r),new Io(n.firestore,null,r)}}function U_(n,e,...t){if(n=(0,sn.m9)(n),1===arguments.length&&(e=ta.R()),P_("doc","path",e),n instanceof up){const r=Jt.fromString(e,...t);return Ym(r),new Cn(n,null,new $e(r))}{if(!(n instanceof Cn||n instanceof Io))throw new Ae(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Ym(r),new Cn(n.firestore,n instanceof Io?n.converter:null,new $e(r))}}function dI(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),(n instanceof Cn||n instanceof Io)&&(e instanceof Cn||e instanceof Io)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function V_(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),n instanceof er&&e instanceof er&&n.firestore===e.firestore&&If(n._query,e._query)&&n.converter===e.converter}class Yb{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new r_(this,"async_queue_retry"),this.Hc=()=>{const t=n_();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=n_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=n_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Ir;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Fa(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,mr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const o=Nm.createAndSchedule(this,e,t,r,u=>this.Xc(u));return this.Gc.push(o),o}Jc(){this.Qc&&tt()}verifyOperationInProgress(){}ta(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function Qm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Qb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zn extends up{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Yb,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fI(this),this._firestoreClient.terminate()}}function vr(n){return n._firestoreClient||fI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fI(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new AD(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new R_(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Xm(n,e,t){const r=new Ir;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield M_(n,t),yield Bb(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===re.FAILED_PRECONDITION||d.code===re.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;ka("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function nT(n){if(n._initialized||n._terminated)throw new Ae(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new da(zr.fromBase64String(e))}catch(t){throw new Ae(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new da(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wh{constructor(e){this._methodName=e}}class j_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const uC=/^__.*__$/;class cC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new vo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ul(e,this.data,t,this.fieldTransforms)}}class vI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class Jm{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ia(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Jm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.aa(e),o}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.ia(),o}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return hp(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(cp(this.ra)&&uC.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class iT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||qf(e)}wa(e,t,r,o=!1){return new Jm({ra:e,methodName:t,_a:r,path:ar.emptyPath(),ca:!1,da:o},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Wu(n){const e=n._freezeSettings(),t=qf(n._databaseId);return new iT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ha(n,e,t,r,o,u={}){const d=n.wa(u.merge||u.mergeFields?2:0,e,t,o);z_("Data must be an object, but it was:",d,r);const g=aT(r,d);let w,b;if(u.merge)w=new Zi(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const O of u.mergeFields){const $=dp(e,O,t);if(!d.contains($))throw new Ae(re.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);q_(A,$)||A.push($)}w=new Zi(A),b=d.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,b=d.fieldTransforms;return new cC(new si(g),w,b)}class Eh extends wh{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eh}}function ey(n,e,t){return new Jm({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class lp extends wh{_toFieldTransform(e){return new al(e.path,new ol)}isEqual(e){return e instanceof lp}}class sT extends wh{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=ey(this,e,!0),r=this.ma.map(u=>Dh(u,t)),o=new ja(r);return new al(e.path,o)}isEqual(e){return this===e}}class $_ extends wh{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=ey(this,e,!0),r=this.ma.map(u=>Dh(u,t)),o=new ia(r);return new al(e.path,o)}isEqual(e){return this===e}}class H_ extends wh{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Bu(e.Tt,Gg(e.Tt,this.ga));return new al(e.path,t)}isEqual(e){return this===e}}function Ih(n,e,t,r){const o=n.wa(1,e,t);z_("Data must be an object, but it was:",o,r);const u=[],d=si.empty();La(r,(w,b)=>{const A=ty(e,w,t);b=(0,sn.m9)(b);const O=o.ha(A);if(b instanceof Eh)u.push(A);else{const $=Dh(b,O);null!=$&&(u.push(A),d.set(A,$))}});const g=new Zi(u);return new vI(d,g,o.fieldTransforms)}function _I(n,e,t,r,o,u){const d=n.wa(1,e,t),g=[dp(e,r,t)],w=[o];if(u.length%2!=0)throw new Ae(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(dp(e,u[$])),w.push(u[$+1]);const b=[],A=si.empty();for(let $=g.length-1;$>=0;--$)if(!q_(b,g[$])){const K=g[$];let le=w[$];le=(0,sn.m9)(le);const Me=d.ha(K);if(le instanceof Eh)b.push(K);else{const Ge=Dh(le,Me);null!=Ge&&(b.push(K),A.set(K,Ge))}}const O=new Zi(b);return new vI(A,O,d.fieldTransforms)}function oT(n,e,t,r=!1){return Dh(t,n.wa(r?4:3,e))}function Dh(n,e){if(G_(n=(0,sn.m9)(n)))return z_("Unsupported field value:",e,n),aT(n,e);if(n instanceof wh)return function(t,r){if(!cp(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=Dh(d,r.la(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,sn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Gg(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Qn.fromDate(t);return{timestampValue:Yd(r.Tt,o)}}if(t instanceof Qn){const o=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Yd(r.Tt,o)}}if(t instanceof j_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof da)return{bytesValue:Lw(r.Tt,t._byteString)};if(t instanceof Cn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.fa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ds(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${ap(t)}`)}(n,e)}function aT(n,e){const t={};return ow(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):La(n,(r,o)=>{const u=Dh(o,e.ua(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function G_(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof j_||n instanceof da||n instanceof Cn||n instanceof wh)}function z_(n,e,t){if(!G_(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ap(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function dp(n,e,t){if((e=(0,sn.m9)(e))instanceof Wa)return e._internalPath;if("string"==typeof e)return ty(n,e);throw hp("Field path arguments must be of type string or ",n,!1,void 0,t)}const uT=new RegExp("[~\\*/\\[\\]]");function ty(n,e,t){if(e.search(uT)>=0)throw hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wa(...e.split("."))._internalPath}catch(r){throw hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hp(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Ae(re.INVALID_ARGUMENT,g+n+w)}function q_(n,e){return n.some(t=>t.isEqual(e))}class bh{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ny("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cT extends bh{data(){return super.data()}}function ny(n,e){return"string"==typeof e?ty(n,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}function W_(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fp{}class ry extends fp{}function Ka(n,e,...t){let r=[];e instanceof fp&&r.push(e),r=r.concat(t),function(o){const u=o.filter(g=>g instanceof Th).length,d=o.filter(g=>g instanceof Il).length;if(u>1||u>0&&d>0)throw new Ae(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class Il extends ry{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Il(e,t,r)}_apply(e){const t=this._parse(e);return a(e._query,t),new er(e.firestore,e.converter,fv(e._query,t))}_parse(e){const t=Wu(e.firestore);return function(o,u,d,g,w,b,A){let O;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ae(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){s(A,b);const $=[];for(const K of A)$.push(i(g,o,K));O={arrayValue:{values:$}}}else O=i(g,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||s(A,b),O=oT(d,"where",A,"in"===b||"not-in"===b);return Gt.create(w,b,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Th extends fp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Th(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:on.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const d=o.getFlattenedFilters();for(const g of d)a(u,g),u=fv(u,g)}(e._query,t),new er(e.firestore,e.converter,fv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class K_ extends ry{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new K_(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ae(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Bd(o,u);return function(g,w){if(null===hv(g)){const b=Ef(g);null!==b&&c(0,b,w.field)}}(r,d),d}(e._query,this._field,this._direction);return new er(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ba(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Z_ extends ry{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Z_(e,t,r)}_apply(e){return new er(e.firestore,e.converter,$g(e._query,this._limit,this._limitType))}}class Y_ extends ry{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Y_(e,t,r)}_apply(e){const t=fT(e,this.type,this._docOrFields,this._inclusive);return new er(e.firestore,e.converter,(o=t,new Ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Q_ extends ry{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Q_(e,t,r)}_apply(e){const t=fT(e,this.type,this._docOrFields,this._inclusive);return new er(e.firestore,e.converter,(o=t,new Ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function fT(n,e,t,r){if(t[0]=(0,sn.m9)(t[0]),t[0]instanceof bh)return function(o,u,d,g,w){if(!g)throw new Ae(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const A of sl(o))if(A.field.isKeyField())b.push(js(u,g.key));else{const O=g.data.field(A.field);if(uw(O))throw new Ae(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const $=A.field.canonicalString();throw new Ae(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(O)}return new ra(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Wu(n.firestore);return function(u,d,g,w,b,A){const O=u.explicitOrderBy;if(b.length>O.length)throw new Ae(re.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let K=0;K<b.length;K++){const le=b[K];if(O[K].field.isKeyField()){if("string"!=typeof le)throw new Ae(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof le}`);if(!Gd(u)&&-1!==le.indexOf("/"))throw new Ae(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${le}' contains a slash.`);const Me=u.path.child(Jt.fromString(le));if(!$e.isDocumentKey(Me))throw new Ae(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const Ge=new $e(Me);$.push(js(d,Ge))}else{const Me=oT(g,w,le);$.push(Me)}}return new ra($,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function i(n,e,t){if("string"==typeof(t=(0,sn.m9)(t))){if(""===t)throw new Ae(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gd(e)&&-1!==t.indexOf("/"))throw new Ae(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!$e.isDocumentKey(r))throw new Ae(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return js(n,new $e(r))}if(t instanceof Cn)return js(n,t._key);throw new Ae(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(t)}.`)}function s(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a(n,e){if(e.isInequality()){const r=Ef(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Ae(re.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=hv(n);null!==u&&c(0,o,u)}const t=function(r,o){for(const u of r)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(re.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function c(n,e,t){if(!t.isEqual(e))throw new Ae(re.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class p{convertValue(e,t="none"){switch(Xc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return La(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new j_(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ev(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const t=Ua(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);ot(Mv(r));const o=new Yc(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||mr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function y(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class E extends p{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}class Z{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ce extends bh{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ny("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Pe extends ce{data(e={}){return super.data(e)}}class Ve{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Z(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pe(this._firestore,this._userDataWriter,r.key,r,new Z(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Pe(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Z(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new Pe(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Z(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:it(d.type),doc:g,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function it(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function Ce(n,e){return n instanceof ce&&e instanceof ce?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ve&&e instanceof Ve&&n._firestore===e._firestore&&V_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bt extends p{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}function iy(n,e,t){n=en(n,Cn);const r=en(n.firestore,zn),o=y(n.converter,e,t);return Ku(r,[ha(Wu(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Gn.none())])}function sy(n,e,t,...r){n=en(n,Cn);const o=en(n.firestore,zn),u=Wu(o);let d;return d="string"==typeof(e=(0,sn.m9)(e))||e instanceof Wa?_I(u,"updateDoc",n._key,e,t,r):Ih(u,"updateDoc",n._key,e),Ku(o,[d.toMutation(n._key,Gn.exists(!0))])}function oy(n,...e){var t,r,o;n=(0,sn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||Qm(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(Qm(e[d])){const O=e[d];e[d]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[d+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[d+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let w,b,A;if(n instanceof Cn)b=en(n.firestore,zn),A=Hd(n._key.path),w={next:O=>{e[d]&&e[d](pT(b,n,O))},error:e[d+1],complete:e[d+2]};else{const O=en(n,er);b=en(O.firestore,zn),A=O._query;const $=new Bt(b);w={next:K=>{e[d]&&e[d](new Ve(b,$,O,K))},error:e[d+1],complete:e[d+2]},W_(n._query)}return function(O,$,K,le){const Me=new x_(le),Ge=new y_($,Me,K);return O.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return Yf(yield op(O),Ge)})),()=>{Me.bc(),O.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return Qf(yield op(O),Ge)}))}}(vr(b),A,g,w)}function Ku(n,e){return function(t,r){const o=new Ir;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function tC(n,e,t){return El.apply(this,arguments)}(yield N_(t),r,o)})),o.promise}(vr(n),e)}function pT(n,e,t){const r=t.docs.get(e._key),o=new Bt(n);return new ce(n,o,e._key,r,new Z(t.hasPendingWrites,t.fromCache),e.converter)}const ZS={maxAttempts:5};class gC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wu(e)}set(e,t,r){this._verifyNotCommitted();const o=Ch(e,this._firestore),u=y(o.converter,t,r),d=ha(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Gn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Ch(e,this._firestore);let d;return d="string"==typeof(t=(0,sn.m9)(t))||t instanceof Wa?_I(this._dataReader,"WriteBatch.update",u._key,t,r,o):Ih(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Gn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ch(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(t._key,Gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ch(n,e){if((n=(0,sn.m9)(n)).firestore!==e)throw new Ae(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class YS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wu(e)}get(e){const t=Ch(e,this._firestore),r=new E(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new bh(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new bh(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=Ch(e,this._firestore),u=y(o.converter,t,r),d=ha(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Ch(e,this._firestore);let d;return d="string"==typeof(t=(0,sn.m9)(t))||t instanceof Wa?_I(this._dataReader,"Transaction.update",u._key,t,r,o):Ih(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Ch(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ch(e,this._firestore),r=new Bt(this._firestore);return super.get(e).then(o=>new ce(this._firestore,r,t._key,o._document,new Z(!1,!1),t.converter))}}function gT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yC(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function vC(){if(!function ZT(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Sd=Os.SDK_VERSION,(0,Os._registerComponent)(new Wl.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new zn(new WT(t.getProvider("auth-internal")),new ew(t.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ae(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(g.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Os.registerVersion)(Ng,"3.9.0",n),(0,Os.registerVersion)(Ng,"3.9.0","esm2017")}();class r0{constructor(e){this._delegate=e}static fromBase64String(e){return vC(),new r0(da.fromBase64String(e))}static fromUint8Array(e){return yC(),new r0(da.fromUint8Array(e))}toBase64(){return vC(),this._delegate.toBase64()}toUint8Array(){return yC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mT(n){return function sA(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oA{enableIndexedDbPersistence(e,t){return function pI(n,e){nT(n=en(n,zn));const t=vr(n),r=n._freezeSettings(),o=new rI;return Xm(t,o,new Ub(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function B_(n){nT(n=en(n,zn));const e=vr(n),t=n._freezeSettings(),r=new rI;return Xm(e,r,new iC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gI(n){if(n._initialized&&!n._terminated)throw new Ae(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!Dr.C())return Promise.resolve();const o=r+"main";yield Dr.delete(o)}),function(r){return t.apply(this,arguments)})(dm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _C{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ka("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function lI(n,e,t,r={}){var o;const u=(n=en(n,up))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ka("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=Gr.MOCK_USER;else{d=(0,sn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Gr(w)}n._authCredentials=new Wy(new wD(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function mI(n){return function $b(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield oI(n),t=yield sp(n);return e.setNetworkEnabled(!0),function(r){const o=ze(r);return o.mu.delete(0),Am(o)}(t)}))}(vr(n=en(n,zn)))}(this._delegate)}disableNetwork(){return function yI(n){return function Hb(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield oI(n),t=yield sp(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(o){const u=ze(o);u.mu.add(0),yield Gu(u),u.pu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(vr(n=en(n,zn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function eT(n){return function(e){const t=new Ir;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function Lm(n,e){return tp.apply(this,arguments)}(yield N_(e),t)})),t.promise}(vr(n=en(n,zn)))}(this._delegate)}onSnapshotsInSync(e){return function n0(n,e){return function Wb(n,e){const t=new x_(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield op(n),o=t,ze(r).vu.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield op(n),o=t,void ze(r).vu.delete(o);var r,o}))}}(vr(n=en(n,zn)),Qm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ay(this,L_(this._delegate,e))}catch(t){throw gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new fa(this,U_(this._delegate,e))}catch(t){throw gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ms(this,function Zb(n,e){if(n=en(n,up),P_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new er(n,null,(t=e,new Ba(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function QS(n,e,t){n=en(n,zn);const r=Object.assign(Object.assign({},ZS),t);return function(o){if(o.maxAttempts<1)throw new Ae(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const g=new Ir;return o.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const w=yield function jb(n){return ip(n).then(e=>e.datastore)}(o);new iI(o.asyncQueue,w,d,u,g).run()})),g.promise}(vr(n),o=>e(new YS(n,o)),r)}(this._delegate,t=>e(new wC(this,t)))}batch(){return vr(this._delegate),new EC(new gC(this._delegate,e=>Ku(this._delegate,e)))}loadBundle(e){return function tT(n,e){const t=vr(n=en(n,zn)),r=new Qb;return function Eo(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return Vb(w,b);if(w instanceof ArrayBuffer)return Vb(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Gm(w,d);var w}(t,qf(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function rC(n,e,t){const r=ze(n);var o;(o=(0,pe.Z)(function*(u,d,g){try{const w=yield d.getMetadata();if(yield function($,K){const le=ze($),Me=hn(K.createTime);return le.persistence.runTransaction("hasNewerBundle","readonly",Ge=>le.$s.getBundleMetadata(Ge,K.id)).then(Ge=>!!Ge&&Ge.createTime.compareTo(Me)>=0)}(u.localStore,w))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(VE(w));const b=new UE(w,u.localStore,d.Tt);let A=yield d.yc();for(;A;){const $=yield b.Bu(A);$&&g._updateProgress($),A=yield d.yc()}const O=yield b.complete();return yield wo(u,O.Uu,void 0),yield function($,K){const le=ze($);return le.persistence.runTransaction("Save bundle","readwrite",Me=>le.$s.saveBundleMetadata(Me,K))}(u.localStore,w),g._completeWith(O.progress),Promise.resolve(O.qu)}catch(w){return ka("SyncEngine",`Loading bundle failed with ${w}`),g._failWith(w),Promise.resolve(new Set)}var $}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield N_(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function aC(n,e){return function Kb(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const o=ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.$s.getNamedQuery(u,r))}(yield Wm(n),e)}))}(vr(n=en(n,zn)),e).then(t=>t?new er(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ms(this,t):null)}}class wI extends p{constructor(e){super(),this.firestore=e}convertBytes(e){return new r0(new da(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fa.forKey(t,this.firestore,null)}}class wC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wI(e)}get(e){const t=gp(e);return this._delegate.get(t).then(r=>new s0(this._firestore,new ce(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=gp(e);return r?(gT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=gp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=gp(e);return this._delegate.delete(t),this}}class EC{constructor(e){this._delegate=e}set(e,t,r){const o=gp(e);return r?(gT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=gp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=gp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Pe(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new o0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=pp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new pp(e,new wI(e),t),o.set(t,u)),u}}pp.INSTANCES=new WeakMap;class fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fa(t,new Cn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new fa(t,new Cn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ay(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ay(this.firestore,L_(this._delegate,e))}catch(t){throw gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,sn.m9)(e))instanceof Cn&&dI(this._delegate,e)}set(e,t){t=gT("DocumentReference.set",t);try{return t?iy(this._delegate,e,t):iy(this._delegate,e)}catch(r){throw gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sy(this._delegate,e):sy(this._delegate,e,t,...r)}catch(o){throw gs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function e0(n){return Ku(en(n.firestore,zn),[new Kd(n._key,Gn.none())])}(this._delegate)}onSnapshot(...e){const t=IC(e),r=DC(e,o=>new s0(this.firestore,new ce(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return oy(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yn(n){n=en(n,Cn);const e=en(n.firestore,zn),t=vr(e),r=new Bt(e);return function Gb(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const g=yield function(w,b){const A=ze(w);return A.persistence.runTransaction("read document","readonly",O=>A.localDocuments.getDocument(O,b))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Ae(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const w=zu(g,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield Wm(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ce(e,r,n._key,o,new Z(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ps(n){n=en(n,Cn);const e=en(n.firestore,zn);return zb(vr(e),n._key,{source:"server"}).then(t=>pT(e,n,t))}(this._delegate):function _t(n){n=en(n,Cn);const e=en(n.firestore,zn);return zb(vr(e),n._key).then(t=>pT(e,n,t))}(this._delegate),t.then(r=>new s0(this.firestore,new ce(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fa(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}function gs(n,e,t){return n.message=n.message.replace(e,t),n}function IC(n){for(const e of n)if("object"==typeof e&&!mT(e))return e;return{}}function DC(n,e){var t,r;let o;return o=mT(n[0])?n[0]:mT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class s0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ce(this._delegate,e._delegate)}}class o0 extends s0{data(e){const t=this._delegate.data(e);return function qy(n,e){n||tt()}(void 0!==t),t}}class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wI(e)}where(e,t,r){try{return new ms(this.firestore,Ka(this._delegate,function lT(n,e,t){const r=e,o=ny("where",n);return Il._create(o,r,t)}(e,t,r)))}catch(o){throw gs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ms(this.firestore,Ka(this._delegate,function dT(n,e="asc"){const t=e,r=ny("orderBy",n);return K_._create(r,t)}(e,t)))}catch(r){throw gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ms(this.firestore,Ka(this._delegate,function lC(n){return F_("limit",n),Z_._create("limit",n,"F")}(e)))}catch(t){throw gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ms(this.firestore,Ka(this._delegate,function dC(n){return F_("limitToLast",n),Z_._create("limitToLast",n,"L")}(e)))}catch(t){throw gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ms(this.firestore,Ka(this._delegate,function hC(...n){return Y_._create("startAt",n,!0)}(...e)))}catch(t){throw gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ms(this.firestore,Ka(this._delegate,function hT(...n){return Y_._create("startAfter",n,!1)}(...e)))}catch(t){throw gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ms(this.firestore,Ka(this._delegate,function fC(...n){return Q_._create("endBefore",n,!1)}(...e)))}catch(t){throw gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ms(this.firestore,Ka(this._delegate,function pC(...n){return Q_._create("endAt",n,!0)}(...e)))}catch(t){throw gs(t,"endAt()","Query.endAt()")}}isEqual(e){return V_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function X_(n){n=en(n,er);const e=en(n.firestore,zn),t=vr(e),r=new Bt(e);return function qb(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const g=yield ym(o,u,!0),w=new BE(u,g.Yi),b=w.Hu(g.documents),A=w.applyChanges(b,!1);d.resolve(A.snapshot)}catch(g){const w=zu(g,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield Wm(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ve(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function J_(n){n=en(n,er);const e=en(n.firestore,zn),t=vr(e),r=new Bt(e);return Km(t,n._query,{source:"server"}).then(o=>new Ve(e,r,n,o))}(this._delegate):function Dl(n){n=en(n,er);const e=en(n.firestore,zn),t=vr(e),r=new Bt(e);return W_(n._query),Km(t,n._query).then(o=>new Ve(e,r,n,o))}(this._delegate),t.then(r=>new yT(this.firestore,new Ve(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=IC(e),r=DC(e,o=>new yT(this.firestore,new Ve(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return oy(this._delegate,t,r)}withConverter(e){return new ms(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}class uA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new o0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new o0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new o0(this._firestore,r))})}isEqual(e){return Ce(this._delegate,e._delegate)}}class ay extends ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fa(this.firestore,e):null}doc(e){try{return new fa(this.firestore,void 0===e?U_(this._delegate):U_(this._delegate,e))}catch(t){throw gs(t,"doc()","CollectionReference.doc()")}}add(e){return function t0(n,e){const t=en(n.firestore,zn),r=U_(n),o=y(n.converter,e);return Ku(t,[ha(Wu(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Gn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fa(this.firestore,t))}isEqual(e){return dI(this._delegate,e._delegate)}withConverter(e){return new ay(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}function gp(n){return en(n,Cn)}class vT{constructor(...e){this._delegate=new Wa(...e)}static documentId(){return new vT(ar.keyField().canonicalString())}isEqual(e){return(e=(0,sn.m9)(e))instanceof Wa&&this._delegate._internalPath.isEqual(e._internalPath)}}class mp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function JS(){return new lp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new mp(e)}static delete(){const e=function XS(){return new Eh("deleteField")}();return e._methodName="FieldValue.delete",new mp(e)}static arrayUnion(...e){const t=function eA(...n){return new sT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new mp(t)}static arrayRemove(...e){const t=function tA(...n){return new $_("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new mp(t)}static increment(e){const t=function nA(n){return new H_("increment",n)}(e);return t._methodName="FieldValue.increment",new mp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cA={Firestore:_C,GeoPoint:j_,Timestamp:Qn,Blob:r0,Transaction:wC,WriteBatch:EC,DocumentReference:fa,DocumentSnapshot:s0,Query:ms,QueryDocumentSnapshot:o0,QuerySnapshot:yT,CollectionReference:ay,FieldPath:vT,FieldValue:mp,setLogLevel:function aA(n){!function _D(n){Wc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function bC(n,e){return function hA(n,e=Tc.z){return new rr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function _T(n,e){return bC(n,e).pipe((0,kt.U)(t=>({payload:t,type:"query"})))}function EI(n,e){return _T(n,e).pipe(id(void 0),sd(),(0,kt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const w=o.find(A=>A.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function TC(n,e,t){return EI(n,t).pipe(bi((r,o)=>function pA(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gA(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function rg(n,e=rs.y){return n=null!=n?n:ig,(0,Nn.e)((t,r)=>{let o,u=!0;t.subscribe((0,Xt.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,kt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function wT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function CC(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function dA(n){(function lA(n,e){n.INTERNAL.registerComponent(new Wl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},cA)))})(n,(e,t)=>new _C(e,t,new oA)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(bu.Z);class SC{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=EI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,kt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(id(void 0),sd(),Bn(([r,o])=>o.length>0||!r),(0,kt.U)(([r,o])=>o),Kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CC(e);return TC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return _T(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Kn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(Kn.iC)}add(e){return this.ref.add(e)}doc(e){return new AC(this.ref.doc(e),this.afs)}}class AC{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=MC(r,t);return new SC(o,u,this.afs)}snapshotChanges(){return function fA(n,e){return bC(n,e).pipe(id(void 0),sd(),(0,kt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,kt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(Kn.iC)}}class mA{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?EI(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Bn(t=>t.length>0),Kn.iC):EI(this.query,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CC(e);return TC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return _T(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Kn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(Kn.iC)}}const xC=new _.OlP("angularfire2.enableFirestorePersistence"),RC=new _.OlP("angularfire2.firestore.persistenceSettings"),yA=new _.OlP("angularfire2.firestore.settings"),vA=new _.OlP("angularfire2.firestore.use-emulator");function MC(n,e=(t=>t)){return{query:e(n),ref:n}}let _A=(()=>{class n{constructor(t,r,o,u,d,g,w,b,A,O,$,K,le,Me,Ge,zt,nn){this.schedulers=w;const Ft=(0,Di.on)(t,g,r),$t=A;O&&rd(Ft,g,$,le,Me,Ge,K,zt),[this.firestore,this.persistenceEnabled$]=(0,Di.cc)(`${Ft.name}.firestore`,"AngularFirestore",Ft.name,()=>{const Vt=g.runOutsideAngular(()=>Ft.firestore());if(u&&Vt.settings(u),$t&&Vt.useEmulator(...$t),o&&!Ro(d)){const Zt=()=>{try{return(0,dn.D)(Vt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(yi){return"undefined"!=typeof console&&console.warn(yi),bt(!1)}};return[Vt,g.runOutsideAngular(Zt)]}return[Vt,bt(!1)]},[u,$t,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=MC(o,r),g=this.schedulers.ngZone.run(()=>u);return new SC(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new mA(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new AC(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Di.Dh),_.LFG(Di.xv,8),_.LFG(xC,8),_.LFG(yA,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Kn.HU),_.LFG(RC,8),_.LFG(vA,8),_.LFG(zh,8),_.LFG(Jp,8),_.LFG(Du,8),_.LFG(eg,8),_.LFG(nd,8),_.LFG(tg,8),_.LFG(ng,8),_.LFG(Dc,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wA=(()=>{class n{constructor(){Us.Z.registerVersion("angularfire",Kn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:xC,useValue:!0},{provide:RC,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[_A]}),n})();class Do extends Ss.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:EA}=Array,{getPrototypeOf:IA,prototype:DA,keys:bA}=Object;const{isArray:SA}=Array;var MA=N(9672);function OA(...n){const e=(0,xr.yG)(n),t=(0,xr.jO)(n),{args:r,keys:o}=function TA(n){if(1===n.length){const e=n[0];if(EA(e))return{args:e,keys:null};if(function CA(n){return n&&"object"==typeof n&&IA(n)===DA}(e)){const t=bA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,dn.D)([],e);const u=new rr.y(function NA(n,e,t=rs.y){return r=>{OC(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let w=0;w<o;w++)OC(e,()=>{const b=(0,dn.D)(n[w],e);let A=!1;b.subscribe((0,Xt.x)(r,O=>{u[w]=O,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function RA(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):rs.y));return t?u.pipe(function xA(n){return(0,kt.U)(e=>function AA(n,e){return SA(e)?n(...e):n(e)}(n,e))}(t)):u}function OC(n,e,t){n?(0,MA.f)(t,n,e):e()}function II(n,e){const t=(0,Rs.m)(n)?n:()=>n,r=o=>o.error(t());return new rr.y(e?o=>e.schedule(r,0,o):r)}function NC(n){return new rr.y(e=>{(0,As.Xf)(n()).subscribe(e)})}var PC=N(727);function kC(){return(0,Nn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Xt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class PA extends rr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new PC.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Xt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=PC.w0.EMPTY)}return e}refCount(){return kC()(this)}}function Sh(n){return(0,Nn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Xt.x)(t,void 0,void 0,d=>{u=(0,As.Xf)(n(d,Sh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Yi=N(5577);function a0(n,e){return(0,Rs.m)(e)?(0,Yi.z)(n,e,1):(0,Yi.z)(n,1)}function ET(n){return n<=0?()=>ji.E:(0,Nn.e)((e,t)=>{let r=[];e.subscribe((0,Xt.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var bo=N(8505);class bl{constructor(e,t){this.id=e,this.url=t}}class IT extends bl{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class u0 extends bl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class FC extends bl{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class LA extends bl{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class UA extends bl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VA extends bl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BA extends bl{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jA extends bl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $A extends bl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LC{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class UC{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HA{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GA{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zA{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qA{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VC{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const tn="primary";class WA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function uy(n){return new WA(n)}const BC="ngNavigationCancelingError";function DT(n){const e=Error("NavigationCancelingError: "+n);return e[BC]=!0,e}function ZA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Zu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!jC(n[o],e[o]))return!1;return!0}function jC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function $C(n){return Array.prototype.concat.apply([],n)}function HC(n){return n.length>0?n[n.length-1]:null}function xi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Yu(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,dn.D)(Promise.resolve(n)):bt(n)}const XA={exact:function qC(n,e,t){if(!vp(n.segments,e.segments)||!DI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!qC(n.children[r],e.children[r],t))return!1;return!0},subset:WC},GC={exact:function JA(n,e){return Zu(n,e)},subset:function ex(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jC(n[t],e[t]))},ignored:()=>!0};function zC(n,e,t){return XA[t.paths](n.root,e.root,t.matrixParams)&&GC[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function WC(n,e,t){return KC(n,e,e.segments,t)}function KC(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!vp(o,t)||e.hasChildren()||!DI(o,t,r))}if(n.segments.length===t.length){if(!vp(n.segments,t)||!DI(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!WC(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(vp(n.segments,o)&&DI(n.segments,o,r)&&n.children[tn])&&KC(n.children[tn],e,u,r)}}function DI(n,e,t){return e.every((r,o)=>GC[t](n[o].parameters,r.parameters))}class yp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uy(this.queryParams)),this._queryParamMap}toString(){return rx.serialize(this)}}class an{constructor(e,t){this.segments=e,this.children=t,this.parent=null,xi(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bI(this)}}class c0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=uy(this.parameters)),this._parameterMap}toString(){return JC(this)}}function vp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ZC{}class YC{parse(e){const t=new hx(e);return new yp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${l0(e.root,!0)}`,r=function ox(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${TI(t)}=${TI(o)}`).join("&"):`${TI(t)}=${TI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function ix(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const rx=new YC;function bI(n){return n.segments.map(e=>JC(e)).join("/")}function l0(n,e){if(!n.hasChildren())return bI(n);if(e){const t=n.children[tn]?l0(n.children[tn],!1):"",r=[];return xi(n.children,(o,u)=>{u!==tn&&r.push(`${u}:${l0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nx(n,e){let t=[];return xi(n.children,(r,o)=>{o===tn&&(t=t.concat(e(r,o)))}),xi(n.children,(r,o)=>{o!==tn&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===tn?[l0(n.children[tn],!1)]:[`${o}:${l0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[tn]?`${bI(n)}/${t[0]}`:`${bI(n)}/(${t.join("//")})`}}function QC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function TI(n){return QC(n).replace(/%3B/gi,";")}function bT(n){return QC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function CI(n){return decodeURIComponent(n)}function XC(n){return CI(n.replace(/\+/g,"%20"))}function JC(n){return`${bT(n.path)}${function sx(n){return Object.keys(n).map(e=>`;${bT(e)}=${bT(n[e])}`).join("")}(n.parameters)}`}const ax=/^[^\/()?;=#]+/;function SI(n){const e=n.match(ax);return e?e[0]:""}const ux=/^[^=?&#]+/,lx=/^[^&#]+/;class hx{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[tn]=new an(e,t)),r}parseSegment(){const e=SI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new c0(CI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=SI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=SI(this.remaining);o&&(r=o,this.capture(r))}e[CI(t)]=CI(r)}parseQueryParam(e){const t=function cx(n){const e=n.match(ux);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function dx(n){const e=n.match(lx);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=XC(t),u=XC(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=SI(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=tn);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[tn]:new an([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class eS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=TT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=TT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=CT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return CT(e,this._root).map(t=>t.value)}}function TT(n,e){if(n===e.value)return e;for(const t of e.children){const r=TT(n,t);if(r)return r}return null}function CT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=CT(n,t);if(r.length)return r.unshift(e),r}return[]}class Tl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function cy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class tS extends eS{constructor(e,t){super(e),this.snapshot=t,ST(this,e)}toString(){return this.snapshot.toString()}}function nS(n,e){const t=function fx(n,e){const d=new AI([],{},{},"",{},tn,e,null,n.root,-1,{});return new iS("",new Tl(d,[]))}(n,e),r=new Do([new c0("",{})]),o=new Do({}),u=new Do({}),d=new Do({}),g=new Do(""),w=new ly(r,o,d,g,u,tn,e,t.root);return w.snapshot=t.root,new tS(new Tl(w,[]),t)}class ly{constructor(e,t,r,o,u,d,g,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kt.U)(e=>uy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kt.U)(e=>uy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function px(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class AI{constructor(e,t,r,o,u,d,g,w,b,A,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=A,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class iS extends eS{constructor(e,t){super(t),this.url=e,ST(this,t)}toString(){return sS(this._root)}}function ST(n,e){e.value._routerState=n,e.children.forEach(t=>ST(n,t))}function sS(n){const e=n.children.length>0?` { ${n.children.map(sS).join(", ")} } `:"";return`${n.value}${e}`}function AT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zu(e.params,t.params)||n.params.next(t.params),function YA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function xT(n,e){const t=Zu(n.params,e.params)&&function tx(n,e){return vp(n,e)&&n.every((t,r)=>Zu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||xT(n.parent,e.parent))}function d0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function mx(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return d0(n,r,o);return d0(n,r)})}(n,e,t);return new Tl(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>d0(n,g)),d}}const r=function yx(n){return new ly(new Do(n.url),new Do(n.params),new Do(n.queryParams),new Do(n.fragment),new Do(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>d0(n,u));return new Tl(r,o)}}function xI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function h0(n){return"object"==typeof n&&null!=n&&n.outlets}function RT(n,e,t,r,o){let u={};if(r&&xi(r,(g,w)=>{u[w]=Array.isArray(g)?g.map(b=>`${b}`):`${g}`}),n===e)return new yp(t,u,o);const d=oS(n,e,t);return new yp(d,u,o)}function oS(n,e,t){const r={};return xi(n.children,(o,u)=>{r[u]=o===e?t:oS(o,e,t)}),new an(n.segments,r)}class aS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xI(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(h0);if(o&&o!==HC(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class MT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function uS(n,e,t){if(n||(n=new an([],{})),0===n.segments.length&&n.hasChildren())return RI(n,e,t);const r=function Dx(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(h0(g))break;const w=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!lS(w,b,d))return u;r+=2}else{if(!lS(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new an(n.segments.slice(0,r.pathIndex),{});return u.children[tn]=new an(n.segments.slice(r.pathIndex),n.children),RI(u,0,o)}return r.match&&0===o.length?new an(n.segments,{}):r.match&&!n.hasChildren()?OT(n,e,t):r.match?RI(n,0,o):OT(n,e,t)}function RI(n,e,t){if(0===t.length)return new an(n.segments,{});{const r=function Ix(n){return h0(n[0])?n[0].outlets:{[tn]:n}}(t),o={};return xi(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=uS(n.children[d],e,u))}),xi(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new an(n.segments,o)}}function OT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(h0(u)){const w=bx(u.outlets);return new an(r,w)}if(0===o&&xI(t[0])){r.push(new c0(n.segments[e].path,cS(t[0]))),o++;continue}const d=h0(u)?u.outlets[tn]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&xI(g)?(r.push(new c0(d,cS(g))),o+=2):(r.push(new c0(d,{})),o++)}return new an(r,{})}function bx(n){const e={};return xi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=OT(new an([],{}),0,t))}),e}function cS(n){const e={};return xi(n,(t,r)=>e[r]=`${t}`),e}function lS(n,e,t){return n==t.path&&Zu(e,t.parameters)}class Cx{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=cy(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),xi(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=cy(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=cy(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=cy(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new qA(u.value.snapshot))}),e.children.length&&this.forwardEvent(new GA(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(AT(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),AT(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=function Sx(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=g?g.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class NT{constructor(e,t){this.routes=e,this.module=t}}function Ah(n){return"function"==typeof n}function _p(n){return n instanceof yp}const f0=Symbol("INITIAL_VALUE");function p0(){return xn(n=>OA(n.map(e=>e.pipe(Xr(1),id(f0)))).pipe(bi((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==f0?o:(u===f0&&(r=!0),r||!1!==u&&d!==t.length-1&&!_p(u)?o:u),e)},f0),Bn(e=>e!==f0),(0,kt.U)(e=>_p(e)?e:!0===e),Xr(1)))}class Nx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new g0,this.attachRef=null}}class g0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Nx,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let dS=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=u||tn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,w=new Px(t,g,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(g0),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Px{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ly?this.route:e===g0?this.childContexts:this.parent.get(e,t)}}let hS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[dS],encapsulation:2}),n})();function fS(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];kx(r,Fx(e,r))}}function kx(n,e){n.children&&fS(n.children,e)}function Fx(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function PT(n){const e=n.children&&n.children.map(PT),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==tn&&(t.component=hS),t}function pa(n){return n.outlet||tn}function pS(n,e){const t=n.filter(r=>pa(r)===e);return t.push(...n.filter(r=>pa(r)!==e)),t}const gS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MI(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},gS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||ZA)(t,n,e);if(!u)return Object.assign({},gS);const d={};xi(u.posParams,(w,b)=>{d[b]=w.path});const g=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function OI(n,e,t,r,o="corrected"){if(t.length>0&&function Vx(n,e,t){return t.some(r=>NI(n,e,r)&&pa(r)!==tn)}(n,t,r)){const d=new an(e,function Ux(n,e,t,r){const o={};o[tn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&pa(u)!==tn){const d=new an([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[pa(u)]=d}return o}(n,e,r,new an(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Bx(n,e,t){return t.some(r=>NI(n,e,r))}(n,t,r)){const d=new an(n.segments,function Lx(n,e,t,r,o,u){const d={};for(const g of r)if(NI(n,t,g)&&!o[pa(g)]){const w=new an([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[pa(g)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new an(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function NI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mS(n,e,t,r){return!!(pa(n)===r||r!==tn&&NI(e,t,n))&&("**"===n.path||MI(e,n,t).matched)}function yS(n,e,t){return 0===e.length&&!n.children[t]}class PI{constructor(e){this.segmentGroup=e||null}}class vS{constructor(e){this.urlTree=e}}function m0(n){return II(new PI(n))}function _S(n){return II(new vS(n))}function jx(n){return II(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class Gx{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(_.h0i)}apply(){const e=OI(this.urlTree.root,[],[],this.config).segmentGroup,t=new an(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,tn).pipe((0,kt.U)(u=>this.createUrlTree(kT(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sh(u=>{if(u instanceof vS)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof PI?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,tn).pipe((0,kt.U)(o=>this.createUrlTree(kT(o),e.queryParams,e.fragment))).pipe(Sh(o=>{throw o instanceof PI?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new an([],{[tn]:e}):e;return new yp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,kt.U)(u=>new an([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,dn.D)(o).pipe(a0(u=>{const d=r.children[u],g=pS(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,kt.U)(w=>({segment:w,outlet:u})))}),bi((u,d)=>(u[d.outlet]=d.segment,u),{}),function kA(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bn((o,u)=>n(o,u,r)):rs.y,ET(1),t?xs(e):io(()=>new fu))}())}expandSegment(e,t,r,o,u,d){return(0,dn.D)(r).pipe(a0(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe(Sh(b=>{if(b instanceof PI)return bt(null);throw b}))),$i(g=>!!g),Sh((g,w)=>{if(g instanceof fu||"EmptyError"===g.name)return yS(t,o,u)?bt(new an([],{})):m0(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return mS(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):m0(t):m0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_S(u):this.lineralizeSegments(r,u).pipe((0,Yi.z)(d=>{const g=new an(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:w,remainingSegments:b,positionalParamSegments:A}=MI(t,o,u);if(!g)return m0(t);const O=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?_S(O):this.lineralizeSegments(o,O).pipe((0,Yi.z)($=>this.expandSegment(e,t,r,$.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?bt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,kt.U)(O=>(r._loadedConfig=O,new an(o,{})))):bt(new an(o,{}));const{matched:d,consumedSegments:g,remainingSegments:w}=MI(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Yi.z)(A=>{const O=A.module,$=A.routes,{segmentGroup:K,slicedSegments:le}=OI(t,g,w,$),Me=new an(K.segments,K.children);if(0===le.length&&Me.hasChildren())return this.expandChildren(O,$,Me).pipe((0,kt.U)(Ft=>new an(g,Ft)));if(0===$.length&&0===le.length)return bt(new an(g,{}));const Ge=pa(r)===u;return this.expandSegment(O,Me,$,le,Ge?tn:u,!0).pipe((0,kt.U)(nn=>new an(g.concat(nn.segments),nn.children)))})):m0(t)}getChildConfig(e,t,r){return t.children?bt(new NT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?bt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Yi.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,kt.U)(u=>(t._loadedConfig=u,u))):function $x(n){return II(DT(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):bt(new NT([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return bt(!0);const u=o.map(d=>{const g=e.get(d);let w;if(function xx(n){return n&&Ah(n.canLoad)}(g))w=g.canLoad(t,r);else{if(!Ah(g))throw new Error("Invalid CanLoad guard");w=g(t,r)}return Yu(w)});return bt(u).pipe(p0(),(0,bo.b)(d=>{if(!_p(d))return;const g=DT(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw g.url=d,g}),(0,kt.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return bt(r);if(o.numberOfChildren>1||!o.children[tn])return jx(e.redirectTo);o=o.children[tn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new yp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return xi(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return xi(t.children,(g,w)=>{d[w]=this.createSegmentGroup(e,g,r,o)}),new an(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function kT(n){const e={};for(const r of Object.keys(n.children)){const u=kT(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function zx(n){if(1===n.numberOfChildren&&n.children[tn]){const e=n.children[tn];return new an(n.segments.concat(e.segments),e.children)}return n}(new an(n.segments,e))}class wS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class kI{constructor(e,t){this.component=e,this.route=t}}function Wx(n,e,t){const r=n._root;return y0(r,e?e._root:null,t,[r.value])}function FI(n,e,t){const r=function Zx(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function y0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=cy(e);return n.children.forEach(d=>{(function Yx(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function Qx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vp(n.url,e.url)||!Zu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xT(n,e)||!Zu(n.queryParams,e.queryParams);default:return!xT(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new wS(r)):(u.data=d.data,u._resolvedData=d._resolvedData),y0(n,e,u.component?g?g.children:null:t,r,o),w&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new kI(g.outlet.component,d))}else d&&v0(e,g,o),o.canActivateChecks.push(new wS(r)),y0(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),xi(u,(d,g)=>v0(d,t.getContext(g),o)),o}function v0(n,e,t){const r=cy(n),o=n.value;xi(r,(u,d)=>{v0(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new kI(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class oR{}function ES(n){return new rr.y(e=>e.error(n))}class uR{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=OI(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,tn);if(null===t)return null;const r=new AI([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},tn,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Tl(r,t),u=new iS(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=rS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],g=pS(e,u),w=this.processSegmentGroup(g,d,u);if(null===w)return null;r.push(...w)}const o=IS(r);return function cR(n){n.sort((e,t)=>e.value.outlet===tn?-1:t.value.outlet===tn?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return yS(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!mS(e,t,r,o))return null;let u,d=[],g=[];if("**"===e.path){const K=r.length>0?HC(r).parameters:{};u=new AI(r,K,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,TS(e),pa(e),e.component,e,DS(t),bS(t)+r.length,CS(e))}else{const K=MI(t,e,r);if(!K.matched)return null;d=K.consumedSegments,g=K.remainingSegments,u=new AI(d,K.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,TS(e),pa(e),e.component,e,DS(t),bS(t)+d.length,CS(e))}const w=function lR(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=OI(t,d,g,w.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const K=this.processChildren(w,b);return null===K?null:[new Tl(u,K)]}if(0===w.length&&0===A.length)return[new Tl(u,[])];const O=pa(e)===o,$=this.processSegment(w,b,A,O?tn:o);return null===$?null:[new Tl(u,$)]}}function dR(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function IS(n){const e=[],t=new Set;for(const r of n){if(!dR(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=IS(r.children);e.push(new Tl(r.value,o))}return e.filter(r=>!t.has(r))}function DS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function TS(n){return n.data||{}}function CS(n){return n.resolve||{}}function SS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function FT(n){return xn(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,kt.U)(()=>e)):bt(e)})}class _R extends class vR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const LT=new _.OlP("ROUTES");class AS{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,kt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new NT($C(d.injector.get(LT,void 0,_.XFs.Self|_.XFs.Optional)).map(PT),d)}),Sh(u=>{throw t._loader$=void 0,u}));return t._loader$=new PA(o,()=>new Ss.x).pipe(kC()),t._loader$}loadModuleFactory(e){return Yu(e()).pipe((0,Yi.z)(t=>t instanceof _.YKP?bt(t):(0,dn.D)(this.compiler.compileModuleAsync(t))))}}class ER{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function IR(n){throw n}function DR(n,e,t){return e.parse("/")}function xS(n,e){return bt(null)}const bR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let To=(()=>{class n{constructor(t,r,o,u,d,g,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ss.x,this.errorHandler=IR,this.malformedUriErrorHandler=DR,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xS,afterPreactivation:xS},this.urlHandlingStrategy=new ER,this.routeReuseStrategy=new _R,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(_.h0i),this.console=d.get(_.c2e);const O=d.get(_.R0b);this.isNgZoneEnabled=O instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function QA(){return new yp(new an([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new AS(d,g,$=>this.triggerEvent(new LC($)),$=>this.triggerEvent(new UC($))),this.routerState=nS(this.currentUrlTree,this.rootComponentType),this.transitions=new Do({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Bn(o=>0!==o.id),(0,kt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xn(o=>{let u=!1,d=!1;return bt(o).pipe((0,bo.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xn(g=>{const w=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return RS(g.source)&&(this.browserUrlTree=g.extractedUrl),bt(g).pipe(xn(O=>{const $=this.transitions.getValue();return r.next(new IT(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),$!==this.transitions.getValue()?ji.E:Promise.resolve(O)}),function qx(n,e,t,r){return xn(o=>function Hx(n,e,t,r,o){return new Gx(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,kt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,bo.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function hR(n,e,t,r,o){return(0,Yi.z)(u=>function aR(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new uR(n,e,t,r,o,u).recognize();return null===d?ES(new oR):bt(d)}catch(d){return ES(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,kt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,bo.b)(O=>{if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(K,O)}this.browserUrlTree=O.urlAfterRedirects}const $=new UA(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next($)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:K,source:le,restoredState:Me,extras:Ge}=g,zt=new IT($,this.serializeUrl(K),le,Me);r.next(zt);const nn=nS(K,this.rootComponentType).snapshot;return bt(Object.assign(Object.assign({},g),{targetSnapshot:nn,urlAfterRedirects:K,extras:Object.assign(Object.assign({},Ge),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),ji.E}),FT(g=>{const{targetSnapshot:w,id:b,extractedUrl:A,rawUrl:O,extras:{skipLocationChange:$,replaceUrl:K}}=g;return this.hooks.beforePreactivation(w,{navigationId:b,appliedUrlTree:A,rawUrlTree:O,skipLocationChange:!!$,replaceUrl:!!K})}),(0,bo.b)(g=>{const w=new VA(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(w)}),(0,kt.U)(g=>Object.assign(Object.assign({},g),{guards:Wx(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Xx(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?bt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Jx(n,e,t,r){return(0,dn.D)(n).pipe((0,Yi.z)(o=>function sR(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?bt(u.map(g=>{const w=FI(g,e,o);let b;if(function Ox(n){return n&&Ah(n.canDeactivate)}(w))b=Yu(w.canDeactivate(n,e,t,r));else{if(!Ah(w))throw new Error("Invalid CanDeactivate guard");b=Yu(w(n,e,t,r))}return b.pipe($i())})).pipe(p0()):bt(!0)}(o.component,o.route,t,e,r)),$i(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Yi.z)(g=>g&&function Ax(n){return"boolean"==typeof n}(g)?function eR(n,e,t,r){return(0,dn.D)(e).pipe(a0(o=>Kh(function nR(n,e){return null!==n&&e&&e(new HA(n)),bt(!0)}(o.route.parent,r),function tR(n,e){return null!==n&&e&&e(new zA(n)),bt(!0)}(o.route,r),function iR(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Kx(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>NC(()=>bt(d.guards.map(w=>{const b=FI(w,d.node,t);let A;if(function Mx(n){return n&&Ah(n.canActivateChild)}(b))A=Yu(b.canActivateChild(r,n));else{if(!Ah(b))throw new Error("Invalid CanActivateChild guard");A=Yu(b(r,n))}return A.pipe($i())})).pipe(p0())));return bt(u).pipe(p0())}(n,o.path,t),function rR(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return bt(!0);const o=r.map(u=>NC(()=>{const d=FI(u,e,t);let g;if(function Rx(n){return n&&Ah(n.canActivate)}(d))g=Yu(d.canActivate(e,n));else{if(!Ah(d))throw new Error("Invalid CanActivate guard");g=Yu(d(e,n))}return g.pipe($i())}));return bt(o).pipe(p0())}(n,o.route,t))),$i(o=>!0!==o,!0))}(r,u,n,e):bt(g)),(0,kt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,bo.b)(g=>{if(_p(g.guardsResult)){const b=DT(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw b.url=g.guardsResult,b}const w=new BA(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(w)}),Bn(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),FT(g=>{if(g.guards.canActivateChecks.length)return bt(g).pipe((0,bo.b)(w=>{const b=new jA(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),xn(w=>{let b=!1;return bt(w).pipe(function fR(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return bt(t);let u=0;return(0,dn.D)(o).pipe(a0(d=>function pR(n,e,t,r){return function gR(n,e,t,r){const o=SS(n);if(0===o.length)return bt({});const u={};return(0,dn.D)(o).pipe((0,Yi.z)(d=>function mR(n,e,t,r){const o=FI(n,e,r);return Yu(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,bo.b)(g=>{u[d]=g}))),ET(1),(0,Yi.z)(()=>SS(u).length===o.length?bt(u):ji.E))}(n._resolve,n,e,r).pipe((0,kt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),rS(n,t).resolve),null)))}(d.route,r,n,e)),(0,bo.b)(()=>u++),ET(1),(0,Yi.z)(d=>u===o.length?bt(t):ji.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,bo.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,bo.b)(w=>{const b=new $A(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),FT(g=>{const{targetSnapshot:w,id:b,extractedUrl:A,rawUrl:O,extras:{skipLocationChange:$,replaceUrl:K}}=g;return this.hooks.afterPreactivation(w,{navigationId:b,appliedUrlTree:A,rawUrlTree:O,skipLocationChange:!!$,replaceUrl:!!K})}),(0,kt.U)(g=>{const w=function gx(n,e,t){const r=d0(n,e._root,t?t._root:void 0);return new tS(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:w})}),(0,bo.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,kt.U)(r=>(new Cx(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,bo.b)({next(){u=!0},complete(){u=!0}}),function FA(n){return(0,Nn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Sh(g=>{if(d=!0,function KA(n){return n&&n[BC]}(g)){const w=_p(g.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const b=new FC(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(b),w?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),O={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||RS(o.source)};this.scheduleNavigation(A,"imperative",null,O,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new LA(o.id,this.serializeUrl(o.extractedUrl),g);r.next(w);try{o.resolve(this.errorHandler(g))}catch(b){o.reject(b)}}return ji.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){fS(t),this.config=t.map(PT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:w}=r,b=o||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let O=null;switch(g){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),function vx(n,e,t,r,o){if(0===t.length)return RT(e.root,e.root,e.root,r,o);const u=function _x(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new aS(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return xi(u.outlets,(w,b)=>{g[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,w)=>{0==w&&"."===g||(0==w&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new aS(t,e,r)}(t);if(u.toRoot())return RT(e.root,e.root,new an([],{}),r,o);const d=function wx(n,e,t){if(n.isAbsolute)return new MT(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new MT(u,u===e.root,0)}const r=xI(n.commands[0])?0:1;return function Ex(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new MT(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=d.processChildren?RI(d.segmentGroup,d.index,u.commands):uS(d.segmentGroup,d.index,u.commands);return RT(e.root,d.segmentGroup,g,r,o)}(b,this.currentUrlTree,t,O,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=_p(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function CR(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},bR):!1===r?Object.assign({},TR):r,_p(t))return zC(this.currentUrlTree,t,o);const u=this.parseUrl(t);return zC(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new u0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var g,w;if(this.disposed)return Promise.resolve(!1);let b,A,O;d?(b=d.resolve,A=d.reject,O=d.promise):O=new Promise((le,Me)=>{b=le,A=Me});const $=++this.navigationId;let K;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),K=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):K=0,this.setTransition({id:$,targetPageId:K,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:O,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),O.catch(le=>Promise.reject(le))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new FC(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function RS(n){return"imperative"!==n}class MS{}class OS{preload(e,t){return bt(null)}}let NS=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new AS(o,r,w=>t.triggerEvent(new LC(w)),w=>t.triggerEvent(new UC(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Bn(t=>t instanceof u0),a0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(_.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,dn.D)(o).pipe((0,Cc.J)(),(0,kt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?bt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Yi.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(To),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(MS))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),BT=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof IT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof u0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof VC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new VC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const wp=new _.OlP("ROUTER_CONFIGURATION"),PS=new _.OlP("ROUTER_FORROOT_GUARD"),RR=[fe,{provide:ZC,useClass:YC},{provide:To,useFactory:function kR(n,e,t,r,o,u,d={},g,w){const b=new To(null,n,e,t,r,o,$C(u));return g&&(b.urlHandlingStrategy=g),w&&(b.routeReuseStrategy=w),function FR(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,b),d.enableTracing&&b.events.subscribe(A=>{var O,$;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===($=console.groupEnd)||void 0===$||$.call(console)}),b},deps:[ZC,g0,fe,_.zs3,_.Sil,LT,wp,[class wR{},new _.FiY],[class yR{},new _.FiY]]},g0,{provide:ly,useFactory:function LR(n){return n.routerState.root},deps:[To]},NS,OS,class xR{preload(e,t){return t().pipe(Sh(()=>bt(null)))}},{provide:wp,useValue:{enableTracing:!1}}];function MR(){return new _.PXZ("Router",To)}let kS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[RR,FS(t),{provide:PS,useFactory:PR,deps:[[To,new _.FiY,new _.tp0]]},{provide:wp,useValue:r||{}},{provide:de,useFactory:NR,deps:[ie,[new _.tBr(He),new _.FiY],wp]},{provide:BT,useFactory:OR,deps:[To,tc,wp]},{provide:MS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:OS},{provide:_.PXZ,multi:!0,useFactory:MR},[jT,{provide:_.ip1,multi:!0,useFactory:UR,deps:[jT]},{provide:LS,useFactory:VR,deps:[jT]},{provide:_.tb,multi:!0,useExisting:LS}]]}}static forChild(t){return{ngModule:n,providers:[FS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(PS,8),_.LFG(To,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function OR(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new BT(n,e,t)}function NR(n,e,t={}){return t.useHash?new Ie(n,e):new Xe(n,e)}function PR(n){return"guarded"}function FS(n){return[{provide:_.deG,multi:!0,useValue:n},{provide:LT,multi:!0,useValue:n}]}let jT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ss.x}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(To),d=this.injector.get(wp);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?bt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(wp),o=this.injector.get(NS),u=this.injector.get(BT),d=this.injector.get(To),g=this.injector.get(_.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function UR(n){return n.appInitializer.bind(n)}function VR(n){return n.bootstrapListener.bind(n)}const LS=new _.OlP("Router Initializer"),jR=[];let $R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[kS.forRoot(jR)],kS]}),n})();var US=N(655);class HR extends Ss.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(e){const{hasError:t,_hasValue:r,_value:o,thrownError:u,isStopped:d,_isComplete:g}=this;t?e.error(u):(d||g)&&(r&&e.next(o),e.complete())}next(e){this.isStopped||(this._value=e,this._hasValue=!0)}complete(){const{_hasValue:e,_value:t,_isComplete:r}=this;r||(this._isComplete=!0,e&&super.next(t),super.complete())}}function VS(n){return Bn((e,t)=>n<=t)}class BS{constructor(){}loadScript(e,t,r,o=null){if("undefined"!=typeof document&&!document.getElementById(e)){let u=document.createElement("script");u.async=!0,u.src=t,u.onload=r,o||(o=document.head),o.appendChild(u)}}}class $T{}const zR={oneTapEnabled:!0};let _0=(()=>{class n extends BS{constructor(t,r){super(),this.clientId=t,this.initOptions=r,this.changeUser=new _.vpe,this._socialUser=new Do(null),this._accessToken=new Do(null),this._receivedAccessToken=new _.vpe,this.initOptions=Object.assign(Object.assign({},zR),this.initOptions),this._socialUser.pipe(VS(1)).subscribe(this.changeUser),this._accessToken.pipe(VS(1)).subscribe(this._receivedAccessToken)}initialize(t){return new Promise((r,o)=>{try{this.loadScript(n.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{var u;if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:d})=>{const g=this.createSocialUser(d);this._socialUser.next(g)},prompt_parent_id:null===(u=this.initOptions)||void 0===u?void 0:u.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(Bn(d=>null===d)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const d=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(g=>g).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:d,prompt:this.initOptions.prompt,callback:g=>{g.error?this._accessToken.error({code:g.error,description:g.error_description,uri:g.error_uri}):this._accessToken.next(g.access_token)}})}r()})}catch(u){o(u)}})}getLoginStatus(){return new Promise((t,r)=>{this._socialUser.value?t(this._socialUser.value):r(`No user is currently logged in with ${n.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,r)=>{google.accounts.id.revoke(this._socialUser.value.id,o=>{o.error?r(o.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,r)=>{var o;this._tokenClient?(this._tokenClient.requestAccessToken({hint:null===(o=this._socialUser.value)||void 0===o?void 0:o.email}),this._receivedAccessToken.pipe(Xr(1)).subscribe(t)):r(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,r)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):r("No access token to revoke"):r("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){return(0,US.mG)(this,void 0,void 0,function*(){google.accounts.id.disableAutoSelect(),this._socialUser.next(null)})}createSocialUser(t){const r=new $T;r.idToken=t;const o=this.decodeJwt(t);return r.id=o.sub,r.name=o.name,r.email=o.email,r.photoUrl=o.picture,r.firstName=o.given_name,r.lastName=o.family_name,r}decodeJwt(t){const o=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),u=decodeURIComponent(window.atob(o).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(u)}}return n.PROVIDER_ID="GOOGLE",n})(),LI=(()=>{class n{constructor(t,r,o){this._ngZone=r,this._injector=o,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new fc(1),this.initialized=!1,this._initState=new HR,t instanceof Promise?t.then(u=>{this.initialize(u)}):this.initialize(t)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(t){this.autoLogin=void 0!==t.autoLogin&&t.autoLogin;const{onError:r=console.error}=t;t.providers.forEach(o=>{this.providers.set(o.id,"prototype"in o.provider?this._injector.get(o.provider):o.provider)}),Promise.all(Array.from(this.providers.values()).map(o=>o.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const o=[];let u=!1;this.providers.forEach((d,g)=>{const w=d.getLoginStatus();o.push(w),w.then(b=>{this.setUser(b,g),u=!0}).catch(console.debug)}),Promise.all(o).catch(()=>{u||(this._user=null,this._authState.next(null))})}this.providers.forEach((o,u)=>{(function GR(n){return!!n&&(n instanceof rr.y||(0,Rs.m)(n.lift)&&(0,Rs.m)(n.subscribe))})(o.changeUser)&&o.changeUser.subscribe(d=>{this._ngZone.run(()=>{this.setUser(d,u)})})})}).catch(o=>{r(o)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(t){return(0,US.mG)(this,void 0,void 0,function*(){const r=this.providers.get(t);if(!this.initialized)throw n.ERR_NOT_INITIALIZED;if(!r)throw n.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(r instanceof _0))throw n.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield r.getAccessToken()})}refreshAuthToken(t){return new Promise((r,o)=>{if(this.initialized){const u=this.providers.get(t);u?"function"!=typeof u.refreshToken?o(n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):u.refreshToken().then(d=>{this.setUser(d,t),r()}).catch(d=>{o(d)}):o(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(n.ERR_NOT_INITIALIZED)})}refreshAccessToken(t){return new Promise((r,o)=>{if(this.initialized)if(t!==_0.PROVIDER_ID)o(n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const u=this.providers.get(t);u instanceof _0?u.revokeAccessToken().then(r).catch(o):o(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(n.ERR_NOT_INITIALIZED)})}signIn(t,r){return new Promise((o,u)=>{if(this.initialized){let d=this.providers.get(t);d?d.signIn(r).then(g=>{this.setUser(g,t),o(g)}).catch(g=>{u(g)}):u(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else u(n.ERR_NOT_INITIALIZED)})}signOut(t=!1){return new Promise((r,o)=>{if(this.initialized)if(this._user){let d=this.providers.get(this._user.provider);d?d.signOut(t).then(()=>{r(),this.setUser(null)}).catch(g=>{o(g)}):o(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(n.ERR_NOT_LOGGED_IN);else o(n.ERR_NOT_INITIALIZED)})}setUser(t,r){t&&r&&(t.provider=r),this._user=t,this._authState.next(t)}}return n.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",n.ERR_NOT_LOGGED_IN="Not logged in",n.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",n.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",n.\u0275fac=function(t){return new(t||n)(_.LFG("SocialAuthServiceConfig"),_.LFG(_.R0b),_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qR=(()=>{class n{constructor(t,r){this.type="icon",this.size="medium",this.text="signin_with",this.shape="rectangular",this.theme="outline",this.logo_alignment="left",this.width="",this.locale="",r.initState.pipe(Xr(1)).subscribe(()=>{Promise.resolve(this.width).then(o=>{o>"400"||o<"200"&&""!=o?Promise.reject("Please note .. max-width 400 , min-width 200 (https://developers.google.com/identity/gsi/web/tools/configurator)"):google.accounts.id.renderButton(t.nativeElement,{type:this.type,size:this.size,text:this.text,width:this.width,shape:this.shape,theme:this.theme,logo_alignment:this.logo_alignment,locale:this.locale})})})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.SBq),_.Y36(LI))},n.\u0275dir=_.lG2({type:n,selectors:[["asl-google-signin-button"]],inputs:{type:"type",size:"size",text:"text",shape:"shape",theme:"theme",logo_alignment:"logo_alignment",width:"width",locale:"locale"}}),n})(),WR=(()=>{class n{constructor(t){if(t)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(t){return{ngModule:n,providers:[LI,{provide:"SocialAuthServiceConfig",useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[LI],imports:[[Ju]]}),n})(),HT=(()=>{class n extends BS{constructor(t,r={}){super(),this.clientId=t,this.requestOptions={scope:"email,public_profile",locale:"en_US",fields:"name,email,picture,first_name,last_name",version:"v10.0"},this.requestOptions=Object.assign(Object.assign({},this.requestOptions),r)}initialize(){return new Promise((t,r)=>{try{this.loadScript(n.PROVIDER_ID,`//connect.facebook.net/${this.requestOptions.locale}/sdk.js`,()=>{FB.init({appId:this.clientId,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this.requestOptions.version}),t()})}catch(o){r(o)}})}getLoginStatus(){return new Promise((t,r)=>{FB.getLoginStatus(o=>{if("connected"===o.status){let u=o.authResponse;FB.api(`/me?fields=${this.requestOptions.fields}`,d=>{let g=new $T;g.id=d.id,g.name=d.name,g.email=d.email,g.photoUrl="https://graph.facebook.com/"+d.id+"/picture?type=normal&access_token="+u.accessToken,g.firstName=d.first_name,g.lastName=d.last_name,g.authToken=u.accessToken,g.response=d,t(g)})}else r(`No user is currently logged in with ${n.PROVIDER_ID}`)})})}signIn(t){const r=Object.assign(Object.assign({},this.requestOptions),t);return new Promise((o,u)=>{FB.login(d=>{if(d.authResponse){let g=d.authResponse;FB.api(`/me?fields=${r.fields}`,w=>{let b=new $T;b.id=w.id,b.name=w.name,b.email=w.email,b.photoUrl="https://graph.facebook.com/"+w.id+"/picture?type=normal",b.firstName=w.first_name,b.lastName=w.last_name,b.authToken=g.accessToken,b.response=w,o(b)})}else u("User cancelled login or did not fully authorize.")},r)})}signOut(){return new Promise((t,r)=>{FB.logout(o=>{t()})})}}return n.PROVIDER_ID="FACEBOOK",n})(),KR=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.authState.subscribe(t=>{this.user=t,console.log(t)})}signInWithFB(){this.authService.signIn(HT.PROVIDER_ID).then(t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(LI))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[["type","icon","size","medium"],[3,"click"]],template:function(t,r){1&t&&(_._UZ(0,"asl-google-signin-button",0),_.TgZ(1,"button",1),_.NdJ("click",function(){return r.signInWithFB()}),_._uU(2," login\n"),_.qZA())},directives:[qR],styles:[""]}),n})(),ZR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[KR]}),n.\u0275inj=_.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:_0.PROVIDER_ID,provider:new _0("794053292456-partun1k2c7ins7tcrkntu08kjkqs1vi.apps.googleusercontent.com")},{id:HT.PROVIDER_ID,provider:new HT("5268710979893896")}],onError:e=>{console.error(e)}}}],imports:[[Da,$R,WR,qh,wA,qh,Di.hO.initializeApp({apiKey:"AIzaSyBrKsjZv-j_EgWKUJE21fa1jThm25HQQr4",authDomain:"sociallogin-1744d.firebaseapp.com",projectId:"sociallogin-1744d",storageBucket:"sociallogin-1744d.appspot.com",messagingSenderId:"1048526602451",appId:"1:1048526602451:web:ceb1294fcc53c74141d426",measurementId:"G-JGRY2ZN5HQ"})]]}),n})();(0,_.G48)(),su().bootstrapModule(ZR).catch(n=>console.error(n))},8306:(Je,ye,N)=>{N.d(ye,{y:()=>V});var _=N(2961),Y=N(727),P=N(8822),ne=N(4671);var se=N(2416),ie=N(576),ae=N(2806);let V=(()=>{class be{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const de=new be;return de.source=this,de.operator=Be,de}subscribe(Be,de,ve){const He=function je(be){return be&&be instanceof _.Lv||function Q(be){return be&&(0,ie.m)(be.next)&&(0,ie.m)(be.error)&&(0,ie.m)(be.complete)}(be)&&(0,Y.Nn)(be)}(Be)?Be:new _.Hp(Be,de,ve);return(0,ae.x)(()=>{const{operator:Xe,source:Ie}=this;He.add(Xe?Xe.call(He,Ie):Ie?this._subscribe(He):this._trySubscribe(He))}),He}_trySubscribe(Be){try{return this._subscribe(Be)}catch(de){Be.error(de)}}forEach(Be,de){return new(de=j(de))((ve,He)=>{const Xe=new _.Hp({next:Ie=>{try{Be(Ie)}catch(fe){He(fe),Xe.unsubscribe()}},error:He,complete:ve});this.subscribe(Xe)})}_subscribe(Be){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Be)}[P.L](){return this}pipe(...Be){return function oe(be){return 0===be.length?ne.y:1===be.length?be[0]:function(Be){return be.reduce((de,ve)=>ve(de),Be)}}(Be)(this)}toPromise(Be){return new(Be=j(Be))((de,ve)=>{let He;this.subscribe(Xe=>He=Xe,Xe=>ve(Xe),()=>de(He))})}}return be.create=Ne=>new be(Ne),be})();function j(be){var Ne;return null!==(Ne=null!=be?be:se.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(Je,ye,N)=>{N.d(ye,{x:()=>se});var _=N(8306),Y=N(727);const ne=(0,N(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=N(8737),oe=N(2806);let se=(()=>{class ae extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new ie(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new ne}next(j){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:je,observers:be}=this;return Q||je?Y.Lc:(this.currentObservers=null,be.push(j),new Y.w0(()=>{this.currentObservers=null,(0,ee.P)(be,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:je,isStopped:be}=this;Q?j.error(je):be&&j.complete()}asObservable(){const j=new _.y;return j.source=this,j}}return ae.create=(V,j)=>new ie(V,j),ae})();class ie extends se{constructor(V,j){super(),this.destination=V,this.source=j}next(V){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,V)}error(V){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,V)}complete(){var V,j;null===(j=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===j||j.call(V)}_subscribe(V){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(V))&&void 0!==Q?Q:Y.Lc}}},2961:(Je,ye,N)=>{N.d(ye,{Hp:()=>Be,Lv:()=>Q});var _=N(576),Y=N(727),P=N(2416),ne=N(7849);function ee(){}const oe=ae("C",void 0,void 0);function ae(Ie,fe,_e){return{kind:Ie,value:fe,error:_e}}var V=N(3410),j=N(2806);class Q extends Y.w0{constructor(fe){super(),this.isStopped=!1,fe?(this.destination=fe,(0,Y.Nn)(fe)&&fe.add(this)):this.destination=Xe}static create(fe,_e,Ue){return new Be(fe,_e,Ue)}next(fe){this.isStopped?He(function ie(Ie){return ae("N",Ie,void 0)}(fe),this):this._next(fe)}error(fe){this.isStopped?He(function se(Ie){return ae("E",void 0,Ie)}(fe),this):(this.isStopped=!0,this._error(fe))}complete(){this.isStopped?He(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(fe){this.destination.next(fe)}_error(fe){try{this.destination.error(fe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function be(Ie,fe){return je.call(Ie,fe)}class Ne{constructor(fe){this.partialObserver=fe}next(fe){const{partialObserver:_e}=this;if(_e.next)try{_e.next(fe)}catch(Ue){de(Ue)}}error(fe){const{partialObserver:_e}=this;if(_e.error)try{_e.error(fe)}catch(Ue){de(Ue)}else de(fe)}complete(){const{partialObserver:fe}=this;if(fe.complete)try{fe.complete()}catch(_e){de(_e)}}}class Be extends Q{constructor(fe,_e,Ue){let Le;if(super(),(0,_.m)(fe)||!fe)Le={next:null!=fe?fe:void 0,error:null!=_e?_e:void 0,complete:null!=Ue?Ue:void 0};else{let H;this&&P.v.useDeprecatedNextContext?(H=Object.create(fe),H.unsubscribe=()=>this.unsubscribe(),Le={next:fe.next&&be(fe.next,H),error:fe.error&&be(fe.error,H),complete:fe.complete&&be(fe.complete,H)}):Le=fe}this.destination=new Ne(Le)}}function de(Ie){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ie):(0,ne.h)(Ie)}function He(Ie,fe){const{onStoppedNotification:_e}=P.v;_e&&V.z.setTimeout(()=>_e(Ie,fe))}const Xe={closed:!0,next:ee,error:function ve(Ie){throw Ie},complete:ee}},727:(Je,ye,N)=>{N.d(ye,{Lc:()=>oe,w0:()=>ee,Nn:()=>se});var _=N(576);const P=(0,N(3888).d)(ae=>function(j){ae(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,je)=>`${je+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ne=N(8737);class ee{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const be of j)be.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,_.m)(Q))try{Q()}catch(be){V=be instanceof P?be.errors:[be]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const be of je)try{ie(be)}catch(Ne){V=null!=V?V:[],Ne instanceof P?V=[...V,...Ne.errors]:V.push(Ne)}}if(V)throw new P(V)}}add(V){var j;if(V&&V!==this)if(this.closed)ie(V);else{if(V instanceof ee){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(V)}}_hasParent(V){const{_parentage:j}=this;return j===V||Array.isArray(j)&&j.includes(V)}_addParent(V){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(V),j):j?[j,V]:V}_removeParent(V){const{_parentage:j}=this;j===V?this._parentage=null:Array.isArray(j)&&(0,ne.P)(j,V)}remove(V){const{_finalizers:j}=this;j&&(0,ne.P)(j,V),V instanceof ee&&V._removeParent(this)}}ee.EMPTY=(()=>{const ae=new ee;return ae.closed=!0,ae})();const oe=ee.EMPTY;function se(ae){return ae instanceof ee||ae&&"closed"in ae&&(0,_.m)(ae.remove)&&(0,_.m)(ae.add)&&(0,_.m)(ae.unsubscribe)}function ie(ae){(0,_.m)(ae)?ae():ae.unsubscribe()}},2416:(Je,ye,N)=>{N.d(ye,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,ye,N)=>{N.d(ye,{E:()=>Y});const Y=new(N(8306).y)(ee=>ee.complete())},8996:(Je,ye,N)=>{N.d(ye,{D:()=>fe});var _=N(8421),Y=N(5363),P=N(9468),oe=N(8306),ie=N(2202),ae=N(576),V=N(9672);function Q(_e,Ue){if(!_e)throw new Error("Iterable cannot be null");return new oe.y(Le=>{(0,V.f)(Le,Ue,()=>{const H=_e[Symbol.asyncIterator]();(0,V.f)(Le,Ue,()=>{H.next().then(ge=>{ge.done?Le.complete():Le.next(ge.value)})},0,!0)})})}var je=N(3670),be=N(8239),Ne=N(1144),Be=N(6495),de=N(2206),ve=N(4532),He=N(3260);function fe(_e,Ue){return Ue?function Ie(_e,Ue){if(null!=_e){if((0,je.c)(_e))return function ne(_e,Ue){return(0,_.Xf)(_e).pipe((0,P.R)(Ue),(0,Y.Q)(Ue))}(_e,Ue);if((0,Ne.z)(_e))return function se(_e,Ue){return new oe.y(Le=>{let H=0;return Ue.schedule(function(){H===_e.length?Le.complete():(Le.next(_e[H++]),Le.closed||this.schedule())})})}(_e,Ue);if((0,be.t)(_e))return function ee(_e,Ue){return(0,_.Xf)(_e).pipe((0,P.R)(Ue),(0,Y.Q)(Ue))}(_e,Ue);if((0,de.D)(_e))return Q(_e,Ue);if((0,Be.T)(_e))return function j(_e,Ue){return new oe.y(Le=>{let H;return(0,V.f)(Le,Ue,()=>{H=_e[ie.h](),(0,V.f)(Le,Ue,()=>{let ge,Fe;try{({value:ge,done:Fe}=H.next())}catch(vt){return void Le.error(vt)}Fe?Le.complete():Le.next(ge)},0,!0)}),()=>(0,ae.m)(null==H?void 0:H.return)&&H.return()})}(_e,Ue);if((0,He.L)(_e))return function Xe(_e,Ue){return Q((0,He.Q)(_e),Ue)}(_e,Ue)}throw(0,ve.z)(_e)}(_e,Ue):(0,_.Xf)(_e)}},8421:(Je,ye,N)=>{N.d(ye,{Xf:()=>je});var _=N(655),Y=N(1144),P=N(8239),ne=N(8306),ee=N(3670),oe=N(2206),se=N(4532),ie=N(6495),ae=N(3260),V=N(576),j=N(7849),Q=N(8822);function je(Ie){if(Ie instanceof ne.y)return Ie;if(null!=Ie){if((0,ee.c)(Ie))return function be(Ie){return new ne.y(fe=>{const _e=Ie[Q.L]();if((0,V.m)(_e.subscribe))return _e.subscribe(fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,Y.z)(Ie))return function Ne(Ie){return new ne.y(fe=>{for(let _e=0;_e<Ie.length&&!fe.closed;_e++)fe.next(Ie[_e]);fe.complete()})}(Ie);if((0,P.t)(Ie))return function Be(Ie){return new ne.y(fe=>{Ie.then(_e=>{fe.closed||(fe.next(_e),fe.complete())},_e=>fe.error(_e)).then(null,j.h)})}(Ie);if((0,oe.D)(Ie))return ve(Ie);if((0,ie.T)(Ie))return function de(Ie){return new ne.y(fe=>{for(const _e of Ie)if(fe.next(_e),fe.closed)return;fe.complete()})}(Ie);if((0,ae.L)(Ie))return function He(Ie){return ve((0,ae.Q)(Ie))}(Ie)}throw(0,se.z)(Ie)}function ve(Ie){return new ne.y(fe=>{(function Xe(Ie,fe){var _e,Ue,Le,H;return(0,_.mG)(this,void 0,void 0,function*(){try{for(_e=(0,_.KL)(Ie);!(Ue=yield _e.next()).done;)if(fe.next(Ue.value),fe.closed)return}catch(ge){Le={error:ge}}finally{try{Ue&&!Ue.done&&(H=_e.return)&&(yield H.call(_e))}finally{if(Le)throw Le.error}}fe.complete()})})(Ie,fe).catch(_e=>fe.error(_e))})}},6451:(Je,ye,N)=>{N.d(ye,{T:()=>oe});var _=N(8189),Y=N(8421),P=N(515),ne=N(7669),ee=N(8996);function oe(...se){const ie=(0,ne.yG)(se),ae=(0,ne._6)(se,1/0),V=se;return V.length?1===V.length?(0,Y.Xf)(V[0]):(0,_.J)(ae)((0,ee.D)(V,ie)):P.E}},5403:(Je,ye,N)=>{N.d(ye,{x:()=>Y});var _=N(2961);function Y(ne,ee,oe,se,ie){return new P(ne,ee,oe,se,ie)}class P extends _.Lv{constructor(ee,oe,se,ie,ae,V){super(ee),this.onFinalize=ae,this.shouldUnsubscribe=V,this._next=oe?function(j){try{oe(j)}catch(Q){ee.error(Q)}}:super._next,this._error=ie?function(j){try{ie(j)}catch(Q){ee.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(j){ee.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(Je,ye,N)=>{N.d(ye,{U:()=>P});var _=N(4482),Y=N(5403);function P(ne,ee){return(0,_.e)((oe,se)=>{let ie=0;oe.subscribe((0,Y.x)(se,ae=>{se.next(ne.call(ee,ae,ie++))}))})}},8189:(Je,ye,N)=>{N.d(ye,{J:()=>P});var _=N(5577),Y=N(4671);function P(ne=1/0){return(0,_.z)(Y.y,ne)}},5577:(Je,ye,N)=>{N.d(ye,{z:()=>ie});var _=N(4004),Y=N(8421),P=N(4482),ne=N(9672),ee=N(5403),se=N(576);function ie(ae,V,j=1/0){return(0,se.m)(V)?ie((Q,je)=>(0,_.U)((be,Ne)=>V(Q,be,je,Ne))((0,Y.Xf)(ae(Q,je))),j):("number"==typeof V&&(j=V),(0,P.e)((Q,je)=>function oe(ae,V,j,Q,je,be,Ne,Be){const de=[];let ve=0,He=0,Xe=!1;const Ie=()=>{Xe&&!de.length&&!ve&&V.complete()},fe=Ue=>ve<Q?_e(Ue):de.push(Ue),_e=Ue=>{be&&V.next(Ue),ve++;let Le=!1;(0,Y.Xf)(j(Ue,He++)).subscribe((0,ee.x)(V,H=>{null==je||je(H),be?fe(H):V.next(H)},()=>{Le=!0},void 0,()=>{if(Le)try{for(ve--;de.length&&ve<Q;){const H=de.shift();Ne?(0,ne.f)(V,Ne,()=>_e(H)):_e(H)}Ie()}catch(H){V.error(H)}}))};return ae.subscribe((0,ee.x)(V,fe,()=>{Xe=!0,Ie()})),()=>{null==Be||Be()}}(Q,je,ae,j)))}},5363:(Je,ye,N)=>{N.d(ye,{Q:()=>ne});var _=N(9672),Y=N(4482),P=N(5403);function ne(ee,oe=0){return(0,Y.e)((se,ie)=>{se.subscribe((0,P.x)(ie,ae=>(0,_.f)(ie,ee,()=>ie.next(ae),oe),()=>(0,_.f)(ie,ee,()=>ie.complete(),oe),ae=>(0,_.f)(ie,ee,()=>ie.error(ae),oe)))})}},3099:(Je,ye,N)=>{N.d(ye,{B:()=>ee});var _=N(8421),Y=N(7579),P=N(2961),ne=N(4482);function ee(se={}){const{connector:ie=(()=>new Y.x),resetOnError:ae=!0,resetOnComplete:V=!0,resetOnRefCountZero:j=!0}=se;return Q=>{let je,be,Ne,Be=0,de=!1,ve=!1;const He=()=>{null==be||be.unsubscribe(),be=void 0},Xe=()=>{He(),je=Ne=void 0,de=ve=!1},Ie=()=>{const fe=je;Xe(),null==fe||fe.unsubscribe()};return(0,ne.e)((fe,_e)=>{Be++,!ve&&!de&&He();const Ue=Ne=null!=Ne?Ne:ie();_e.add(()=>{Be--,0===Be&&!ve&&!de&&(be=oe(Ie,j))}),Ue.subscribe(_e),!je&&Be>0&&(je=new P.Hp({next:Le=>Ue.next(Le),error:Le=>{ve=!0,He(),be=oe(Xe,ae,Le),Ue.error(Le)},complete:()=>{de=!0,He(),be=oe(Xe,V),Ue.complete()}}),(0,_.Xf)(fe).subscribe(je))})(Q)}}function oe(se,ie,...ae){if(!0===ie)return void se();if(!1===ie)return;const V=new P.Hp({next:()=>{V.unsubscribe(),se()}});return ie(...ae).subscribe(V)}},9468:(Je,ye,N)=>{N.d(ye,{R:()=>Y});var _=N(4482);function Y(P,ne=0){return(0,_.e)((ee,oe)=>{oe.add(P.schedule(()=>ee.subscribe(oe),ne))})}},8505:(Je,ye,N)=>{N.d(ye,{b:()=>ee});var _=N(576),Y=N(4482),P=N(5403),ne=N(4671);function ee(oe,se,ie){const ae=(0,_.m)(oe)||se||ie?{next:oe,error:se,complete:ie}:oe;return ae?(0,Y.e)((V,j)=>{var Q;null===(Q=ae.subscribe)||void 0===Q||Q.call(ae);let je=!0;V.subscribe((0,P.x)(j,be=>{var Ne;null===(Ne=ae.next)||void 0===Ne||Ne.call(ae,be),j.next(be)},()=>{var be;je=!1,null===(be=ae.complete)||void 0===be||be.call(ae),j.complete()},be=>{var Ne;je=!1,null===(Ne=ae.error)||void 0===Ne||Ne.call(ae,be),j.error(be)},()=>{var be,Ne;je&&(null===(be=ae.unsubscribe)||void 0===be||be.call(ae)),null===(Ne=ae.finalize)||void 0===Ne||Ne.call(ae)}))}):ne.y}},4408:(Je,ye,N)=>{N.d(ye,{o:()=>ee});var _=N(727);class Y extends _.w0{constructor(se,ie){super()}schedule(se,ie=0){return this}}const P={setInterval(oe,se,...ie){const{delegate:ae}=P;return(null==ae?void 0:ae.setInterval)?ae.setInterval(oe,se,...ie):setInterval(oe,se,...ie)},clearInterval(oe){const{delegate:se}=P;return((null==se?void 0:se.clearInterval)||clearInterval)(oe)},delegate:void 0};var ne=N(8737);class ee extends Y{constructor(se,ie){super(se,ie),this.scheduler=se,this.work=ie,this.pending=!1}schedule(se,ie=0){var ae;if(this.closed)return this;this.state=se;const V=this.id,j=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId(j,V,ie)),this.pending=!0,this.delay=ie,this.id=null!==(ae=this.id)&&void 0!==ae?ae:this.requestAsyncId(j,this.id,ie),this}requestAsyncId(se,ie,ae=0){return P.setInterval(se.flush.bind(se,this),ae)}recycleAsyncId(se,ie,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return ie;null!=ie&&P.clearInterval(ie)}execute(se,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(se,ie);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,ie){let V,ae=!1;try{this.work(se)}catch(j){ae=!0,V=j||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:se,scheduler:ie}=this,{actions:ae}=ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(ae,this),null!=se&&(this.id=this.recycleAsyncId(ie,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,ye,N)=>{N.d(ye,{v:()=>P});var _=N(6063);class Y{constructor(ee,oe=Y.now){this.schedulerActionCtor=ee,this.now=oe}schedule(ee,oe=0,se){return new this.schedulerActionCtor(this,ee).schedule(se,oe)}}Y.now=_.l.now;class P extends Y{constructor(ee,oe=Y.now){super(ee,oe),this.actions=[],this._active=!1}flush(ee){const{actions:oe}=this;if(this._active)return void oe.push(ee);let se;this._active=!0;do{if(se=ee.execute(ee.state,ee.delay))break}while(ee=oe.shift());if(this._active=!1,se){for(;ee=oe.shift();)ee.unsubscribe();throw se}}}},4986:(Je,ye,N)=>{N.d(ye,{z:()=>P});var _=N(4408);const P=new(N(7565).v)(_.o)},6063:(Je,ye,N)=>{N.d(ye,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(Je,ye,N)=>{N.d(ye,{z:()=>_});const _={setTimeout(Y,P,...ne){const{delegate:ee}=_;return(null==ee?void 0:ee.setTimeout)?ee.setTimeout(Y,P,...ne):setTimeout(Y,P,...ne)},clearTimeout(Y){const{delegate:P}=_;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(Je,ye,N)=>{N.d(ye,{h:()=>Y});const Y=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,ye,N)=>{N.d(ye,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,ye,N)=>{N.d(ye,{_6:()=>oe,jO:()=>ne,yG:()=>ee});var _=N(576);function P(se){return se[se.length-1]}function ne(se){return(0,_.m)(P(se))?se.pop():void 0}function ee(se){return function Y(se){return se&&(0,_.m)(se.schedule)}(P(se))?se.pop():void 0}function oe(se,ie){return"number"==typeof P(se)?se.pop():ie}},8737:(Je,ye,N)=>{function _(Y,P){if(Y){const ne=Y.indexOf(P);0<=ne&&Y.splice(ne,1)}}N.d(ye,{P:()=>_})},3888:(Je,ye,N)=>{function _(Y){const ne=Y(ee=>{Error.call(ee),ee.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}N.d(ye,{d:()=>_})},2806:(Je,ye,N)=>{N.d(ye,{O:()=>ne,x:()=>P});var _=N(2416);let Y=null;function P(ee){if(_.v.useDeprecatedSynchronousErrorHandling){const oe=!Y;if(oe&&(Y={errorThrown:!1,error:null}),ee(),oe){const{errorThrown:se,error:ie}=Y;if(Y=null,se)throw ie}}else ee()}function ne(ee){_.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=ee)}},9672:(Je,ye,N)=>{function _(Y,P,ne,ee=0,oe=!1){const se=P.schedule(function(){ne(),oe?Y.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(Y.add(se),!oe)return se}N.d(ye,{f:()=>_})},4671:(Je,ye,N)=>{function _(Y){return Y}N.d(ye,{y:()=>_})},1144:(Je,ye,N)=>{N.d(ye,{z:()=>_});const _=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(Je,ye,N)=>{N.d(ye,{D:()=>Y});var _=N(576);function Y(P){return Symbol.asyncIterator&&(0,_.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Je,ye,N)=>{function _(Y){return"function"==typeof Y}N.d(ye,{m:()=>_})},3670:(Je,ye,N)=>{N.d(ye,{c:()=>P});var _=N(8822),Y=N(576);function P(ne){return(0,Y.m)(ne[_.L])}},6495:(Je,ye,N)=>{N.d(ye,{T:()=>P});var _=N(2202),Y=N(576);function P(ne){return(0,Y.m)(null==ne?void 0:ne[_.h])}},8239:(Je,ye,N)=>{N.d(ye,{t:()=>Y});var _=N(576);function Y(P){return(0,_.m)(null==P?void 0:P.then)}},3260:(Je,ye,N)=>{N.d(ye,{L:()=>ne,Q:()=>P});var _=N(655),Y=N(576);function P(ee){return(0,_.FC)(this,arguments,function*(){const se=ee.getReader();try{for(;;){const{value:ie,done:ae}=yield(0,_.qq)(se.read());if(ae)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ie)}}finally{se.releaseLock()}})}function ne(ee){return(0,Y.m)(null==ee?void 0:ee.getReader)}},4482:(Je,ye,N)=>{N.d(ye,{A:()=>Y,e:()=>P});var _=N(576);function Y(ne){return(0,_.m)(null==ne?void 0:ne.lift)}function P(ne){return ee=>{if(Y(ee))return ee.lift(function(oe){try{return ne(oe,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,ye,N)=>{N.d(ye,{h:()=>P});var _=N(2416),Y=N(3410);function P(ne){Y.z.setTimeout(()=>{const{onUnhandledError:ee}=_.v;if(!ee)throw ne;ee(ne)})}},4532:(Je,ye,N)=>{function _(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(ye,{z:()=>_})},655:(Je,ye,N)=>{function ne(G,he){var me={};for(var xe in G)Object.prototype.hasOwnProperty.call(G,xe)&&he.indexOf(xe)<0&&(me[xe]=G[xe]);if(null!=G&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(xe=Object.getOwnPropertySymbols(G);Re<xe.length;Re++)he.indexOf(xe[Re])<0&&Object.prototype.propertyIsEnumerable.call(G,xe[Re])&&(me[xe[Re]]=G[xe[Re]])}return me}function Q(G,he,me,xe){return new(me||(me=Promise))(function(De,st){function Mt(Qt){try{Qe(xe.next(Qt))}catch(Dt){st(Dt)}}function fn(Qt){try{Qe(xe.throw(Qt))}catch(Dt){st(Dt)}}function Qe(Qt){Qt.done?De(Qt.value):function Re(De){return De instanceof me?De:new me(function(st){st(De)})}(Qt.value).then(Mt,fn)}Qe((xe=xe.apply(G,he||[])).next())})}function Ie(G){return this instanceof Ie?(this.v=G,this):new Ie(G)}function fe(G,he,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,xe=me.apply(G,he||[]),De=[];return Re={},st("next"),st("throw"),st("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function st(ct){xe[ct]&&(Re[ct]=function(Ln){return new Promise(function(wn,En){De.push([ct,Ln,wn,En])>1||Mt(ct,Ln)})})}function Mt(ct,Ln){try{!function fn(ct){ct.value instanceof Ie?Promise.resolve(ct.value.v).then(Qe,Qt):Dt(De[0][2],ct)}(xe[ct](Ln))}catch(wn){Dt(De[0][3],wn)}}function Qe(ct){Mt("next",ct)}function Qt(ct){Mt("throw",ct)}function Dt(ct,Ln){ct(Ln),De.shift(),De.length&&Mt(De[0][0],De[0][1])}}function Ue(G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,he=G[Symbol.asyncIterator];return he?he.call(G):(G=function Be(G){var he="function"==typeof Symbol&&Symbol.iterator,me=he&&G[he],xe=0;if(me)return me.call(G);if(G&&"number"==typeof G.length)return{next:function(){return G&&xe>=G.length&&(G=void 0),{value:G&&G[xe++],done:!G}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(G),me={},xe("next"),xe("throw"),xe("return"),me[Symbol.asyncIterator]=function(){return this},me);function xe(De){me[De]=G[De]&&function(st){return new Promise(function(Mt,fn){!function Re(De,st,Mt,fn){Promise.resolve(fn).then(function(Qe){De({value:Qe,done:Mt})},st)}(Mt,fn,(st=G[De](st)).done,st.value)})}}}N.d(ye,{FC:()=>fe,KL:()=>Ue,_T:()=>ne,mG:()=>Q,qq:()=>Ie})},5e3:(Je,ye,N)=>{N.d(ye,{$8M:()=>oo,$Z:()=>mv,AFp:()=>M_,AaK:()=>ie,CRH:()=>__,CZH:()=>R_,CqO:()=>vv,EJc:()=>N_,F4k:()=>Tf,FYo:()=>_m,FiY:()=>mt,G48:()=>tT,GfV:()=>Im,JOm:()=>Ls,LFG:()=>x,LSH:()=>rf,Lbi:()=>O_,NdJ:()=>_v,OlP:()=>Pn,PXZ:()=>V_,QGY:()=>qd,Qsj:()=>wm,R0b:()=>Eo,RDi:()=>nc,Rgc:()=>_l,SBq:()=>ml,Sil:()=>Hb,Suo:()=>v_,TTD:()=>Li,TgZ:()=>ia,VLi:()=>lI,X6Q:()=>oC,XFs:()=>wt,Xpm:()=>St,Y36:()=>Df,YKP:()=>CE,Yjl:()=>At,Yz7:()=>Qe,ZZ4:()=>fp,_UZ:()=>Bu,_Vd:()=>vm,_c5:()=>K_,_uU:()=>xv,aQg:()=>Il,c2e:()=>oI,cJS:()=>Dt,cg1:()=>Lv,dDg:()=>F_,deG:()=>pe,dqk:()=>Ht,eFA:()=>Qm,g9A:()=>qm,h0i:()=>yl,hGG:()=>dT,iGM:()=>UE,ifc:()=>Yt,ip1:()=>iI,kL8:()=>Mf,lG2:()=>nt,oAB:()=>q,q4F:()=>Dm,qLn:()=>Fc,qZA:()=>bf,sBO:()=>rT,sIi:()=>Va,s_b:()=>ph,soG:()=>sp,tBr:()=>Nt,tb:()=>ip,tp0:()=>Rn,uIk:()=>ra,vHH:()=>Ne,vpe:()=>la,wAp:()=>ft,z2F:()=>B_,zSh:()=>Jt,zs3:()=>Dr});var _=N(7579),Y=N(727),P=N(8306),ne=N(6451),ee=N(3099);function oe(i){for(let s in i)if(i[s]===oe)return s;throw Error("Could not find renamed property on target object.")}function ie(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ie).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ae(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const V=oe({__forward_ref__:oe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ie(this())},i}function Q(i){return function je(i){return"function"==typeof i&&i.hasOwnProperty(V)&&i.__forward_ref__===j}(i)?i():i}class Ne extends Error{constructor(s,a){super(function Be(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function de(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():de(i)}function fe(i,s){const a=s?` in ${s}`:"";throw new Ne(-201,`No provider for ${ve(i)} found${a}`)}function Re(i,s){null==i&&function De(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Qe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Dt(i){return{providers:i.providers||[],imports:i.imports||[]}}function ct(i){return Ln(i,br)||Ln(i,Kr)}function Ln(i,s){return i.hasOwnProperty(s)?i[s]:null}function Mn(i){return i&&(i.hasOwnProperty(ys)||i.hasOwnProperty(Ri))?i[ys]:null}const br=oe({\u0275prov:oe}),ys=oe({\u0275inj:oe}),Kr=oe({ngInjectableDef:oe}),Ri=oe({ngInjectorDef:oe});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let ai;function qn(i){const s=ai;return ai=i,s}function Hs(i,s,a){const c=ct(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&wt.Optional?null:void 0!==s?s:void fe(ie(i),"Injector")}function tr(i){return{toString:i}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),Yt=(()=>{return(i=Yt||(Yt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Yt;var i})();const lt="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,cr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=lt||"undefined"!=typeof global&&global||It||cr,Fr={},pt=[],qs=oe({\u0275cmp:oe}),qt=oe({\u0275dir:oe}),Qi=oe({\u0275pipe:oe}),Ze=oe({\u0275mod:oe}),we=oe({\u0275fac:oe}),qe=oe({__NG_ELEMENT_ID__:oe});let Tt=0;function St(i){return tr(()=>{const a={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||pt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Yt.Emulated,id:"c",styles:i.styles||pt,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,p=i.features,y=i.pipes;return c.id+=Tt++,c.inputs=J(i.inputs,a),c.outputs=J(i.outputs),p&&p.forEach(E=>E(c)),c.directiveDefs=l?()=>("function"==typeof l?l():l).map(lr):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(U):null,c})}function lr(i){return Ut(i)||function pn(i){return i[qt]||null}(i)}function U(i){return function In(i){return i[Qi]||null}(i)}const L={};function q(i){return tr(()=>{const s={type:i.type,bootstrap:i.bootstrap||pt,declarations:i.declarations||pt,imports:i.imports||pt,exports:i.exports||pt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(L[i.id]=i.type),s})}function J(i,s){if(null==i)return Fr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),a[l]=c,s&&(s[l]=p)}return a}const nt=St;function At(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[qs]||null}function cn(i,s){const a=i[Ze]||null;if(!a&&!0===s)throw new Error(`Type ${ie(i)} does not have '\u0275mod' property.`);return a}function Yr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Pi(i){return Array.isArray(i)&&!0===i[1]}function Qa(i){return 0!=(8&i.flags)}function Cl(i){return 2==(2&i.flags)}function ki(i){return 1==(1&i.flags)}function Fi(i){return null!==i.template}function Qu(i){return 0!=(512&i[2])}function Sr(i,s){return i.hasOwnProperty(we)?i[we]:null}class Zs{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Li(){return Ao}function Ao(i){return i.type.prototype.ngOnChanges&&(i.setInput=Mh),Pl}function Pl(){const i=Ys(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Fr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Mh(i,s,a,c){const l=Ys(i)||function xo(i,s){return i[Ju]=s}(i,{previous:Fr,current:null}),p=l.current||(l.current={}),y=l.previous,E=this.declaredInputs[a],I=y[E];p[E]=new Zs(I&&I.currentValue,s,y===Fr),i[c]=s}Li.ngInherit=!0;const Ju="__ngSimpleChanges__";function Ys(i){return i[Ju]||null}let Mo;function nc(i){Mo=i}function mn(i){return!!i.listen}const va={createRenderer:(i,s)=>function Ui(){return void 0!==Mo?Mo:"undefined"!=typeof document?document:void 0}()};function un(i){for(;Array.isArray(i);)i=i[0];return i}function hr(i,s){return un(s[i.index])}function An(i,s){return i.data[s]}function wr(i,s){const a=s[i];return Yr(a)?a:a[0]}function Xs(i){return 4==(4&i[2])}function Ji(i){return 128==(128&i[2])}function Ei(i,s){return null==s?null:i[s]}function Bi(i){i[18]=0}function Oo(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Et={lFrame:Po(null),bindingsEnabled:!0};function tu(){return Et.bindingsEnabled}function Te(){return Et.lFrame.lView}function Kt(){return Et.lFrame.tView}function Dn(){let i=nu();for(;null!==i&&64===i.type;)i=i.parent;return i}function nu(){return Et.lFrame.currentTNode}function di(i,s){const a=Et.lFrame;a.currentTNode=i,a.isParent=s}function ac(){return Et.lFrame.isParent}function su(i,s){const a=Et.lFrame;a.bindingIndex=a.bindingRootIndex=i,Da(s)}function Da(i){Et.lFrame.currentDirectiveIndex=i}function au(){return Et.lFrame.currentQueryIndex}function Ul(i){Et.lFrame.currentQueryIndex=i}function Vl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function uu(i,s,a){if(a&wt.SkipSelf){let l=s,p=i;for(;!(l=l.parent,null!==l||a&wt.Host||(l=Vl(p),null===l||(p=p[15],10&l.type))););if(null===l)return!1;s=l,i=p}const c=Et.lFrame=Bl();return c.currentTNode=s,c.lView=i,!0}function eo(i){const s=Bl(),a=i[1];Et.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Bl(){const i=Et.lFrame,s=null===i?null:i.child;return null===s?Po(i):s}function Po(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function jl(){const i=Et.lFrame;return Et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const cu=jl;function Qr(){const i=jl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function to(i){Et.lFrame.selectedIndex=i}function ba(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:R}=p;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),S&&((i.viewHooks||(i.viewHooks=[])).push(a,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,S)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function ts(i,s,a){Gl(i,s,3,a)}function no(i,s,a,c){(3&i[2])===a&&Gl(i,s,a,c)}function nr(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Gl(i,s,a,c){const p=null!=c?c:-1,y=s.length-1;let E=0;for(let I=void 0!==c?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=c&&E>=c)break}else s[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(xp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function xp(i,s,a,c){const l=a[c]<0,p=a[c+1],E=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class ko{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function dn(i,s,a){const c=mn(i);let l=0;for(;l<a.length;){const p=a[l];if("number"==typeof p){if(0!==p)break;l++;const y=a[l++],E=a[l++],I=a[l++];c?i.setAttribute(s,E,I,y):s.setAttributeNS(y,E,I)}else{const y=p,E=a[++l];rr(y)?c&&i.setProperty(s,y,E):c?i.setAttribute(s,y,E):s.setAttribute(y,E),l++}}return l}function bt(i){return 3===i||4===i||6===i}function rr(i){return 64===i.charCodeAt(0)}function Ta(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||Ca(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function Ca(i,s,a,c,l){let p=0,y=i.length;if(-1===s)y=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==l&&(i[p+1]=l));if(c===i[p+1])return void(i[p+2]=l)}p++,null!==c&&p++,null!==l&&p++}-1!==y&&(i.splice(y,0,s),p=y+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==l&&i.splice(p++,0,l)}function As(i){return-1!==i}function Nn(i){return 32767&i}function xn(i,s){let a=function Xt(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let kt=!0;function Fo(i){const s=kt;return kt=i,s}let hu=0;function Bn(i,s){const a=Xr(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,ji(c.data,i),ji(s,null),ji(c.blueprint,null));const l=xs(i,s),p=i.injectorIndex;if(As(l)){const y=Nn(l),E=xn(l,s),I=E[1].data;for(let S=0;S<8;S++)s[p+S]=E[y+S]|I[y+S]}return s[p+8]=l,p}function ji(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Xr(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function xs(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){const p=l[1],y=p.type;if(c=2===y?p.declTNode:1===y?l[6]:null,null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function io(i,s,a){!function fu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(qe)&&(c=a[qe]),null==c&&(c=a[qe]=hu++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function rs(i,s,a){if(a&wt.Optional)return i;fe(s,"NodeInjector")}function $i(i,s,a,c){if(a&wt.Optional&&void 0===c&&(c=null),0==(a&(wt.Self|wt.Host))){const l=i[9],p=qn(void 0);try{return l?l.get(s,c,a&wt.Optional):Hs(s,c,a&wt.Optional)}finally{qn(p)}}return rs(c,s,a)}function Rs(i,s,a,c=wt.Default,l){if(null!==i){const p=function Lo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(qe)?i[qe]:void 0;return"number"==typeof s?s>=0?255&s:Sa:s}(a);if("function"==typeof p){if(!uu(s,i,c))return c&wt.Host?rs(l,a,c):$i(s,a,c,l);try{const y=p(c);if(null!=y||c&wt.Optional)return y;fe(a)}finally{cu()}}else if("number"==typeof p){let y=null,E=Xr(i,s),I=-1,S=c&wt.Host?s[16][6]:null;for((-1===E||c&wt.SkipSelf)&&(I=-1===E?xs(i,s):s[E+8],-1!==I&&ql(c,!1)?(y=s[1],E=Nn(I),s=xn(I,s)):E=-1);-1!==E;){const R=s[1];if(mc(p,E,R.data)){const k=Kn(E,s,a,y,c,S);if(k!==so)return k}I=s[E+8],-1!==I&&ql(c,s[1].data[E+8]===S)&&mc(p,E,s)?(y=R,E=Nn(I),s=xn(I,s)):E=-1}}}return $i(s,a,c,l)}const so={};function Sa(){return new Er(Dn(),Te())}function Kn(i,s,a,c,l,p){const y=s[1],E=y.data[i+8],R=Aa(E,y,a,null==c?Cl(E)&&kt:c!=y&&0!=(3&E.type),l&wt.Host&&p===E);return null!==R?is(s,y,R,E):so}function Aa(i,s,a,c,l){const p=i.providerIndexes,y=s.data,E=1048575&p,I=i.directiveStart,R=p>>20,B=l?E+R:i.directiveEnd;for(let Z=c?E:E+R;Z<B;Z++){const ce=y[Z];if(Z<I&&a===ce||Z>=I&&ce.type===a)return Z}if(l){const Z=y[I];if(Z&&Fi(Z)&&Z.type===a)return I}return null}function is(i,s,a,c){let l=i[a];const p=s.data;if(function lu(i){return i instanceof ko}(l)){const y=l;y.resolving&&function He(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${i}${a}`)}(ve(p[a]));const E=Fo(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?qn(y.injectImpl):null;uu(i,c,wt.Default);try{l=i[a]=y.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function fy(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:p}=s.type.prototype;if(c){const y=Ao(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&qn(I),Fo(E),y.resolving=!1,cu()}}return l}function mc(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ql(i,s){return!(i&wt.Self||i&wt.Host&&s)}class Er{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Rs(this._tNode,this._lView,s,c,a)}}function oo(i){return function gc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const p=a[l];if(bt(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(p===s)return a[l+1];l+=2}}}return null}(Dn(),i)}const Uo="__parameters__";function xa(i,s,a){return tr(()=>{const c=function Ph(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...p){if(this instanceof l)return c.apply(this,p),this;const y=new l(...p);return E.annotation=y,E;function E(I,S,R){const k=I.hasOwnProperty(Uo)?I[Uo]:Object.defineProperty(I,Uo,{value:[]})[Uo];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(y),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class Pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qe({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pe=new Pn("AnalyzeForEntryComponents");function Br(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Br(c,s)):s!==i&&s.push(c)}return s}function jr(i,s){i.forEach(a=>Array.isArray(a)?jr(a,s):s(a))}function pu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function _c(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const ei={},Go="__NG_DI_FLAG__",$r="ngTempTokenPath",_u=/\n/gm,ho="__source",Bh=oe({provide:String,useValue:oe});let zo;function D(i){const s=zo;return zo=i,s}function T(i,s=wt.Default){if(void 0===zo)throw new Ne(203,"");return null===zo?Hs(i,void 0,s):zo.get(i,s&wt.Optional?null:void 0,s)}function x(i,s=wt.Default){return(function Sn(){return ai}()||T)(Q(i),s)}const W=x;function X(i){const s=[];for(let a=0;a<i.length;a++){const c=Q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Ne(900,"");let l,p=wt.Default;for(let y=0;y<c.length;y++){const E=c[y],I=et(E);"number"==typeof I?-1===I?l=E.token:p|=I:l=E}s.push(x(l,p))}else s.push(x(c))}return s}function Se(i,s){return i[Go]=s,i.prototype[Go]=s,i}function et(i){return i[Go]}const Nt=Se(xa("Inject",i=>({token:i})),-1),mt=Se(xa("Optional"),8),Rn=Se(xa("SkipSelf"),4);var Ls=(()=>((Ls=Ls||{})[Ls.Important=1]="Important",Ls[Ls.DashCase=2]="DashCase",Ls))();const yy="__ngContext__";function ni(i,s){i[yy]=s}function Hp(i){const s=function Wo(i){return i[yy]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function qp(i,s){return undefined(i,s)}function ed(i){const s=i[3];return Pi(s)?s[3]:s}function Zp(i){return Qp(i[13])}function Yp(i){return Qp(i[4])}function Qp(i){for(;null!==i&&!Pi(i);)i=i[4];return i}function td(i,s,a,c,l){if(null!=c){let p,y=!1;Pi(c)?p=c:Yr(c)&&(y=!0,c=c[0]);const E=un(c);0===i&&null!==a?null==l?rg(s,a,E):bi(s,a,E,l||null,!0):1===i&&null!==a?bi(s,a,E,l||null,!0):2===i?function Yh(i,s,a){const c=bu(i,s);c&&function sg(i,s,a,c){mn(i)?i.removeChild(s,a,c):s.removeChild(a)}(i,c,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=p&&function Or(i,s,a,c,l){const p=a[7];p!==un(a)&&td(s,i,c,p,l);for(let E=10;E<a.length;E++){const I=a[E];xc(I[1],I,i,s,c,p)}}(s,i,p,a,l)}}function Du(i,s,a){if(mn(i))return i.createElement(s,a);{const c=null!==a?function tc(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?i.createElement(s):i.createElementNS(c,s)}}function qh(i,s){const a=i[9],c=a.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,Oo(l,-1)),a.splice(c,1)}function Tc(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&qh(l,c),s>0&&(i[a-1][4]=c[4]);const p=_c(i,10+s);!function eg(i,s){xc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Cc(i,s){if(!(256&s[2])){const a=s[11];mn(a)&&a.destroyNode&&xc(i,s,a,3,null,null),function ng(i){let s=i[13];if(!s)return Wh(i[1],i);for(;s;){let a=null;if(Yr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Yr(s)&&Wh(s[1],s),s=s[3];null===s&&(s=i),Yr(s)&&Wh(s[1],s),a=s&&s[4]}s=a}}(s)}}function Wh(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function id(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof ko)){const p=a[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=l[p[y]],I=p[y+1];try{I.call(E)}finally{}}else try{p.call(l)}finally{}}}}(i,s),function Kh(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+1],E="function"==typeof y?y(s):un(s[y]),I=c[l=a[p+2]],S=a[p+3];"boolean"==typeof S?E.removeEventListener(a[p],I,S):S>=0?c[l=S]():c[l=-S].unsubscribe(),p+=2}else{const y=c[l=a[p+1]];a[p].call(y)}if(null!==c){for(let p=l+1;p<c.length;p++)c[p]();s[7]=null}}(i,s),1===s[1].type&&mn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Pi(s[3])){a!==s[3]&&qh(a,s);const c=s[19];null!==c&&c.detachView(i)}}}function sd(i,s,a){return function Zh(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===Yt.None||l===Yt.Emulated)return null}return hr(c,a)}(i,s.parent,a)}function bi(i,s,a,c,l){mn(i)?i.insertBefore(s,a,c,l):s.insertBefore(a,c,l)}function rg(i,s,a){mn(i)?i.appendChild(s,a):s.appendChild(a)}function ig(i,s,a,c,l){null!==c?bi(i,s,a,c,l):rg(i,s,a)}function bu(i,s){return mn(i)?i.parentNode(s):s.parentNode}let od=function rt(i,s,a){return 40&i.type?hr(i,a):null};function Ko(i,s,a,c){const l=sd(i,c,s),p=s[11],E=function Vs(i,s,a){return od(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)ig(p,l,a[I],E,!1);else ig(p,l,a,E,!1)}function Zo(i,s){if(null!==s){const a=s.type;if(3&a)return hr(s,i);if(4&a)return Ac(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Zo(i,c);{const l=i[s.index];return Pi(l)?Ac(-1,l):un(l)}}if(32&a)return qp(s,i)()||un(i[s.index]);{const c=og(i,s);return null!==c?Array.isArray(c)?c[0]:Zo(ed(i[16]),c):Zo(i,s.next)}}return null}function og(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Ac(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return Zo(c,l)}return s[7]}function Oa(i,s,a,c,l,p,y){for(;null!=a;){const E=c[a.index],I=a.type;if(y&&0===s&&(E&&ni(un(E),c),a.flags|=4),64!=(64&a.flags))if(8&I)Oa(i,s,a.child,c,l,p,!1),td(s,i,l,E,p);else if(32&I){const S=qp(a,c);let R;for(;R=S();)td(s,i,l,R,p);td(s,i,l,E,p)}else 16&I?Rc(i,s,c,a,l,p):td(s,i,l,E,p);a=y?a.projectionNext:a.next}}function xc(i,s,a,c,l,p){Oa(a,c,i.firstChild,s,l,p,!1)}function Rc(i,s,a,c,l,p){const y=a[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)td(s,i,l,I[S],p);else Oa(i,s,I,y[3],l,p,!0)}function ag(i,s,a){mn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Mc(i,s,a){mn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}class Na{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Jh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,dd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Yn=(()=>((Yn=Yn||{})[Yn.NONE=0]="NONE",Yn[Yn.HTML=1]="HTML",Yn[Yn.STYLE=2]="STYLE",Yn[Yn.SCRIPT=3]="SCRIPT",Yn[Yn.URL=4]="URL",Yn[Yn.RESOURCE_URL=5]="RESOURCE_URL",Yn))();function rf(i){const s=function kc(){const i=Te();return i&&i[12]}();return s?s.sanitize(Yn.URL,i)||"":function Pa(i,s){const a=function ld(i){return i instanceof Na&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function as(i){return i instanceof Na?i.changingThisBreaksApplicationSecurity:i}(i):function xu(i){return(i=String(i)).match(Jh)||i.match(dd)?i:"unsafe:"+i}(de(i))}function mg(i){return i.ngOriginalError}function A0(i,...s){i.error(...s)}class Fc{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),c=function S0(i){return i&&i.ngErrorLogger||A0}(s);c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&mg(s);for(;a&&mg(a);)a=mg(a);return a||null}}const x0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function Hn(i){return i instanceof Function?i():i}function _g(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const p=s.length;if(l+p===c||i.charCodeAt(l+p)<=32)return l}a=l+1}}const Ay="ng-template";function uf(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==_g(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function wg(i){return 4===i.type&&i.value!==Ay}function xy(i,s,a){return s===(4!==i.type||a?i.value:Ay)}function Ry(i,s,a){let c=4;const l=i.attrs||[],p=function Oy(i){for(let s=0;s<i.length;s++)if(bt(i[s]))return s;return i.length}(l);let y=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!xy(i,I,a)||""===I&&1===s.length){if(Gi(c))return!1;y=!0}}else{const S=8&c?I:s[++E];if(8&c&&null!==i.attrs){if(!uf(i.attrs,S,a)){if(Gi(c))return!1;y=!0}continue}const k=cf(8&c?"class":I,l,wg(i),a);if(-1===k){if(Gi(c))return!1;y=!0;continue}if(""!==S){let B;B=k>p?"":l[k+1].toLowerCase();const Z=8&c?B:null;if(Z&&-1!==_g(Z,S,0)||2&c&&S!==B){if(Gi(c))return!1;y=!0}}}}else{if(!y&&!Gi(c)&&!Gi(I))return!1;if(y&&Gi(I))continue;y=!1,c=I|1&c}}return Gi(c)||y}function Gi(i){return 0==(1&i)}function cf(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let p=!1;for(;l<s.length;){const y=s[l];if(y===i)return l;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=s[++l];for(;"string"==typeof E;)E=s[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=p?1:2}return-1}return function Eg(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function My(i,s,a=!1){for(let c=0;c<s.length;c++)if(Ry(i,s[c],a))return!0;return!1}function Py(i,s){return i?":not("+s.trim()+")":s}function M0(i){let s=i[0],a=1,c=2,l="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const E=i[++a];l+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?l+="."+y:4&c&&(l+=" "+y);else""!==l&&!Gi(y)&&(s+=Py(p,l),l=""),c=y,p=p||!Gi(c);a++}return""!==l&&(s+=Py(p,l)),s}const xt={};function B0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],p=a[c+1];if(-1!==p){const y=i.data[p];Ul(l),y.contentQueries(2,s[p],p)}}}function wd(i,s,a,c,l,p,y,E,I,S){const R=s.blueprint.slice();return R[0]=l,R[2]=140|c,Bi(R),R[3]=R[15]=i,R[8]=a,R[10]=y||i&&i[10],R[11]=E||i&&i[11],R[12]=I||i&&i[12]||null,R[9]=S||i&&i[9]||null,R[6]=p,R[16]=2==s.type?i[16]:R,R}function Gc(i,s,a,c,l){let p=i.data[s];if(null===p)p=function Ed(i,s,a,c,l){const p=nu(),y=ac(),I=i.data[s]=function G0(i,s,a,c,l,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=I),null!==p&&(y?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,c,l),function lc(){return Et.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=l;const y=function Js(){const i=Et.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return di(p,!0),p}function zc(i,s,a,c){if(0===a)return-1;const l=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function cs(i,s,a){eo(s);try{const c=i.viewQuery;null!==c&&Wy(1,c,a);const l=i.template;null!==l&&Sg(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&B0(i,s),i.staticViewQueries&&Wy(2,i.viewQuery,a);const p=i.components;null!==p&&function j0(i,s){for(let a=0;a<s.length;a++)zy(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Qr()}}function qc(i,s,a,c){const l=s[2];if(256!=(256&l)){eo(s);try{Bi(s),function ru(i){return Et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Sg(i,s,a,2,c);const y=3==(3&l);if(y){const S=i.preOrderCheckHooks;null!==S&&ts(s,S,null)}else{const S=i.preOrderHooks;null!==S&&no(s,S,0,null),nr(s,0)}if(function Oe(i){for(let s=Zp(i);null!==s;s=Yp(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],p=l[3];0==(1024&l[2])&&Oo(p,1),l[2]|=1024}}}(s),function _D(i){for(let s=Zp(i);null!==s;s=Yp(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Ji(c)&&qc(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&B0(i,s),y){const S=i.contentCheckHooks;null!==S&&ts(s,S)}else{const S=i.contentHooks;null!==S&&no(s,S,1),nr(s,1)}!function dD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)to(~l);else{const p=l,y=a[++c],E=a[++c];su(y,p),E(2,s[p])}}}finally{to(-1)}}(i,s);const E=i.components;null!==E&&function hD(i,s){for(let a=0;a<s.length;a++)mr(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Wy(2,I,c),y){const S=i.viewCheckHooks;null!==S&&ts(s,S)}else{const S=i.viewHooks;null!==S&&no(s,S,2),nr(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Oo(s[3],-1))}finally{Qr()}}}function $0(i,s,a,c){const l=s[10],y=Xs(s);try{!y&&l.begin&&l.begin(),y&&cs(i,s,c),qc(i,s,a,c)}finally{!y&&l.end&&l.end()}}function Sg(i,s,a,c,l){const p=function fr(){return Et.lFrame.selectedIndex}(),y=2&c;try{to(-1),y&&s.length>20&&function lf(i,s,a,c){if(!c)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&ts(s,p,a)}else{const p=i.preOrderHooks;null!==p&&no(s,p,0,a)}to(a)}(i,s,20,!1),a(c,l)}finally{to(p)}}function pf(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=gf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function gf(i,s,a,c,l,p,y,E,I,S){const R=20+c,k=R+l,B=function xg(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:xt);return a}(R,k),Z="function"==typeof S?S():S;return B[1]={type:i,blueprint:B,template:a,queries:null,viewQuery:E,declTNode:s,data:B.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Z,incompleteFirstPass:!1}}function jy(i,s,a,c){const l=J0(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&Ky(i).push(c,l.length-1))}function Rg(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function zi(i,s,a,c,l,p){const y=p.hostBindings;if(y){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Z0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(c,l,y)}}function Q0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Mg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function vD(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Fi(s)&&(a[""]=i)}}function Gy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function X0(i,s,a,c,l){i.data[c]=l;const p=l.factory||(l.factory=Sr(l.type)),y=new ko(p,Fi(l),null);i.blueprint[c]=y,a[c]=y,zi(i,s,0,c,zc(i,a,l.hostVars,xt),l)}function Og(i,s,a){const c=hr(s,i),l=pf(a),p=i[10],y=ot(i,wd(i,l,null,a.onPush?64:16,c,s,p,p.createRenderer(c,a),null,null));i[s.index]=y}function ea(i,s,a,c,l,p){const y=hr(i,s);!function Ng(i,s,a,c,l,p,y){if(null==p)mn(i)?i.removeAttribute(s,l,a):s.removeAttribute(l);else{const E=null==y?de(p):y(p,c||"",l);mn(i)?i.setAttribute(s,l,E,a):a?s.setAttributeNS(a,l,E):s.setAttribute(l,E)}}(s[11],y,p,i.value,a,c,l)}function Gr(i,s,a,c,l,p){const y=p[s];if(null!==y){const E=c.setInput;for(let I=0;I<y.length;){const S=y[I++],R=y[I++],k=y[I++];null!==E?c.setInput(a,k,S,R):a[R]=k}}}function Sd(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function mr(i,s){const a=wr(s,i);if(Ji(a)){const c=a[1];80&a[2]?qc(c,a,c.template,a[8]):a[5]>0&&ka(a)}}function ka(i){for(let c=Zp(i);null!==c;c=Yp(c))for(let l=10;l<c.length;l++){const p=c[l];if(1024&p[2]){const y=p[1];qc(y,p,y.template,p[8])}else p[5]>0&&ka(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=wr(a[c],i);Ji(l)&&l[5]>0&&ka(l)}}function zy(i,s){const a=wr(s,i),c=a[1];(function tt(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),cs(c,a,a[8])}function ot(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function qy(i){for(;i;){i[2]|=64;const s=ed(i);if(Qu(i)&&!s)return i;i=s}return null}function Ir(i){!function re(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=Hp(a),l=c[1];$0(l,c,l.template,a)}}(i[8])}function Wy(i,s,a){Ul(0),s(i,a)}const ED=(()=>Promise.resolve(null))();function J0(i){return i[7]||(i[7]=[])}function Ky(i){return i.cleanup||(i.cleanup=[])}function ID(i,s){const a=i[9],c=a?a.get(Fc,null):null;c&&c.handleError(s)}function Rt(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,p=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?p=E:1==p?l=ae(l,E):2==p&&(c=ae(c,E+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}const ht=new Pn("INJECTOR",-1);class xd{get(s,a=ei){if(a===ei){const c=new Error(`NullInjectorError: No provider for ${ie(s)}!`);throw c.name="NullInjectorError",c}return a}}const Jt=new Pn("Set Injector scope."),mf={},ar={};let $e;function yf(){return void 0===$e&&($e=new xd),$e}function kg(i,s=null,a=null,c){const l=Nu(i,s,a,c);return l._resolveInjectorDefTypes(),l}function Nu(i,s=null,a=null,c){return new DD(i,a,s||yf(),c)}class DD{constructor(s,a,c,l=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&jr(a,E=>this.processProvider(E,s,a)),jr([s],E=>this.processInjectorType(E,[],p)),this.records.set(ht,Kc(void 0,this));const y=this.records.get(Jt);this.scope=null!=y?y.value:null,this.source=l||("object"==typeof s?null:ie(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ei,c=wt.Default){this.assertNotDestroyed();const l=D(this),p=qn(void 0);try{if(!(c&wt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function Fg(i){return"function"==typeof i||"object"==typeof i&&i instanceof Pn}(s)&&ct(s);E=I&&this.injectableDefInScope(I)?Kc(Rd(s),mf):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&wt.Self?yf():this.parent).get(s,a=c&wt.Optional&&a===ei?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[$r]=y[$r]||[]).unshift(ie(s)),l)throw y;return function at(i,s,a,c){const l=i[$r];throw s[ho]&&l.unshift(s[ho]),i.message=function ut(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=ie(s);if(Array.isArray(s))l=s.map(ie).join(" -> ");else if("object"==typeof s){let p=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):ie(E)))}l=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(_u,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[$r]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{qn(p),D(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,l)=>s.push(ie(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(s,a,c){if(!(s=Q(s)))return!1;let l=Mn(s);const p=null==l&&s.ngModule||void 0,y=void 0===p?s:p,E=-1!==c.indexOf(y);if(void 0!==p&&(l=Mn(p)),null==l)return!1;if(null!=l.imports&&!E){let R;c.push(y);try{jr(l.imports,k=>{this.processInjectorType(k,a,c)&&(void 0===R&&(R=[]),R.push(k))})}finally{}if(void 0!==R)for(let k=0;k<R.length;k++){const{ngModule:B,providers:Z}=R[k];jr(Z,ce=>this.processProvider(ce,B,Z||pt))}}this.injectorDefTypes.add(y);const I=Sr(y)||(()=>new y);this.records.set(y,Kc(I,mf));const S=l.providers;if(null!=S&&!E){const R=s;jr(S,k=>this.processProvider(k,R,S))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,c){let l=Zc(s=Q(s))?s:Q(s&&s.provide);const p=function vf(i,s,a){return qi(i)?Kc(void 0,i.useValue):Kc(function Zy(i,s,a){let c;if(Zc(i)){const l=Q(i);return Sr(l)||Rd(l)}if(qi(i))c=()=>Q(i.useValue);else if(function rw(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...X(i.deps||[]));else if(function Yy(i){return!(!i||!i.useExisting)}(i))c=()=>x(Q(i.useExisting));else{const l=Q(i&&(i.useClass||i.provide));if(!function Qy(i){return!!i.deps}(i))return Sr(l)||Rd(l);c=()=>new l(...X(i.deps))}return c}(i),mf)}(s);if(Zc(s)||!0!==s.multi)this.records.get(l);else{let y=this.records.get(l);y||(y=Kc(void 0,mf,!0),y.factory=()=>X(y.multi),this.records.set(l,y)),l=s,y.multi.push(s)}this.records.set(l,p)}hydrate(s,a){return a.value===mf&&(a.value=ar,a.value=a.factory()),"object"==typeof a.value&&a.value&&function te(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Rd(i){const s=ct(i),a=null!==s?s.factory:Sr(i);if(null!==a)return a;if(i instanceof Pn)throw new Ne(204,!1);if(i instanceof Function)return function bD(i){const s=i.length;if(s>0)throw function co(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new Ne(204,!1);const a=function wn(i){const s=i&&(i[br]||i[Kr]);if(s){const a=function En(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ne(204,!1)}function Kc(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function qi(i){return null!==i&&"object"==typeof i&&Bh in i}function Zc(i){return"function"==typeof i}let Dr=(()=>{class i{static create(a,c){var l;if(Array.isArray(a))return kg({name:""},c,a,"");{const p=null!==(l=a.name)&&void 0!==l?l:"";return kg({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=ei,i.NULL=new xd,i.\u0275prov=Qe({token:i,providedIn:"any",factory:()=>x(ht)}),i.__NG_ELEMENT_ID__=-1,i})();function Qc(i,s){ba(Hp(i)[1],Dn())}let Ld=null;function js(){if(!Ld){const i=Ht.Symbol;if(i&&i.iterator)Ld=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Ld=c)}}}return Ld}function Va(i){return!!Ud(i)&&(Array.isArray(i)||!(i instanceof Map)&&js()in i)}function Ud(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ra(i,s,a,c){const l=Te();return function pi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}(l,function Cs(){return Et.lFrame.bindingIndex++}(),s)&&(Kt(),ea(function On(){const i=Et.lFrame;return An(i.tView,i.selectedIndex)}(),l,i,s,a,c)),ra}function Df(i,s=wt.Default){const a=Te();return null===a?x(i,s):Rs(Dn(),a,Q(i),s)}function mv(){throw new Error("invalid")}function ja(i,s,a,c,l){const y=l?"class":"style";!function tw(i,s,a,c,l){for(let p=0;p<a.length;){const y=a[p++],E=a[p++],I=s[y],S=i.data[y];null!==S.setInput?S.setInput(I,l,c,E):I[E]=l}}(i,a,s.inputs[y],y,c)}function ia(i,s,a,c){const l=Te(),p=Kt(),y=20+i,E=l[11],I=l[y]=Du(E,s,function Ap(){return Et.lFrame.currentNamespace}()),S=p.firstCreatePass?function Iw(i,s,a,c,l,p,y){const E=s.consts,S=Gc(s,i,2,l,Ei(E,p));return function Td(i,s,a,c){let l=!1;if(tu()){const p=function mD(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];My(a,y.selectors,!1)&&(l||(l=[]),io(Bn(a,s),i,y.type),Fi(y)?(Mg(i,a),l.unshift(y)):l.push(y))}return l}(i,s,a),y=null===c?null:{"":-1};if(null!==p){l=!0,Gy(a,i.data.length,p.length);for(let R=0;R<p.length;R++){const k=p[R];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,S=zc(i,s,p.length,null);for(let R=0;R<p.length;R++){const k=p[R];a.mergedAttrs=Ta(a.mergedAttrs,k.hostAttrs),X0(i,a,s,S,k),vD(S,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const B=k.type.prototype;!E&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),S++}!function $y(i,s){const c=s.directiveEnd,l=i.data,p=s.attrs,y=[];let E=null,I=null;for(let S=s.directiveStart;S<c;S++){const R=l[S],k=R.inputs,B=null===p||wg(s)?null:Sd(k,p);y.push(B),E=Rg(k,S,E),I=Rg(R.outputs,S,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=E,s.outputs=I}(i,a)}y&&function yD(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const p=a[s[l+1]];if(null==p)throw new Ne(-301,!1);c.push(s[l],p)}}}(a,c,y)}return a.mergedAttrs=Ta(a.mergedAttrs,a.attrs),l}(s,a,S,Ei(E,y)),null!==S.attrs&&Rt(S,S.attrs,!1),null!==S.mergedAttrs&&Rt(S,S.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,S),S}(y,p,l,0,s,a,c):p.data[y];di(S,!0);const R=S.mergedAttrs;null!==R&&dn(E,I,R);const k=S.classes;null!==k&&Mc(E,I,k);const B=S.styles;return null!==B&&ag(E,I,B),64!=(64&S.flags)&&Ko(p,l,I,S),0===function Ea(){return Et.lFrame.elementDepthCount}()&&ni(I,l),function sc(){Et.lFrame.elementDepthCount++}(),ki(S)&&(function Ag(i,s,a){!tu()||(function Y0(i,s,a,c){const l=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Bn(a,s),ni(c,s);const y=a.initialInputs;for(let E=l;E<p;E++){const I=i.data[E],S=Fi(I);S&&Og(s,a,I);const R=is(s,i,E,a);ni(R,s),null!==y&&Gr(0,E-l,R,I,0,y),S&&(wr(a.index,s)[8]=R)}}(i,s,a,hr(a,s)),128==(128&a.flags)&&function Cd(i,s,a){const c=a.directiveStart,l=a.directiveEnd,y=a.index,E=function dc(){return Et.lFrame.currentDirectiveIndex}();try{to(y);for(let I=c;I<l;I++){const S=i.data[I],R=s[I];Da(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Q0(S,R)}}finally{to(-1),Da(E)}}(i,s,a))}(p,l,S),function Id(i,s,a){if(Qa(s)){const l=s.directiveEnd;for(let p=s.directiveStart;p<l;p++){const y=i.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}(p,S,l)),null!==c&&function ff(i,s,a=hr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?a(s,i):i[y];i[l++]=E}}}(l,S),ia}function bf(){let i=Dn();ac()?function uc(){Et.lFrame.isParent=!1}():(i=i.parent,di(i,!1));const s=i;!function eu(){Et.lFrame.elementDepthCount--}();const a=Kt();return a.firstCreatePass&&(ba(a,i),Qa(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Mp(i){return 0!=(16&i.flags)}(s)&&ja(a,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Di(i){return 0!=(32&i.flags)}(s)&&ja(a,s,Te(),s.stylesWithoutHost,!1),bf}function Bu(i,s,a,c){return ia(i,s,a,c),bf(),Bu}function qd(i){return!!i&&"function"==typeof i.then}function Tf(i){return!!i&&"function"==typeof i.subscribe}const vv=Tf;function _v(i,s,a,c){const l=Te(),p=Kt(),y=Dn();return function wv(i,s,a,c,l,p,y,E){const I=ki(c),R=i.firstCreatePass&&Ky(i),k=s[8],B=J0(s);let Z=!0;if(3&c.type||E){const Ve=hr(c,s),it=E?E(Ve):Ve,Ce=B.length,_t=E?Bt=>E(un(Bt[c.index])):c.index;if(mn(a)){let Bt=null;if(!E&&I&&(Bt=function FD(i,s,a,c){const l=i.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const y=l[p];if(y===a&&l[p+1]===c){const E=s[7],I=l[p+2];return E.length>I?E[I]:null}"string"==typeof y&&(p+=2)}return null}(i,s,l,c.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=p,Bt.__ngLastListenerFn__=p,Z=!1;else{p=vo(c,s,k,p,!1);const yn=a.listen(it,l,p);B.push(p,yn),R&&R.push(l,_t,Ce,Ce+1)}}else p=vo(c,s,k,p,!0),it.addEventListener(l,p,y),B.push(p),R&&R.push(l,_t,Ce,y)}else p=vo(c,s,k,p,!1);const ce=c.outputs;let Pe;if(Z&&null!==ce&&(Pe=ce[l])){const Ve=Pe.length;if(Ve)for(let it=0;it<Ve;it+=2){const ps=s[Pe[it]][Pe[it+1]].subscribe(p),Dl=B.length;B.push(p,ps),R&&R.push(l,c.index,Dl,-(Dl+1))}}}(p,l,l[11],y,i,s,!!a,c),_v}function ul(i,s,a,c){try{return!1!==a(c)}catch(l){return ID(i,l),!1}}function vo(i,s,a,c,l){return function p(y){if(y===Function)return c;const E=2&i.flags?wr(i.index,s):s;0==(32&s[2])&&qy(E);let I=ul(s,0,c,y),S=p.__ngNextListenerFn__;for(;S;)I=ul(s,0,S,y)&&I,S=S.__ngNextListenerFn__;return l&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function xv(i,s=""){const a=Te(),c=Kt(),l=i+20,p=c.firstCreatePass?Gc(c,l,1,s,null):c.data[l],y=a[l]=function Us(i,s){return mn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ko(c,a,y,p),di(p,!1)}const Ga=void 0;var Fv=["en",[["a","p"],["AM","PM"],Ga],[["AM","PM"],Ga,Ga],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ga,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ga,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ga,"{1} 'at' {0}",Ga],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function kv(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let hs={};function Lv(i){const s=function Of(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ju(s);if(a)return a;const c=s.split("-")[0];if(a=ju(c),a)return a;if("en"===c)return Fv;throw new Error(`Missing locale data for the locale "${i}".`)}function Mf(i){return Lv(i)[ft.PluralCase]}function ju(i){return i in hs||(hs[i]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[i]),hs[i]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const th="en-US";let Pf=th;class mm{}class IE{resolveComponentFactory(s){throw function ym(i){const s=Error(`No component factory found for ${ie(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let vm=(()=>{class i{}return i.NULL=new IE,i})();function Jv(){return uh(Dn(),Te())}function uh(i,s){return new ml(hr(i,s))}let ml=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Jv,i})();function DE(i){return i instanceof ml?i.nativeElement:i}class _m{}let wm=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Em(){const i=Te(),a=wr(Dn().index,i);return function zf(i){return i[11]}(Yr(a)?a:i)}(),i})(),e_=(()=>{class i{}return i.\u0275prov=Qe({token:i,providedIn:"root",factory:()=>null}),i})();class Im{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Dm=new Im("13.3.12"),bm={};function Tm(i,s,a,c,l=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&c.push(un(p)),Pi(p))for(let E=10;E<p.length;E++){const I=p[E],S=I[1].firstChild;null!==S&&Tm(I[1],I,S,c)}const y=a.type;if(8&y)Tm(i,s,a.child,c);else if(32&y){const E=qp(a,s);let I;for(;I=E();)c.push(I)}else if(16&y){const E=og(s,a);if(Array.isArray(E))c.push(...E);else{const I=ed(s[16]);Tm(I[1],I,E,c,!0)}}a=l?a.projectionNext:a.next}return c}class ch{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Tm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Pi(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Tc(s,c),_c(a,c))}this._attachedToViewContainer=!1}Cc(this._lView[1],this._lView)}onDestroy(s){jy(this._lView[1],this._lView,null,s)}markForCheck(){qy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Ae(i,s,a){const c=s[10];c.begin&&c.begin();try{qc(i,s,i.template,a)}catch(l){throw ID(s,l),l}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tg(i,s){xc(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=s}}class Cm extends ch{constructor(s){super(s),this._view=s}detectChanges(){Ir(this._view)}checkNoChanges(){}get context(){return null}}class Sm extends vm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new t_(a,this.ngModule)}}function bE(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class t_ extends mm{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function O0(i){return i.map(M0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return bE(this.componentDef.inputs)}get outputs(){return bE(this.componentDef.outputs)}create(s,a,c,l){const p=(l=l||this.ngModule)?function mi(i,s){return{get:(a,c,l)=>{const p=i.get(a,bm,l);return p!==bm||c===bm?p:s.get(a,c,l)}}}(s,l.injector):s,y=p.get(_m,va),E=p.get(e_,null),I=y.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",R=c?function Dd(i,s,a){if(mn(i))return i.selectRootElement(s,a===Yt.ShadowDom);let c="string"==typeof s?i.querySelector(s):s;return c.textContent="",c}(I,c,this.componentDef.encapsulation):Du(y.createRenderer(null,this.componentDef),S,function Ib(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(S)),k=this.componentDef.onPush?576:528,B=function Xn(i,s){return{components:[],scheduler:i||x0,clean:ED,playerHandler:s||null,flags:0}}(),Z=gf(0,null,null,1,0,null,null,null,null,null),ce=wd(null,Z,B,k,null,null,y,I,E,p);let Pe,Ve;eo(ce);try{const it=function aw(i,s,a,c,l,p){const y=a[1];a[20]=i;const I=Gc(y,20,2,"#host",null),S=I.mergedAttrs=s.hostAttrs;null!==S&&(Rt(I,S,!0),null!==i&&(dn(l,i,S),null!==I.classes&&Mc(l,i,I.classes),null!==I.styles&&ag(l,i,I.styles)));const R=c.createRenderer(i,s),k=wd(a,pf(s),null,s.onPush?64:16,a[20],I,c,R,p||null,null);return y.firstCreatePass&&(io(Bn(I,a),y,s.type),Mg(y,I),Gy(I,a.length,1)),ot(a,k),a[20]=k}(R,this.componentDef,ce,y,I);if(R)if(c)dn(I,R,["ng-version",Dm.full]);else{const{attrs:Ce,classes:_t}=function YI(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===l?""!==p&&s.push(p,i[++c]):8===l&&a.push(p);else{if(!Gi(l))break;l=p}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ce&&dn(I,R,Ce),_t&&_t.length>0&&Mc(I,R,_t.join(" "))}if(Ve=An(Z,20),void 0!==a){const Ce=Ve.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const Bt=a[_t];Ce.push(null!=Bt?Array.from(Bt):null)}}Pe=function Ua(i,s,a,c,l){const p=a[1],y=function K0(i,s,a){const c=Dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),X0(i,c,s,zc(i,s,1,null),a));const l=is(s,i,c.directiveStart,c);ni(l,s);const p=hr(c,s);return p&&ni(p,s),l}(p,a,s);if(c.components.push(y),i[8]=y,l&&l.forEach(I=>I(y,s)),s.contentQueries){const I=Dn();s.contentQueries(1,y,I.directiveStart)}const E=Dn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(to(E.index),zi(a[1],E,0,E.directiveStart,E.directiveEnd,s),Q0(s,y)),y}(it,this.componentDef,ce,B,[Qc]),cs(Z,ce,null)}finally{Qr()}return new qf(this.componentType,Pe,uh(Ve,ce),ce,Ve)}}class qf extends class ah{}{constructor(s,a,c,l,p){super(),this.location=c,this._rootLView=l,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Cm(l),this.componentType=s}get injector(){return new Er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class yl{}class CE{}const lh=new Map;class xm extends yl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Sm(this);const c=cn(s);this._bootstrapComponents=Hn(c.bootstrap),this._r3Injector=Nu(s,a,[{provide:yl,useValue:this},{provide:vm,useValue:this.componentFactoryResolver}],ie(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Dr.THROW_IF_NOT_FOUND,c=wt.Default){return s===Dr||s===yl||s===ht?this:this._r3Injector.get(s,a,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Gu extends CE{constructor(s){super(),this.moduleType=s,null!==cn(s)&&function i_(i){const s=new Set;!function a(c){const l=cn(c,!0),p=l.id;null!==p&&(function SE(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ie(s)} vs ${ie(s.name)}`)}(p,lh.get(p),c),lh.set(p,c));const y=Hn(l.imports);for(const E of y)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new xm(this.moduleType,s)}}function Zf(i){return s=>{setTimeout(i,void 0,s)}}const la=class Cb extends _.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var l,p,y;let E=s,I=a||(()=>null),S=c;if(s&&"object"==typeof s){const k=s;E=null===(l=k.next)||void 0===l?void 0:l.bind(k),I=null===(p=k.error)||void 0===p?void 0:p.bind(k),S=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(I=Zf(I),E&&(E=Zf(E)),S&&(S=Zf(S)));const R=super.subscribe({next:E,error:I,complete:S});return s instanceof Y.w0&&s.add(R),R}};function d_(){return this._results[js()]()}class h_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=js(),c=h_.prototype;c[a]||(c[a]=d_)}get changes(){return this._changes||(this._changes=new la)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Br(s);(this._changesDetected=!function Lh(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],p=s[c];if(a&&(l=a(l),p=a(p)),p!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let _l=(()=>{class i{}return i.__NG_ELEMENT_ID__=kE,i})();const Sb=_l,f_=class extends Sb{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s){const a=this._declarationTContainer.tViews,c=wd(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(a)),cs(a,c,s),new ch(c)}};function kE(){return fh(Dn(),Te())}function fh(i,s){return 4&i.type?new f_(s,i,uh(i,s)):null}let ph=(()=>{class i{}return i.__NG_ELEMENT_ID__=p_,i})();function p_(){return wl(Dn(),Te())}const gh=ph,qa=class extends gh{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return uh(this._hostTNode,this._hostLView)}get injector(){return new Er(this._hostTNode,this._hostLView)}get parentInjector(){const s=xs(this._hostTNode,this._hostLView);if(As(s)){const a=xn(s,this._hostLView),c=Nn(s);return new Er(a[1].data[c+8],a)}return new Er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Nm(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){const l=s.createEmbeddedView(a||{});return this.insert(l,c),l}createComponent(s,a,c,l,p){const y=s&&!function uo(i){return"function"==typeof i}(s);let E;if(y)E=a;else{const k=a||{};E=k.index,c=k.injector,l=k.projectableNodes,p=k.ngModuleRef}const I=y?s:new t_(Ut(s)),S=c||this.parentInjector;if(!p&&null==I.ngModule){const B=(y?S:this.parentInjector).get(yl,null);B&&(p=B)}const R=I.create(S,l,void 0,p);return this.insert(R.hostView,E),R}insert(s,a){const c=s._lView,l=c[1];if(function wa(i){return Pi(i[3])}(c)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const k=c[3],B=new qa(k,k[6],k[3]);B.detach(B.indexOf(s))}}const p=this._adjustIndex(a),y=this._lContainer;!function rd(i,s,a,c){const l=10+c,p=a.length;c>0&&(a[l-1][4]=s),c<p-10?(s[4]=a[l],pu(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function zh(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(l,c,y,p);const E=Ac(p,y),I=c[11],S=bu(I,y[7]);return null!==S&&function nd(i,s,a,c,l,p){c[0]=l,c[6]=s,xc(i,c,a,1,l,p)}(l,y[6],I,c,S,E),s.attachToViewContainerRef(),pu(zu(y),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Nm(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Tc(this._lContainer,a);c&&(_c(zu(this._lContainer),a),Cc(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Tc(this._lContainer,a);return c&&null!=_c(zu(this._lContainer),a)?new ch(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Nm(i){return i[8]}function zu(i){return i[8]||(i[8]=[])}function wl(i,s){let a;const c=s[i.index];if(Pi(c))a=c;else{let l;if(8&i.type)l=un(c);else{const p=s[11];l=p.createComment("");const y=hr(i,s);bi(p,bu(p,y),l,function Ey(i,s){return mn(i)?i.nextSibling(s):s.nextSibling}(p,y),!1)}s[i.index]=a=function Pg(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}(c,s,l,i),ot(s,a)}return new qa(a,i,s)}class g_{constructor(s){this.queryList=s,this.matches=null}clone(){return new g_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yf{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let p=0;p<c;p++){const y=a.getByIndex(p);l.push(this.queries[y.indexInDeclarationView].clone())}return new Yf(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==HE(s,a).matches&&this.queries[a].setDirty()}}class Pm{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Qf{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(s,l);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Qf(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Xf{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Xf(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const p=c[l];this.matchTNodeWithReadOption(s,a,Ab(a,p)),this.matchTNodeWithReadOption(s,a,Aa(a,s,p,!1,!1))}else c===_l?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Aa(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===ml||l===ph||l===_l&&4&a.type)this.addMatch(a.index,-2);else{const p=Aa(a,s,l,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Ab(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function m_(i,s,a,c){return-1===a?function xb(i,s){return 11&i.type?uh(i,s):4&i.type?fh(i,s):null}(s,i):-2===a?function y_(i,s,a){return a===ml?uh(s,i):a===_l?fh(s,i):a===ph?wl(s,i):void 0}(i,s,c):is(i,i[1],a,s)}function LE(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const p=i.data,y=a.matches,E=[];for(let I=0;I<y.length;I+=2){const S=y[I];E.push(S<0?null:m_(s,p[S],y[I+1],a.metadata.read))}l.matches=E}return l.matches}function km(i,s,a,c){const l=i.queries.getByIndex(a),p=l.matches;if(null!==p){const y=LE(i,s,l,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(y[E/2]);else{const S=p[E+1],R=s[-I];for(let k=10;k<R.length;k++){const B=R[k];B[17]===B[3]&&km(B[1],B,S,c)}if(null!==R[9]){const k=R[9];for(let B=0;B<k.length;B++){const Z=k[B];km(Z[1],Z,S,c)}}}}}return c}function UE(i){const s=Te(),a=Kt(),c=au();Ul(c+1);const l=HE(a,c);if(i.dirty&&Xs(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const p=l.crossesNgTemplate?km(a,s,c,[]):LE(a,s,l,c);i.reset(p,DE),i.notifyOnChanges()}return!0}return!1}function v_(i,s,a,c){const l=Kt();if(l.firstCreatePass){const p=Dn();(function $E(i,s,a){null===i.queries&&(i.queries=new Qf),i.queries.track(new Xf(s,a))})(l,new Pm(s,a,c),p.index),function Rb(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function jE(i,s,a){const c=new h_(4==(4&a));jy(i,s,c,c.destroy),null===s[19]&&(s[19]=new Yf),s[19].queries.push(new g_(c))}(l,Te(),a)}function __(){return function BE(i,s){return i[19].queries[s].queryList}(Te(),au())}function HE(i,s){return i.queries.getByIndex(s)}function Gm(...i){}const iI=new Pn("Application Initializer");let R_=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Gm,this.reject=Gm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(qd(p))a.push(p);else if(vv(p)){const y=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(x(iI,8))},i.\u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const M_=new Pn("AppId",{providedIn:"root",factory:function zm(){return`${rp()}${rp()}${rp()}`}});function rp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qm=new Pn("Platform Initializer"),O_=new Pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ip=new Pn("appBootstrapListener");let oI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const sp=new Pn("LocaleId",{providedIn:"root",factory:()=>W(sp,wt.Optional|wt.SkipSelf)||function Wm(){return"undefined"!=typeof $localize&&$localize.locale||th}()}),N_=new Pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $b{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Hb=(()=>{class i{compileModuleSync(a){return new Gu(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Hn(cn(a).declarations).reduce((y,E)=>{const I=Ut(E);return I&&y.push(new t_(I)),y},[]);return new $b(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const qb=(()=>Promise.resolve(0))();function Km(i){"undefined"==typeof Zone?qb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Eo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new la(!1),this.onMicrotaskEmpty=new la(!1),this.onStable=new la(!1),this.onError=new la(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Wb(){let i=Ht.requestAnimationFrame,s=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function uI(i){const s=()=>{!function P_(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ht,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ym(i),i.isCheckStableRunning=!0,Zm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ym(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,p,y,E)=>{try{return k_(i),a.invokeTask(l,p,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),ap(i)}},onInvoke:(a,c,l,p,y,E,I)=>{try{return k_(i),a.invoke(l,p,y,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),ap(i)}},onHasTask:(a,c,l,p)=>{a.hasTask(l,p),c===l&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Ym(i),Zm(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,l,p)=>(a.handleError(l,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Eo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Eo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+l,s,Kb,Gm,Gm);try{return p.runTask(y,a,c)}finally{p.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Kb={};function Zm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ym(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function k_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ap(i){i._nesting--,Zm(i)}class en{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new la,this.onMicrotaskEmpty=new la,this.onStable=new la,this.onError=new la}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}let F_=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Eo.assertNotInAngularZone(),Km(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Km(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(x(Eo))},i.\u0275prov=Qe({token:i,factory:i.\u0275fac}),i})(),cI=(()=>{class i{constructor(){this._applications=new Map,Cn.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Cn.findTestabilityInTree(this,a,c)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class up{addToWindow(s){}findTestabilityInTree(s,a,c){return null}}function lI(i){Cn=i}let Cn=new up,er=null;const Io=new Pn("AllowMultipleToken"),L_=new Pn("PlatformOnDestroy");class V_{constructor(s,a){this.name=s,this.token=a}}function Qm(i,s,a=[]){const c=`Platform: ${s}`,l=new Pn(c);return(p=[])=>{let y=hI();if(!y||y.injector.get(Io,!1)){const E=[...a,...p,{provide:l,useValue:!0}];i?i(E):function Yb(i){if(er&&!er.get(Io,!1))throw new Ne(400,"");er=i;const s=i.get(Jb),a=i.get(qm,null);a&&a.forEach(c=>c())}(function Xb(i=[],s){return Dr.create({name:s,providers:[{provide:Jt,useValue:"platform"},{provide:L_,useValue:()=>er=null},...i]})}(E,c))}return function Qb(i){const s=hI();if(!s)throw new Ne(401,"");return s}()}}function hI(){var i;return null!==(i=null==er?void 0:er.get(Jb))&&void 0!==i?i:null}let Jb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const E=function vr(i,s){let a;return a="noop"===i?new en:("zone.js"===i?void 0:i)||new Eo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Eo,useValue:E}];return E.run(()=>{const S=Dr.create({providers:I,parent:this.injector,name:a.moduleType.name}),R=a.create(S),k=R.injector.get(Fc,null);if(!k)throw new Ne(402,"");return E.runOutsideAngular(()=>{const B=E.onError.subscribe({next:Z=>{k.handleError(Z)}});R.onDestroy(()=>{Xm(this._modules,R),B.unsubscribe()})}),function fI(i,s,a){try{const c=a();return qd(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(k,E,()=>{const B=R.injector.get(R_);return B.runInitializers(),B.donePromise.then(()=>(function kf(i){Re(i,"Expected localeId to be defined"),"string"==typeof i&&(Pf=i.toLowerCase().replace(/_/g,"-"))}(R.injector.get(sp,th)||th),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,c=[]){const l=pI({},c);return function Zb(i,s,a){const c=new Gu(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(a){const c=a.injector.get(B_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(L_,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(x(Dr))},i.\u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function pI(i,s){return Array.isArray(s)?s.reduce(pI,i):Object.assign(Object.assign({},i),s)}let B_=(()=>{class i{constructor(a,c,l,p){this._zone=a,this._injector=c,this._exceptionHandler=l,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new P.y(I=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Eo.assertNotInAngularZone(),Km(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Eo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{S.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ne.T)(y,E.pipe((0,ee.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Ne(405,"");let l;l=a instanceof mm?a:this._injector.get(vm).resolveComponentFactory(a),this.componentTypes.push(l.componentType);const p=function dI(i){return i.isBoundToModule}(l)?void 0:this._injector.get(yl),E=l.create(Dr.NULL,[],c||l.selector,p),I=E.location.nativeElement,S=E.injector.get(F_,null),R=S&&E.injector.get(cI);return S&&R&&R.registerApplication(I,S),E.onDestroy(()=>{this.detachView(E.hostView),Xm(this.components,E),R&&R.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Xm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(ip,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(x(Eo),x(Dr),x(Fc),x(R_))},i.\u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Xm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let mI=!0,yI=!1;function oC(){return yI=!0,mI}function tT(){if(yI)throw new Error("Cannot enable prod mode after platform setup.");mI=!1}let rT=(()=>{class i{}return i.__NG_ELEMENT_ID__=da,i})();function da(i){return function Wa(i,s,a){if(Cl(i)&&!a){const c=wr(i.index,s);return new ch(c,c)}return 47&i.type?new ch(s[16],s):null}(Dn(),Te(),16==(16&i))}class G_{constructor(){}supports(s){return Va(s)}create(s){return new dp(s)}}const z_=(i,s)=>s;class dp{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||z_}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,p=null;for(;a||c;){const y=!c||a&&a.currentIndex<q_(c,l,p)?a:c,E=q_(y,l,p),I=y.currentIndex;if(y===c)l--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)l++;else{p||(p=[]);const S=E-l,R=I-l;if(S!=R){for(let B=0;B<S;B++){const Z=B<p.length?p[B]:p[B]=0,ce=Z+B;R<=ce&&ce<S&&(p[B]=Z+1)}p[y.previousIndex]=R-S}}E!==I&&s(y,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Va(s))throw new Ne(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,p,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],y=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,p,y,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,E),c=!0),a=a._next}else l=0,function dw(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[js()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{y=this._trackByFn(l,E),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,E,y,l)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,l)):s=this._addAfter(new uT(a,c),p,l),s}_verifyReinsertion(s,a,c,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,p=s._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new hp),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hp),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class uT{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ty{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class hp{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new ty,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function q_(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class bh{constructor(){}supports(s){return s instanceof Map||Ud(s)}create(){return new cT}}class cT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ud(s)))throw new Ne(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const p=l._prev,y=l._next;return p&&(p._next=y),y&&(y._prev=p),l._next=null,l._prev=null,l}const c=new ny(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class ny{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function W_(){return new fp([new G_])}let fp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||W_()),deps:[[i,new Rn,new mt]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new Ne(901,"")}}return i.\u0275prov=Qe({token:i,providedIn:"root",factory:W_}),i})();function Ka(){return new Il([new bh])}let Il=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Ka()),deps:[[i,new Rn,new mt]]}}find(a){const c=this.factories.find(p=>p.supports(a));if(c)return c;throw new Ne(901,"")}}return i.\u0275prov=Qe({token:i,providedIn:"root",factory:Ka}),i})();const K_=Qm(null,"core",[]);let dT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(x(B_))},i.\u0275mod=q({type:i}),i.\u0275inj=Dt({}),i})()},3942:(Je,ye,N)=>{N.d(ye,{Z:()=>Ne});var _=N(2090),Y=N(4859),P=N(9681),ne=N(1877);class ee{constructor(de,ve){this._delegate=de,this.firebase=ve,(0,P._addComponent)(de,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(de,ve=P._DEFAULT_ENTRY_NAME){var He;this._delegate.checkDestroyed();const Xe=this._delegate.container.getProvider(de);return!Xe.isInitialized()&&"EXPLICIT"===(null===(He=Xe.getComponent())||void 0===He?void 0:He.instantiationMode)&&Xe.initialize(),Xe.getImmediate({identifier:ve})}_removeServiceInstance(de,ve=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(ve)}_addComponent(de){(0,P._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,P._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function ae(){const Be=function ie(Be){const de={},ve={__esModule:!0,initializeApp:function Ie(Le,H={}){const ge=P.initializeApp(Le,H);if((0,_.r3)(de,ge.name))return de[ge.name];const Fe=new Be(ge,ve);return de[ge.name]=Fe,Fe},app:Xe,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function _e(Le){const H=Le.name,ge=H.replace("-compat","");if(P._registerComponent(Le)&&"PUBLIC"===Le.type){const Fe=(vt=Xe())=>{if("function"!=typeof vt[ge])throw se.create("invalid-app-argument",{appName:H});return vt[ge]()};void 0!==Le.serviceProps&&(0,_.ZB)(Fe,Le.serviceProps),ve[ge]=Fe,Be.prototype[ge]=function(...vt){return this._getService.bind(this,H).apply(this,Le.multipleInstances?vt:[])}}return"PUBLIC"===Le.type?ve[ge]:null},removeApp:function He(Le){delete de[Le]},useAsService:function Ue(Le,H){return"serverAuth"===H?null:H},modularAPIs:P}};function Xe(Le){if(!(0,_.r3)(de,Le=Le||P._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Le});return de[Le]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function fe(){return Object.keys(de).map(Le=>de[Le])}}),Xe.App=Be,ve}(ee);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function de(ve){(0,_.ZB)(Be,ve)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Be}(),j=new ne.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=V;!function be(Be){(0,P.registerVersion)("@firebase/app-compat","0.2.5",Be)}()},9681:(Je,ye,N)=>{N.r(ye),N.d(ye,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>Re,_addComponent:()=>fn,_addOrOverwriteComponent:()=>Qe,_apps:()=>st,_clearComponents:()=>Ln,_components:()=>Mt,_getProvider:()=>Dt,_registerComponent:()=>Qt,_removeServiceInstance:()=>ct,deleteApp:()=>wt,getApp:()=>Kr,getApps:()=>Ri,initializeApp:()=>ys,onLog:()=>qn,registerVersion:()=>Sn,setLogLevel:()=>Hs});var _=N(5861),Y=N(4859),P=N(1877),ne=N(2090),ee=N(8766);class oe{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(qe=>{if(function se(Ze){const we=Ze.getComponent();return"VERSION"===(null==we?void 0:we.type)}(qe)){const Tt=qe.getImmediate();return`${Tt.library}/${Tt.version}`}return null}).filter(qe=>qe).join(" ")}}const ie="@firebase/app",V=new P.Yd("@firebase/app"),Re="[DEFAULT]",De={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},st=new Map,Mt=new Map;function fn(Ze,we){try{Ze.container.addComponent(we)}catch(qe){V.debug(`Component ${we.name} failed to register with FirebaseApp ${Ze.name}`,qe)}}function Qe(Ze,we){Ze.container.addOrOverwriteComponent(we)}function Qt(Ze){const we=Ze.name;if(Mt.has(we))return V.debug(`There were multiple attempts to register component ${we}.`),!1;Mt.set(we,Ze);for(const qe of st.values())fn(qe,Ze);return!0}function Dt(Ze,we){const qe=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return qe&&qe.triggerHeartbeat(),Ze.container.getProvider(we)}function ct(Ze,we,qe=Re){Dt(Ze,we).clearInstance(qe)}function Ln(){Mt.clear()}const En=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mn{constructor(we,qe,Tt){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},qe),this._name=qe.name,this._automaticDataCollectionEnabled=qe.automaticDataCollectionEnabled,this._container=Tt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}const br="9.18.0";function ys(Ze,we={}){let qe=Ze;"object"!=typeof we&&(we={name:we});const Tt=Object.assign({name:Re,automaticDataCollectionEnabled:!1},we),St=Tt.name;if("string"!=typeof St||!St)throw En.create("bad-app-name",{appName:String(St)});if(qe||(qe=(0,ne.aH)()),!qe)throw En.create("no-options");const Wt=st.get(St);if(Wt){if((0,ne.vZ)(qe,Wt.options)&&(0,ne.vZ)(Tt,Wt.config))return Wt;throw En.create("duplicate-app",{appName:St})}const lr=new Y.H0(St);for(const L of Mt.values())lr.addComponent(L);const U=new Mn(qe,Tt,lr);return st.set(St,U),U}function Kr(Ze=Re){const we=st.get(Ze);if(!we&&Ze===Re)return ys();if(!we)throw En.create("no-app",{appName:Ze});return we}function Ri(){return Array.from(st.values())}function wt(Ze){return ai.apply(this,arguments)}function ai(){return(ai=(0,_.Z)(function*(Ze){const we=Ze.name;st.has(we)&&(st.delete(we),yield Promise.all(Ze.container.getProviders().map(qe=>qe.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function Sn(Ze,we,qe){var Tt;let St=null!==(Tt=De[Ze])&&void 0!==Tt?Tt:Ze;qe&&(St+=`-${qe}`);const Wt=St.match(/\s|\//),lr=we.match(/\s|\//);if(Wt||lr){const U=[`Unable to register library "${St}" with version "${we}":`];return Wt&&U.push(`library name "${St}" contains illegal characters (whitespace or "/")`),Wt&&lr&&U.push("and"),lr&&U.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void V.warn(U.join(" "))}Qt(new Y.wA(`${St}-version`,()=>({library:St,version:we}),"VERSION"))}function qn(Ze,we){if(null!==Ze&&"function"!=typeof Ze)throw En.create("invalid-log-argument");(0,P.Am)(Ze,we)}function Hs(Ze){(0,P.Ub)(Ze)}const Un="firebase-heartbeat-store";let vi=null;function Gs(){return vi||(vi=(0,ee.X3)("firebase-heartbeat-database",1,{upgrade:(Ze,we)=>{0===we&&Ze.createObjectStore(Un)}}).catch(Ze=>{throw En.create("idb-open",{originalErrorMessage:Ze.message})})),vi}function lt(){return(lt=(0,_.Z)(function*(Ze){try{return(yield Gs()).transaction(Un).objectStore(Un).get(_i(Ze))}catch(we){if(we instanceof ne.ZR)V.warn(we.message);else{const qe=En.create("idb-get",{originalErrorMessage:null==we?void 0:we.message});V.warn(qe.message)}}})).apply(this,arguments)}function It(Ze,we){return cr.apply(this,arguments)}function cr(){return(cr=(0,_.Z)(function*(Ze,we){try{const Tt=(yield Gs()).transaction(Un,"readwrite");return yield Tt.objectStore(Un).put(we,_i(Ze)),Tt.done}catch(qe){if(qe instanceof ne.ZR)V.warn(qe.message);else{const Tt=En.create("idb-set",{originalErrorMessage:null==qe?void 0:qe.message});V.warn(Tt.message)}}})).apply(this,arguments)}function _i(Ze){return`${Ze.name}!${Ze.options.appId}`}class kr{constructor(we){this.container=we,this._heartbeatsCache=null;const qe=this.container.getProvider("app").getImmediate();this._storage=new qs(qe),this._heartbeatsCachePromise=this._storage.read().then(Tt=>(this._heartbeatsCache=Tt,Tt))}triggerHeartbeat(){var we=this;return(0,_.Z)(function*(){const Tt=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=Fr();if(null===we._heartbeatsCache&&(we._heartbeatsCache=yield we._heartbeatsCachePromise),we._heartbeatsCache.lastSentHeartbeatDate!==St&&!we._heartbeatsCache.heartbeats.some(Wt=>Wt.date===St))return we._heartbeatsCache.heartbeats.push({date:St,agent:Tt}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter(Wt=>{const lr=new Date(Wt.date).valueOf();return Date.now()-lr<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,_.Z)(function*(){if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null===we._heartbeatsCache||0===we._heartbeatsCache.heartbeats.length)return"";const qe=Fr(),{heartbeatsToSend:Tt,unsentEntries:St}=function pt(Ze,we=1024){const qe=[];let Tt=Ze.slice();for(const St of Ze){const Wt=qe.find(lr=>lr.agent===St.agent);if(Wt){if(Wt.dates.push(St.date),qt(qe)>we){Wt.dates.pop();break}}else if(qe.push({agent:St.agent,dates:[St.date]}),qt(qe)>we){qe.pop();break}Tt=Tt.slice(1)}return{heartbeatsToSend:qe,unsentEntries:Tt}}(we._heartbeatsCache.heartbeats),Wt=(0,ne.L)(JSON.stringify({version:2,heartbeats:Tt}));return we._heartbeatsCache.lastSentHeartbeatDate=qe,St.length>0?(we._heartbeatsCache.heartbeats=St,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),Wt})()}}function Fr(){return(new Date).toISOString().substring(0,10)}class qs{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,_.Z)(function*(){return(yield we._canUseIndexedDBPromise)&&(yield function Yt(Ze){return lt.apply(this,arguments)}(we.app))||{heartbeats:[]}})()}overwrite(we){var qe=this;return(0,_.Z)(function*(){var Tt;if(yield qe._canUseIndexedDBPromise){const Wt=yield qe.read();return It(qe.app,{lastSentHeartbeatDate:null!==(Tt=we.lastSentHeartbeatDate)&&void 0!==Tt?Tt:Wt.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var qe=this;return(0,_.Z)(function*(){var Tt;if(yield qe._canUseIndexedDBPromise){const Wt=yield qe.read();return It(qe.app,{lastSentHeartbeatDate:null!==(Tt=we.lastSentHeartbeatDate)&&void 0!==Tt?Tt:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...we.heartbeats]})}})()}}function qt(Ze){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function Qi(Ze){Qt(new Y.wA("platform-logger",we=>new oe(we),"PRIVATE")),Qt(new Y.wA("heartbeat",we=>new kr(we),"PRIVATE")),Sn(ie,"0.9.5",Ze),Sn(ie,"0.9.5","esm2017"),Sn("fire-js","")}("")},4859:(Je,ye,N)=>{N.d(ye,{H0:()=>ie,wA:()=>P});var _=N(5861),Y=N(2090);class P{constructor(V,j,Q){this.name=V,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const ne="[DEFAULT]";class ee{constructor(V,j){this.name=V,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const j=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(j)){const Q=new Y.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:j});je&&Q.resolve(je)}catch(je){}}return this.instancesDeferred.get(j).promise}getImmediate(V){var j;const Q=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),je=null!==(j=null==V?void 0:V.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(be){if(je)return null;throw be}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function se(ae){return"EAGER"===ae.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(j){}for(const[j,Q]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(j);try{const be=this.getOrInitializeService({instanceIdentifier:je});Q.resolve(be)}catch(be){}}}}clearInstance(V=ne){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,_.Z)(function*(){const j=Array.from(V.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=ne){return this.instances.has(V)}getOptions(V=ne){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:j={}}=V,Q=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[be,Ne]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(be)&&Ne.resolve(je);return je}onInit(V,j){var Q;const je=this.normalizeInstanceIdentifier(j),be=null!==(Q=this.onInitCallbacks.get(je))&&void 0!==Q?Q:new Set;be.add(V),this.onInitCallbacks.set(je,be);const Ne=this.instances.get(je);return Ne&&V(Ne,je),()=>{be.delete(V)}}invokeOnInitCallbacks(V,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const je of Q)try{je(V,j)}catch(be){}}getOrInitializeService({instanceIdentifier:V,options:j={}}){let Q=this.instances.get(V);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=V,ae===ne?void 0:ae),options:j}),this.instances.set(V,Q),this.instancesOptions.set(V,j),this.invokeOnInitCallbacks(Q,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,Q)}catch(je){}var ae;return Q||null}normalizeInstanceIdentifier(V=ne){return this.component?this.component.multipleInstances?V:ne:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const j=this.getProvider(V.name);if(j.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);j.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const j=new ee(V,this);return this.providers.set(V,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,ye,N)=>{N.d(ye,{Am:()=>ae,Ub:()=>ie,Yd:()=>se,in:()=>Y});const _=[];var Y=(()=>{return(V=Y||(Y={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",Y;var V})();const P={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ne=Y.INFO,ee={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},oe=(V,j,...Q)=>{if(j<V.logLevel)return;const je=(new Date).toISOString(),be=ee[j];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[be](`[${je}]  ${V.name}:`,...Q)};class se{constructor(j){this.name=j,this._logLevel=ne,this._logHandler=oe,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Y))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...j),this._logHandler(this,Y.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...j),this._logHandler(this,Y.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...j),this._logHandler(this,Y.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...j),this._logHandler(this,Y.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...j),this._logHandler(this,Y.ERROR,...j)}}function ie(V){_.forEach(j=>{j.setLogLevel(V)})}function ae(V,j){for(const Q of _){let je=null;j&&j.level&&(je=P[j.level]),Q.userLogHandler=null===V?null:(be,Ne,...Be)=>{const de=Be.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(He){return null}}).filter(ve=>ve).join(" ");Ne>=(null!=je?je:be.logLevel)&&V({level:Y[Ne].toLowerCase(),message:de,args:Be,type:be.name})}}}},259:(Je,ye,N)=>{N.d(ye,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=N(9681);(0,_.registerVersion)("firebase","9.18.0","app")},9260:(Je,ye,N)=>{N.d(ye,{Z:()=>_.Z});var _=N(3942);_.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(Je,ye,N)=>{N.r(ye);var _=N(5861),Y=N(3942),P=N(2090),ne=N(9681),ee=N(1877),oe=N(655),se=N(4859);const Ne=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),He=new ee.Yd("@firebase/auth");function Xe(m,...h){He.logLevel<=ee.in.ERROR&&He.error(`Auth (${ne.SDK_VERSION}): ${m}`,...h)}function Ie(m,...h){throw Le(m,...h)}function fe(m,...h){return Le(m,...h)}function _e(m,h,f){const v=Object.assign(Object.assign({},Be()),{[h]:f});return new P.LL("auth","Firebase",v).create(h,{appName:m.name})}function Ue(m,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Ie(m,"argument-error"),_e(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(m,...h){if("string"!=typeof m){const f=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(f,...v)}return de.create(m,...h)}function H(m,h,...f){if(!m)throw Le(h,...f)}function ge(m){const h="INTERNAL ASSERTION FAILED: "+m;throw Xe(h),new Error(h)}function Fe(m,h){m||ge(h)}const vt=new Map;function Ke(m){Fe(m instanceof Function,"Expected a class definition");let h=vt.get(m);return h?(Fe(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,vt.set(m,h),h)}function he(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function me(){return"http:"===xe()||"https:"===xe()}function xe(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class st{constructor(h,f){this.shortDelay=h,this.longDelay=f,Fe(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Re(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(me()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mt(m,h){Fe(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class fn{static initialize(h,f,v){this.fetchImpl=h,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new st(3e4,6e4);function Dt(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function ct(m,h,f,v){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,_.Z)(function*(m,h,f,v,C={}){return wn(m,C,(0,_.Z)(function*(){let M={},z={};v&&("GET"===h?z=v:M={body:JSON.stringify(v)});const ue=(0,P.xO)(Object.assign({key:m.config.apiKey},z)).slice(1),ke=yield m._getAdditionalHeaders();return ke["Content-Type"]="application/json",m.languageCode&&(ke["X-Firebase-Locale"]=m.languageCode),fn.fetch()(ys(m,m.config.apiHost,f,ue),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function wn(m,h,f){return En.apply(this,arguments)}function En(){return(En=(0,_.Z)(function*(m,h,f){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},Qe),h);try{const C=new Kr(m),M=yield Promise.race([f(),C.promise]);C.clearNetworkTimeout();const z=yield M.json();if("needConfirmation"in z)throw Ri(m,"account-exists-with-different-credential",z);if(M.ok&&!("errorMessage"in z))return z;{const ue=M.ok?z.errorMessage:z.error.message,[ke,Ye]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Ri(m,"credential-already-in-use",z);if("EMAIL_EXISTS"===ke)throw Ri(m,"email-already-in-use",z);if("USER_DISABLED"===ke)throw Ri(m,"user-disabled",z);const yt=v[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw _e(m,yt,Ye);Ie(m,yt)}}catch(C){if(C instanceof P.ZR)throw C;Ie(m,"internal-error",{message:String(C)})}})).apply(this,arguments)}function Mn(m,h,f,v){return br.apply(this,arguments)}function br(){return(br=(0,_.Z)(function*(m,h,f,v,C={}){const M=yield ct(m,h,f,v,C);return"mfaPendingCredential"in M&&Ie(m,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function ys(m,h,f,v){const C=`${h}${f}?${v}`;return m.config.emulator?Mt(m.config,C):`${m.config.apiScheme}://${C}`}class Kr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(fe(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ri(m,h,f){const v={appName:m.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const C=fe(m,h,v);return C.customData._tokenResponse=f,C}function ai(){return(ai=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Sn(m,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Hs(m,h){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function tr(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Gs(){return(Gs=(0,_.Z)(function*(m,h=!1){const f=(0,P.m9)(m),v=yield f.getIdToken(h),C=lt(v);H(C&&C.exp&&C.auth_time&&C.iat,f.auth,"internal-error");const M="object"==typeof C.firebase?C.firebase:void 0,z=null==M?void 0:M.sign_in_provider;return{claims:C,token:v,authTime:tr(Yt(C.auth_time)),issuedAtTime:tr(Yt(C.iat)),expirationTime:tr(Yt(C.exp)),signInProvider:z||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Yt(m){return 1e3*Number(m)}function lt(m){const[h,f,v]=m.split(".");if(void 0===h||void 0===f||void 0===v)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,P.tV)(f);return C?JSON.parse(C):(Xe("Failed to decode base64 JWT payload"),null)}catch(C){return Xe("Caught error parsing JWT payload as JSON",null==C?void 0:C.toString()),null}}function cr(m,h){return _i.apply(this,arguments)}function _i(){return(_i=(0,_.Z)(function*(m,h,f=!1){if(f)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&Ht(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}function Ht({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class zs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const C=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,_.Z)(function*(){yield f.iteration()}),v)}iteration(){var h=this;return(0,_.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===(null==f?void 0:f.code)&&h.schedule(!0))}h.schedule()})()}}class kr{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=tr(this.lastLoginAt),this.creationTime=tr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fr(m){return pt.apply(this,arguments)}function pt(){return(pt=(0,_.Z)(function*(m){var h;const f=m.auth,v=yield m.getIdToken(),C=yield cr(m,Hs(f,{idToken:v}));H(null==C?void 0:C.users.length,f,"internal-error");const M=C.users[0];m._notifyReloadListener(M);const z=(null===(h=M.providerUserInfo)||void 0===h?void 0:h.length)?Ze(M.providerUserInfo):[],ue=Qi(m.providerData,z),yt=!!m.isAnonymous&&!(m.email&&M.passwordHash||(null==ue?void 0:ue.length)),gt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ue,metadata:new kr(M.createdAt,M.lastLoginAt),isAnonymous:yt};Object.assign(m,gt)})).apply(this,arguments)}function qt(){return(qt=(0,_.Z)(function*(m){const h=(0,P.m9)(m);yield Fr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Qi(m,h){return[...m.filter(v=>!h.some(C=>C.providerId===v.providerId)),...h]}function Ze(m){return m.map(h=>{var{providerId:f}=h,v=(0,oe._T)(h,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function qe(){return(qe=(0,_.Z)(function*(m,h){const f=yield wn(m,{},(0,_.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:C,apiKey:M}=m.config,z=ys(m,C,"/v1/token",`key=${M}`),ue=yield m._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",fn.fetch()(z,{method:"POST",headers:ue,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){H(h.idToken,"internal-error"),H(void 0!==h.idToken,"internal-error"),H(void 0!==h.refreshToken,"internal-error");const f="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function It(m){const h=lt(m);return H(h,"internal-error"),H(void 0!==h.exp,"internal-error"),H(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var v=this;return(0,_.Z)(function*(){return H(!v.accessToken||v.refreshToken,h,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var v=this;return(0,_.Z)(function*(){const{accessToken:C,refreshToken:M,expiresIn:z}=yield function we(m,h){return qe.apply(this,arguments)}(h,f);v.updateTokensAndExpiration(C,M,Number(z))})()}updateTokensAndExpiration(h,f,v){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,f){const{refreshToken:v,accessToken:C,expirationTime:M}=f,z=new Tt;return v&&(H("string"==typeof v,"internal-error",{appName:h}),z.refreshToken=v),C&&(H("string"==typeof C,"internal-error",{appName:h}),z.accessToken=C),M&&(H("number"==typeof M,"internal-error",{appName:h}),z.expirationTime=M),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Tt,this.toJSON())}_performRefresh(){return ge("not implemented")}}function St(m,h){H("string"==typeof m||void 0===m,"internal-error",{appName:h})}class Wt{constructor(h){var{uid:f,auth:v,stsTokenManager:C}=h,M=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new kr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,_.Z)(function*(){const v=yield cr(f,f.stsTokenManager.getToken(f.auth,h));return H(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(h){return function vi(m){return Gs.apply(this,arguments)}(this,h)}reload(){return function qs(m){return qt.apply(this,arguments)}(this)}_assign(h){this!==h&&(H(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new Wt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var v=this;return(0,_.Z)(function*(){let C=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),C=!0),f&&(yield Fr(v)),yield v.auth._persistUserIfCurrent(v),C&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,_.Z)(function*(){const f=yield h.getIdToken();return yield cr(h,function wt(m,h){return ai.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var v,C,M,z,ue,ke,Ye,yt;const gt=null!==(v=f.displayName)&&void 0!==v?v:void 0,ir=null!==(C=f.email)&&void 0!==C?C:void 0,Ci=null!==(M=f.phoneNumber)&&void 0!==M?M:void 0,hd=null!==(z=f.photoURL)&&void 0!==z?z:void 0,fd=null!==(ue=f.tenantId)&&void 0!==ue?ue:void 0,Nc=null!==(ke=f._redirectEventId)&&void 0!==ke?ke:void 0,pd=null!==(Ye=f.createdAt)&&void 0!==Ye?Ye:void 0,sr=null!==(yt=f.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:$n,emailVerified:Pc,isAnonymous:Ru,providerData:tf,stsTokenManager:Yn}=f;H($n&&Yn,h,"internal-error");const pg=Tt.fromJSON(this.name,Yn);H("string"==typeof $n,h,"internal-error"),St(gt,h.name),St(ir,h.name),H("boolean"==typeof Pc,h,"internal-error"),H("boolean"==typeof Ru,h,"internal-error"),St(Ci,h.name),St(hd,h.name),St(fd,h.name),St(Nc,h.name),St(pd,h.name),St(sr,h.name);const nf=new Wt({uid:$n,auth:h,email:ir,emailVerified:Pc,displayName:gt,isAnonymous:Ru,photoURL:hd,phoneNumber:Ci,tenantId:fd,stsTokenManager:pg,createdAt:pd,lastLoginAt:sr});return tf&&Array.isArray(tf)&&(nf.providerData=tf.map(rf=>Object.assign({},rf))),Nc&&(nf._redirectEventId=Nc),nf}static _fromIdTokenResponse(h,f,v=!1){return(0,_.Z)(function*(){const C=new Tt;C.updateFromServerResponse(f);const M=new Wt({uid:f.localId,auth:h,stsTokenManager:C,isAnonymous:v});return yield Fr(M),M})()}}const U=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(f,v){var C=this;return(0,_.Z)(function*(){C.storage[f]=v})()}_get(f){var v=this;return(0,_.Z)(function*(){const C=v.storage[f];return void 0===C?null:C})()}_remove(f){var v=this;return(0,_.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return m.type="NONE",m})();function L(m,h,f){return`firebase:${m}:${h}:${f}`}class q{constructor(h,f,v){this.persistence=h,this.auth=f,this.userKey=v;const{config:C,name:M}=this.auth;this.fullUserKey=L(this.userKey,C.apiKey,M),this.fullPersistenceKey=L("persistence",C.apiKey,M),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,_.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?Wt._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,_.Z)(function*(){if(f.persistence===h)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,v="authUser"){return(0,_.Z)(function*(){if(!f.length)return new q(Ke(U),h,v);const C=(yield Promise.all(f.map(function(){var Ye=(0,_.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let M=C[0]||Ke(U);const z=L(v,h.config.apiKey,h.name);let ue=null;for(const Ye of f)try{const yt=yield Ye._get(z);if(yt){const gt=Wt._fromJSON(h,yt);Ye!==M&&(ue=gt),M=Ye;break}}catch(yt){}const ke=C.filter(Ye=>Ye._shouldAllowMigration);return M._shouldAllowMigration&&ke.length?(M=ke[0],ue&&(yield M._set(z,ue.toJSON())),yield Promise.all(f.map(function(){var Ye=(0,_.Z)(function*(yt){if(yt!==M)try{yield yt._remove(z)}catch(gt){}});return function(yt){return Ye.apply(this,arguments)}}())),new q(M,h,v)):new q(M,h,v)})()}}function Ee(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ut(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(J(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(In(h))return"Blackberry";if(cn(h))return"Webos";if(nt(h))return"Safari";if((h.includes("chrome/")||At(h))&&!h.includes("edge/"))return"Chrome";if(pn(h))return"Android";{const v=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function J(m=(0,P.z$)()){return/firefox\//i.test(m)}function nt(m=(0,P.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function At(m=(0,P.z$)()){return/crios\//i.test(m)}function Ut(m=(0,P.z$)()){return/iemobile/i.test(m)}function pn(m=(0,P.z$)()){return/android/i.test(m)}function In(m=(0,P.z$)()){return/blackberry/i.test(m)}function cn(m=(0,P.z$)()){return/webos/i.test(m)}function Pt(m=(0,P.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function vs(m=(0,P.z$)()){return Pt(m)||pn(m)||cn(m)||In(m)||/windows phone/i.test(m)||Ut(m)}function Co(m,h=[]){let f;switch(m){case"Browser":f=Ee((0,P.z$)());break;case"Worker":f=`${Ee((0,P.z$)())}-${m}`;break;default:f=m}const v=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${ne.SDK_VERSION}/${v}`}class Zr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const v=M=>new Promise((z,ue)=>{try{z(h(M))}catch(ke){ue(ke)}});v.onAbort=f,this.queue.push(v);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,_.Z)(function*(){if(f.auth.currentUser===h)return;const v=[];try{for(const C of f.queue)yield C(h),C.onAbort&&v.push(C.onAbort)}catch(C){v.reverse();for(const M of v)try{M()}catch(z){}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null==C?void 0:C.message})}})()}}class We{constructor(h,f,v){this.app=h,this.heartbeatServiceProvider=f,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ln(this),this.idTokenSubscription=new ln(this),this.beforeStateQueue=new Zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,f){var v=this;return f&&(this._popupRedirectResolver=Ke(f)),this._initializationPromise=this.queue((0,_.Z)(function*(){var C,M;if(!v._deleted&&(v.persistenceManager=yield q.create(v,h),!v._deleted)){if(null===(C=v._popupRedirectResolver)||void 0===C?void 0:C._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(M=v.currentUser)||void 0===M?void 0:M.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,_.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUser(h){var f=this;return(0,_.Z)(function*(){var v;const C=yield f.assertedPersistence.getCurrentUser();let M=C,z=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const ue=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,ke=null==M?void 0:M._redirectEventId,Ye=yield f.tryRedirectSignIn(h);(!ue||ue===ke)&&(null==Ye?void 0:Ye.user)&&(M=Ye.user,z=!0)}if(!M)return f.directlySetCurrentUser(null);if(!M._redirectEventId){if(z)try{yield f.beforeStateQueue.runMiddleware(M)}catch(ue){M=C,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(ue))}return M?f.reloadAndSetCurrentUserOrClear(M):f.directlySetCurrentUser(null)}return H(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===M._redirectEventId?f.directlySetCurrentUser(M):f.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(h){var f=this;return(0,_.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch(C){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,_.Z)(function*(){try{yield Fr(h)}catch(v){if("auth/network-request-failed"!==(null==v?void 0:v.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function De(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,_.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,_.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&H(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(h,f=!1){var v=this;return(0,_.Z)(function*(){if(!v._deleted)return h&&H(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),f||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,_.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,_.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var f=this;return this.queue((0,_.Z)(function*(){yield f.assertedPersistence.setPersistence(Ke(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,f,v){return this.registerStateListener(this.authStateSubscription,h,f,v)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,v){return this.registerStateListener(this.idTokenSubscription,h,f,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var v=this;return(0,_.Z)(function*(){const C=yield v.getOrInitRedirectPersistenceManager(f);return null===h?C.removeCurrentUser():C.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,_.Z)(function*(){if(!f.redirectPersistenceManager){const v=h&&Ke(h)||f._popupRedirectResolver;H(v,f,"argument-error"),f.redirectPersistenceManager=yield q.create(f,[Ke(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,_.Z)(function*(){var v,C;return f._isInitialized&&(yield f.queue((0,_.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===h?f._currentUser:(null===(C=f.redirectUser)||void 0===C?void 0:C._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,_.Z)(function*(){if(h===f.currentUser)return f.queue((0,_.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,v,C){if(this._deleted)return()=>{};const M="function"==typeof f?f:f.next.bind(f),z=this._isInitialized?Promise.resolve():this._initializationPromise;return H(z,this,"internal-error"),z.then(()=>M(this.currentUser)),"function"==typeof f?h.addObserver(f,v,C):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,_.Z)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Co(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,_.Z)(function*(){var f;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const C=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return C&&(v["X-Firebase-Client"]=C),v})()}}function dt(m){return(0,P.m9)(m)}class ln{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(f=>this.observer=f)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oi(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function Ni(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class wi{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,f){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Vn(m,h){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:resetPassword",Dt(m,h))})).apply(this,arguments)}function ga(m,h){return _s.apply(this,arguments)}function _s(){return(_s=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Za(m,h){return ws.apply(this,arguments)}function ws(){return(ws=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:update",Dt(m,h))})).apply(this,arguments)}function Ks(){return(Ks=(0,_.Z)(function*(m,h){return Mn(m,"POST","/v1/accounts:signInWithPassword",Dt(m,h))})).apply(this,arguments)}function Es(m,h){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:sendOobCode",Dt(m,h))})).apply(this,arguments)}function gn(m,h){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,_.Z)(function*(m,h){return Es(m,h)})).apply(this,arguments)}function ma(m,h){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,_.Z)(function*(m,h){return Es(m,h)})).apply(this,arguments)}function Pi(m,h){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,_.Z)(function*(m,h){return Es(m,h)})).apply(this,arguments)}function Cl(m,h){return ki.apply(this,arguments)}function ki(){return(ki=(0,_.Z)(function*(m,h){return Es(m,h)})).apply(this,arguments)}function Qu(){return(Qu=(0,_.Z)(function*(m,h){return Mn(m,"POST","/v1/accounts:signInWithEmailLink",Dt(m,h))})).apply(this,arguments)}function Sl(){return(Sl=(0,_.Z)(function*(m,h){return Mn(m,"POST","/v1/accounts:signInWithEmailLink",Dt(m,h))})).apply(this,arguments)}class Cr extends wi{constructor(h,f,v,C=null){super("password",v),this._email=h,this._password=f,this._tenantId=C}static _fromEmailAndPassword(h,f){return new Cr(h,f,"password")}static _fromEmailAndCode(h,f,v=null){return new Cr(h,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,_.Z)(function*(){switch(f.signInMethod){case"password":return function dr(m,h){return Ks.apply(this,arguments)}(h,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Fi(m,h){return Qu.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Ie(h,"internal-error")}})()}_linkToIdToken(h,f){var v=this;return(0,_.Z)(function*(){switch(v.signInMethod){case"password":return ga(h,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Ep(m,h){return Sl.apply(this,arguments)}(h,{idToken:f,email:v._email,oobCode:v._password});default:Ie(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Is(m,h){return Al.apply(this,arguments)}function Al(){return(Al=(0,_.Z)(function*(m,h){return Mn(m,"POST","/v1/accounts:signInWithIdp",Dt(m,h))})).apply(this,arguments)}class Xi extends wi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new Xi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Ie("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:C}=f,M=(0,oe._T)(f,["providerId","signInMethod"]);if(!v||!C)return null;const z=new Xi(v,C);return z.idToken=M.idToken||void 0,z.accessToken=M.accessToken||void 0,z.secret=M.secret,z.nonce=M.nonce,z.pendingToken=M.pendingToken||null,z}_getIdTokenResponse(h){return Is(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Is(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Is(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,P.xO)(f)}return h}}function Dp(m,h){return xl.apply(this,arguments)}function xl(){return(xl=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:sendVerificationCode",Dt(m,h))})).apply(this,arguments)}function Ds(){return(Ds=(0,_.Z)(function*(m,h){return Mn(m,"POST","/v1/accounts:signInWithPhoneNumber",Dt(m,h))})).apply(this,arguments)}function Rl(){return(Rl=(0,_.Z)(function*(m,h){const f=yield Mn(m,"POST","/v1/accounts:signInWithPhoneNumber",Dt(m,h));if(f.temporaryProof)throw Ri(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Tp={USER_NOT_FOUND:"user-not-found"};function Ml(){return(Ml=(0,_.Z)(function*(m,h){return Mn(m,"POST","/v1/accounts:signInWithPhoneNumber",Dt(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Tp)})).apply(this,arguments)}class So extends wi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new So({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new So({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function Xu(m,h){return Ds.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function bp(m,h){return Rl.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Cp(m,h){return Ml.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:v,verificationCode:C}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:v,code:C}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:v,phoneNumber:C,temporaryProof:M}=h;return v||f||C||M?new So({verificationId:f,verificationCode:v,phoneNumber:C,temporaryProof:M}):null}}class Xa{constructor(h){var f,v,C,M,z,ue;const ke=(0,P.zd)((0,P.pd)(h)),Ye=null!==(f=ke.apiKey)&&void 0!==f?f:null,yt=null!==(v=ke.oobCode)&&void 0!==v?v:null,gt=function Rh(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=ke.mode)&&void 0!==C?C:null);H(Ye&&yt&&gt,"argument-error"),this.apiKey=Ye,this.operation=gt,this.code=yt,this.continueUrl=null!==(M=ke.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(z=ke.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ue=ke.tenantId)&&void 0!==ue?ue:null}static parseLink(h){const f=function ya(m){const h=(0,P.zd)((0,P.pd)(m)).link,f=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(m)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||f||h||m}(h);try{return new Xa(f)}catch(v){return null}}}let Nl=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,v){return Cr._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const C=Xa.parseLink(v);return H(C,"argument-error"),Cr._fromEmailAndCode(f,C.code,C.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Sr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Zs extends Sr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Li extends Zs{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return H("providerId"in f&&"signInMethod"in f,"argument-error"),Xi._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return H(h.idToken||h.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Li.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Li.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:C,pendingToken:M,nonce:z,providerId:ue}=h;if(!v&&!C&&!f&&!M||!ue)return null;try{return new Li(ue)._credential({idToken:f,accessToken:v,nonce:z,pendingToken:M})}catch(ke){return null}}}let Ao=(()=>{class m extends Zs{constructor(){super("facebook.com")}static credential(f){return Xi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(v){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Pl=(()=>{class m extends Zs{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return Xi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:C}=f;if(!v&&!C)return null;try{return m.credential(v,C)}catch(M){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Mh=(()=>{class m extends Zs{constructor(){super("github.com")}static credential(f){return Xi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(v){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Ys extends wi{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Is(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Is(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Is(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:C,pendingToken:M}=f;return v&&C&&M&&v===C?new Ys(v,M):null}static _create(h,f){return new Ys(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ur extends Sr{constructor(h){H(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ur.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ur.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Ys.fromJSON(h);return H(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:v}=h;if(!f||!v)return null;try{return Ys._create(v,f)}catch(C){return null}}}let kl=(()=>{class m extends Zs{constructor(){super("twitter.com")}static credential(f,v){return Xi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:C}=f;if(!v||!C)return null;try{return m.credential(v,C)}catch(M){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Vr(m,h){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,_.Z)(function*(m,h){return Mn(m,"POST","/v1/accounts:signUp",Dt(m,h))})).apply(this,arguments)}class li{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,v,C=!1){return(0,_.Z)(function*(){const M=yield Wt._fromIdTokenResponse(h,v,C),z=ec(v);return new li({user:M,providerId:z,_tokenResponse:v,operationType:f})})()}static _forOperation(h,f,v){return(0,_.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const C=ec(v);return new li({user:h,providerId:C,_tokenResponse:v,operationType:f})})()}}function ec(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function tc(){return(tc=(0,_.Z)(function*(m){var h;const f=dt(m);if(yield f._initializationPromise,null===(h=f.currentUser)||void 0===h?void 0:h.isAnonymous)return new li({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield Vr(f,{returnSecureToken:!0}),C=yield li._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(C.user),C})).apply(this,arguments)}class Mo extends P.ZR{constructor(h,f,v,C){var M;super(f.code,f.message),this.operationType=v,this.user=C,Object.setPrototypeOf(this,Mo.prototype),this.customData={appName:h.name,tenantId:null!==(M=h.tenantId)&&void 0!==M?M:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,f,v,C){return new Mo(h,f,v,C)}}function nc(m,h,f,v){return("reauthenticate"===h?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Mo._fromErrorAndOperation(m,M,h,v):M})}function Ui(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function mn(){return(mn=(0,_.Z)(function*(m,h){const f=(0,P.m9)(m);yield un(!0,f,h);const{providerUserInfo:v}=yield Sn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),C=Ui(v||[]);return f.providerData=f.providerData.filter(M=>C.has(M.providerId)),C.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function va(m,h){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,_.Z)(function*(m,h,f=!1){const v=yield cr(m,h._linkToIdToken(m.auth,yield m.getIdToken()),f);return li._forOperation(m,"link",v)})).apply(this,arguments)}function un(m,h,f){return _a.apply(this,arguments)}function _a(){return(_a=(0,_.Z)(function*(m,h,f){yield Fr(h);const C=!1===m?"provider-already-linked":"no-such-provider";H(Ui(h.providerData).has(f)===m,h.auth,C)})).apply(this,arguments)}function Ja(m,h){return bs.apply(this,arguments)}function bs(){return(bs=(0,_.Z)(function*(m,h,f=!1){const{auth:v}=m,C="reauthenticate";try{const M=yield cr(m,nc(v,C,h,m),f);H(M.idToken,v,"internal-error");const z=lt(M.idToken);H(z,v,"internal-error");const{sub:ue}=z;return H(m.uid===ue,v,"user-mismatch"),li._forOperation(m,C,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Ie(v,"user-mismatch"),M}})).apply(this,arguments)}function hr(m,h){return rc.apply(this,arguments)}function rc(){return(rc=(0,_.Z)(function*(m,h,f=!1){const v="signIn",C=yield nc(m,v,h),M=yield li._fromIdTokenResponse(m,v,C);return f||(yield m._updateCurrentUser(M.user)),M})).apply(this,arguments)}function An(m,h){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,_.Z)(function*(m,h){return hr(dt(m),h)})).apply(this,arguments)}function wr(m,h){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,_.Z)(function*(m,h){const f=(0,P.m9)(m);return yield un(!1,f,h.providerId),va(f,h)})).apply(this,arguments)}function Ji(m,h){return wa.apply(this,arguments)}function wa(){return(wa=(0,_.Z)(function*(m,h){return Ja((0,P.m9)(m),h)})).apply(this,arguments)}function Ei(m,h){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,_.Z)(function*(m,h){return Mn(m,"POST","/v1/accounts:signInWithCustomToken",Dt(m,h))})).apply(this,arguments)}function Et(){return(Et=(0,_.Z)(function*(m,h){const f=dt(m),v=yield Ei(f,{token:h,returnSecureToken:!0}),C=yield li._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(C.user),C})).apply(this,arguments)}class Ts{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?ic._fromServerResponse(h,f):Ie(h,"internal-error")}}class ic extends Ts{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new ic(f)}}function Ea(m,h,f){var v;H((null===(v=f.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),H(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(H(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(H(f.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function eu(){return(eu=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m),C={requestType:"PASSWORD_RESET",email:h};f&&Ea(v,C,f),yield ma(v,C)})).apply(this,arguments)}function oc(){return(oc=(0,_.Z)(function*(m,h,f){yield Vn((0,P.m9)(m),{oobCode:h,newPassword:f})})).apply(this,arguments)}function Te(){return(Te=(0,_.Z)(function*(m,h){yield Za((0,P.m9)(m),{oobCode:h})})).apply(this,arguments)}function Kt(m,h){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,_.Z)(function*(m,h){const f=(0,P.m9)(m),v=yield Vn(f,{oobCode:h}),C=v.requestType;switch(H(C,f,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(v.mfaInfo,f,"internal-error");default:H(v.email,f,"internal-error")}let M=null;return v.mfaInfo&&(M=Ts._fromServerResponse(dt(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:M},operation:C}})).apply(this,arguments)}function nu(){return(nu=(0,_.Z)(function*(m,h){const{data:f}=yield Kt((0,P.m9)(m),h);return f.email})).apply(this,arguments)}function di(){return(di=(0,_.Z)(function*(m,h,f){const v=dt(m),C=yield Vr(v,{returnSecureToken:!0,email:h,password:f}),M=yield li._fromIdTokenResponse(v,"signIn",C);return yield v._updateCurrentUser(M.user),M})).apply(this,arguments)}function cc(){return(cc=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m),C={requestType:"EMAIL_SIGNIN",email:h};H(f.handleCodeInApp,v,"argument-error"),f&&Ea(v,C,f),yield Pi(v,C)})).apply(this,arguments)}function es(){return(es=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m),C=Nl.credentialWithLink(h,f||he());return H(C._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),An(v,C)})).apply(this,arguments)}function Ar(m,h){return hi.apply(this,arguments)}function hi(){return(hi=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:createAuthUri",Dt(m,h))})).apply(this,arguments)}function Cs(){return(Cs=(0,_.Z)(function*(m,h){const v={identifier:h,continueUri:me()?he():"http://localhost"},{signinMethods:C}=yield Ar((0,P.m9)(m),v);return C||[]})).apply(this,arguments)}function lc(){return(lc=(0,_.Z)(function*(m,h){const f=(0,P.m9)(m),C={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Ea(f.auth,C,h);const{email:M}=yield gn(f.auth,C);M!==m.email&&(yield m.reload())})).apply(this,arguments)}function su(){return(su=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};f&&Ea(v.auth,M,f);const{email:z}=yield Cl(v.auth,M);z!==m.email&&(yield m.reload())})).apply(this,arguments)}function dc(m,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,_.Z)(function*(m,h){return ct(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function au(){return(au=(0,_.Z)(function*(m,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const v=(0,P.m9)(m),M={idToken:yield v.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},z=yield cr(v,dc(v.auth,M));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const ue=v.providerData.find(({providerId:ke})=>"password"===ke);ue&&(ue.displayName=v.displayName,ue.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function uu(m,h,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(m,h,f){const{auth:v}=m,M={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(M.email=h),f&&(M.password=f);const z=yield cr(m,ga(v,M));yield m._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Po{constructor(h,f,v={}){this.isNewUser=h,this.providerId=f,this.profile=v}}class jl extends Po{constructor(h,f,v,C){super(h,f,v),this.username=C}}class cu extends Po{constructor(h,f){super(h,"facebook.com",f)}}class Qr extends jl{constructor(h,f){super(h,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class Nh extends Po{constructor(h,f){super(h,"google.com",f)}}class hc extends jl{constructor(h,f,v){super(h,"twitter.com",f,v)}}function fr(m){const{user:h,_tokenResponse:f}=m;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Bl(m){var h,f;if(!m)return null;const{providerId:v}=m,C=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},M=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&(null==m?void 0:m.idToken)){const z=null===(f=null===(h=lt(m.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(z)return new Po(M,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new cu(M,C);case"github.com":return new Qr(M,C);case"google.com":return new Nh(M,C);case"twitter.com":return new hc(M,C,m.screenName||null);case"custom":case"anonymous":return new Po(M,null);default:return new Po(M,v,C)}}(f)}class ts{constructor(h,f,v){this.type=h,this.credential=f,this.auth=v}static _fromIdtoken(h,f){return new ts("enroll",h,f)}static _fromMfaPendingCredential(h){return new ts("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,v;if(null==h?void 0:h.multiFactorSession){if(null===(f=h.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return ts._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return ts._fromIdtoken(h.multiFactorSession.idToken)}return null}}class no{constructor(h,f,v){this.session=h,this.hints=f,this.signInResolver=v}static _fromError(h,f){const v=dt(h),C=f.customData._serverResponse,M=(C.mfaInfo||[]).map(ue=>Ts._fromServerResponse(v,ue));H(C.mfaPendingCredential,v,"internal-error");const z=ts._fromMfaPendingCredential(C.mfaPendingCredential);return new no(z,M,function(){var ue=(0,_.Z)(function*(ke){const Ye=yield ke._process(v,z);delete C.mfaInfo,delete C.mfaPendingCredential;const yt=Object.assign(Object.assign({},C),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(f.operationType){case"signIn":const gt=yield li._fromIdTokenResponse(v,f.operationType,yt);return yield v._updateCurrentUser(gt.user),gt;case"reauthenticate":return H(f.user,v,"internal-error"),li._forOperation(f.user,f.operationType,yt);default:Ie(v,"internal-error")}});return function(ke){return ue.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,_.Z)(function*(){return f.signInResolver(h)})()}}function Gl(m,h){return ct(m,"POST","/v2/accounts/mfaEnrollment:start",Dt(m,h))}class ko{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>Ts._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new ko(h)}getSession(){var h=this;return(0,_.Z)(function*(){return ts._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,f){var v=this;return(0,_.Z)(function*(){const C=h,M=yield v.getSession(),z=yield cr(v.user,C._process(v.user.auth,M,f));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(h){var f=this;return(0,_.Z)(function*(){const v="string"==typeof h?h:h.uid,C=yield f.user.getIdToken();try{const M=yield cr(f.user,function ro(m,h){return ct(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Dt(m,h))}(f.user.auth,{idToken:C,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:z})=>z!==v),yield f.user._updateTokensIfNecessary(M),yield f.user.reload()}catch(M){throw M}})()}}const lu=new WeakMap,ns="__sak";class du{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ns,"1"),this.storage.removeItem(ns),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const dn=(()=>{class m extends du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mp(){const m=(0,P.z$)();return nt(m)||Pt(m)}()&&function _r(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=vs(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const C=this.storage.getItem(v),M=this.localCache[v];C!==M&&f(v,M,C)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((ue,ke,Ye)=>{this.notifyListeners(ue,Ye)});const C=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(C);if(f.newValue!==ue)null!==f.newValue?this.storage.setItem(C,f.newValue):this.storage.removeItem(C);else if(this.localCache[C]===f.newValue&&!v)return}const M=()=>{const ue=this.storage.getItem(C);!v&&this.localCache[C]===ue||this.notifyListeners(C,ue)},z=this.storage.getItem(C);!function Ws(){return(0,P.w1)()&&10===document.documentMode}()||z===f.newValue||f.newValue===f.oldValue?M():setTimeout(M,10)}notifyListeners(f,v){this.localCache[f]=v;const C=this.listeners[f];if(C)for(const M of Array.from(C))M(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var C=()=>super._set,M=this;return(0,_.Z)(function*(){yield C().call(M,f,v),M.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,C=this;return(0,_.Z)(function*(){const M=yield v().call(C,f);return C.localCache[f]=JSON.stringify(M),M})()}_remove(f){var v=()=>super._remove,C=this;return(0,_.Z)(function*(){yield v().call(C,f),delete C.localCache[f]})()}}return m.type="LOCAL",m})(),rr=(()=>{class m extends du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return m.type="SESSION",m})();let Ca=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(M=>M.isListeningto(f));if(v)return v;const C=new m(f);return this.receivers.push(C),C}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,_.Z)(function*(){const C=f,{eventId:M,eventType:z,data:ue}=C.data,ke=v.handlersMap[z];if(!(null==ke?void 0:ke.size))return;C.ports[0].postMessage({status:"ack",eventId:M,eventType:z});const Ye=Array.from(ke).map(function(){var gt=(0,_.Z)(function*(ir){return ir(C.origin,ue)});return function(ir){return gt.apply(this,arguments)}}()),yt=yield function Ta(m){return Promise.all(m.map(function(){var h=(0,_.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return h.apply(this,arguments)}}()))}(Ye);C.ports[0].postMessage({status:"done",eventId:M,eventType:z,response:yt})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function As(m="",h=10){let f="";for(let v=0;v<h;v++)f+=Math.floor(10*Math.random());return m+f}class Nn{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,v=50){var C=this;return(0,_.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let z,ue;return new Promise((ke,Ye)=>{const yt=As("",20);M.port1.start();const gt=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);ue={messageChannel:M,onMessage(ir){const Ci=ir;if(Ci.data.eventId===yt)switch(Ci.data.status){case"ack":clearTimeout(gt),z=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),ke(Ci.data.response);break;default:clearTimeout(gt),clearTimeout(z),Ye(new Error("invalid_response"))}}},C.handlers.add(ue),M.port1.addEventListener("message",ue.onMessage),C.target.postMessage({eventType:h,eventId:yt,data:f},[M.port2])}).finally(()=>{ue&&C.removeMessageHandler(ue)})})()}}function Xt(){return window}function kt(){return void 0!==Xt().WorkerGlobalScope&&"function"==typeof Xt().importScripts}function fc(){return(fc=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const hu="firebaseLocalStorageDb",Bn="firebaseLocalStorage",ji="fbase_key";class Xr{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function xs(m,h){return m.transaction([Bn],h?"readwrite":"readonly").objectStore(Bn)}function gc(){const m=indexedDB.open(hu,1);return new Promise((h,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const v=m.result;try{v.createObjectStore(Bn,{keyPath:ji})}catch(C){f(C)}}),m.addEventListener("success",(0,_.Z)(function*(){const v=m.result;v.objectStoreNames.contains(Bn)?h(v):(v.close(),yield function io(){const m=indexedDB.deleteDatabase(hu);return new Xr(m).toPromise()}(),h(yield gc()))}))})}function rs(m,h,f){return $i.apply(this,arguments)}function $i(){return($i=(0,_.Z)(function*(m,h,f){const v=xs(m,!0).put({[ji]:h,value:f});return new Xr(v).toPromise()})).apply(this,arguments)}function so(){return(so=(0,_.Z)(function*(m,h){const f=xs(m,!1).get(h),v=yield new Xr(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Sa(m,h){const f=xs(m,!0).delete(h);return new Xr(f).toPromise()}const Lo=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.Z)(function*(){return f.db||(f.db=yield gc()),f.db})()}_withRetries(f){var v=this;return(0,_.Z)(function*(){let C=0;for(;;)try{const M=yield v._openDb();return yield f(M)}catch(M){if(C++>3)throw M;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.Z)(function*(){return kt()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.Z)(function*(){f.receiver=Ca._getInstance(function pc(){return kt()?self:null}()),f.receiver._subscribe("keyChanged",function(){var v=(0,_.Z)(function*(C,M){return{keyProcessed:(yield f._poll()).includes(M.key)}});return function(C,M){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,_.Z)(function*(C,M){return["keyChanged"]});return function(C,M){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.Z)(function*(){var v,C;if(f.activeServiceWorker=yield function Fo(){return fc.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Nn(f.activeServiceWorker);const M=yield f.sender._send("ping",{},800);!M||(null===(v=M[0])||void 0===v?void 0:v.fulfilled)&&(null===(C=M[0])||void 0===C?void 0:C.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,_.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function zl(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(C){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const f=yield gc();return yield rs(f,ns,"1"),yield Sa(f,ns),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,_.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var C=this;return(0,_.Z)(function*(){return C._withPendingWrite((0,_.Z)(function*(){return yield C._withRetries(M=>rs(M,f,v)),C.localCache[f]=v,C.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,_.Z)(function*(){const C=yield v._withRetries(M=>function Rs(m,h){return so.apply(this,arguments)}(M,f));return v.localCache[f]=C,C})()}_remove(f){var v=this;return(0,_.Z)(function*(){return v._withPendingWrite((0,_.Z)(function*(){return yield v._withRetries(C=>Sa(C,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.Z)(function*(){const v=yield f._withRetries(z=>{const ue=xs(z,!1).getAll();return new Xr(ue).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const C=[],M=new Set;for(const{fbase_key:z,value:ue}of v)M.add(z),JSON.stringify(f.localCache[z])!==JSON.stringify(ue)&&(f.notifyListeners(z,ue),C.push(z));for(const z of Object.keys(f.localCache))f.localCache[z]&&!M.has(z)&&(f.notifyListeners(z,null),C.push(z));return C})()}notifyListeners(f,v){this.localCache[f]=v;const C=this.listeners[f];if(C)for(const M of Array.from(C))M(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function mc(m,h){return ct(m,"POST","/v2/accounts/mfaSignIn:start",Dt(m,h))}function yc(){return(yc=(0,_.Z)(function*(m){return(yield ct(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function oo(m){return new Promise((h,f)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=h,v.onerror=C=>{const M=fe("internal-error");M.customData=C,f(M)},v.type="text/javascript",v.charset="UTF-8",function vc(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(v)})}function Ms(m){return`__${m}${Math.floor(1e6*Math.random())}`}const Vo=1e12;class Ph{constructor(h){this.auth=h,this.counter=Vo,this._widgets=new Map}render(h,f){const v=this.counter;return this._widgets.set(v,new xa(h,this.auth.name,f||{})),this.counter++,v}reset(h){var f;const v=h||Vo;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Vo))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,_.Z)(function*(){var v;return null===(v=f._widgets.get(h||Vo))||void 0===v||v.execute(),""})()}}class xa{constructor(h,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof h?document.getElementById(h):h;H(C,"argument-error",{appName:f}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function py(m){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<m;v++)h.push(f.charAt(Math.floor(Math.random()*f.length)));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kh=Ms("rcb"),Pn=new st(3e4,6e4);class Os{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(h=Xt().grecaptcha)||void 0===h?void 0:h.render)}load(h,f=""){return H(function Wl(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),h,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Xt().grecaptcha):new Promise((v,C)=>{const M=Xt().setTimeout(()=>{C(fe(h,"network-request-failed"))},Pn.get());Xt()[kh]=()=>{Xt().clearTimeout(M),delete Xt()[kh];const ue=Xt().grecaptcha;if(!ue)return void C(fe(h,"internal-error"));const ke=ue.render;ue.render=(Ye,yt)=>{const gt=ke(Ye,yt);return this.counter++,gt},this.hostLanguage=f,v(ue)},oo(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:kh,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(M),C(fe(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!!(null===(f=Xt().grecaptcha)||void 0===f?void 0:f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sn{load(h){return(0,_.Z)(function*(){return new Ph(h)})()}clearedOneInstance(){}}const ao="recaptcha",Fh={theme:"light",type:"image"};class Op{constructor(h,f=Object.assign({},Fh),v){this.parameters=f,this.type=ao,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dt(v),this.isInvisible="invisible"===this.parameters.size,H("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof h?document.getElementById(h):h;H(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sn:new Os,this.validateStartingState()}verify(){var h=this;return(0,_.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(f)||new Promise(M=>{const z=ue=>{!ue||(h.tokenChangeListeners.delete(z),M(ue))};h.tokenChangeListeners.add(z),h.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof h)h(f);else if("string"==typeof h){const v=Xt()[h];"function"==typeof v&&v(f)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,_.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,_.Z)(function*(){H(me()&&!kt(),h.auth,"internal-error"),yield function Ra(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function Er(m){return yc.apply(this,arguments)}(h.auth);H(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class pr{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=So._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function ss(){return(ss=(0,_.Z)(function*(m,h,f){const v=dt(m),C=yield jr(v,h,(0,P.m9)(f));return new pr(C,M=>An(v,M))})).apply(this,arguments)}function Kl(){return(Kl=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m);yield un(!1,v,"phone");const C=yield jr(v.auth,h,(0,P.m9)(f));return new pr(C,M=>wr(v,M))})).apply(this,arguments)}function Br(){return(Br=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m),C=yield jr(v.auth,h,(0,P.m9)(f));return new pr(C,M=>Ji(v,M))})).apply(this,arguments)}function jr(m,h,f){return pu.apply(this,arguments)}function pu(){return(pu=(0,_.Z)(function*(m,h,f){var v;const C=yield f.verify();try{let M;if(H("string"==typeof C,m,"argument-error"),H(f.type===ao,m,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const z=M.session;if("phoneNumber"in M)return H("enroll"===z.type,m,"internal-error"),(yield Gl(m,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{H("signin"===z.type,m,"internal-error");const ue=(null===(v=M.multiFactorHint)||void 0===v?void 0:v.uid)||M.multiFactorUid;return H(ue,m,"missing-multi-factor-info"),(yield mc(m,{mfaPendingCredential:z.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Dp(m,{phoneNumber:M.phoneNumber,recaptchaToken:C});return z}}finally{f._reset()}})).apply(this,arguments)}function co(){return(co=(0,_.Z)(function*(m,h){yield va((0,P.m9)(m),h)})).apply(this,arguments)}let Bo=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=dt(f)}verifyPhoneNumber(f,v){return jr(this.auth,f,(0,P.m9)(v))}static credential(f,v){return So._fromVerification(f,v)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:C}=f;return v&&C?So._fromTokenResponse(v,C):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function kn(m,h){return h?Ke(h):(H(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class jo extends wi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Is(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Is(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Is(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Uh(m){return hr(m.auth,new jo(m),m.bypassAuthState)}function gu(m){const{auth:h,user:f}=m;return H(f,h,"internal-error"),Ja(f,new jo(m),m.bypassAuthState)}function lo(m){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,_.Z)(function*(m){const{auth:h,user:f}=m;return H(f,h,"internal-error"),va(f,new jo(m),m.bypassAuthState)})).apply(this,arguments)}class Ns{constructor(h,f,v,C,M=!1){this.auth=h,this.resolver=v,this.user=C,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,_.Z)(function*(v,C){h.pendingPromise={resolve:v,reject:C};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(v,C){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,_.Z)(function*(){const{urlResponse:v,sessionId:C,postBody:M,tenantId:z,error:ue,type:ke}=h;if(ue)return void f.reject(ue);const Ye={auth:f.auth,requestUri:v,sessionId:C,tenantId:z||void 0,postBody:M||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(ke)(Ye))}catch(yt){f.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Uh;case"linkViaPopup":case"linkViaRedirect":return lo;case"reauthViaPopup":case"reauthViaRedirect":return gu;default:Ie(this.auth,"internal-error")}}resolve(h){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ps=new st(2e3,1e4);function $o(){return($o=(0,_.Z)(function*(m,h,f){const v=dt(m);Ue(m,h,Sr);const C=kn(v,f);return new Ho(v,"signInViaPopup",h,C).executeNotNull()})).apply(this,arguments)}function Yl(){return(Yl=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m);Ue(v.auth,h,Sr);const C=kn(v.auth,f);return new Ho(v.auth,"reauthViaPopup",h,C,v).executeNotNull()})).apply(this,arguments)}function yu(){return(yu=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m);Ue(v.auth,h,Sr);const C=kn(v.auth,f);return new Ho(v.auth,"linkViaPopup",h,C,v).executeNotNull()})).apply(this,arguments)}let Ho=(()=>{class m extends Ns{constructor(f,v,C,M,z){super(f,v,M,z),this.provider=C,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.Z)(function*(){const v=yield f.execute();return H(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,_.Z)(function*(){Fe(1===f.filter.length,"Popup operations only handle one event");const v=As();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(C=>{f.reject(C)}),f.resolver._isIframeWebStorageSupported(f.auth,C=>{C||f.reject(fe(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,C;this.pollId=(null===(C=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===C?void 0:C.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Ps.get())};f()}}return m.currentPopupAction=null,m})();const Fs=new Map;class vu extends Ns{constructor(h,f,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,_.Z)(function*(){let v=Fs.get(f.auth._key());if(!v){try{const M=(yield function Pp(m,h){return ei.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;v=()=>Promise.resolve(M)}catch(C){v=()=>Promise.reject(C)}Fs.set(f.auth._key(),v)}return f.bypassAuthState||Fs.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,v=this;return(0,_.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(v,h);if("unknown"!==h.type){if(h.eventId){const C=yield v.auth._redirectUserForId(h.eventId);if(C)return v.user=C,f().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function ei(){return(ei=(0,_.Z)(function*(m,h){const f=ho(h),v=wu(m);if(!(yield v._isAvailable()))return!1;const C="true"===(yield v._get(f));return yield v._remove(f),C})).apply(this,arguments)}function Go(m,h){return $r.apply(this,arguments)}function $r(){return($r=(0,_.Z)(function*(m,h){return wu(m)._set(ho(h),"true")})).apply(this,arguments)}function _u(m,h){Fs.set(m._key(),h)}function wu(m){return Ke(m._redirectPersistence)}function ho(m){return L("pendingRedirect",m.config.apiKey,m.name)}function D(){return(D=(0,_.Z)(function*(m,h,f){const v=dt(m);Ue(m,h,Sr),yield v._initializationPromise;const C=kn(v,f);return yield Go(C,v),C._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m);Ue(v.auth,h,Sr),yield v.auth._initializationPromise;const C=kn(v.auth,f);yield Go(C,v.auth);const M=yield mt(v);return C._openRedirect(v.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function Se(){return(Se=(0,_.Z)(function*(m,h,f){const v=(0,P.m9)(m);Ue(v.auth,h,Sr),yield v.auth._initializationPromise;const C=kn(v.auth,f);yield un(!1,v,h.providerId),yield Go(C,v.auth);const M=yield mt(v);return C._openRedirect(v.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function at(){return(at=(0,_.Z)(function*(m,h){return yield dt(m)._initializationPromise,ut(m,h,!1)})).apply(this,arguments)}function ut(m,h){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,_.Z)(function*(m,h,f=!1){const v=dt(m),C=kn(v,h),z=yield new vu(v,C,f).execute();return z&&!f&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,h)),z})).apply(this,arguments)}function mt(m){return gr.apply(this,arguments)}function gr(){return(gr=(0,_.Z)(function*(m){const h=As(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class Ma{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(f=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Rr(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ti(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var v;if(h.error&&!ti(h)){const C=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(fe(this.auth,C))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const v=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qo(h))}saveEventToCache(h){this.cachedEventUids.add(qo(h)),this.lastProcessedEventTime=Date.now()}}function qo(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function ti({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Hi(m){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,_.Z)(function*(m,h={}){return ct(m,"GET","/v1/projects",h)})).apply(this,arguments)}const gy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Iu=/^https?/;function jh(){return(jh=(0,_.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield Hi(m);for(const f of h)try{if(E0(f))return}catch(v){}Ie(m,"unauthorized-domain")})).apply(this,arguments)}function E0(m){const h=he(),{protocol:f,hostname:v}=new URL(h);if(m.startsWith("chrome-extension://")){const z=new URL(m);return""===z.hostname&&""===v?"chrome-extension:"===f&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&z.hostname===v}if(!Iu.test(f))return!1;if(gy.test(m))return v===m;const C=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(v)}const kp=new st(3e4,6e4);function Fp(){const m=Xt().___jsl;if(null==m?void 0:m.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let Ec=null;function Lp(m){return Ec=Ec||function $h(m){return new Promise((h,f)=>{var v,C,M;function z(){Fp(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Fp(),f(fe(m,"network-request-failed"))},timeout:kp.get()})}if(null===(C=null===(v=Xt().gapi)||void 0===v?void 0:v.iframes)||void 0===C?void 0:C.Iframe)h(gapi.iframes.getContext());else{if(!(null===(M=Xt().gapi)||void 0===M?void 0:M.load)){const ue=Ms("iframefcb");return Xt()[ue]=()=>{gapi.load?z():f(fe(m,"network-request-failed"))},oo(`https://apis.google.com/js/api.js?onload=${ue}`).catch(ke=>f(ke))}z()}}).catch(h=>{throw Ec=null,h})}(m),Ec}const Hh=new st(5e3,15e3),Ls={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Up=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vp(m){const h=m.config;H(h.authDomain,m,"auth-domain-config-required");const f=h.emulator?Mt(h,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:m.name,v:ne.SDK_VERSION},C=Up.get(m.config.apiHost);C&&(v.eid=C);const M=m._getFrameworks();return M.length&&(v.fw=M.join(",")),`${f}?${(0,P.xO)(v).slice(1)}`}function Ic(){return Ic=(0,_.Z)(function*(m){const h=yield Lp(m),f=Xt().gapi;return H(f,m,"internal-error"),h.open({where:document.body,url:Vp(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ls,dontclear:!0},v=>new Promise(function(){var C=(0,_.Z)(function*(M,z){yield v.restyle({setHideOnLeave:!1});const ue=fe(m,"network-request-failed"),ke=Xt().setTimeout(()=>{z(ue)},Hh.get());function Ye(){Xt().clearTimeout(ke),M(v)}v.ping(Ye).then(Ye,()=>{z(ue)})});return function(M,z){return C.apply(this,arguments)}}()))}),Ic.apply(this,arguments)}const Hr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wo{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Ql(m,h,f,v,C,M){H(m.config.authDomain,m,"auth-domain-config-required"),H(m.config.apiKey,m,"invalid-api-key");const z={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:v,v:ne.SDK_VERSION,eventId:C};if(h instanceof Sr){h.setDefaultLanguage(m.languageCode),z.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ke,Ye]of Object.entries(M||{}))z[ke]=Ye}if(h instanceof Zs){const ke=h.getScopes().filter(Ye=>""!==Ye);ke.length>0&&(z.scopes=ke.join(","))}m.tenantId&&(z.tid=m.tenantId);const ue=z;for(const ke of Object.keys(ue))void 0===ue[ke]&&delete ue[ke];return`${function Xl({config:m}){return m.emulator?Mt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,P.xO)(ue).slice(1)}`}const Dc="webStorageSupport";class bc extends class D0{constructor(h){this.factorId=h}_process(h,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,v);case"signin":return this._finalizeSignIn(h,f.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new bc(h)}_finalizeEnroll(h,f,v){return function xp(m,h){return ct(m,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(m,h))}(h,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function ql(m,h){return ct(m,"POST","/v2/accounts/mfaSignIn:finalize",Dt(m,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qp=(()=>{class m{constructor(){}static assertion(f){return bc._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var Wp="@firebase/auth";class ed{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,_.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(v=>{h((null==v?void 0:v.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);!f||(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Us(){return window}function Du(){return(Du=(0,_.Z)(function*(m,h,f){var v;const{BuildInfo:C}=Us();Fe(h.sessionId,"AuthEvent did not contain a session ID");const M=yield qh(h.sessionId),z={};return Pt()?z.ibi=C.packageName:pn()?z.apn=C.packageName:Ie(m,"operation-not-supported-in-this-environment"),C.displayName&&(z.appDisplayName=C.displayName),z.sessionId=M,Ql(m,f,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function nd(){return(nd=(0,_.Z)(function*(m){const{BuildInfo:h}=Us(),f={};Pt()?f.iosBundleId=h.packageName:pn()?f.androidPackageName=h.packageName:Ie(m,"operation-not-supported-in-this-environment"),yield Hi(m,f)})).apply(this,arguments)}function rd(){return(rd=(0,_.Z)(function*(m,h,f){const{cordova:v}=Us();let C=()=>{};try{yield new Promise((M,z)=>{let ue=null;function ke(){var gt;M();const ir=null===(gt=v.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof ir&&ir(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Ye(){ue||(ue=window.setTimeout(()=>{z(fe(m,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}h.addPassiveListener(ke),document.addEventListener("resume",Ye,!1),pn()&&document.addEventListener("visibilitychange",yt,!1),C=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",yt,!1),ue&&window.clearTimeout(ue)}})}finally{C()}})).apply(this,arguments)}function qh(m){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,_.Z)(function*(m){const h=Cc(m),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Cc(m){if(Fe(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),f=new Uint8Array(h);for(let v=0;v<m.length;v++)f[v]=m.charCodeAt(v);return f}(0,P.Pz)("authIdTokenMaxAge"),function Kp(m){(0,ne._registerComponent)(new se.wA("auth",(h,{options:f})=>{const v=h.getProvider("app").getImmediate(),C=h.getProvider("heartbeat"),{apiKey:M,authDomain:z}=v.options;return((ue,ke)=>{H(M&&!M.includes(":"),"invalid-api-key",{appName:ue.name}),H(!(null==z?void 0:z.includes(":")),"argument-error",{appName:ue.name});const Ye={apiKey:M,authDomain:z,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Co(m)},yt=new We(ue,ke,Ye);return function G(m,h){const f=(null==h?void 0:h.persistence)||[],v=(Array.isArray(f)?f:[f]).map(Ke);(null==h?void 0:h.errorMap)&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(yt,f),yt})(v,C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,v)=>{h.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new se.wA("auth-internal",h=>{const f=dt(h.getProvider("auth").getImmediate());return new ed(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(Wp,"0.21.5",function wy(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,ne.registerVersion)(Wp,"0.21.5","esm2017")}("Browser");class Kh extends Ma{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,_.Z)(function*(){yield h.initPromise})()}}function Zh(m){return bi.apply(this,arguments)}function bi(){return(bi=(0,_.Z)(function*(m){const h=yield sg()._get(bu(m));return h&&(yield sg()._remove(bu(m))),h})).apply(this,arguments)}function ig(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*h.length);m.push(h.charAt(v))}return m.join("")}function sg(){return Ke(dn)}function bu(m){return L("authEvent",m.config.apiKey,m.name)}function rt(m){if(!(null==m?void 0:m.includes("?")))return{};const[h,...f]=m.split("?");return(0,P.zd)(f.join("?"))}function Ko(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fe("no-auth-event")}}function Oa(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function Mr(m=(0,P.z$)()){return!("file:"!==Oa()&&"ionic:"!==Oa()&&"capacitor:"!==Oa()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mc(){try{const m=self.localStorage,h=As();if(m)return m.setItem(h,"1"),m.removeItem(h),!function ag(m=(0,P.z$)()){return function Or(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Yo(m=(0,P.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,P.hl)()}catch(m){return Qo()&&(0,P.hl)()}return!1}function Qo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Tu(){return(function xc(){return"http:"===Oa()||"https:"===Oa()}()||(0,P.ru)()||Mr())&&!function Rc(){return(0,P.b$)()||(0,P.UG)()}()&&Mc()&&!Qo()}function Fn(){return Mr()&&"undefined"!=typeof document}function Cu(){return(Cu=(0,_.Z)(function*(){return!!Fn()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const ri={LOCAL:"local",NONE:"none",SESSION:"session"},os=H,Ti="persistence";function ud(m){return cd.apply(this,arguments)}function cd(){return(cd=(0,_.Z)(function*(m){yield m._initializationPromise;const h=Qh(),f=L(Ti,m.config.apiKey,m.name);h&&h.setItem(f,m._getPersistence())})).apply(this,arguments)}function Qh(){var m;try{return(null===(m=function Dy(){return"undefined"!=typeof window?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch(h){return null}}const Xh=H;class fo{constructor(){this.browserResolver=Ke(class _y{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rr,this._completeRedirectFn=ut,this._overrideRedirectResult=_u}_openPopup(h,f,v,C){var M=this;return(0,_.Z)(function*(){var z;Fe(null===(z=M.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ue=Ql(h,f,v,he(),C);return function Hp(m,h,f,v=500,C=600){const M=Math.max((window.screen.availHeight-C)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let ue="";const ke=Object.assign(Object.assign({},Hr),{width:v.toString(),height:C.toString(),top:M,left:z}),Ye=(0,P.z$)().toLowerCase();f&&(ue=At(Ye)?"_blank":f),J(Ye)&&(h=h||"http://localhost",ke.scrollbars="yes");const yt=Object.entries(ke).reduce((ir,[Ci,hd])=>`${ir}${Ci}=${hd},`,"");if(function ci(m=(0,P.z$)()){var h;return Pt(m)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ye)&&"_self"!==ue)return function vy(m,h){const f=document.createElement("a");f.href=m,f.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(h||"",ue),new Wo(null);const gt=window.open(h||"",ue,yt);H(gt,m,"popup-blocked");try{gt.focus()}catch(ir){}return new Wo(gt)}(h,ue,As())})()}_openRedirect(h,f,v,C){var M=this;return(0,_.Z)(function*(){return yield M._originValidation(h),function xn(m){Xt().location.href=m}(Ql(h,f,v,he(),C)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:C,promise:M}=this.eventManagers[f];return C?Promise.resolve(C):(Fe(M,"If manager is not set, promise should be"),M)}const v=this.initAndGetManager(h);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(h){var f=this;return(0,_.Z)(function*(){const v=yield function Bp(m){return Ic.apply(this,arguments)}(h),C=new Ma(h);return v.register("authEvent",M=>(H(null==M?void 0:M.authEvent,h,"invalid-auth-event"),{status:C.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:C},f.iframes[h._key()]=v,C})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Dc,{type:Dc},C=>{var M;const z=null===(M=null==C?void 0:C[0])||void 0===M?void 0:M[Dc];void 0!==z&&f(!!z),Ie(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function wc(m){return jh.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return vs()||nt()||Pt()}}),this.cordovaResolver=Ke(class Ct{constructor(){this._redirectPersistence=rr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ut,this._overrideRedirectResult=_u}_initialize(h){var f=this;return(0,_.Z)(function*(){const v=h._key();let C=f.eventManagers.get(v);return C||(C=new Kh(h),f.eventManagers.set(v,C),f.attachCallbackListeners(h,C)),C})()}_openPopup(h){Ie(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,v,C){var M=this;return(0,_.Z)(function*(){!function zh(m){var h,f,v,C,M,z,ue,ke,Ye,yt;const gt=Us();H("function"==typeof(null===(h=null==gt?void 0:gt.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(void 0!==(null===(f=null==gt?void 0:gt.BuildInfo)||void 0===f?void 0:f.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(M=null===(C=null===(v=null==gt?void 0:gt.cordova)||void 0===v?void 0:v.plugins)||void 0===C?void 0:C.browsertab)||void 0===M?void 0:M.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(ke=null===(ue=null===(z=null==gt?void 0:gt.cordova)||void 0===z?void 0:z.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===ke?void 0:ke.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(yt=null===(Ye=null==gt?void 0:gt.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===yt?void 0:yt.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield M._initialize(h);yield z.initialized(),z.resetRedirect(),function Vh(){Fs.clear()}(),yield M._originValidation(h);const ue=function id(m,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:ig(),postBody:null,tenantId:m.tenantId,error:fe(m,"no-auth-event")}}(h,v,C);yield function sd(m,h){return sg()._set(bu(m),h)}(h,ue);const ke=yield function Jp(m,h,f){return Du.apply(this,arguments)}(h,ue,f),Ye=yield function tg(m){const{cordova:h}=Us();return new Promise(f=>{h.plugins.browsertab.isAvailable(v=>{let C=null;v?h.plugins.browsertab.openUrl(m):C=h.InAppBrowser.open(m,function ui(m=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(C)})})}(ke);return function ng(m,h,f){return rd.apply(this,arguments)}(h,z,Ye)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function eg(m){return nd.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:v,handleOpenURL:C,BuildInfo:M}=Us(),z=setTimeout((0,_.Z)(function*(){yield Zh(h),f.onEvent(Ko())}),500),ue=function(){var yt=(0,_.Z)(function*(gt){clearTimeout(z);const ir=yield Zh(h);let Ci=null;ir&&(null==gt?void 0:gt.url)&&(Ci=function rg(m,h){var f,v;const C=function Vs(m){const h=rt(m),f=h.link?decodeURIComponent(h.link):void 0,v=rt(f).link,C=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return rt(C).link||C||v||f||m}(h);if(C.includes("/__/auth/callback")){const M=rt(C),z=M.firebaseError?function Ey(m){try{return JSON.parse(m)}catch(h){return null}}(decodeURIComponent(M.firebaseError)):null,ue=null===(v=null===(f=null==z?void 0:z.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],ke=ue?fe(ue):null;return ke?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:C,postBody:null}}return null}(ir,gt.url)),f.onEvent(Ci||Ko())});return function(ir){return yt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ue);const ke=C,Ye=`${M.packageName.toLowerCase()}://`;Us().handleOpenURL=function(){var yt=(0,_.Z)(function*(gt){if(gt.toLowerCase().startsWith(Ye)&&ue({url:gt}),"function"==typeof ke)try{ke(gt)}catch(ir){console.error(ir)}});return function(gt){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=rr,this._completeRedirectFn=ut,this._overrideRedirectResult=_u}_initialize(h){var f=this;return(0,_.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,v,C){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,f,v,C)})()}_openRedirect(h,f,v,C){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,f,v,C)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Fn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,_.Z)(function*(){if(h.underlyingResolver)return;const f=yield function Iy(){return Cu.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function ug(m){return m.unwrap()}function as(m){return ld(m)}function ld(m){const{_tokenResponse:h}=m instanceof P.ZR?m.customData:m;if(!h)return null;if(!(m instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Bo.credentialFromResult(m);const f=h.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=Pl;break;case"facebook.com":v=Ao;break;case"github.com":v=Mh;break;case"twitter.com":v=kl;break;default:const{oauthIdToken:C,oauthAccessToken:M,oauthTokenSecret:z,pendingToken:ue,nonce:ke}=h;return M||z||C||ue?ue?f.startsWith("saml.")?Ys._create(f,ue):Xi._fromParams({providerId:f,signInMethod:f,pendingToken:ue,idToken:C,accessToken:M}):new Li(f).credential({idToken:C,accessToken:M,rawNonce:ke}):null}return m instanceof P.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function ii(m,h){return h.catch(f=>{throw f instanceof P.ZR&&function Pa(m,h){var f;const v=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null==h?void 0:h.code))h.resolver=new hg(m,function nr(m,h){var f;const v=(0,P.m9)(m),C=h;return H(h.customData.operationType,v,"argument-error"),H(null===(f=C.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),no._fromError(v,C)}(m,h));else if(v){const C=ld(h),M=h;C&&(M.credential=C,M.tenantId=v.tenantId||void 0,M.email=v.email||void 0,M.phoneNumber=v.phoneNumber||void 0)}}(m,f),f}).then(f=>{const C=f.user;return{operationType:f.operationType,credential:as(f),additionalUserInfo:fr(f),user:po.getOrCreate(C)}})}function lg(m,h){return dg.apply(this,arguments)}function dg(){return(dg=(0,_.Z)(function*(m,h){const f=yield h;return{verificationId:f.verificationId,confirm:v=>ii(m,f.confirm(v))}})).apply(this,arguments)}class hg{constructor(h,f){this.resolver=f,this.auth=function cg(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ii(ug(this.auth),this.resolver.resolveSignIn(h))}}class po{constructor(h){this._delegate=h,this.multiFactor=function Rp(m){const h=(0,P.m9)(m);return lu.has(h)||lu.set(h,ko._fromUser(h)),lu.get(h)}(h)}static getOrCreate(h){return po.USER_MAP.has(h)||po.USER_MAP.set(h,new po(h)),po.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,_.Z)(function*(){return ii(f.auth,wr(f._delegate,h))})()}linkWithPhoneNumber(h,f){var v=this;return(0,_.Z)(function*(){return lg(v.auth,function uo(m,h,f){return Kl.apply(this,arguments)}(v._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,_.Z)(function*(){return ii(f.auth,function mu(m,h,f){return yu.apply(this,arguments)}(f._delegate,h,fo))})()}linkWithRedirect(h){var f=this;return(0,_.Z)(function*(){return yield ud(dt(f.auth)),function W(m,h,f){return function X(m,h,f){return Se.apply(this,arguments)}(m,h,f)}(f._delegate,h,fo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,_.Z)(function*(){return ii(f.auth,Ji(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return lg(this.auth,function Lh(m,h,f){return Br.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return ii(this.auth,function Np(m,h,f){return Yl.apply(this,arguments)}(this._delegate,h,fo))}reauthenticateWithRedirect(h){var f=this;return(0,_.Z)(function*(){return yield ud(dt(f.auth)),function T(m,h,f){return function x(m,h,f){return F.apply(this,arguments)}(m,h,f)}(f._delegate,h,fo)})()}sendEmailVerification(h){return function Ii(m,h){return lc.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,_.Z)(function*(){return yield function Oh(m,h){return mn.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function Ul(m,h){return uu((0,P.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function Vl(m,h){return uu((0,P.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function _c(m,h){return co.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ou(m,h){return au.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function iu(m,h,f){return su.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}po.USER_MAP=new WeakMap;const Su=H;let Au=(()=>{class m{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=f.options;Su(C,"invalid-api-key",{appName:f.name}),Su(C,"invalid-api-key",{appName:f.name});const M="undefined"!=typeof window?fo:void 0;this._delegate=v.initialize({options:{persistence:Oc(C,f.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?po.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function Lr(m,h,f){const v=dt(m);H(v._canInitEmulator,v,"emulator-config-failed"),H(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const C=!!(null==f?void 0:f.disableWarnings),M=Oi(h),{host:z,port:ue}=function Wn(m){const h=Oi(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(v);if(C){const M=C[1];return{host:M,port:Ni(v.substr(M.length+1))}}{const[M,z]=v.split(":");return{host:M,port:Ni(z)}}}(h);v.config.emulator={url:`${M}//${z}${null===ue?"":`:${ue}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:ue,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function vn(){function m(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,v)}applyActionCode(f){return function No(m,h){return Te.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Kt(this._delegate,f)}confirmPasswordReset(f,v){return function tu(m,h,f){return oc.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var C=this;return(0,_.Z)(function*(){return ii(C._delegate,function Js(m,h,f){return di.apply(this,arguments)}(C._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function ru(m,h){return Cs.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Ll(m,h){const f=Xa.parseLink(h);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,_.Z)(function*(){Su(Tu(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function et(m,h){return at.apply(this,arguments)}(f._delegate,fo);return v?ii(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Zo(m,h){dt(m)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,v,C){const{next:M,error:z,complete:ue}=fg(f,v,C);return this._delegate.onAuthStateChanged(M,z,ue)}onIdTokenChanged(f,v,C){const{next:M,error:z,complete:ue}=fg(f,v,C);return this._delegate.onIdTokenChanged(M,z,ue)}sendSignInLinkToEmail(f,v){return function uc(m,h,f){return cc.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function sc(m,h,f){return eu.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,_.Z)(function*(){let C;switch(function ad(m,h){os(Object.values(ri).includes(h),m,"invalid-persistence-type"),(0,P.b$)()?os(h!==ri.SESSION,m,"unsupported-persistence-type"):(0,P.UG)()?os(h===ri.NONE,m,"unsupported-persistence-type"):Qo()?os(h===ri.NONE||h===ri.LOCAL&&(0,P.hl)(),m,"unsupported-persistence-type"):os(h===ri.NONE||Mc(),m,"unsupported-persistence-type")}(v._delegate,f),f){case ri.SESSION:C=rr;break;case ri.LOCAL:C=(yield Ke(Lo)._isAvailable())?Lo:dn;break;case ri.NONE:C=U;break;default:return Ie("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ii(this._delegate,function Fl(m){return tc.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ii(this._delegate,An(this._delegate,f))}signInWithCustomToken(f){return ii(this._delegate,function Oo(m,h){return Et.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return ii(this._delegate,function ac(m,h,f){return An((0,P.m9)(m),Nl.credential(h,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return ii(this._delegate,function Sp(m,h,f){return es.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return lg(this._delegate,function jn(m,h,f){return ss.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,_.Z)(function*(){return Su(Tu(),v._delegate,"operation-not-supported-in-this-environment"),ii(v._delegate,function Zl(m,h,f){return $o.apply(this,arguments)}(v._delegate,f,fo))})()}signInWithRedirect(f){var v=this;return(0,_.Z)(function*(){return Su(Tu(),v._delegate,"operation-not-supported-in-this-environment"),yield ud(v._delegate),function Bh(m,h,f){return function zo(m,h,f){return D.apply(this,arguments)}(m,h,f)}(v._delegate,f,fo)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Dn(m,h){return nu.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=ri,m})();function fg(m,h,f){let v=m;"function"!=typeof m&&({next:v,error:h,complete:f}=m);const C=v;return{next:z=>C(z&&po.getOrCreate(z)),error:h,complete:f}}function Oc(m,h){const f=function Na(m,h){const f=Qh();if(!f)return[];const v=L(Ti,m,h);switch(f.getItem(v)){case ri.NONE:return[U];case ri.LOCAL:return[Lo,rr];case ri.SESSION:return[rr];default:return[]}}(m,h);if("undefined"!=typeof self&&!f.includes(Lo)&&f.push(Lo),"undefined"!=typeof window)for(const v of[dn,rr])f.includes(v)||f.push(v);return f.includes(U)||f.push(U),f}class Jh{constructor(){this.providerId="phone",this._delegate=new Bo(ug(Y.Z.auth()))}static credential(h,f){return Bo.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}Jh.PHONE_SIGN_IN_METHOD=Bo.PHONE_SIGN_IN_METHOD,Jh.PROVIDER_ID=Bo.PROVIDER_ID;const b0=H;class dd{constructor(h,f,v=Y.Z.app()){var C;b0(null===(C=v.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Op(h,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ef(m){m.INTERNAL.registerComponent(new se.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Au(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Nl,FacebookAuthProvider:Ao,GithubAuthProvider:Mh,GoogleAuthProvider:Pl,OAuthProvider:Li,SAMLAuthProvider:Ur,PhoneAuthProvider:Jh,PhoneMultiFactorGenerator:qp,RecaptchaVerifier:dd,TwitterAuthProvider:kl,Auth:Au,AuthCredential:wi,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.3.5")}(Y.Z)},8766:(Je,ye,N)=>{N.d(ye,{Lj:()=>Ie,X3:()=>Xe});var _=N(5861);let P,ne;const se=new WeakMap,ie=new WeakMap,ae=new WeakMap,V=new WeakMap,j=new WeakMap;let be={get(H,ge,Fe){if(H instanceof IDBTransaction){if("done"===ge)return ie.get(H);if("objectStoreNames"===ge)return H.objectStoreNames||ae.get(H);if("store"===ge)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return ve(H[ge])},set:(H,ge,Fe)=>(H[ge]=Fe,!0),has:(H,ge)=>H instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in H};function de(H){return"function"==typeof H?function Be(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...ge){return H.apply(He(this),ge),ve(se.get(this))}:function(...ge){return ve(H.apply(He(this),ge))}:function(ge,...Fe){const vt=H.call(He(this),ge,...Fe);return ae.set(vt,ge.sort?ge.sort():[ge]),ve(vt)}}(H):(H instanceof IDBTransaction&&function je(H){if(ie.has(H))return;const ge=new Promise((Fe,vt)=>{const Ke=()=>{H.removeEventListener("complete",Lt),H.removeEventListener("error",G),H.removeEventListener("abort",G)},Lt=()=>{Fe(),Ke()},G=()=>{vt(H.error||new DOMException("AbortError","AbortError")),Ke()};H.addEventListener("complete",Lt),H.addEventListener("error",G),H.addEventListener("abort",G)});ie.set(H,ge)}(H),((H,ge)=>ge.some(Fe=>H instanceof Fe))(H,function ee(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,be):H)}function ve(H){if(H instanceof IDBRequest)return function Q(H){const ge=new Promise((Fe,vt)=>{const Ke=()=>{H.removeEventListener("success",Lt),H.removeEventListener("error",G)},Lt=()=>{Fe(ve(H.result)),Ke()},G=()=>{vt(H.error),Ke()};H.addEventListener("success",Lt),H.addEventListener("error",G)});return ge.then(Fe=>{Fe instanceof IDBCursor&&se.set(Fe,H)}).catch(()=>{}),j.set(ge,H),ge}(H);if(V.has(H))return V.get(H);const ge=de(H);return ge!==H&&(V.set(H,ge),j.set(ge,H)),ge}const He=H=>j.get(H);function Xe(H,ge,{blocked:Fe,upgrade:vt,blocking:Ke,terminated:Lt}={}){const G=indexedDB.open(H,ge),he=ve(G);return vt&&G.addEventListener("upgradeneeded",me=>{vt(ve(G.result),me.oldVersion,me.newVersion,ve(G.transaction))}),Fe&&G.addEventListener("blocked",()=>Fe()),he.then(me=>{Lt&&me.addEventListener("close",()=>Lt()),Ke&&me.addEventListener("versionchange",()=>Ke())}).catch(()=>{}),he}function Ie(H,{blocked:ge}={}){const Fe=indexedDB.deleteDatabase(H);return ge&&Fe.addEventListener("blocked",()=>ge()),ve(Fe).then(()=>{})}const fe=["get","getKey","getAll","getAllKeys","count"],_e=["put","add","delete","clear"],Ue=new Map;function Le(H,ge){if(!(H instanceof IDBDatabase)||ge in H||"string"!=typeof ge)return;if(Ue.get(ge))return Ue.get(ge);const Fe=ge.replace(/FromIndex$/,""),vt=ge!==Fe,Ke=_e.includes(Fe);if(!(Fe in(vt?IDBIndex:IDBObjectStore).prototype)||!Ke&&!fe.includes(Fe))return;const Lt=function(){var G=(0,_.Z)(function*(he,...me){const xe=this.transaction(he,Ke?"readwrite":"readonly");let Re=xe.store;return vt&&(Re=Re.index(me.shift())),(yield Promise.all([Re[Fe](...me),Ke&&xe.done]))[0]});return function(me){return G.apply(this,arguments)}}();return Ue.set(ge,Lt),Lt}!function Ne(H){be=H(be)}(H=>GS(HS({},H),{get:(ge,Fe,vt)=>Le(ge,Fe)||H.get(ge,Fe,vt),has:(ge,Fe)=>!!Le(ge,Fe)||H.has(ge,Fe)}))},5861:(Je,ye,N)=>{function _(P,ne,ee,oe,se,ie,ae){try{var V=P[ie](ae),j=V.value}catch(Q){return void ee(Q)}V.done?ne(j):Promise.resolve(j).then(oe,se)}function Y(P){return function(){var ne=this,ee=arguments;return new Promise(function(oe,se){var ie=P.apply(ne,ee);function ae(j){_(ie,oe,se,ae,V,"next",j)}function V(j){_(ie,oe,se,ae,V,"throw",j)}ae(void 0)})}}N.d(ye,{Z:()=>Y})}},Je=>{Je(Je.s=7658)}]);